<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
  <title>American Sickness | Justin Chill</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description"
    content="How did healthcare, the caring endeavor, become healthcare, the highly profitable industry?">
  <meta name="author" content="Justin Chill">
  <!-- OpenGraph tags -->
  <meta name="robots" content="all">
  <meta content="en_US" property="og:locale">
  <meta content="JustinChill" property="og:site_name">
  <meta content="article" property="og:type">
  <meta content="https://justinchill.com/american-sickness.html" property="og:url">
  <meta content="American Sickness | Justin Chill" property="og:title">
  <meta content="How did healthcare, the caring endeavor, become healthcare, the highly profitable industry?"
    property="og:description">
  <meta content="https://www.justinchill.com/blog.html" property="og:see_also">
  <link rel="canonical" href="https://www.justinchill.com/american-sickness.html">

  <meta content="https://www.justinchill.com/imgs/cover/americansickness_cover.webp" property="og:image">
  <meta content="https://www.justinchill.com/imgs/cover/americansickness_cover.webp" property="twitter:image">
  <meta content="A chart showing healthcare spending per capita vs life expectancy for OECD countries."
    property="og:image:alt">

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="American Sickness | Justin Chill">
  <meta name="twitter:description"
    content="How did healthcare, the caring endeavor, become healthcare, the highly profitable industry?">

  <link type="text/plain" href="humans.txt" rel="author">
  <link rel="preload" href="style.css" as="style" />
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="/favicon.ico">
  <meta name="theme-color" content="#4C63B6">

  <script type="module">
    document.documentElement.classList.remove('no-js');
    document.documentElement.classList.add('js');
  </script>

  <style type="text/css">
    #ambulance-chart {
      flex-direction: column;
    }

    #ambulance-chart h2 {
      font-size: calc(var(--type-scale-1) + .25vw);
      margin: var(--spacer-2) 0 var(--spacer-1);
    }

    #spending [aria-label="x-axis label"],
    #spending [aria-label="y-axis label"] {
      font-family: "Camphor", Arial, Helvetica, sans-serif;
      font-size: 1.0625rem;
      letter-spacing: -0.03px;
      line-height: calc(1.5em + .2vw);
    }

    @media screen and (max-width: 680px) {

      #spending [aria-label="x-axis label"],
      #spending [aria-label="y-axis label"] {
        font-size: .9rem;
      }
    }

    .infant-mortality-stat {
      text-align: center;
      margin: 3rem auto;
      font-family: var(--font-main);
      max-width: 300px;
    }

    .infant-mortality-stat .stat-title {
      font-weight: 700;
      font-size: 1.35rem;
      line-height: 1.1;
      color: #222;
      margin-bottom: 0.5rem;
      display: block;
    }

    .infant-mortality-stat .stat-number-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      line-height: 0.8;
      margin: 1rem 0;
    }

    .infant-mortality-stat .stat-label {
      font-family: "Camphor Light", sans-serif;
      text-transform: uppercase;
      font-size: 1.5rem;
      margin-bottom: 0;
      color: #333;
    }

    .infant-mortality-stat .stat-value {
      font-family: "Camphor Heavy", sans-serif;
      font-size: 9rem;
      letter-spacing: -6px;
      color: #1a1a1a;
      margin-left: -0.5rem;
      /* Optical adjustment */
    }

    .infant-mortality-stat .stat-caption {
      color: var(--red);
      font-family: "Camphor", sans-serif;
      text-transform: uppercase;
      font-size: 1.1rem;
      line-height: 1.2;
      margin-top: 0.5rem;
      display: block;
    }

    .drug-prices {
      font-family: "Camphor", sans-serif;
      max-width: 350px;
      color: #333;
      display: inline-flex;
      flex-direction: column;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2rem;
    }

    .drug-prices h3.graphic-title {
      font-size: 1.25rem;
      line-height: 1.1;
      margin-bottom: 1.5rem;
      font-weight: 700;
      color: #000;
      width: 100%;
      text-align: center;
    }

    .drug-prices .subtitle {
      color: #FF5252;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 1rem;
      margin-bottom: 0.5rem;
      letter-spacing: 0.5px;
      width: 100%;
      text-align: center;
    }

    .drug-prices p {
      margin: 0.25rem 0;
      line-height: 1.3;
      font-size: 1.0625rem;
    }

    .drug-group {
      margin-bottom: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 0 1 200px;
    }

    .drug-group strong {
      font-weight: 700;
      color: #000;
    }

    .pill-container {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 0.75rem 0;
      justify-content: center;
    }

    .pill {
      width: 60px;
      height: auto;
      display: block;
      /* mix-blend-mode: multiply;  Assuming white background on image matches page */
    }

    /* Force 4 per row for the last group to match reference */
    .drug-group:last-child .pill-container {
      max-width: 280px;
    }

    .drug-prices .separator {
      display: none;
    }

    @media screen and (max-width: 680px) {
      .drug-prices {
        flex-direction: column;
        align-items: center;
        gap: 0;
      }

      .drug-prices .separator {
        display: block;
        border: 0;
        border-top: 1px dashed #ccc;
        margin: 1.5rem 0;
        width: 50%;
      }

      .drug-group {
        margin-bottom: 1.5rem;
      }
    }

    /* Side-by-Side Layout Styles */
    .side-by-side-wrapper {
      display: flex;
      flex-wrap: wrap;
      gap: 3rem;
      align-items: flex-start;
    }

    .side-by-side-text {
      flex: 1;
      min-width: 0;
      /* Allow text to shrink if needed */
    }

    .side-by-side-text p {
      margin-top: var(--spacer-2);
      margin-bottom: var(--spacer-1);
      line-height: calc(1.5em + .2vw);
      display: block;
    }

    .drug-prices {
      font-family: "Camphor", sans-serif;
      max-width: none;
      width: 100%;
      margin: 0;
      /* Remove auto margins as flex handles spacing */
      color: #333;
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      justify-content: flex-start;
      gap: 0;
      flex: 0 0 45%;
      /* Approx half width minus gap */
    }

    .drug-prices h3.graphic-title,
    .drug-prices .subtitle {
      text-align: left;
      /* Keep left aligned for column view */
      width: auto;
    }

    .drug-group {
      margin-bottom: 1.5rem;
      flex-direction: column;
      flex: unset;
      /* Remove flex sizing from previous row layout */
      align-items: flex-start;
      /* Align left */
    }

    .pill-container {
      justify-content: flex-start;
      /* Align left */
    }

    .drug-prices .separator {
      display: block;
      /* Visible again */
      border: 0;
      border-top: 1px dashed #ccc;
      margin: 1.5rem 0;
      width: 50%;
    }

    @media screen and (max-width: 850px) {
      .side-by-side-wrapper {
        flex-direction: column;
      }

      .drug-prices {
        max-width: 100%;
        flex: 1 1 auto;
        align-items: center;
        /* Center align when stacked on mobile */
      }

      .drug-prices h3.graphic-title,
      .drug-prices .subtitle,
      .drug-group,
      .pill-container {
        text-align: center;
        align-items: center;
        justify-content: center;
      }
    }
  </style>
</head>

<body>
  <nav class="nav" role="navigation">
    <div class="nav__list">
      <a href="index.html" class="nav__item" aria-label="Homepage">Home</a>
      <a href="blog.html" class="nav__item" aria-label="Blog section">Blog</a>
      <a href="now.html" class="nav__item" aria-label="Now page">Now</a>
    </div>
    <div class="nav__list">
      <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
      <a href="#" class="nav__item js-email-link">Email</a>
    </div>
  </nav>

  <main role="main">
    <article>
      <div class="article-hero">
        <h2 class="article-category">Live Free & Die</h2>
        <h1 class="article-title">American Sickness</h1>
        <h2 class="article-subtitle"></h2>
      </div>

      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h2>Under the microscope</h2>
      <h4>Life expectancy vs. health expenditure, 1970 to 2022</h4>
      <figure id="spending"
        aria-label="A line chart showing Life expectancy vs. health expenditure, 2022 data, for world countries.">
        <figcaption class="right">Data: <a
            href="https://ourworldindata.org/grapher/life-expectancy-vs-health-expenditure">UN, World Population
            Prospects (2024); OECD Health Expenditure Database</a></figcaption>
      </figure>

      <p>The American health-care system is an anomaly among rich nations. It is a labyrinthine hybrid of public and
        private ownership, characterized by its staggering expense and its lack of universal coverage. Unlike its
        European counterparts, the United States has eschewed a single-payer model in favour of a market-based approach,
        where access is inextricably linked to employment and income.</p>
      <p>The result is a system of paradoxes: it produces
        the world’s most advanced medical technology yet leaves millions vulnerable to financial ruin. While private
        enterprise drives innovation, the absence of a unified safety net creates profound disparities in care.</p>
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>Health spending has maintained a steep climb</h3>
      <figure id="growth-chart" aria-label="Health spending has maintained a steep climb"></figure>

      <p>Contrary to the myth of unbridled American capitalism, the state is a massive payer in the health economy. The
        public sector is anchored by two leviathans: Medicare and Medicaid. Medicare, a federal program funded by
        payroll taxes, provides coverage for those aged 65 and older, as well as younger people with specific
        disabilities. It acts as a universal entitlements program for the elderly.</p>
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h2>Cost control</h2>
      <figure id="noinsurance"
        aria-label="A line chart showing the percent of population without healthcare in Texas, Florida, California, and New York.">
        <figcaption class="right">Data: <a
            href="https://datacommons.org/tools/statvar#sv=Count_Person_NoHealthInsurance">Data Commons</a></figcaption>
      </figure>
      <p>Medicaid, by contrast, is a means-tested safety net for the poor, jointly funded by federal and state
        governments but administered locally. This results in a patchwork of eligibility; a poor adult may qualify in
        California but be rejected in Texas. Together, these programs stabilize the market and manage chronic
        conditions for the most vulnerable, yet they remain under constant budgetary pressure.</p>

      <blockquote>
        <p>“It’s not that we’re getting more; it’s that we’re paying much more”</p>
        <cite>&mdash; Gerard F. Anderson, PhD</cite>
      </blockquote>
      <p><strong>The Structure of Private Provision</strong>
        For the working-age population, the private sector reigns supreme. The majority of Americans obtain coverage
        through employer-sponsored plans—a quirk of history cemented by tax incentives. This market is dominated by a
        complex alphabet soup of plans. Health Maintenance Organisations (HMOs) act as gatekeepers, requiring referrals
        to control costs. Preferred Provider Organisations (PPOs) offer greater flexibility at a higher price, while
        Exclusive Provider Organisations (EPOs) occupy the middle ground. Pharmacy Benefit Managers (PBMs) seem to
        demand
        all the money.</p>
      <p>In this system, insurers and providers engage in a perpetual tug-of-war over reimbursement rates. This dynamic
        drives the pricing of services and determines the availability of care, often leaving the patient to navigate a
        bewildering array of networks and deductibles<a href="#jhph" aria-describedby="footnote-label"
          id="jhph-ref"></a>.</p>
      <h3 id="part-2-money-and-oversight">Part 2: Money and Oversight</h3>
      <div class="side-by-side-wrapper">
        <figure class="drug-prices" aria-label="Infographic comparing US drug prices to other countries">
          <h3 class="graphic-title">Average drug prices<br>are sky-high</h3>

          <div class="subtitle">THE PRICE OF ...</div>

          <div class="drug-group">
            <p>One Lipitor pill in the U.S.</p>
            <div class="pill-container" role="img" aria-label="3 pills">
              <img src="imgs/pill.jpg" alt="" class="pill">
              <img src="imgs/pill.jpg" alt="" class="pill">
              <img src="imgs/pill.jpg" alt="" class="pill">
            </div>
            <p>is the same as that of three<br>in <strong>Argentina</strong></p>
          </div>

          <hr class="separator">

          <div class="drug-group">
            <p>One Plavix pill in the U.S.</p>
            <div class="pill-container" role="img" aria-label="4 pills">
              <img src="imgs/pill.jpg" alt="" class="pill">
              <img src="imgs/pill.jpg" alt="" class="pill">
              <img src="imgs/pill.jpg" alt="" class="pill">
              <img src="imgs/pill.jpg" alt="" class="pill">
            </div>
            <p>is the same as that of four<br>in <strong>Spain</strong></p>
          </div>

          <hr class="separator">

          <div class="drug-group">
            <p>One Nexium pill in the U.S.</p>
            <div class="pill-container" role="img" aria-label="8 pills">
              <img src="imgs/pill.jpg" alt="" class="pill">
              <img src="imgs/pill.jpg" alt="" class="pill">
              <img src="imgs/pill.jpg" alt="" class="pill">
              <img src="imgs/pill.jpg" alt="" class="pill">
              <img src="imgs/pill.jpg" alt="" class="pill">
              <img src="imgs/pill.jpg" alt="" class="pill">
              <img src="imgs/pill.jpg" alt="" class="pill">
              <img src="imgs/pill.jpg" alt="" class="pill">
            </div>
            <p>is the same as that of eight<br>in <strong>France</strong></p>
          </div>
        </figure>
        <div class="side-by-side-text">
          <p><strong>Funding Sources</strong>
            Financing American health care is a multifaceted affair, drawing from a blend of taxes, premiums, and
            out-of-pocket spending. Taxation provides the bedrock, funding Medicare and Medicaid. Private premiums, paid
            by
            employers and employees, sustain the commercial market—a burden that has grown heavier despite the subsidies
            introduced by the Affordable Care Act (<small>ACA</small>).</p>

          <p>Perhaps most punitive are out-of-pocket payments. Deductibles and co-payments have risen sharply, meaning
            that
            even the insured often hesitate to seek care for fear of the bill. This reliance on direct consumer payment
            raises uneasy questions about the trade-off between financial sustainability and equitable access.</p>
        </div>
      </div>
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>23% of Americans have opted out of an ambulance ride due to the potential cost</h3>
      <figure id="ambulance-chart"
        aria-label="Stacked bar chart showing ambulance opt-out rates by demographic. 23% of US adults said Yes.">
      </figure>
      <figcaption class="right">Data: <a
          href="https://today.yougov.com/health/articles/49738-one-quarter-americans-didnt-call-ambulance-medical-emergency-costs-poll">YouGov</a>
      </figcaption>
      <p><strong>Government Oversight</strong>
        While the market drives delivery, Washington casts a long regulatory shadow. The Food and Drug Administration
        (<small>FDA</small>) serves as the gatekeeper, rigorously testing pharmaceuticals and devices. Its stamp of
        approval is the
        gold standard for safety and efficacy, balancing consumer protection with the industry&#39;s hunger for
        innovation.</p>
      <p>Meanwhile, the Centers for Medicare &amp; Medicaid Services (<small>CMS</small>) exerts enormous soft power. By
        setting reimbursement standards for public programs, the <small>CMS</small> effectively sets the price floor for
        the entire industry. State regulators add another layer of oversight, licensing providers and enforcing local
        codes. It is a federalist approach to regulation, requiring intricate coordination to maintain standards across
        fifty states.</p>
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <figure id="slope-chart" aria-label="Annual health care spending vs Life expectancy"></figure>

      <!-- <h3 id="part-3-challenges-trends-and-the-future">Part 3: Challenges, Trends, and the Future</h3> -->
      <p><strong>A System Under Strain</strong>
        The American system is beset by a chronic ailment: cost disease. Spending has consistently outpaced inflation,
        <mark>consuming nearly 18% of GDP</mark>, yet health outcomes often lag behind other OECD nations. This economic
        burden falls heavily on households and businesses alike.
      </p>
      <p>Inequality remains the system’s most glaring failure. Access to care is dictated by geography, race, and class.
        Rural hospitals are shuttering, creating medical deserts, while minority communities face disproportionate
        barriers to high-quality treatment. Despite the presence of world-class institutions, the uneven quality of
        care, marred by medical errors and fragmented communication, remains a persistent drag on national well-being.
      </p>

      <p><strong>Recent Trends</strong>
        The Covid-19 pandemic acted as an accelerant for structural change. The most significant shift has been the
        mainstreaming of telemedicine. Digital health platforms, once a fringe convenience, became a lifeline during
        lockdowns and have since proved vital for reaching rural populations. The pandemic also laid bare the fragility
        of public health infrastructure, prompting a renewed focus on preparedness and equity.</p>
      <p>Simultaneously, there is a slow but steady pivot toward &quot;value-based care.&quot; This model seeks to
        reward providers for patient outcomes rather than the volume of services rendered. It is an attempt to align
        incentives, encouraging preventative medicine over expensive interventions.</p>
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h2>The aging U.S. population will require more care</h2>
      <figure id="aging-chart" aria-label="The aging U.S. population will require more care"></figure>

      <p><strong>Future Directions and Conclusion</strong>
        The trajectory of American health care points toward a collision of technology and reform. Artificial
        intelligence promises to revolutionize diagnostics, while the expansion of telehealth could democratize access
        to specialists. However, technology alone cannot cure structural flaws. Future debates will likely focus on
        regulatory frameworks to curb costs and the potential expansion of public options to cover the uninsured.</p>
      <figure class="full-bleed">
        <figcaption class="right"><em>Why Health Care is So Expensive</em> by <a
            href="https://www.informationisbeautifulawards.com/showcase/349-why-health-care-is-so-expensive">Heather
            Jones</a></figcaption>
        <img class="full-bleed"
          src="https://iibawards-prod.s3.amazonaws.com/projects/images/000/000/349/large.jpg?1403856485"
          alt="Why is healthcare so expensive infographic by Heather Jones." />
      </figure>
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h2>Live free and die</h2>
      <h3>Life expectancy in the US by income</h3>
      <figure id="income"
        aria-label="Scatter plot showing life expectancy in the US by income level, broken down by ethnicity. Generally, higher income correlates with longer life expectancy, except for Hispanic-Americans where income has less effect.">
      </figure>
      <p>In general, higher income leads to longer life expectancy, but income has little effect for life expectancy of
        Hispanic-Americans.</p>
      <h3>Does this Higher Spending Lead to Better Outcomes?</h3>
      <p>Higher healthcare spending can be beneficial if it results in better health outcomes. However, despite higher
        healthcare spending, America’s health outcomes are not any better than those in other developed countries. The
        United States actually performs worse in some common health metrics like life expectancy, infant mortality,
        unmanaged diabetes, and safety during childbirth<a href="#pete" aria-describedby="footnote-label"
          id="pete-ref"></a>.</p>
      <p>A healthcare system with high costs and poor outcomes undermines our economy and threatens our long-term fiscal
        and economic well-being. Fortunately, there are opportunities to transform the healthcare system into one that
        produces higher quality care at a lower cost. For more information on potential reforms, check out the <a
          href="https://www.pgpf.org/finding-solutions/healthcare" target="_blank" rel="noopener">Peterson Center on
          Healthcare</a> recommendations.</p>

      <p>In conclusion, the United States possesses a health-care system of unique complexity. It is a mesh of public
        safety nets and private enterprise, producing both miracles and misery. As the nation grapples with an aging
        population and spiraling costs, the challenge will be to harness the efficiency of the market while ensuring
        that the fruits of medical progress are not reserved for the few. The path forward requires not just innovation,
        but a fundamental reckoning with how care is financed and delivered<a href="#generis"
          aria-describedby="footnote-label" id="generis-ref"></a>.</p>

      <p>In 2022, the United States spent an estimated $12,742 per person on healthcare — the highest healthcare costs
        per capita across similar countries. For comparison, Switzerland was the second highest-spending country with
        $9,044 in healthcare costs per capita, while the average for wealthy OECD countries, excluding the United
        States, was only $6,850 per person. And it was more than <strong>double</strong> the $4,559 the U.S. spent per
        capita on health care in 2000. Such comparisons indicate that the United States spends a disproportionate amount
        on healthcare. </p>


    </article>
  </main>
  <footer>
    <h2 id="footnote-label">Footnotes</h2>
    <ol>
      <li id="jhph"><strong>Johns Hopkins Bloomberg School of Public Health</strong>, “<em><a
            href="https://publichealth.jhu.edu/2019/us-health-care-spending-highest-among-developed-countries">U.S.
            Health Care Spending Highest Among Developed Countries</a></em>"<a href="#jhph-ref"
          aria-label="Back to content">↩</a></li>
      <li id="pete"><strong>Peter G. Peterson Foundation</strong>, “<em><a
            href="https://www.pgpf.org/article/how-does-the-us-healthcare-system-compare-to-other-countries/">How Does
            the U.S. Healthcare System Compare to Other Countries?</a></em>"<a href="#pete-ref"
          aria-label="Back to content">↩</a></li>
      <li id="generis"><strong>Generis Global Legal Services</strong>, “<em><a
            href="https://generisonline.com/an-overview-of-the-healthcare-system-in-the-united-states-of-america/">An
            Overview of the Healthcare System in the United States of America</a></em>"<a href="#generis-ref"
          aria-label="Back to content">↩</a></li>
    </ol>
    <div>
      <p>Justin Chill &copy; 2026</p>
      <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img src="imgs/github.svg"
            alt="GitHub logo" class="icon">Source code</a></span>
    </div>
  </footer>
  <script type="text/javascript" src="js/occlusionY.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/d3"></script>
  <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>

  <script type="text/javascript">
    var size = width > 450 ? 16 : 12;
    var element = d3.select('figure:not(.mid-size)').node();
    var width = element.getBoundingClientRect().width;

    var stateInsurance = d3.csvParse(`entity__dcid,entity__name,entity__isoCode,variable__dcid,variable__value,variable__date,variable__unit,variable__unitDisplayName,variable__name,perCapita__value,perCapita__date,perCapita__populationVariable,perCapita__populationValue
    geoId/06,California,US-CA,Count_Person_NoHealthInsurance,4041396,2017,,,Population Without Health Insurance,0.10371810554101452,2017,Count_Person,38965193
    geoId/06,California,US-CA,Count_Person_NoHealthInsurance,3280167,2018,,,Population Without Health Insurance,0.0841819774894994,2018,Count_Person,38965193
    geoId/06,California,US-CA,Count_Person_NoHealthInsurance,2915070,2019,,,Population Without Health Insurance,0.0748121535032561,2019,Count_Person,38965193
    geoId/06,California,US-CA,Count_Person_NoHealthInsurance,2806173,2020,,,Population Without Health Insurance,0.07201742847776989,2020,Count_Person,38965193
    geoId/06,California,US-CA,Count_Person_NoHealthInsurance,2800277,2021,,,Population Without Health Insurance,0.07186611394430922,2021,Count_Person,38965193
    geoId/06,California,US-CA,Count_Person_NoHealthInsurance,2752067,2022,,,Population Without Health Insurance,0.07062885586117847,2022,Count_Person,38965193
    geoId/12,Florida,US-FL,Count_Person_NoHealthInsurance,2982945,2017,,,Population Without Health Insurance,0.13192610445148908,2017,Count_Person,22610726
    geoId/12,Florida,US-FL,Count_Person_NoHealthInsurance,2744513,2018,,,Population Without Health Insurance,0.12138102067133978,2018,Count_Person,22610726
    geoId/12,Florida,US-FL,Count_Person_NoHealthInsurance,2637268,2019,,,Population Without Health Insurance,0.11663791777406882,2019,Count_Person,22610726
    geoId/12,Florida,US-FL,Count_Person_NoHealthInsurance,2646931,2020,,,Population Without Health Insurance,0.11706528131825578,2020,Count_Person,22610726
    geoId/12,Florida,US-FL,Count_Person_NoHealthInsurance,2657226,2021,,,Population Without Health Insurance,0.11752059619845909,2021,Count_Person,22610726
    geoId/12,Florida,US-FL,Count_Person_NoHealthInsurance,2620725,2022,,,Population Without Health Insurance,0.11590627386312143,2022,Count_Person,22610726
    geoId/36,New York,US-NY,Count_Person_NoHealthInsurance,1481650,2017,,,Population Without Health Insurance,0.07570556678746992,2017,Count_Person,19571216
    geoId/36,New York,US-NY,Count_Person_NoHealthInsurance,1255168,2018,,,Population Without Health Insurance,0.06413336810548716,2018,Count_Person,19571216
    geoId/36,New York,US-NY,Count_Person_NoHealthInsurance,1117159,2019,,,Population Without Health Insurance,0.057081736770980405,2019,Count_Person,19571216
    geoId/36,New York,US-NY,Count_Person_NoHealthInsurance,1037271,2020,,,Population Without Health Insurance,0.052999823822904,2020,Count_Person,19571216
    geoId/36,New York,US-NY,Count_Person_NoHealthInsurance,1059370,2021,,,Population Without Health Insurance,0.054128982072447616,2021,Count_Person,19571216
    geoId/36,New York,US-NY,Count_Person_NoHealthInsurance,1031600,2022,,,Population Without Health Insurance,0.052710061551617435,2022,Count_Person,19571216
    geoId/48,Texas,US-TX,Count_Person_NoHealthInsurance,4916911,2017,,,Population Without Health Insurance,0.1611927509091557,2017,Count_Person,30503301
    geoId/48,Texas,US-TX,Count_Person_NoHealthInsurance,4764897,2018,,,Population Without Health Insurance,0.15620922469997592,2018,Count_Person,30503301
    geoId/48,Texas,US-TX,Count_Person_NoHealthInsurance,4791164,2019,,,Population Without Health Insurance,0.157070344616145,2019,Count_Person,30503301
    geoId/48,Texas,US-TX,Count_Person_NoHealthInsurance,4877069,2020,,,Population Without Health Insurance,0.15988659719156298,2020,Count_Person,30503301
    geoId/48,Texas,US-TX,Count_Person_NoHealthInsurance,4995381,2021,,,Population Without Health Insurance,0.16376525937307573,2021,Count_Person,30503301
    geoId/48,Texas,US-TX,Count_Person_NoHealthInsurance,5056008,2022,,,Population Without Health Insurance,0.16575281475273773,2022,Count_Person,30503301`, d3.autoType);
    var oecd = [{
      "cty": "AUS",
      "life expectancy": 82.7,
      "country": "Australia"
    }, {
      "cty": "AUT",
      "life expectancy": 81.8,
      "country": "Austria"
    }, {
      "cty": "BEL",
      "life expectancy": 81.7,
      "country": "Belgium"
    }, {
      "cty": "CAN",
      "life expectancy": 81.9,
      "country": "Canada"
    }, {
      "cty": "DNK",
      "life expectancy": 81,
      "country": "Denmark"
    }, {
      "cty": "FIN",
      "life expectancy": 81.8,
      "country": "Finland"
    }, {
      "cty": "FRA",
      "life expectancy": 82.8,
      "country": "France"
    }, {
      "cty": "DEU",
      "life expectancy": 81,
      "country": "Germany"
    }, {
      "cty": "IRL",
      "life expectancy": 82.2,
      "country": "Ireland"
    }, {
      "cty": "ITA",
      "life expectancy": 83.4,
      "country": "Italy"
    }, {
      "cty": "JPN",
      "life expectancy": 84.3,
      "country": "Japan"
    }, {
      "cty": "KOR",
      "life expectancy": 82.7,
      "country": "South Korea"
    }, {
      "cty": "NLD",
      "life expectancy": 81.9,
      "country": "Netherlands"
    }, {
      "cty": "NZL",
      "life expectancy": 81.7,
      "country": "New Zealand"
    }, {
      "cty": "NOR",
      "life expectancy": 82.8,
      "country": "Norway"
    }, {
      "cty": "PRT",
      "life expectancy": 81.5,
      "country": "Portugal"
    }, {
      "cty": "ESP",
      "life expectancy": 83.5,
      "country": "Spain"
    }, {
      "cty": "SWE",
      "life expectancy": 82.6,
      "country": "Sweden"
    }, {
      "cty": "CHE",
      "life expectancy": 83.8,
      "country": "Switzerland"
    }, {
      "cty": "GBR",
      "life expectancy": 81.3,
      "country": "United Kingdom"
    }, {
      "cty": "USA",
      "life expectancy": 78.7,
      "country": "USA"
    }, {
      "cty": "ISR",
      "life expectancy": 82.9,
      "country": "Israel"
    }];

    // Use Promises to async request data
    var promises = [d3.csv("data/life-expectancy-vs-health-expenditure@1.csv", d3.autoType), d3.csv("data/american-sickness-states.csv", d3.autoType)];
    myDataPromises = Promise.all(promises);

    // After data is successfully fetched, generate viz
    myDataPromises.then(function (data) {
      var rawdata = data[0];
      var states = data[1];
      var lifeVsMoney = rawdata.filter(d => d.Year >= 1970 && d.LifeExpectancy >= 70 && d.HealthExpenditure > 0);
      var annotatedCountries = ["United States", "Japan", "Spain", "Israel", "Portugal", "Switzerland", "Germany", "Denmark", "United Kingdom", "Norway", "New Zealand", "South Korea", "Australia", "Ireland", "Belgium", "Finland", "Netherlands", "Canada", "Austria", "Chile"];

      function color(country) {
        return country === 'United States' ? 1 : 0
      }
      // Inspired by https://observablehq.com/d/8e1bd1f9a5b1ee81
      var spending = {
        width: width,
        height: width * 1.2,
        aspectRatio: 1,
        style: {
          fontSize: size,
        },
        marginBottom: 50,
        color: {
          legend: false,
          range: ["rgba(226, 226, 226, .85)", "rgb(229, 110, 90)"]
        },
        grid: true,
        x: {
          nice: true,
          tickFormat: "$f",
          tickFormat: d => d % 1000 === 0 ? d3.format("$")(d) : "", // Show numbers divisible by 1000
          label: "Health Expenditure per capita",
          lineWidth: 8,
          labelAnchor: "center",
          tickSize: 0,
          ticks: 4,
          // labelOffset: width > 450 ? 55 : 44,
        },
        y: {
          // nice: true,
          ticks: 6,
          label: "Life Expectancy",
          lineWidth: 8,
          labelAnchor: "center",
          labelOffset: width > 450 ? 50 : 44,
          tickFormat: d => Number.isInteger(d) ? d : "", // Show only whole numbers
          tickSize: 0,
          lineWidth: 8,
          domain: [70, 85]
        },
        marks: [
          Plot.line(lifeVsMoney, {
            x: "HealthExpenditure",
            y: "LifeExpectancy",
            stroke: d => color(d.Entity),
            z: "Entity",
            title: "Entity",
            tip: true,
            markerEnd: "arrow"
          }),
          Plot.text(lifeVsMoney, occlusionY(Plot.selectLast({
            filter: d => annotatedCountries.includes(d.Entity),
            x: "HealthExpenditure",
            y: "LifeExpectancy",
            z: "Entity",
            text: "Entity",
            fill: "black",
            dy: -2,
            dx: 10,
            fontSize: width > 500 ? size - 2 : size,
            textAnchor: "start"
          }))),
        ],
      };

      // Inspired by https://observablehq.com/d/583a958bacfc3f71
      var noinsurance = {
        width: width,
        style: {
          fontSize: size,
        },
        y: {
          grid: true,
          label: null,
          tickFormat: ".0%",
          nice: true,
          ticks: 4,
        },
        x: {
          label: null,
          type: "point",
          tickFormat: "Y",
        },
        marks: [
          Plot.ruleY([0]),
          Plot.line(stateInsurance, {
            x: "variable__date",
            y: "perCapita__value",
            stroke: "entity__name"
          }),
          Plot.text(stateInsurance, Plot.selectLast({
            x: "variable__date",
            y: "perCapita__value",
            z: "entity__name",
            text: "entity__name",
            textAnchor: "start",
            dx: 3
          }))
        ]
      };

      // Inspired by https://observablehq.com/@ciyer/life-expectancy-in-the-us
      var cohort_mean = d3.mean(oecd.filter((d) => d.country !== "USA"), (d) => d["life expectancy"]);

      var income = {
        width: width,
        height: 250,
        marginRight: 0,
        style: {
          fontSize: size,
          paddingTop: ".75rem",
          paddingBottom: ".75rem",
        },
        // marginLeft: 0, 
        grid: true,
        color: {
          domain: ["Above average", "Below average"],
          range: ["steelblue", "gray"],
          legend: true
        },
        fx: {
          label: "Ethnicity",
          labelOffset: 40
        },
        y: {
          nice: true,
          labelAnchor: "center",
          labelOffset: 45,
          frameAnchor: "left",
          label: "Life expectancy (yrs.)",
        },
        x: {
          nice: false,
          labelOffset: 45,
          frameAnchor: "right",
          label: "Income ($)",
          ticks: 2,
        },
        facet: {
          data: states,
          x: "group",
        },
        marks: [
          Plot.frame(),
          Plot.dot(states, {
            x: "income (k$)",
            y: "life expectancy",
            fill: d => d["life expectancy"] >= cohort_mean ? "Above average" : "Below average",
            fillOpacity: 0.5,
            sort: {
              fx: "y",
              reduce: "mean"
            },
            title: (d) =>
              `${d.State}\nPopulation: ${d.population.toLocaleString()} people\nLife Expectancy: ${d["life expectancy"].toFixed(1)} years\nIncome: $${d['income (k$)']}k`
          }),
          Plot.linearRegressionY(states, {
            x: "income (k$)",
            y: "life expectancy",
            stroke: "red",
            ci: 0.95
          })
        ]
      };

      document.getElementById("spending").appendChild(Plot.plot(spending));
      document.getElementById("noinsurance").appendChild(Plot.plot(noinsurance));

      // Ambulance Chart Data
      const dataCitizens = [
        { category: "U.S. adult citizens", response: "Yes", value: 23 },
        { category: "U.S. adult citizens", response: "Not sure", value: 5 },
        { category: "U.S. adult citizens", response: "No", value: 72 },
      ];

      const dataAge = [
        { category: "Under 30", response: "Yes", value: 24 },
        { category: "Under 30", response: "Not sure", value: 5 },
        { category: "Under 30", response: "No", value: 71 },
        { category: "30-44", response: "Yes", value: 21 },
        { category: "30-44", response: "Not sure", value: 9 },
        { category: "30-44", response: "No", value: 70 },
        { category: "45-64", response: "Yes", value: 28 },
        { category: "45-64", response: "Not sure", value: 3 },
        { category: "45-64", response: "No", value: 69 },
        { category: "65+", response: "Yes", value: 16 },
        { category: "65+", response: "Not sure", value: 4 },
        { category: "65+", response: "No", value: 80 },
      ];

      const dataGender = [
        { category: "Men", response: "Yes", value: 24 },
        { category: "Men", response: "Not sure", value: 4 },
        { category: "Men", response: "No", value: 72 },
        { category: "Women", response: "Yes", value: 22 },
        { category: "Women", response: "Not sure", value: 6 },
        { category: "Women", response: "No", value: 72 },
      ];

      const dataRace = [
        { category: "White", response: "Yes", value: 22 },
        { category: "White", response: "Not sure", value: 4 },
        { category: "White", response: "No", value: 74 },
        { category: "Black", response: "Yes", value: 19 },
        { category: "Black", response: "Not sure", value: 7 },
        { category: "Black", response: "No", value: 74 },
        { category: "Hispanic", response: "Yes", value: 29 },
        { category: "Hispanic", response: "Not sure", value: 2 },
        { category: "Hispanic", response: "No", value: 69 },
      ];

      function createAmbulanceChart(data, title, yDomain, showLegend = false) {
        return Plot.plot({
          width: width,
          height: 10 + (yDomain.length * 40),
          marginTop: 0,
          marginRight: 0,
          title: title,
          style: {
            fontSize: "12px",
            fontFamily: "var(--font-main)"
          },
          x: { axis: null },
          y: {
            domain: yDomain,
            label: null,
            tickSize: 0
          },
          color: {
            domain: ["Yes", "Not sure", "No"],
            range: ["#ff3d00", "#cfd8dc", "#9847ff"],
            legend: showLegend ? "swatches" : null
          },
          marks: [
            Plot.barX(data, {
              y: "category",
              x: "value",
              fill: "response",
              sort: { y: null },
            }),
            Plot.text(data, Plot.stackX({
              y: "category",
              x: "value",
              text: "value",
              z: "response",
              fill: "white",
              textAnchor: "middle",
              // inset: 0.5,
              fontSize: 14,
              fontWeight: "bold"
            })),
          ]
        });
      }

      const container = document.getElementById("ambulance-chart");

      // Append chart for Citizens (with legend)
      container.appendChild(createAmbulanceChart(dataCitizens, "U.S. adult citizens", ["U.S. adult citizens"], true));

      // Append chart for Age
      container.appendChild(createAmbulanceChart(dataAge, "Age", ["Under 30", "30-44", "45-64", "65+"]));

      // Append chart for Gender
      container.appendChild(createAmbulanceChart(dataGender, "Gender", ["Men", "Women"]));

      // Append chart for Race
      container.appendChild(createAmbulanceChart(dataRace, "Race", ["White", "Black", "Hispanic"]));


      // --- Chart 1: Slope Chart (Spending vs Life Expectancy) ---
      const slopeData = [
        { country: "U.S.", spending: 8508, life: 79.0, labelPos: 0.25, labelRotation: 28, textDy: -10 },
        { country: "Denmark", spending: 6000, life: 80.5, labelPos: 0.2, labelRotation: 20, textDy: -6 },
        { country: "Japan", spending: 3500, life: 83.0, labelPos: 0.15, labelRotation: -28, textDy: -6 },
        { country: "Spain", spending: 3000, life: 82.4, labelPos: 0.45, labelRotation: -28, textDy: -6 },
        { country: "U.K.", spending: 3200, life: 80.6, labelPos: 0.2, labelRotation: -22, textDy: 16 },
        { country: "Australia", spending: 3800, life: 81.8, labelPos: 0.75, labelRotation: -24, textDy: -6 }
      ];

      // Scales matching the visual extent of the reference image
      const spendingScale = d3.scaleLinear().domain([2000, 9500]).range([1, 0]);
      const lifeExpScale = d3.scaleLinear().domain([78.5, 83.5]).range([1, 0]);

      // Normalize data for plotting on a shared 0-1 y-axis
      const slopeNormalized = slopeData.flatMap(d => [
        { ...d, type: 0, value: d.spending, normalized: spendingScale(d.spending), label: d3.format("$,.2s")(d.spending).replace("G", "B") },
        { ...d, type: 1, value: d.life, normalized: lifeExpScale(d.life), label: d.life }
      ]);

      // Ticks for the axes
      const spendingTicks = [2000, 4000, 6000, 8000];
      const lifeTicks = [79, 80, 81, 82, 83];

      const axisTicks = [
        ...spendingTicks.map(v => ({ type: 0, value: v, normalized: spendingScale(v), label: v === 2000 ? "$2K" : d3.format("$.0s")(v) })),
        ...lifeTicks.map(v => ({ type: 1, value: v, normalized: lifeExpScale(v), label: v }))
      ];

      const slopeChart = Plot.plot({
        width: Math.min(width, 600),
        height: 600,
        style: { fontSize: 16, fontFamily: "Camphor, sans-serif" },
        marginLeft: 60,
        marginRight: 60,
        marginTop: 80,
        x: { axis: null, domain: [0, 1] },
        y: { axis: null, domain: [1, 0] }, // Inverted so 0 (bottom) is at bottom
        marks: [
          // Vertical Axes
          Plot.ruleX([0, 1], { stroke: "black", strokeWidth: 1.5 }),

          // Axis Ticks
          Plot.ruleY(axisTicks.filter(d => d.type === 0), { x: 0, y: "normalized", dx: -6, stroke: "black" }),
          Plot.ruleY(axisTicks.filter(d => d.type === 1), { x: 1, y: "normalized", dx: 6, stroke: "black" }),

          // Axis Labels (Tick Values)
          Plot.text(axisTicks.filter(d => d.type === 0), { x: 0, y: "normalized", text: "label", dx: -15, textAnchor: "end" }),
          Plot.text(axisTicks.filter(d => d.type === 1), { x: 1, y: "normalized", text: "label", dx: 15, textAnchor: "start" }),

          // Header Labels
          Plot.text([{ type: 0, text: "Annual health\ncare spending\nper person in U.S.\ndollars, 2010" }, { type: 1, text: "Life\nexpectancy\nat birth, in years" }], {
            x: "type",
            y: -0.05,
            text: "text",
            textAnchor: "middle",
            lineHeight: 1.2,
            fontWeight: "bold",
            dy: -20
          }),

          // Slopes
          Plot.line(slopeNormalized, {
            x: "type",
            y: "normalized",
            z: "country",
            stroke: d => d.country === "U.S." ? "#d32f2f" : "#ccc",
            strokeWidth: d => d.country === "U.S." ? 3 : 2
          }),

          // Dots at endpoints
          Plot.dot(slopeNormalized, {
            x: "type",
            y: "normalized",
            fill: d => d.country === "U.S." ? "#d32f2f" : "#ccc",
            r: 5
          }),

          // Country Labels (angled)
          Plot.text(slopeData, {
            x: d => d.labelPos,
            y: d => spendingScale(d.spending) * (1 - d.labelPos) + lifeExpScale(d.life) * d.labelPos,
            text: d => d.country.toUpperCase(),
            rotate: d => d.labelRotation,
            dy: d => d.textDy,
            fill: d => d.country === "U.S." ? "#d32f2f" : "#333",
            stroke: "white",
            strokeWidth: 3,
            fontSize: 14
          }),
        ]
      });

      // --- Chart 2: Growth Chart (Spending vs GDP) ---
      const growthData = [
        { year: 1960, value: 0, series: "GDP" }, { year: 1960, value: 0, series: "Health" },
        { year: 1970, value: 15, series: "GDP" }, { year: 1970, value: 30, series: "Health" },
        { year: 1980, value: 35, series: "GDP" }, { year: 1980, value: 100, series: "Health" },
        { year: 1990, value: 60, series: "GDP" }, { year: 1990, value: 250, series: "Health" },
        { year: 2000, value: 90, series: "GDP" }, { year: 2000, value: 450, series: "Health" },
        { year: 2010, value: 110, series: "GDP" }, { year: 2010, value: 800, series: "Health" },
      ];

      const growthChart = Plot.plot({
        width: width,
        height: 300,
        marginLeft: 40,
        style: { fontSize: 11 },
        y: { grid: true, label: "Percentage growth since 1960", tickFormat: d => d + "%" },
        x: { tickFormat: "d", label: null },
        marks: [
          Plot.areaY(growthData.filter(d => d.series === "Health"), {
            x: "year", y: "value", fill: "#ccc", fillOpacity: 0.5
          }),
          Plot.areaY(growthData.filter(d => d.series === "GDP"), {
            x: "year", y: "value", fill: "#666", fillOpacity: 0.8
          }),
          Plot.line(growthData, { x: "year", y: "value", stroke: "black", strokeWidth: 1, z: "series" }),
          Plot.text([{ x: 2005, y: 50, text: "GDP" }], { x: "x", y: "y", text: "text", fill: "white" }),
          Plot.text([{ x: 2000, y: 240, text: "NATIONAL\nHEALTH CARE\nEXPENDITURES" }], { x: "x", y: "y", text: "text", fill: "#333", textAnchor: "middle", lineHeight: 1.2 }),
          Plot.text([{ x: 2002, y: 700, text: "NEARLY\nFIVE TIMES\nAS MUCH\nAS GDP" }], { x: "x", y: "y", text: "text", fill: "red", textAnchor: "middle", fontSize: 10 })
        ]
      });

      // --- Chart 3: Aging Chart ---
      const agingRawData = [
        { year: 1960, over64: 9, adults: 53, young: 38 },
        { year: 1970, over64: 10, adults: 54, young: 36 },
        { year: 1980, over64: 11, adults: 58, young: 31 },
        { year: 1990, over64: 12, adults: 60, young: 28 },
        { year: 2000, over64: 12, adults: 61, young: 27 },
        { year: 2010, over64: 13, adults: 62, young: 25 },
        { year: 2020, over64: 17, adults: 59, young: 24 },
        { year: 2030, over64: 21, adults: 56, young: 23 },
        { year: 2040, over64: 22, adults: 55, young: 23 },
        { year: 2050, over64: 23, adults: 54, young: 23 },
        { year: 2060, over64: 25, adults: 53, young: 22 },
        { year: 2070, over64: 27, adults: 52, young: 21 },
        { year: 2080, over64: 29, adults: 51, young: 20 },
        { year: 2090, over64: 31, adults: 50, young: 19 },
        { year: 2100, over64: 33, adults: 49, young: 18 }
      ];

      const agingData = [];
      agingRawData.forEach(d => {
        agingData.push({ year: d.year, group: "Over 64", value: d.over64 });
        agingData.push({ year: d.year, group: "20-64", value: d.adults });
        agingData.push({ year: d.year, group: "0-19", value: d.young });
      });

      const agingChart = Plot.plot({
        width: width,
        height: 400,
        style: { fontSize: 13, fontFamily: "Camphor, sans-serif" },
        x: {
          type: "band",
          tickFormat: "d",
          tickRotate: -90,
          label: null
        },
        y: {
          percent: null,
          nice: true,
          label: "Percentage of total population",
          labelAnchor: "top",
          ticks: 4,
          tickSize: 0,
          tickFormat: d => d + "%",
          grid: true,
        },
        color: {
          domain: ["Over 64", "20-64", "0-19"],
          range: ["#ef3b2c", "#a7a9ac", "#d1d3d4"]
        },
        marks: [
          Plot.barY(agingData, {
            x: "year",
            y: "value",
            fill: "group",
            tip: true,
            title: "value",
            sort: { color: null } // Stack order: Order of appearance/domain
          }),
          // Labels with "halo" to simulate white box
          Plot.text([{ year: 2090, value: 87, text: "OVER 64" }], { // text on top
            x: "year", y: "value", stroke: "white", strokeWidth: 4, text: "text", lineHeight: 1.2, letterSpacing: 1.2, fill: "currentColor", fontWeight: "bold", style: {
              paintOrder: "stroke"
            }
          }),
          Plot.text([{ year: 2090, value: 45, text: "20—64" }], {
            x: "year", y: "value", stroke: "white", strokeWidth: 4, text: "text", lineHeight: 1.2, letterSpacing: 1.2, fill: "currentColor", fontWeight: "bold", style: {
              paintOrder: "stroke"
            }
          }),
          Plot.text([{ year: 2090, value: 10, text: "0—19" }], {
            x: "year", y: "value", stroke: "white", strokeWidth: 4, text: "text", lineHeight: 1.2, letterSpacing: 1.2, fill: "currentColor", fontWeight: "bold", style: {
              paintOrder: "stroke"
            }
          }),
        ]
      });

      document.getElementById("slope-chart").appendChild(slopeChart);
      document.getElementById("growth-chart").appendChild(growthChart);
      document.getElementById("aging-chart").appendChild(agingChart);

      document.getElementById("income").appendChild(Plot.plot(income));
    });
  </script>
</body>

</html>