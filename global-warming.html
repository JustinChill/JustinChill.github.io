<!DOCTYPE html>
<html lang="en">
<head>
  <title>How 2016 became Earth's Hottest Year on Record</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css" />

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Global temperature trends based on NASA's Goddard Institute for Space Studies.">
  <meta name="author" content="Justin Chill">

  <style type="text/css">
    figure, figcaption{
      grid-column: 2 / -2;
    }
    figcaption#temps_legend{
      margin-bottom: 0;
      grid-column: 4;
      display: flex;
      flex-direction: row-reverse;
    }

    #temps_legend *{
      font-weight: 100;
      color: hsl(211, 10%, 53%);
    }
    figcaption{
      text-align: right;
      font-size:  calc(10px + (22 - 16) * ((100vw - 320px) / (1300 - 320)))
    }

  </style>
</head>
<body>
  <nav class="nav">
    <div class="nav__list">
      <a href="index.html" class="nav__item">Home</a>
      <a href="blog.html" class="nav__item">Blog</a>
      <a href="fun.html" class="nav__item">Fun</a>
    </div>
    <div class="nav__list">
      <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
      <a href="#" class="nav__item js-email-link">Email</a>
    </div>
  </nav>
  
  <main role="main">
    <article>
     <div class="article-hero">
      <h2 class="article-category">Post</h2>
      <h1 class="article-title">Global Temperature Trends</h1>
      <h2 class="article-subtitle">How 2016 became Earth's hottest year on record</h2>
    </div>

    <figcaption id="temps_legend"></figcaption>
    <figure id="temps"></figure>
    <figcaption>Data: <a href="https://data.giss.nasa.gov/gistemp/">NASA's Goddard Institute for Space Studies</a></figcaption>

    <p>Of the 17 hottest years ever recorded, 16 have now occurred since 2000. The chart above is my recreation of a wonderful graphic from <a href="https://nyti.ms/3x89ywY">the New York Times</a>, featured in the article, "How 2016 Became Earth’s Hottest Year on Record". Thanks to publically available data<a href="#NOAA" aria-describedby="footnote-label" id="NOAA-ref"></a> from NASA we can plot recorded temperatures by data going back to 1880. Once visualized we can clearly see temperatures climbing and increasingly rapidly in the past 2 decades.</p>

    <h3>Warming stripes</h3>
    <figure id="stripes"></figure>
    <p>Reduced to just one dimension, the warming trend becomes more obvious. Each stripe here represents the average temperature for a year. You’ll notice that the stripes take a sharp turn toward the yellows, and then reds, starting in the late 1970s, reflecting the significant rise in global average temperatures. Last year was a dark red. How dark the stripes get by the end of this century depends on whether the world as a whole keeps pumping more greenhouse gas emissions into the atmosphere.</p>

    <h3>Original graphic from the New York Times</h3>
    <a href="https://www.nytimes.com/interactive/2017/01/18/science/earth/2016-hottest-year-on-record.html"><img src="imgs/nyt-global-temps.png" alt="The New York Times original graphic, visualizing global temperatures since 1880." loading="lazy" title="The New York Times original graphic, visualizing global temperatures since 1880."></a>
    

  </article>
</main>
<footer>
  <h2 id="footnote-label">Footnotes</h2>
  <ol>
    <li id="NOAA">NOAA National Centers for Environmental information, Climate at a Glance: Global Mapping, published July 2022, retrieved on July 14, 2022 from <a href="https://www.ncei.noaa.gov/cag/">https://www.ncei.noaa.gov/cag/</a><a href="#NOAA-ref" aria-label="Back to content">↩</a></li>
  </ol>
  <div>
    <p>Justin Chill © 2024. Thanks for reading!</p>
    <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img src="imgs/github.svg" class="icon">Source code and feedback</a></span>    
  </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/d3"></script>
<script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>

<script type="text/javascript">
  var element = d3.select('figure').node();
  var width = element.getBoundingClientRect().width; // get width of article so graphic is responsive
  var size = 12;

  // Use Promises to async request data
  var promises = [d3.csv("data/global-temps.csv", d3.autoType)];
  myDataPromises = Promise.all(promises);

  // After data is successfully fetched, generate viz
  myDataPromises.then(function(data) {

    // Define the data
    var hadcrut = data[0];

    var temps = {
      width: width,
      inset: 0,
      marginLeft: 20,
      marginRight: 0,
      x: {
        grid: true,
        nice: true,
        ticks: 5,
        tickSize: 0,
      },
      y: {
        grid: true,
        nice: true,
        tickFormat: "+f",
        label: null,
        tickSize: 0,
        ticks: 4,        
      },
      style: {
        background: "hsla(209, 23%, 99%, 1)",
        color: "rgba(0, 0, 0, 0.84)",
        fontSize: size,
      },
      color: {
        scheme: "BuRd",
        range: [0,1.3], // clamping the color scheme so that blue appears below the x axis, red above
        reverse: false,
        legend: true,
        tickFormat: "+f",
        label: "Surface temperature change (°C)",
      },
      marks: [
        Plot.ruleY([0], {stroke:"rgba(0,0,0,.3)", strokeOpacity: .75}),
        Plot.dot(hadcrut, {x: "date", y: "value", r: width < 500 ? 1 : 3, strokeWidth: 1, strokeOpacity: .85, stroke: "value", fill: "value", title: (d) =>
          `${d3.timeFormat("%B %d, %Y")(d["date"])} \nTemp: ${d3.format("+.2f")(d["value"])}℃`,
  channels: {name: "name", sport: "sport"},
  tip: true}),
        Plot.text(hadcrut.filter(d => (d.date == "1889-02-01")), {x: "date", y: "value", dx: 0, dy: -2, text: d => d3.timeFormat("%B %Y")(d.date)}),
        // Plot.text(hadcrut, {filter: d=> d.date == "Sun Jan 31 2016 19:00:00 GMT-0500 (EST)", x: "date", y: "value", dx: -50, dy: -2, text: d => d3.timeFormat("%B %Y")(d.date)}),
        // Plot.text(hadcrut, {filter: d=> d.date == "Mon Feb 29 2016 19:00:00 GMT-0500 (EST)", x: "date", y: "value", dx: -50, dy: 4, text: d => d3.timeFormat("%B %Y")(d.date)}),
        // Plot.text(hadcrut, {filter: d=> d.date == "Wed Feb 28 1990 19:00:00 GMT-0500 (EST)", x: "date", y: "value", dx: -14 , dy: -12, text: d => d3.timeFormat("%B %Y")(d.date)}),
        // Plot.text(hadcrut, {filter: d=> d.date == "Tue Dec 31 1957 19:00:00 GMT-0500 (EST)", x: "date", y: "value", dx: -8, dy: -12, text: d => d3.timeFormat("%B %Y")(d.date)}),
        // Plot.text(hadcrut, {filter: d=> d.date == "Thu Dec 31 1925 19:00:00 GMT-0500 (EST)", x: "date", y: "value", dx: -8, dy: -12, text: d => d3.timeFormat("%B %Y")(d.date)}),
        // Plot.text(hadcrut, {filter: d=> d.date == "Thu Jan 31 1889 19:00:00 GMT-0500 (EST)", x: "date", y: "value", dx: -5, dy: -12, text: d => d3.timeFormat("%B %Y")(d.date)}),   
        ]
    };

    var stripes = {
      width: width,
      color: { 
        scheme: "burd",
        legend: true,
        tickFormat: "+f",
        label: "Surface temperature change (°C)", 
      },
      x: { axis: null },
      marginRight: 5,
      marginLeft: 0,
      marginBottom: 8,
      height: width/5,
      marks: [
        Plot.barX(hadcrut, {
          x: "date",
          interval: 1,
          fill: "value",
          insetRight: -0.5,
          insetTop: 11
        }),
        Plot.tickX(hadcrut, {
          opacity: .8,
          x: "date",
          filter: (d) => d["date"].getFullYear() % 10 === 0 && d["date"].getMonth() == 1
        }),
        Plot.text(hadcrut, {
          frameAnchor: "top",
          x: "date",
          filter: (d) => d["date"].getFullYear() % 10 === 0 && d["date"].getMonth() == 1,
          text: (d) =>
          [1880, 1900, 2000].includes(d["date"].getFullYear()) ? `${d["date"].getFullYear()}` : `’${d["date"].getFullYear() % 100}`,
          textAnchor: "start",
          dx: 3
        })
        ]
    };

    document.getElementById("temps").appendChild(Plot.plot(temps));
    document.getElementById("stripes").appendChild(Plot.plot(stripes));
  });
</script>
</body>
</html>