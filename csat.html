<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
  <title>Customer Satisfaction (CSAT) Surveys | Justin Chill</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Understanding how surveys can be used to effectively measure customer satisfaction">
  <meta name="author" content="Justin Chill">
  <!-- OpenGraph tags -->
  <meta name="keywords" content="Customer Satisfaction, stats, chart, data viz, engagement, metrics, sentiment, survey,">
  <meta name="robots" content="all">
  <meta content="en_US" property="og:locale">
  <meta content="JustinChill" property="og:site_name">
  <meta content="website" property="og:type">
  <meta content="https://justinchill.com/csat.html" property="og:url">
  <meta content="Customer Satisfaction (CSAT) Surveys | Justin Chill" property="og:title">
  <meta content="Understanding how surveys can be used to effectively measure customer satisfaction" property="og:description">
  <meta content="https://www.justinchill.com/blog.html" property="og:see_also">
  <link rel="canonical" href="https://www.justinchill.com/csat.html">

  <meta property="og:locality" content="New York">
  <meta property="og:region" content="NY">
  <meta property="og:country_name" content="USA">

  <meta name="datePublished" content="2025-06-16">
  <meta name="dateModified" content="2025-08-06">

  <meta content="https://www.arin.net/blog/2023/04/21/customer-satisfaction-survey/css.png" property="og:image">
  <meta content="https://www.arin.net/blog/2023/04/21/customer-satisfaction-survey/css.png" property="twitter:image">
  <meta content="A survey form with three smiley faces: happy, neutral, sad. A red pencil marks the happy face. The text on the left reads Customer Satisfaction Survey with a teal and white abstract background." property="og:image:alt">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Customer Satisfaction (CSAT) Surveys | Justin Chill">
  <meta name="twitter:description" content="Understanding how surveys can be used to effectively measure customer satisfaction">

  <link type="text/plain" href="humans.txt" rel="author">
  <link rel="preload" href="style.css" as="style" />
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="/favicon.ico">
  <meta name="theme-color" content="#4C63B6">

  <script type="module">
    document.documentElement.classList.remove('no-js');
    document.documentElement.classList.add('js');
  </script>

  <style type="text/css">
    @import url('https://fonts.googleapis.com/css2?family=Libre+Franklin:wght@500&family=Ubuntu:wght@500&display=swap');

    :root {
      --normal: #ECEAF3;
      --normal-shadow: #D9D8E3;
      --normal-mouth: #9795A4;
      --normal-eye: #595861;
      --active: #F8DA69;
      --active-shadow: #F4B555;
      --active-mouth: #F05136;
      --active-eye: #313036;
      --active-tear: #76b5e7;
      --active-shadow-angry: #e94f1d;
    }

    .panel-container {
      background-color: #fff;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      border-radius: 4px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: var(--spacer-2);
      margin: var(--spacer-4) auto;
      max-width: 400px;
      text-align: center;
      row-gap: var(--spacer-2);
    }

    .feedback {
      margin: var(--spacer-2) auto;
      padding: var(--spacer-2) auto;
      list-style: none;
      display: flex;
    }

    .feedback li {
      position: relative;
      border-radius: 50%;
      background: var(--sb, var(--normal));
      box-shadow: inset 3px -3px 4px var(--sh, var(--normal-shadow));
      transition: background 0.4s, box-shadow 0.4s, transform 0.3s;
      -webkit-tap-highlight-color: transparent;
    }

    .feedback li:not(:last-child) {
      margin-right: 20px;
    }

    .feedback li div {
      width: 40px;
      height: 40px;
      position: relative;
      transform: perspective(240px) translateZ(4px);
    }

    .feedback li div svg,
    .feedback li div:before,
    .feedback li div:after {
      display: block;
      position: absolute;
      left: var(--l, 9px);
      top: var(--t, 13px);
      width: var(--w, 8px);
      height: var(--h, 2px);
      transform: rotate(var(--r, 0deg)) scale(var(--sc, 1)) translateZ(0);
    }

    .feedback li div svg {
      fill: none;
      stroke: var(--s);
      stroke-width: 2px;
      stroke-linecap: round;
      stroke-linejoin: round;
      transition: stroke 0.4s;
    }

    .feedback li div svg.eye {
      --s: var(--e, var(--normal-eye));
      --t: 17px;
      --w: 7px;
      --h: 4px;
    }

    .feedback li div svg.eye.right {
      --l: 23px;
    }

    .feedback li div svg.mouth {
      --s: var(--m, var(--normal-mouth));
      --l: 11px;
      --t: 23px;
      --w: 18px;
      --h: 7px;
    }

    .feedback li div:before,
    .feedback li div:after {
      content: "";
      z-index: var(--zi, 1);
      border-radius: var(--br, 1px);
      background: var(--b, var(--e, var(--normal-eye)));
      transition: background 0.4s;
    }

    .feedback li.angry {
      --step-1-rx: -24deg;
      --step-1-ry: 20deg;
      --step-2-rx: -24deg;
      --step-2-ry: -20deg;
    }

    .feedback li.angry div:before {
      --r: 20deg;
    }

    .feedback li.angry div:after {
      --l: 23px;
      --r: -20deg;
    }

    .feedback li.angry div svg.eye {
      stroke-dasharray: 4.55;
      stroke-dashoffset: 8.15;
    }

    .feedback li.angry.active {
      -webkit-animation: angry 1s linear;
      animation: angry 1s linear;
    }

    .feedback li.angry.active div:before {
      --middle-y: -2px;
      --middle-r: 22deg;
      -webkit-animation: toggle 0.8s linear forwards;
      animation: toggle 0.8s linear forwards;
    }

    .feedback li.angry.active div:after {
      --middle-y: 1px;
      --middle-r: -18deg;
      -webkit-animation: toggle 0.8s linear forwards;
      animation: toggle 0.8s linear forwards;
    }

    .feedback li.sad {
      --step-1-rx: 20deg;
      --step-1-ry: -12deg;
      --step-2-rx: -18deg;
      --step-2-ry: 14deg;
    }

    .feedback li.sad div:before,
    .feedback li.sad div:after {
      --b: var(--active-tear);
      --sc: 0;
      --w: 5px;
      --h: 5px;
      --t: 15px;
      --br: 50%;
    }

    .feedback li.sad div:after {
      --l: 25px;
    }

    .feedback li.sad div svg.eye {
      --t: 16px;
    }

    .feedback li.sad div svg.mouth {
      --t: 24px;
      stroke-dasharray: 9.5;
      stroke-dashoffset: 33.25;
    }

    .feedback li.sad.active div:before,
    .feedback li.sad.active div:after {
      -webkit-animation: tear 0.6s linear forwards;
      animation: tear 0.6s linear forwards;
    }

    .feedback li.ok {
      --step-1-rx: 4deg;
      --step-1-ry: -22deg;
      --step-1-rz: 6deg;
      --step-2-rx: 4deg;
      --step-2-ry: 22deg;
      --step-2-rz: -6deg;
    }

    .feedback li.ok div:before {
      --l: 12px;
      --t: 17px;
      --h: 4px;
      --w: 4px;
      --br: 50%;
      box-shadow: 12px 0 0 var(--e, var(--normal-eye));
    }

    .feedback li.ok div:after {
      --l: 13px;
      --t: 26px;
      --w: 14px;
      --h: 2px;
      --br: 1px;
      --b: var(--m, var(--normal-mouth));
    }

    .feedback li.ok.active div:before {
      --middle-s-y: .35;
      -webkit-animation: toggle 0.2s linear forwards;
      animation: toggle 0.2s linear forwards;
    }

    .feedback li.ok.active div:after {
      --middle-s-x: .5;
      -webkit-animation: toggle 0.7s linear forwards;
      animation: toggle 0.7s linear forwards;
    }

    .feedback li.good {
      --step-1-rx: -14deg;
      --step-1-rz: 10deg;
      --step-2-rx: 10deg;
      --step-2-rz: -8deg;
    }

    .feedback li.good div:before {
      --b: var(--m, var(--normal-mouth));
      --w: 5px;
      --h: 5px;
      --br: 50%;
      --t: 22px;
      --zi: 0;
      opacity: 0.5;
      box-shadow: 16px 0 0 var(--b);
      filter: blur(2px);
    }

    .feedback li.good div:after {
      --sc: 0;
    }

    .feedback li.good div svg.eye {
      --t: 15px;
      --sc: -1;
      stroke-dasharray: 4.55;
      stroke-dashoffset: 8.15;
    }

    .feedback li.good div svg.mouth {
      --t: 22px;
      --sc: -1;
      stroke-dasharray: 13.3;
      stroke-dashoffset: 23.75;
    }

    .feedback li.good.active div svg.mouth {
      --middle-y: 1px;
      --middle-s: -1;
      -webkit-animation: toggle 0.8s linear forwards;
      animation: toggle 0.8s linear forwards;
    }

    .feedback li.happy div {
      --step-1-rx: 18deg;
      --step-1-ry: 24deg;
      --step-2-rx: 18deg;
      --step-2-ry: -24deg;
    }

    .feedback li.happy div:before {
      --sc: 0;
    }

    .feedback li.happy div:after {
      --b: var(--m, var(--normal-mouth));
      --l: 11px;
      --t: 23px;
      --w: 18px;
      --h: 8px;
      --br: 0 0 8px 8px;
    }

    .feedback li.happy div svg.eye {
      --t: 14px;
      --sc: -1;
    }

    .feedback li.happy.active div:after {
      --middle-s-x: .95;
      --middle-s-y: .75;
      -webkit-animation: toggle 0.8s linear forwards;
      animation: toggle 0.8s linear forwards;
    }

    .feedback li:not(.active) {
      cursor: pointer;
    }

    .feedback li:not(.active):active {
      transform: scale(0.925);
    }

    .feedback li.active {
      --sb: var(--active);
      --sh: var(--active-shadow);
      --m: var(--active-mouth);
      --e: var(--active-eye);
    }

    .feedback li.active div {
      -webkit-animation: shake 0.8s linear forwards;
      animation: shake 0.8s linear forwards;
    }

    @-webkit-keyframes shake {
      30% {
        transform: perspective(240px) rotateX(var(--step-1-rx, 0deg)) rotateY(var(--step-1-ry, 0deg)) rotateZ(var(--step-1-rz, 0deg)) translateZ(10px);
      }

      60% {
        transform: perspective(240px) rotateX(var(--step-2-rx, 0deg)) rotateY(var(--step-2-ry, 0deg)) rotateZ(var(--step-2-rz, 0deg)) translateZ(10px);
      }

      100% {
        transform: perspective(240px) translateZ(4px);
      }
    }

    @keyframes shake {
      30% {
        transform: perspective(240px) rotateX(var(--step-1-rx, 0deg)) rotateY(var(--step-1-ry, 0deg)) rotateZ(var(--step-1-rz, 0deg)) translateZ(10px);
      }

      60% {
        transform: perspective(240px) rotateX(var(--step-2-rx, 0deg)) rotateY(var(--step-2-ry, 0deg)) rotateZ(var(--step-2-rz, 0deg)) translateZ(10px);
      }

      100% {
        transform: perspective(240px) translateZ(4px);
      }
    }

    @-webkit-keyframes tear {
      0% {
        opacity: 0;
        transform: translateY(-2px) scale(0) translateZ(0);
      }

      50% {
        transform: translateY(12px) scale(0.6, 1.2) translateZ(0);
      }

      20%,
      80% {
        opacity: 1;
      }

      100% {
        opacity: 0;
        transform: translateY(24px) translateX(4px) rotateZ(-30deg) scale(0.7, 1.1) translateZ(0);
      }
    }

    @keyframes tear {
      0% {
        opacity: 0;
        transform: translateY(-2px) scale(0) translateZ(0);
      }

      50% {
        transform: translateY(12px) scale(0.6, 1.2) translateZ(0);
      }

      20%,
      80% {
        opacity: 1;
      }

      100% {
        opacity: 0;
        transform: translateY(24px) translateX(4px) rotateZ(-30deg) scale(0.7, 1.1) translateZ(0);
      }
    }

    @-webkit-keyframes toggle {
      50% {
        transform: translateY(var(--middle-y, 0)) scale(var(--middle-s-x, var(--middle-s, 1)), var(--middle-s-y, var(--middle-s, 1))) rotate(var(--middle-r, 0deg));
      }
    }

    @keyframes toggle {
      50% {
        transform: translateY(var(--middle-y, 0)) scale(var(--middle-s-x, var(--middle-s, 1)), var(--middle-s-y, var(--middle-s, 1))) rotate(var(--middle-r, 0deg));
      }
    }

    @-webkit-keyframes angry {
      40% {
        background: var(--active);
      }

      45% {
        box-shadow: inset 3px -3px 4px var(--active-shadow), inset 0 8px 10px var(--active-shadow-angry);
      }
    }

    @keyframes angry {
      40% {
        background: var(--active);
      }

      45% {
        box-shadow: inset 3px -3px 4px var(--active-shadow), inset 0 8px 10px var(--active-shadow-angry);
      }
    }

    .ratings-container {
      display: flex;
      margin: 20px 0;
    }

    .rating {
      cursor: pointer;
      flex: 1;
      padding: 20px;
      margin: 10px 5px;
    }

    .rating.active,
    .rating:hover {
      border-radius: 4px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .rating img,
    #panel img {
      width: 60px;
    }

    .rating small {
      color: #555;
      display: inline-block;
      font-family: var(--font-ui);
    }

    .rating.active small,
    .rating:hover small {
      color: #111;
    }

    .btn {
      background-color: #302d2b;
      border: 0;
      border-radius: 4px;
      color: #fff;
      cursor: pointer;
      padding: 12px 30px;
    }

    /*  .fa-heart {
    color: red;
    font-size: 30px;
    margin-bottom: 10px;
  }
  */
    /*For the button*/
    .pushable {
      position: relative;
      border: none;
      background: transparent;
      padding: 0;
      cursor: pointer;
      outline-offset: 4px;
      transition: filter 250ms;
    }

    .shadow {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 12px;
      background: hsl(0deg 0% 0% / 0.25);
      will-change: transform;
      transform: translateY(2px);
      transition:
        transform 600ms cubic-bezier(.3, .7, .4, 1);
    }

    .edge {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 12px;
      background: linear-gradient(to left,
          hsl(340deg 100% 16%) 0%,
          hsl(340deg 100% 32%) 8%,
          hsl(340deg 100% 32%) 92%,
          hsl(340deg 100% 16%) 100%);
    }

    .front {
      display: block;
      position: relative;
      padding: 12px 42px;
      border-radius: 12px;
      font-size: 1.25rem;
      color: white;
      background: hsl(345deg 100% 47%);
      will-change: transform;
      transform: translateY(-4px);
      transition:
        transform 600ms cubic-bezier(.3, .7, .4, 1);
    }

    .pushable:hover {
      filter: brightness(110%);
    }

    .pushable:hover .front {
      transform: translateY(-6px);
      transition:
        transform 250ms cubic-bezier(.3, .7, .4, 1.5);
    }

    .pushable:active .front {
      transform: translateY(-2px);
      transition: transform 34ms;
    }

    .pushable:hover .shadow {
      transform: translateY(4px);
      transition:
        transform 250ms cubic-bezier(.3, .7, .4, 1.5);
    }

    .pushable:active .shadow {
      transform: translateY(1px);
      transition: transform 34ms;
    }

    .pushable:focus:not(:focus-visible) {
      outline: none;
    }

    ol.scale {
      list-style: none;
      counter-reset: my-awesome-counter;
      padding: 1.25em 0;
      margin: 0;
    }

    .scale li {
      counter-increment: my-awesome-counter;
      /* margin: 0.25rem; */
    }

    .scale li::before {
      content: counter(my-awesome-counter);
      background: #662974;
      width: 2rem;
      height: 2rem;
      border-radius: 50%;
      display: inline-block;
      line-height: 2rem;
      color: white;
      text-align: center;
      margin-right: 0.5rem;
    }

    /* There's probably a better way to interpolate bt. colors  */
    .scale li:first-child:before {
      background: #ef4e4e;
    }

    .scale li:nth-child(2):before {
      background: #f38c4b;
    }

    .scale li:nth-child(3):before {
      background: #f7c948;
    }

    .scale li:nth-child(4):before {
      background: #94be40;
    }

    .scale li:nth-child(5):before {
      background: #31B237;
    }

    .plot text {
      color: #656568;
      font-family: 'Ubuntu', sans-serif;
      pointer-events: none;
      font-size: calc(5px + (22 - 16) * ((100vw - 320px) / (1300 - 320)));
    }

    @media screen and (max-width: 900px) {
      ul>li {
        /*padding-left: .5rem;*/
      }

      ul {
        padding-left: 1rem;
      }
    }
  </style>
</head>

<body>
  <nav class="nav" role="navigation">
    <div class="nav__list">
      <a href="index.html" class="nav__item" aria-label="Homepage">Home</a>
      <a href="blog.html" class="nav__item" aria-label="Blog section">Blog</a>
      <a href="now.html" class="nav__item" aria-label="Now page">Now</a>
    </div>
    <div class="nav__list">
      <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
      <a href="#" class="nav__item js-email-link">Email</a>
    </div>
  </nav>

  <main role="main">
    <article>
      <div class="article-hero">
        <h2 class="article-category">Post</h2>
        <h1 class="article-title">Keeping the customer satisfied</h1>
        <h2 class="article-subtitle">Crafting effective customer satisfaction surveys</h2>
      </div>

      <p>Customer Satisfaction, or CSAT, is a customer experience metric that measures happiness with a product, service, or support interaction through a customer satisfaction survey. CSAT surveys look to measure a customer's “here and now” reaction to a specific interaction, product, or event. This blog post will cover implementing these surveys, understanding the data generated, and how it can benefit your organization.</p>

      <div id="panel" class="panel-container">
        <p>How satisfied were you with our customer support performance?</p>
        <ul class="feedback">
          <li class="angry">
            <div>
              <svg class="eye left">
                <use xlink:href="#eye">
              </svg>
              <svg class="eye right">
                <use xlink:href="#eye">
              </svg>
              <svg class="mouth">
                <use xlink:href="#mouth">
              </svg>
            </div>
          </li>
          <li class="sad">
            <div>
              <svg class="eye left">
                <use xlink:href="#eye">
              </svg>
              <svg class="eye right">
                <use xlink:href="#eye">
              </svg>
              <svg class="mouth">
                <use xlink:href="#mouth">
              </svg>
            </div>
          </li>
          <li class="ok">
            <div></div>
          </li>
          <li class="good active">
            <div>
              <svg class="eye left">
                <use xlink:href="#eye">
              </svg>
              <svg class="eye right">
                <use xlink:href="#eye">
              </svg>
              <svg class="mouth">
                <use xlink:href="#mouth">
              </svg>
            </div>
          </li>
          <li class="happy">
            <div>
              <svg class="eye left">
                <use xlink:href="#eye">
              </svg>
              <svg class="eye right">
                <use xlink:href="#eye">
              </svg>
            </div>
          </li>
        </ul>
        <!-- <button class="btn" id="send">Submit review</button> -->
        <button class="pushable" id="send">
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front">
            Submit
          </span>
        </button>
      </div>

      <h3>Pros and Cons</h3>
      <h4>Pros</h4>
      <ul>
        <li>Easy to implement and manage.</li>
        <li>Intuitive score to understand. </li>
        <li>Generally high response rates since it's low friction.</li>
      </ul>
      <h4>Cons</h4>
      <ul>
        <li>Polarized results- those who submit tend to skew highly positive or negative. This is called <a href="https://link.springer.com/article/10.1007%2FBF02723476">response bias</a>.</li>
        <li>"Satisfed" is subjective, and may mean different things to different people.</li>
        <li>Surveys are limited in the information they capture.</li>
      </ul>

      <h3>Measuring CSAT</h3>
      <p>The most common method of obtaining CSAT information is to survey your customers with some variation of, "“How would you rate your overall satisfaction with the [service/product] you received?” Recipients can assign a score, such as a scale of 1 - 5:</p>
      <ol class="scale">
        <li>Very unsatisfied</li>
        <li>Unsatisfied</li>
        <li>Neutral</li>
        <li>Satisfied</li>
        <li>Very satisfied</li>
      </ol>
      <p>To calculate your score as a percentage, sum all positive responses (scores 4 or 5) divided by the total amount of responses. Then multiply by 100. For example, if you received 100 total responses and 94 of them were positive — your CSAT score would be 94%.
      </p>
      <p><strong>(94 positive responses / 100 total responses = .94 x 100 = 94%)</strong></p>
      <h3>CSAT timing</h3>
      <p>You generally want to collect customer feedback immediately, so that the experience is fresh in the mind of the responder. CSAT is a “right here, right now” metric that relates to a specific experience rather than an ongoing customer relationship. This doesn't preclude you from using a CSAT survey to learn about the experience of a longer term sale, but it may require you to word your question differently.</p>
      <p>To keep response rates high, make sure you’re not over-surveying the same customer, that surveys are triggered upon completion of the interaction, and that you’ll be able to respond to any feedback received to ensure the customers feel heard.</p>
      <h3>What is "good"?</h3>
      <p>You need to establish a benchmark score before you can derive real meaning from your CSAT data. To track your progress, you should measure CSAT on an ongoing basis by making CSAT a routine part of your customer experience program. The <a href="https://www.theacsi.org">American Customer Satisfaction Index</a> (ACSI) maintains scores for different industries, and may be a good place to start if you need to have a sense of how your organization compares to competition. One thing is certain, however – if your score is moving from lower to higher, you’re doing something right!</p>
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h2>CSAT over time</h2>
      <figure id="csat">
        <figcaption class="right">Fictional data</figcaption>
      </figure>
      <h3>How to use CSAT</h3>
      <p>CSAT scores are a useful measure of your customer experience. But knowing the status of your customer experience performance is just the beginning. It’s what you do with the scores to drive and improve that experience that really counts! CSAT scores should be viewed in the context of other customer metrics (e.g. <abbr title="Net Promotor Score">NPS</abbr>, <abbr title="Customer Effort Score">CES</abbr>) to understand the drivers behind the scores so you can take action to improve the customer experience.</p>
    </article>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;" class="visually-hidden">
      <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7 4" id="eye">
        <path d="M1,1 C1.83333333,2.16666667 2.66666667,2.75 3.5,2.75 C4.33333333,2.75 5.16666667,2.16666667 6,1"></path>
      </symbol>
      <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 7" id="mouth">
        <path d="M1,5.5 C3.66666667,2.5 6.33333333,1 9,1 C11.6666667,1 14.3333333,2.5 17,5.5"></path>
      </symbol>
    </svg>
  </main>
  <footer>
    <h2 id="footnote-label">Footnotes</h2>
    <ol>
      <li id="Hubspot">Hubspot has a great overview on CSAT surveys, written by <a href="https://blog.hubspot.com/service/customer-satisfaction-score">Alex Birkett</a> <a href="#x-ref" aria-label="Back to content">↩</a></li>
    </ol>
    <div>
      <p>Justin Chill &copy; 2025</p>
      <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img src="imgs/github.svg" alt="GitHub logo" class="icon">Source code</a></span>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/d3"></script>
  <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>

  <script type="text/javascript">
    const ratingsEl = document.querySelectorAll('.rating');
    const sendBtn = document.querySelector('#send');
    const panel = document.querySelector('#panel');

    ratingsEl.forEach(el => {
      el.addEventListener('click', () => {
        ratingsEl.forEach(innerEl => {
          innerEl.classList.remove('active');
        });

        el.classList.add('active');
      });
    });

    sendBtn.addEventListener('click', () => {
      panel.innerHTML = `
    <img src="imgs/heart.svg">
    <p>Thank you!</p>
    <p>We'll use your feedback to improve our customer support experience.</p> 
    `;
    });

    // Plot things
    var element = d3.select('figure').node();
    var width = element.getBoundingClientRect().width; // get width of article so graphic is responsive
    var size = 12;

    // Use Promises to async request data
    var promises = [d3.csv("data/aapl.csv", d3.autoType)];
    myDataPromises = Promise.all(promises);

    // After data is successfully fetched, generate viz
    myDataPromises.then(function(data) {

      // Define the data
      var aapl = data[0];
      const tinyapple = aapl.slice(0, 320);
      const marker = aapl.slice(80, 81);
      const marker2 = aapl.slice(200, 201);

      var csat = {
        width: width,
        marginLeft: 0,
        marginRight: 0,
        style: {
          fontSize: size,
          paddingLeft: 24,
          paddingRight: 10
        },
        y: {
          grid: true,
          nice: true,
          label: null,
          tickSize: 0,
          tickFormat: d => d + "%",
          tickFormat: (d, i, _) => (i === _.length - 1 ? `${d}%` : `${d}`) // Show % on first tick only
        },
        marks: [
          Plot.areaY(tinyapple, {
            x: "Date",
            y: "Close",
            fill: "hsl(122, 42%, 75%)",
            fillOpacity: .8
          }),
          Plot.lineY(tinyapple, {
            x: "Date",
            y: "Close",
            title: "Close",
            stroke: "hsl(125, 86%, 14%)",
            curve: "catmull-rom-open"
          }),
          Plot.dot(tinyapple, Plot.selectLast({
            x: "Date",
            y: "Close",
            fill: "white",
            stroke: "rgba(0, 0, 0, .75)"
          })),
          Plot.dot(tinyapple, Plot.selectFirst({
            x: "Date",
            y: "Close",
            fill: "white",
            stroke: "rgba(0, 0, 0, .75)"
          })),

          Plot.text(marker, {
            x: "Date",
            y: "Close",
            text: d => `Bug reported`,
            dy: -50,
            dx: 10,
            rotate: 270
          }),
          Plot.ruleX(marker, {
            x: "Date",
            strokeDasharray: [2, 2],
            strokeWidth: 0.5,
            stroke: "rgba(0, 0, 0, .75)"
          }),
          Plot.text(marker2, {
            x: "Date",
            y: "Close",
            text: d => `New hire`,
            dy: -50,
            dx: 10,
            rotate: 270
          }),
          Plot.ruleX(marker2, {
            x: "Date",
            strokeDasharray: [2, 2],
            strokeWidth: 0.5,
            stroke: "rgba(0, 0, 0, .75)"
          }),
          Plot.text(tinyapple, Plot.selectLast({
            x: "Date",
            y: "Close",
            text: d => `${d3.format(".2f")(d.Close)}%`,
            dy: -10,
            dx: -6,
            fontWeight: 700,
            fontSize: 14
          })),
          Plot.text(tinyapple, Plot.selectFirst({
            x: "Date",
            y: "Close",
            text: d => `CSAT: ${d3.format(".2f")(d.Close)}%`,
            dy: -10,
            dx: 48,
            fontWeight: 700,
            fontSize: 14
          })),
        ]
      };

      document.getElementById("csat").appendChild(Plot.plot(csat));
    });

    // From Aaron Iker: https://codepen.io/aaroniker/pen/mdyYBPP
    document.querySelectorAll('.feedback li').forEach(entry => entry.addEventListener('click', e => {
      if (!entry.classList.contains('active')) {
        document.querySelector('.feedback li.active').classList.remove('active');
        entry.classList.add('active');
      }
      e.preventDefault();
    }));
  </script>
</body>

</html>