<!DOCTYPE html>
<html lang="en">
<head>
  <title></title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="North American Sports Teams">
  <meta name="author" content="Justin Chill">
  <!-- OpenGraph tags -->
  <meta name="keywords" content="sports, teams, chart, graph">
  <meta name="robots" content="all">
  <meta content="en_US" property="og:locale">
  <meta content="JustinChill" property="og:site_name">
  <meta content="website" property="og:type">
  <meta content="https://justinchill.com/teams.html" property="og:url"> 
  <meta content="North American Sports Teams" property="og:title">
  <meta content="North American Sports Teams visualized" property="og:description">
  <meta content="https://www.justinchill.com/blog.html" property="og:see_also">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="North American Sports Teams">
  <meta name="twitter:description" content="A data visualization">

  <link type="text/plain" href="humans.txt" rel="author">
  <link rel="stylesheet" href="style.css" />
<style type="text/css">

</style>
</head>
<body>
  <nav class="nav">
    <div class="nav__list">
      <a href="index.html" class="nav__item">Home</a>
      <a href="blog.html" class="nav__item">Blog</a>
    </div>
    <div class="nav__list">
      <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
      <a href="#" class="nav__item js-email-link">Email</a>
    </div>
  </nav>
  
  <main role="main">
    <article>
     <div class="article-hero mid-size">
      <h2 class="article-category">Post</h2>
      <h1 class="article-title">Field of dreams</h1>
      <h2 class="article-subtitle">North American Sports Teams</h2>
    </div>

    <figure id="tree"></figure>
    <figcaption>Data: <a href="https://gist.githubusercontent.com/davidelsche/b25f9373135bf9c3ab14e526626423b4/raw/779156c1145bcf09a1356c7ef6f4fa5daa635aa6/world_of_stadiums.csv">Figures CC</a></figcaption>
    <p>No matter where you go, you can see the profound impact sports have had on each nation. Rich or poor, big or small, every country on Earth has its own stadium where its favorite game is played. Sports are much more than a simple game, of course; in many instances, they are major cultural events that have the undivided attention of millions of individuals. Sometimes, people's entire identity are formed around their most beloved sports team and organization.</p>
    <p>Every team and event needs a venue. While some of these stadiums are quaint and humble, others are astronomical in size. Costing hundreds of millions of dollars to make and often taking years to construct. The biggest stadiums in the world serve as shrines to the cultural phenomena that are sport and live entertainment.</p>
    <p>This dataset contains information on 10,000+ sports stadiums around the world. </p>

</article>
</main>
<footer>
<!--   <h2 id="footnote-label">Footnotes</h2>
  <ol>
    <li id="pivert"><a href="https://observablehq.com/@kpivert/the-economists-new-carrie-bradshaw-index">Kurtis Pivert's</a> rough draft on Observable inspired this.<a href="#pivert-ref" aria-label="Back to content">↩</a></li>
  </ol> -->

  <div>
    <p>Justin Chill © 2024. Thanks for reading!</p>
    <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img src="imgs/github.svg" class="icon">Source code and feedback</a></span>    
  </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/d3"></script>
<script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/topojson@3.0.2/dist/topojson.min.js"></script>

<script type="text/javascript">
  var elementMid = d3.select('figure.mid-size').node();
  var widthMid = elementMid.getBoundingClientRect().width; // get width of figure.mid-size so graphic is responsive
  var element = d3.select('figure:last-of-type').node();
  var width = element.getBoundingClientRect().width; // get width of figure so graphic is responsive. Todo / hacky
  var size = 12;
  
  // Use Promises to async request data
  var promises = [d3.json("data/geo/land.json"),d3.csv("https://gist.githubusercontent.com/davidelsche/b25f9373135bf9c3ab14e526626423b4/raw/779156c1145bcf09a1356c7ef6f4fa5daa635aa6/world_of_stadiums.csv",d3.autoType),d3.json("data/geo/world50m.json"),d3.json("data/geo/us-counties-10m.json"),];

  // You can request multiple srcs in a promise
  myDataPromises = Promise.all(promises);

  // After data is successfully fetched, generate viz
  myDataPromises.then(function(data) {
    // Define the data. There's gotta be a better way to do this:
    var data = data[0];

    var indiana = {
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      projection: {
        type: "albers",
        inset: 10
      },
      color: { legend: true, scheme: scheme},
      marks: [
        Plot.graticule(),
        Plot.sphere({fill: "#a5e5e1", fillOpacity: .3}),
        Plot.geo(land, {fill: "#DFDFDF"}),
        Plot.geo(states, {stroke: "white"}),
        Plot.dot(stadiumsUSA, {r: "seats", fill: "kind", x: "long", y: "lat", fillOpacity: .65, reverse: false}),
        Plot.density(stadiumsUSA, {fill: "kind", x: "long", y: "lat", fillOpacity: .05}),
        Plot.tip(stadiumsUSA, Plot.pointer({
          x: "long",
          y: "lat",
          opacity: 0.9,
          textPadding: 10,
          lineHeight: 1.65,
          fontSize: size,
          stroke: "kind",
          channels: {seats: "seats", name: "name", city: "city", country: "country", built: {
            value: d => d.built >1 ? formatYear(d.built) : d.built,
            label: "built"
          },},
          format: {
            y: false,
            x: false,
            stroke: true
          }
        })),
        ],
    };

    var korea = {
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      projection: {
        type: "mercator",
        inset: 10,
        domain: koreaD,
      },
      color: { legend: true, scheme: scheme},
      marks: [
        Plot.graticule(),
        Plot.sphere({fill: "#a5e5e1", fillOpacity: .3}),
        Plot.geo(land, {fill: "#DFDFDF"}),
        Plot.geo(countries50m, {stroke: "white"}),
        Plot.dot(stadiumsKOR, {r: "seats", fill: "kind", x: "long", y: "lat", fillOpacity: .65, reverse: false}),
        Plot.density(stadiumsKOR, {fill: "kind", x: "long", y: "lat", fillOpacity: .05}),
        Plot.tip(stadiumsKOR, Plot.pointer({
          x: "long",
          y: "lat",
          opacity: 0.9,
          textPadding: 10,
          lineHeight: 1.65,
          fontSize: size,
          stroke: "kind",
          channels: {seats: "seats", name: "name", city: "city", country: "country", built: {
            value: d => d.built >1 ? formatYear(d.built) : d.built,
            label: "built"
          },},
          format: {
            y: false,
            x: false,
            stroke: true
          }
        })),
        ],
    };

    var india = {
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      projection: {
        type: "mercator",
        inset: 10,
        domain: indiaD,
      },
      color: { legend: true, scheme: scheme},
      marks: [
        Plot.graticule(),
        Plot.sphere({fill: "#a5e5e1", fillOpacity: .3}),
        Plot.geo(land, {fill: "#DFDFDF"}),
        Plot.geo(countries50m, {stroke: "white"}),
        Plot.dot(stadiumsIND, {r: "seats", fill: "kind", x: "long", y: "lat", fillOpacity: .65, reverse: true}),
        Plot.density(stadiumsIND, {fill: "kind", x: "long", y: "lat", fillOpacity: .05}),
        Plot.tip(stadiumsIND, Plot.pointer({
          x: "long",
          y: "lat",
          opacity: 0.9,
          textPadding: 10,
          lineHeight: 1.65,
          fontSize: size,
          stroke: "kind",
          channels: {seats: "seats", name: "name", city: "city", country: "country", built: {
            value: d => d.built >1 ? formatYear(d.built) : d.built,
            label: "built"
          },},
          format: {
            y: false,
            x: false,
            stroke: true
          }
        })),
        ],
    };

    var ireland = {
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      projection: {
        type: "mercator",
        inset: 10,
        domain: irelandD,
      },
      color: { legend: true, scheme: scheme},
      marks: [
        Plot.graticule(),
        Plot.sphere({fill: "#a5e5e1", fillOpacity: .3}),
        Plot.geo(land, {fill: "#DFDFDF"}),
        Plot.geo(countries50m, {stroke: "white"}),
        Plot.dot(stadiumsIRL, {r: "seats", fill: "kind", x: "long", y: "lat", fillOpacity: .65, reverse: false}),
        Plot.density(stadiumsIRL, {fill: "kind", x: "long", y: "lat", fillOpacity: .05}),
        Plot.tip(stadiumsIRL, Plot.pointer({
          x: "long",
          y: "lat",
          opacity: 0.9,
          textPadding: 10,
          lineHeight: 1.65,
          fontSize: size,
          stroke: "kind",
          channels: {seats: "seats", name: "name", city: "city", country: "country", built: {
            value: d => d.built >1 ? formatYear(d.built) : d.built,
            label: "built"
          },},
          format: {
            y: false,
            x: false,
            stroke: true
          }
        })),
        ],
    };

    var worldbars ={
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      height: 100,
      marginLeft: width/100,
      marginRight: width/100,
      marginTop: 10,
      marginBottom: 10,
      color: { legend: false, scheme: scheme},
      x: {percent: true, labelAnchor: "right", labelOffset: 30},
      marks: [
        Plot.barX(
          stadiumDataRaw,
          Plot.stackX(
            {order: "x", reverse: true},
            Plot.groupZ(
              {x: "proportion"},
              {z: "kind", fill: "kind", fillOpacity: 0.72, inset: 0.5, tip: {
                  opacity: 0.9,
                  textPadding: 10,
                  lineHeight: 1.65,
                  fontSize: size,
                },
              }
            )
          )
        ),
        Plot.text(
          stadiumDataRaw,
          Plot.filter(
            (D) => D.length > 200,
            Plot.stackX(
              {order: "x", reverse: true},
              Plot.groupZ(
                {x: "proportion", text: "first"},
                {z: "kind", text: "kind", rotate: (D) => D.length >= 1000 ? 0 : 90, fontSize: (D) => D.length >= 1000 ? size : size-2}
              )
            )
          )
        ),
        Plot.ruleX([0, 1])
      ]
    };

    var usabars ={
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      height: 100,
      marginLeft: width/100,
      marginRight: width/100,
      marginTop: 10,
      marginBottom: 10,
      color: { legend: false, scheme: scheme},
      x: {percent: true, ticks: null, tickSize: 0, axis: null},
      marks: [
        Plot.barX(
          stadiumsUSA,
          Plot.stackX(
            {order: "x", reverse: true},
            Plot.groupZ(
              {x: "proportion"},
              {z: "kind", fill: "kind", fillOpacity: 0.72, inset: 0.5, tip: true}
            )
          )
        ),
        Plot.text(
          stadiumDataRaw.filter(d => (d.country === "USA")),
          Plot.filter(
            (D) => D.length > 20,
            Plot.stackX(
              {order: "x", reverse: true},
              Plot.groupZ(
                {x: "proportion", text: "first"},
                {z: "kind", text: "kind", rotate: (D) => D.length >= 60 ? 0 : 90}
              )
            )
          )
        ),
        Plot.ruleX([0, 1])
      ]
    };

    var koreabars ={
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      height: 100,
      marginLeft: width/100,
      marginRight: width/100,
      marginTop: 10,
      marginBottom: 10,
      color: { legend: false, scheme: scheme},
      x: {percent: true, ticks: null, tickSize: 0, axis: null},
      marks: [
        Plot.barX(
          stadiumsKOR,
          Plot.stackX(
            {order: "x", reverse: true},
            Plot.groupZ(
              {x: "proportion"},
              {z: "kind", fill: "kind", fillOpacity: 0.72, inset: 0.5, tip: true}
            )
          )
        ),
        Plot.text(
          stadiumsKOR,
          Plot.filter(
            (D) => D.length > 10,
            Plot.stackX(
              {order: "x", reverse: true},
              Plot.groupZ(
                {x: "proportion", text: "first"},
                {z: "kind", text: "kind", rotate: (D) => D.length >= 20 ? 0 : 90}
              )
            )
          )
        ),
        Plot.ruleX([0, 1])
      ]
    };

    var indbars ={
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      height: 100,
      marginLeft: width/100,
      marginRight: width/100,
      marginTop: 10,
      marginBottom: 10,
      color: { legend: false, scheme: scheme},
      x: {percent: true, ticks: null, tickSize: 0, axis: null},
      marks: [
        Plot.barX(
          stadiumsIND,
          Plot.stackX(
            {order: "x", reverse: true},
            Plot.groupZ(
              {x: "proportion"},
              {z: "kind", fill: "kind", fillOpacity: 0.72, inset: 0.5, tip: true}
            )
          )
        ),
        Plot.text(
          stadiumsIND,
          Plot.filter(
            (D) => D.length > 10,
            Plot.stackX(
              {order: "x", reverse: true},
              Plot.groupZ(
                {x: "proportion", text: "first"},
                {z: "kind", text: "kind", rotate: (D) => D.length >= 20 ? 0 : 90}
              )
            )
          )
        ),
        Plot.ruleX([0, 1])
      ]
    };

    var irebars ={
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      height: 100,
      marginLeft: width/100,
      marginRight: width/100,
      marginTop: 10,
      marginBottom: 10,
      color: { legend: false, scheme: scheme},
      x: {percent: true, ticks: null, tickSize: 0, axis: null},
      marks: [
        Plot.barX(
          stadiumsIRL,
          Plot.stackX(
            {order: "x", reverse: true},
            Plot.groupZ(
              {x: "proportion"},
              {z: "kind", fill: "kind", fillOpacity: 0.72, inset: 0.5, tip: true}
            )
          )
        ),
        Plot.text(
          stadiumsIRL,
          Plot.filter(
            (D) => D.length > 10,
            Plot.stackX(
              {order: "x", reverse: true},
              Plot.groupZ(
                {x: "proportion", text: "first"},
                {z: "kind", text: "kind", rotate: (D) => D.length >= 10 ? 0 : 90}
              )
            )
          )
        ),
        Plot.ruleX([0, 1])
      ]
    };

    document.getElementById("worldmap").appendChild(Plot.plot(worldmap));
    document.getElementById("indiana").appendChild(Plot.plot(indiana));
    document.getElementById("korea").appendChild(Plot.plot(korea));
    document.getElementById("ireland").appendChild(Plot.plot(ireland));
    document.getElementById("india").appendChild(Plot.plot(india));
    document.getElementById("worldbars").appendChild(Plot.plot(worldbars));
    document.getElementById("usabars").appendChild(Plot.plot(usabars));
    document.getElementById("koreabars").appendChild(Plot.plot(koreabars));
    document.getElementById("irebars").appendChild(Plot.plot(irebars));
    document.getElementById("indbars").appendChild(Plot.plot(indbars));
  });
</script>
</body>
</html>