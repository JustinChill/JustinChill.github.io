<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
  <title>NASA 2026 Budget Analysis</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Visualizing the impact of the proposed FY 2026 NASA Budget.">
  <meta name="author" content="Justin Chill">
  <!-- OpenGraph tags -->
  <meta name="robots" content="all">
  <meta content="en_US" property="og:locale">
  <meta content="JustinChill" property="og:site_name">
  <meta content="article" property="og:type">
  <meta content="https://justinchill.com/space-2026.html" property="og:url">
  <meta content="NASA 2026 Budget Analysis" property="og:title">
  <meta content="Visualizing the impact of the proposed FY 2026 NASA Budget." property="og:description">
  <meta content="https://www.justinchill.com/blog.html" property="og:see_also">
  <link rel="canonical" href="https://www.justinchill.com/space-2026.html">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="NASA 2026 Budget Analysis">
  <meta name="twitter:description" content="Visualizing the impact of the proposed FY 2026 NASA Budget.">

  <link type="text/plain" href="humans.txt" rel="author">
  <link rel="preload" href="style.css" as="style" />
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="/favicon.ico">
  <meta name="theme-color" content="#4C63B6">

  <script type="module">
    document.documentElement.classList.remove('no-js');
    document.documentElement.classList.add('js');
  </script>

  <style type="text/css">
    figure {
      margin-bottom: 2rem;
    }

    figcaption {
      text-align: right;
      font-size: small;
      color: slategray;
    }
  </style>
</head>

<body>
  <nav class="nav" role="navigation">
    <div class="nav__list">
      <a href="index.html" class="nav__item" aria-label="Homepage">Home</a>
      <a href="blog.html" class="nav__item" aria-label="Blog section">Blog</a>
      <a href="now.html" class="nav__item" aria-label="Now page">Now</a>
    </div>
    <div class="nav__list">
      <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
      <a href="#" class="nav__item js-email-link">Email</a>
    </div>
  </nav>

  <main role="main">
    <article>
      <div class="article-hero">
        <h2 class="article-category">Space</h2>
        <h1 class="article-title">NASA FY 2026 Budget Analysis</h1>
        <h2 class="article-subtitle">Visualizing the proposed cuts and their historical context</h2>
      </div>

      <p>The proposed FY 2026 budget for NASA presents significant challenges and reductions across the agency. Below is
        a visual breakdown of the situation.</p>

      <!-- Chart 8: Active Mission Cancellations -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>19 active science missions cancelled</h3>
      <figure id="chart-mission-cancellations">
        <figcaption>These projects reflect more than $12 billion of investment by U.S. taxpayers.</figcaption>
      </figure>

      <!-- Chart 10: Relative Budget Request -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>The largest cut to NASA ever proposed</h3>
      <figure id="chart-relative-budget">
        <figcaption>The White House's 2026 budget proposes a 25% cut from the prior year - the largest ever.
        </figcaption>
      </figure>

      <!-- Batch 4: Politics & Comparison -->
      <!-- Chart 6: Request vs Appropriation -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>NASA's historical PBR request vs. congressional appropriation</h3>
      <figure id="chart-pbr-vs-approp">
        <figcaption>Except in the aftermath of Challenger, Congress has never exceeded a NASA budget proposal by more
          than 9%.</figcaption>
      </figure>

      <!-- Chart 7: Congress vs White House -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>Congress rejects massive NASA cuts</h3>
      <figure id="chart-congress-vs-wh">
        <figcaption>The President's Budget Request (PBR) proposed the largest cut in history, but Congress wants to
          maintain funding.</figcaption>
      </figure>

      <!-- Batch 1: High-level Budget & Workforce -->
      <!-- Chart 2: Workforce Cuts -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>The smallest NASA workforce since 1960</h3>
      <figure id="chart-workforce">
        <figcaption> The White House's 2026 budget proposal cuts NASA's workforce to levels not seen since the dawn of
          the space age.</figcaption>
      </figure>

      <!-- Chart 3: Historical Budget (Inflation Adjusted) -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>The smallest NASA budget since 1961</h3>
      <figure id="chart-budget-adj">
        <figcaption>The White House proposed NASA budget, adjusted for inflation, is the lowest since the start of human
          spaceflight.</figcaption>
      </figure>

      <!-- Chart 9: NASA in Federal Budget -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>NASA is a fraction of U.S. spending</h3>
      <figure id="chart-federal-share">
        <figcaption>One small block for NASA ($18.8 billion), one giant expenditure for everything else ($6.8 trillion).
        </figcaption>
      </figure>

      <!-- Chart 13: Map of Cuts -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>NASA faces nation-wide workforce cuts</h3>
      <figure id="chart-map-cuts">
        <figcaption>The White House's 2026 budget proposal slashes staffing at each of the agency's 10 field centers by
          22% - 45%.</figcaption>
      </figure>

      <!-- Chart 15: Historical Budget Long Term -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>How NASA's budget has changed over time</h3>
      <figure id="chart-budget-history">
        <figcaption>After its peak during Apollo, NASA's inflation-adjusted budget has held relatively steady, though
          that may change.</figcaption>
      </figure>

      <!-- Batch 2: Departmental Cuts -->
      <!-- Chart 5: Proposed Cuts by Directorate -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>Cuts are proposed across NASA</h3>
      <figure id="chart-directorate-cuts">
        <figcaption>The FY 2026 White House Budget impacts all parts of NASA - except human exploration beyond Earth.
        </figcaption>
      </figure>

      <!-- Chart 12: Budget Breakdown -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>NASA's budget is subdivided by mission area</h3>
      <figure id="chart-budget-breakdown">
        <figcaption>Directorates are responsible for distinct activities - from science to facilities - and they don't
          share funding.</figcaption>
      </figure>

      <!-- Chart 11: Science Division Crisis -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>All NASA sciences face severe cuts in 2026</h3>
      <figure id="chart-science-crisis">
        <figcaption>The White House would slash result divisions from 30% to 66%, reducing some to historic lows when
          adjusted for inflation.</figcaption>
      </figure>

      <!-- Chart 14: Overall Science Crisis -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>The biggest science cut in NASA history</h3>
      <figure id="chart-overall-science">
        <figcaption>The proposed 47% reduction would result in the smallest science budget since 1984, when adjusted for
          inflation.</figcaption>
      </figure>

      <!-- New Chart: Sprint to Moon -->
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>A five year sprint to the Moon?</h3>
      <figure id="chart-sprint-moon">
        <figcaption>Source: Official Reporting. Details: Planet.ly/hsfdevtimes</figcaption>
      </figure>

    </article>
  </main>

  <footer>
    <div>
      <p>Justin Chill &copy; 2026</p>
      <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img src="imgs/github.svg"
            alt="GitHub logo" class="icon">Source code</a></span>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6"></script>
  <script src="https://cdn.jsdelivr.net/npm/topojson@3"></script>

  <script type="text/javascript">
    // Chart 2: Workforce History
    const workforceData = [
      { year: 1960, employees: 8000 }, { year: 1961, employees: 9000 }, { year: 1962, employees: 12000 },
      { year: 1963, employees: 20000 }, { year: 1964, employees: 30000 }, { year: 1965, employees: 33000 },
      { year: 1966, employees: 35000 }, { year: 1967, employees: 35800 }, { year: 1968, employees: 35000 },
      { year: 1969, employees: 34000 }, { year: 1970, employees: 32000 }, { year: 1971, employees: 29000 },
      { year: 1972, employees: 27000 }, { year: 1973, employees: 26000 }, { year: 1974, employees: 25500 },
      { year: 1975, employees: 25000 }, { year: 1976, employees: 24000 }, { year: 1977, employees: 23500 },
      { year: 1978, employees: 23000 }, { year: 1979, employees: 22000 }, { year: 1980, employees: 22500 },
      { year: 1981, employees: 22000 }, { year: 1982, employees: 22000 }, { year: 1983, employees: 21500 },
      { year: 1984, employees: 21800 }, { year: 1985, employees: 21500 }, { year: 1986, employees: 21000 },
      { year: 1987, employees: 21500 }, { year: 1988, employees: 21800 }, { year: 1989, employees: 22500 },
      { year: 1990, employees: 23000 }, { year: 1991, employees: 24000 }, { year: 1992, employees: 25000 },
      { year: 1993, employees: 25500 }, { year: 1994, employees: 25000 }, { year: 1995, employees: 24000 },
      { year: 1996, employees: 22000 }, { year: 1997, employees: 20000 }, { year: 1998, employees: 19000 },
      { year: 1999, employees: 18500 }, { year: 2000, employees: 18200 }, { year: 2001, employees: 18500 },
      { year: 2002, employees: 18500 }, { year: 2003, employees: 18500 }, { year: 2004, employees: 18600 },
      { year: 2005, employees: 18700 }, { year: 2006, employees: 18500 }, { year: 2007, employees: 18000 },
      { year: 2008, employees: 18000 }, { year: 2009, employees: 18200 }, { year: 2010, employees: 18100 },
      { year: 2011, employees: 18400 }, { year: 2012, employees: 18600 }, { year: 2013, employees: 18000 },
      { year: 2014, employees: 17800 }, { year: 2015, employees: 17500 }, { year: 2016, employees: 17000 },
      { year: 2017, employees: 17100 }, { year: 2018, employees: 17200 }, { year: 2019, employees: 17000 },
      { year: 2020, employees: 17500 }, { year: 2021, employees: 17900 }, { year: 2022, employees: 17700 },
      { year: 2023, employees: 17700 }, { year: 2024, employees: 17800 }, { year: 2025, employees: 15000 },
      { year: 2026, employees: 11853, type: "Proposed" }
    ];

    // Chart 2: Workforce Plot
    const workforcePlot = Plot.plot({
      marks: [
        Plot.lineY(workforceData.filter(d => d.year <= 2025), { x: "year", y: "employees", stroke: "#0072CE", strokeWidth: 3 }),
        Plot.lineY(workforceData.filter(d => d.year >= 2025), { x: "year", y: "employees", stroke: "#ff4d4d", strokeWidth: 3 }),
        Plot.dot(workforceData.filter(d => d.year === 2026), { x: "year", y: "employees", fill: "#ff4d4d", r: 4 }),

        // "Lowest since 1960" Annotation
        Plot.ruleY([11853], { stroke: "gray", strokeDasharray: "4,4" }),
        Plot.text([{ year: 1990, employees: 11853 }], { x: "year", y: "employees", text: ["Lowest since 1960"], dy: -5, fill: "black", dx: 0, frameAnchor: "middle" }),

        // Label for 2026 Proposal (Legend-like)
        Plot.text([{ year: 2015, employees: 4000 }], { x: "year", y: "employees", text: ["— 2026 White House proposal"], fill: "#ff4d4d", textAnchor: "start" })

      ],
      y: { label: null, grid: true, domain: [0, 40000] },
      x: { label: null, tickFormat: "d", grid: false }
    });
    document.getElementById("chart-workforce").appendChild(workforcePlot);

    // Chart 3 & 15: Historical Budget (Inflation Adjusted 2024 $B)
    const budgetData = [
      { year: 1960, budget: 5 }, { year: 1965, budget: 45 }, { year: 1966, budget: 50 }, // Peak
      { year: 1970, budget: 25 }, { year: 1975, budget: 20 }, { year: 1980, budget: 18 },
      { year: 1985, budget: 22 }, { year: 1990, budget: 25 }, { year: 1995, budget: 22 },
      { year: 2000, budget: 21 }, { year: 2005, budget: 20 }, { year: 2010, budget: 21 },
      { year: 2015, budget: 22 }, { year: 2020, budget: 25 }, { year: 2024, budget: 25.4 },
      { year: 2026, budget: 18.8, type: "Proposed" }
    ];

    // Chart 5: Directorate Cuts
    const directorateData = [
      { name: "Exploration", value: 7.6, type: "FY2025 Enacted" },
      { name: "Exploration", value: 8.0, type: "FY2026 Proposed" },
      { name: "Science", value: 7.3, type: "FY2025 Enacted" },
      { name: "Science", value: 3.9, type: "FY2026 Proposed" },
      { name: "Space Ops", value: 4.2, type: "FY2025 Enacted" },
      { name: "Space Ops", value: 2.7, type: "FY2026 Proposed" },
      { name: "Space Tech", value: 1.1, type: "FY2025 Enacted" },
      { name: "Space Tech", value: 0.6, type: "FY2026 Proposed" },
      { name: "Aero", value: 0.9, type: "FY2025 Enacted" },
      { name: "Aero", value: 0.9, type: "FY2026 Proposed" },
      { name: "STEM", value: 0.14, type: "FY2025 Enacted" },
      { name: "STEM", value: 0.0, type: "FY2026 Proposed" }
    ];

    // Chart 12: Pie Chart Breakdown (D3.js Donut)
    const donutData = [
      { name: "Deep Space Exploration Systems", value: 31.1, color: "#ff4d4d" },
      { name: "Science", value: 29.7, color: "#0072CE" },
      { name: "LEO Space Operations", value: 17.1, color: "#7CA1CC" },
      { name: "Facilities, IT, & Salaries", value: 13.9, color: "#444444" },
      { name: "Space Technology", value: 4.5, color: "#A894C2" },
      { name: "Aeronautics", value: 3.8, color: "#542E71" }
    ];

    const chartBreakdown = document.getElementById("chart-budget-breakdown");
    chartBreakdown.innerHTML = ""; // Clear placeholder

    const widthPie = 600;
    const heightPie = 450;
    const radius = Math.min(widthPie, heightPie) / 2 * 0.7; // Smaller radius for labels

    const svgPie = d3.create("svg")
      .attr("viewBox", [-widthPie / 2, -heightPie / 2, widthPie, heightPie])
      .attr("style", "max-width: 100%; height: auto;");

    const arcPie = d3.arc()
      .innerRadius(radius * 0.6)
      .outerRadius(radius - 1);

    const outerArc = d3.arc()
      .innerRadius(radius * 1.1)
      .outerRadius(radius * 1.1);

    const pieGen = d3.pie()
      .sort(null)
      .value(d => d.value);

    const arcs = pieGen(donutData);

    // Slices
    svgPie.selectAll("path")
      .data(arcs)
      .join("path")
      .attr("fill", d => d.data.color)
      .attr("d", arcPie)
      .append("title")
      .text(d => `${d.data.name}: ${d.data.value.toLocaleString()}%`);

    // Center Text
    svgPie.append("text")
      .attr("text-anchor", "middle")
      .attr("dy", "0.3em")
      .style("font-size", "24px")
      .style("font-weight", "bold")
      .text("NASA");

    // Labels
    svgPie.selectAll("text.label")
      .data(arcs)
      .join("text")
      .attr("class", "label")
      .attr("transform", d => {
        const pos = outerArc.centroid(d);
        const midAngle = d.startAngle + (d.endAngle - d.startAngle) / 2;
        pos[0] = radius * 1.2 * (midAngle < Math.PI ? 1 : -1);
        return `translate(${pos})`;
      })
      .style("text-anchor", d => {
        const midAngle = d.startAngle + (d.endAngle - d.startAngle) / 2;
        return midAngle < Math.PI ? "start" : "end";
      })
      .style("font-size", "12px")
      .style("font-family", "sans-serif")
      .call(text => text.append("tspan")
        .attr("y", "-0.4em")
        .attr("font-weight", "bold")
        .text(d => d.data.name))
      .call(text => text.append("tspan")
        .attr("x", 0)
        .attr("y", "0.9em")
        .text(d => `(${d.data.value}%)`));

    // Polylines
    svgPie.selectAll("polyline")
      .data(arcs)
      .join("polyline")
      .attr("stroke", "black")
      .attr("stroke-width", 1)
      .attr("fill", "none")
      .attr("points", d => {
        const posA = arcPie.centroid(d); // Start at slice
        const posB = outerArc.centroid(d); // Go to outer arc radius
        const midAngle = d.startAngle + (d.endAngle - d.startAngle) / 2;
        const posC = outerArc.centroid(d);
        posC[0] = radius * 1.15 * (midAngle < Math.PI ? 1 : -1); // Go to label side
        return [posA, posB, posC];
      });

    chartBreakdown.appendChild(svgPie.node());
    // Approximated curves for sub-disciplines
    const years = d3.range(2000, 2027);
    const scienceData = [];

    years.forEach(y => {
      // Base sine wave + trend
      let base = 1.0 + Math.sin((y - 2000) * 0.3) * 0.2;

      let astro = base * 0.8;
      let planetary = base * 1.2;
      let earth = base * 1.0;
      let helio = base * 0.4;

      if (y > 2024) {
        astro *= 0.34; // -66%
        planetary *= 0.68; // -32%
        earth *= 0.48; // -52%
        helio *= 0.54; // -46%
      }

      scienceData.push({ year: y, field: "Astrophysics", value: astro });
      scienceData.push({ year: y, field: "Planetary Science", value: planetary });
      scienceData.push({ year: y, field: "Earth Science", value: earth });
      scienceData.push({ year: y, field: "Heliophysics", value: helio });
    });

    // Chart 3: Historical Budget
    const budgetPlot = Plot.plot({
      marks: [
        Plot.lineY(budgetData.filter(d => !d.type), { x: "year", y: "budget", stroke: "steelblue" }),
        Plot.lineY(budgetData, { x: "year", y: "budget", stroke: "orange", strokeDasharray: "4,4", filter: d => d.year >= 2024 }),
        Plot.dot(budgetData, { x: "year", y: "budget", fill: d => d.type === "Proposed" ? "orange" : "steelblue", tip: true })
      ],
      y: { label: "Budget ($B Adjusted)", grid: true, transform: d => d },
      x: { label: "Year", tickFormat: "d" }
    });
    document.getElementById("chart-budget-adj").appendChild(budgetPlot);
    document.getElementById("chart-budget-history").appendChild(budgetPlot.cloneNode(true)); // Reusing for now as placeholder for Chart 15

    // Chart 9: Federal Share (Waffle/Square)
    const waffleData = Array.from({ length: 1000 }, (_, i) => ({
      index: i,
      category: i < 4 ? "NASA (0.37%)" : "Non-NASA U.S. Spending (99.63%)"
    }));

    const federalPlot = Plot.plot({
      height: 400,
      width: 400,
      x: { axis: null },
      y: { axis: null },
      marks: [
        Plot.rect(waffleData, {
          x: d => d.index % 25, // 25 columns -> 40 rows = 1000 squares
          y: d => Math.floor(d.index / 25),
          fill: d => d.category === "NASA (0.37%)" ? "#0072CE" : "#e0e0e0",
          title: "category",
          inset: 0.5
        })
      ],
      color: { legend: true, domain: ["NASA (0.37%)", "Non-NASA U.S. Spending (99.63%)"], range: ["#0072CE", "#e0e0e0"] }
    });
    document.getElementById("chart-federal-share").appendChild(federalPlot);

    // Chart 13: Map of Cuts
    d3.json("data/geo/us-states-10m.json").then(us => {
      const container = document.getElementById("chart-map-cuts");
      container.innerHTML = ""; // Clear placeholder

      const width = 975;
      const height = 610;
      const svg = d3.create("svg")
        .attr("viewBox", [0, 0, width, height])
        .attr("style", "max-width: 100%; height: auto;");

      const projection = d3.geoAlbersUsa()
        .scale(1300)
        .translate([width / 2, height / 2]);

      const path = d3.geoPath(projection);

      // Draw States
      svg.append("g")
        .selectAll("path")
        .data(topojson.feature(us, us.objects.states).features)
        .join("path")
        .attr("fill", "#e0e0e0")
        .attr("d", path)
        .attr("stroke", "white")
        .attr("stroke-width", 1)
        .attr("stroke-linejoin", "round");

      // Centers Data (Approximated cuts from image)
      const centers = [
        { name: "ARC", cut: 38, lat: 37.415, lon: -122.058, dx: -25, dy: -10 },
        { name: "AFRC", cut: 38, lat: 34.95, lon: -117.883, dx: 25, dy: 10 },
        { name: "JSC", cut: 21, lat: 29.559, lon: -95.097, dx: -25, dy: -5 },
        { name: "SSC", cut: 39, lat: 30.367, lon: -89.666, dx: 20, dy: 20 },
        { name: "MSFC", cut: 23, lat: 34.645, lon: -86.653, dx: -25, dy: -10 },
        { name: "KSC", cut: 25, lat: 28.572, lon: -80.648, dx: 25, dy: -5 },
        { name: "GRC", cut: 40, lat: 41.413, lon: -81.869, dx: -10, dy: 25 },
        // Expanded East Coast (Callouts visually simplified for now)
        { name: "GSFC", cut: 46, lat: 38.995, lon: -76.852, dx: 40, dy: -30 }, // Pulled out
        { name: "HQ", cut: 26, lat: 38.883, lon: -77.009, dx: 40, dy: 0 },
        { name: "LaRC", cut: 39, lat: 37.085, lon: -76.380, dx: 40, dy: 30 }
      ];

      // Pie Generator
      const pie = d3.pie().sort(null).value(d => d.value);
      const arc = d3.arc().innerRadius(0).outerRadius(25); // Increased size

      // Draw Centers
      const g = svg.append("g");

      centers.forEach(d => {
        const [x, y] = projection([d.lon, d.lat]);
        const centerG = g.append("g").attr("transform", `translate(${x},${y})`);

        const pieData = [
          { value: d.cut, color: "#ff4d4d", label: "Cut" },
          { value: 100 - d.cut, color: "#0072CE", label: "Keep" }
        ];

        // Pie Slices
        centerG.selectAll("path")
          .data(pie(pieData))
          .join("path")
          .attr("d", arc)
          .attr("fill", d => d.data.color)
          .attr("stroke", "white")
          .attr("stroke-width", 1);

        // Label with background
        const labelG = centerG.append("g")
          .attr("transform", `translate(0, 0)`); // Centered on pie

        // Text Outline/Halo for readability
        centerG.append("text")
          .text(d.name)
          .attr("text-anchor", "middle")
          .attr("dy", "0.35em")
          .attr("font-weight", "bold")
          .attr("fill", "white")
          .style("font-size", "12px")
          .style("pointer-events", "none")
          .attr("stroke", "none");

        // Percentage Label (Badge style)
        centerG.append("rect")
          .attr("x", 12)
          .attr("y", -14)
          .attr("width", 28)
          .attr("height", 14)
          .attr("rx", 3)
          .attr("fill", "white")
          .attr("stroke", "#ff4d4d")
          .attr("stroke-width", 1);

        centerG.append("text")
          .text(`${d.cut}%`)
          .attr("x", 26)
          .attr("y", -3)
          .attr("text-anchor", "middle")
          .attr("fill", "#ff4d4d")
          .style("font-size", "9px")
          .style("font-weight", "bold");
      });

      // Legend
      const legend = svg.append("g").attr("transform", "translate(20, 550)");

      legend.append("rect").attr("width", 20).attr("height", 10).attr("fill", "#0072CE");
      legend.append("text").attr("x", 25).attr("y", 10).text("Workforce Remaining").style("font-family", "sans-serif").style("font-size", "12px");

      legend.append("rect").attr("width", 20).attr("height", 10).attr("y", 20).attr("fill", "#ff4d4d");
      legend.append("text").attr("x", 25).attr("y", 30).text("Proposed Staff Cuts").style("font-family", "sans-serif").style("font-size", "12px");

      container.appendChild(svg.node());
    });

    // Chart 8: Mission Cancellations (Timeline)
    const cancelledMissions = [
      { name: "Terra", start: 1999 }, { name: "Chandra", start: 1999 },
      { name: "ODY", start: 2001 }, { name: "TIMED", start: 2001 },
      { name: "Aqua", start: 2002 }, { name: "Aura", start: 2004 },
      { name: "New Horizons", start: 2006 }, { name: "THEMIS-ARTEMIS", start: 2007 },
      { name: "Fermi", start: 2008 }, { name: "IBEX", start: 2008 },
      { name: "Juno", start: 2011 }, { name: "MAVEN", start: 2013 },
      { name: "OCO-2", start: 2014 }, { name: "DSCOVR", start: 2015 },
      { name: "MMS", start: 2015 }, { name: "OSIRIS-APEX", start: 2016 },
      { name: "SAGE-III", start: 2017 }, { name: "GOLD", start: 2018 },
      { name: "OCO-3", start: 2019 }
    ];

    // Creating a dumbbell / range plot
    const cancelPlot = Plot.plot({
      marginRight: 120,
      x: { tickFormat: "d", label: "Year", nice: true, grid: true },
      y: { axis: null, domain: cancelledMissions.map(d => d.name) }, // Preserve order
      marks: [
        // Blue line connecting start to 2026
        Plot.link(cancelledMissions, { x1: "start", x2: 2026, y1: "name", y2: "name", stroke: "#0072CE", strokeWidth: 3 }),
        // Blue dot at start
        Plot.dot(cancelledMissions, { x: "start", y: "name", fill: "#0072CE", r: 5 }),
        // Red X at end (2026)
        Plot.text(cancelledMissions, { x: 2026, y: "name", text: d => "✖", fill: "red", fontSize: 16, dx: -2, fontWeight: "bold" }),
        // Mission Labels on right
        Plot.text(cancelledMissions, { x: 2026, y: "name", text: "name", dx: 15, textAnchor: "start" })
      ]
    });
    document.getElementById("chart-mission-cancellations").appendChild(cancelPlot);

    // Chart 10: Relative Budget Request (% Change)
    const relativeData = [
      { year: 1960, change: 0.53 }, { year: 1961, change: 0.84 }, { year: 1962, change: 1.01 },
      { year: 1963, change: 1.08 }, { year: 1964, change: 0.55 }, { year: 1965, change: 0.08 },
      { year: 1966, change: 0.00 }, { year: 1967, change: -0.05 }, { year: 1968, change: -0.08 },
      { year: 1969, change: -0.09 }, { year: 1970, change: -0.12 }, { year: 1971, change: 0.02 },
      { year: 1972, change: -0.10 }, { year: 1973, change: 0.05 }, { year: 1974, change: 0.08 },
      { year: 1975, change: 0.06 }, { year: 1976, change: 0.14 }, { year: 1977, change: 0.10 },
      { year: 1978, change: 0.12 }, { year: 1979, change: 0.10 }, { year: 1980, change: 0.05 },
      { year: 1981, change: 0.06 }, { year: 1982, change: 0.07 }, { year: 1983, change: 0.04 },
      { year: 1984, change: 0.00 }, { year: 1985, change: -0.05 }, { year: 1986, change: -0.08 }, // Dip
      { year: 1987, change: 0.00 }, { year: 1988, change: 0.15 }, // Recovery
      { year: 1989, change: 0.29 }, { year: 1990, change: 0.23 }, { year: 1991, change: 0.24 }, // 90s Spike
      { year: 1992, change: 0.12 }, { year: 1993, change: 0.04 }, { year: 1994, change: 0.06 },
      { year: 1995, change: -0.03 }, { year: 1996, change: 0.04 }, { year: 1997, change: -0.01 },
      { year: 1998, change: -0.01 }, { year: 1999, change: -0.01 }, { year: 2000, change: 0.03 },
      { year: 2001, change: 0.01 }, { year: 2002, change: 0.01 }, { year: 2003, change: 0.06 },
      { year: 2004, change: 0.01 }, { year: 2005, change: 0.01 }, { year: 2006, change: 0.06 },
      { year: 2007, change: 0.01 }, { year: 2008, change: 0.02 }, { year: 2009, change: 0.02 },
      { year: 2010, change: 0.00 }, { year: 2011, change: -0.01 }, { year: 2012, change: 0.00 },
      { year: 2013, change: 0.05 }, { year: 2014, change: 0.00 }, { year: 2015, change: 0.02 },
      { year: 2016, change: -0.01 }, { year: 2017, change: -0.02 }, { year: 2018, change: -0.03 },
      { year: 2019, change: 0.05 }, { year: 2020, change: 0.12 }, { year: 2021, change: 0.03 },
      { year: 2022, change: 0.08 }, { year: 2023, change: 0.07 }, { year: 2024, change: 0.02 },
      { year: 2025, change: 0.00 }, { year: 2026, change: -0.25, type: "Proposed" }
    ];

    const relativePlot = Plot.plot({
      grid: true,
      marks: [
        Plot.barY(relativeData, { x: "year", y: "change", fill: d => d.change > 0 ? "steelblue" : "#ff4d4d" }),
        Plot.ruleY([0])
      ],
      y: { percent: true, label: "% change of proposed budget from prior year" },
      x: { tickFormat: "d", tickRotate: -90 },
      color: { legend: false }
    });
    document.getElementById("chart-relative-budget").appendChild(relativePlot);

    // Chart 6: PBR vs Appropriation
    const pbrData = [
      { year: 2020, value: 22, type: "Request" }, { year: 2020, value: 25, type: "Appropriation" },
      { year: 2022, value: 24, type: "Request" }, { year: 2022, value: 24, type: "Appropriation" },
      { year: 2024, value: 27, type: "Request" }, { year: 2024, value: 25.4, type: "Appropriation" },
      { year: 2026, value: 18.8, type: "Request" }
    ];

    const pbrPlot = Plot.plot({
      marks: [
        Plot.lineY(pbrData, { x: "year", y: "value", stroke: "type", marker: "circle" }),
        Plot.text(pbrData, { x: "year", y: "value", text: "value", dy: -10 })
      ],
      color: { legend: true }
    });
    document.getElementById("chart-pbr-vs-approp").appendChild(pbrPlot);


    // Chart 7: Congress vs White House
    const congressData = [
      { body: "PBR (Proposed)", value: 18.8 },
      { body: "House", value: 25.2 },
      { body: "Senate", value: 25.4 }
    ];

    const congressPlot = Plot.plot({
      marks: [
        Plot.barY(congressData, { x: "body", y: "value", fill: "body" }),
        Plot.text(congressData, { x: "body", y: "value", text: "value", dy: -5, fill: "white" })
      ]
    });
    document.getElementById("chart-congress-vs-wh").appendChild(congressPlot);

    // Chart 5: Directorate Cuts
    const dirPlot = Plot.plot({
      y: { grid: true },
      x: { axis: null },
      fx: { label: null },
      color: { legend: true },
      marks: [
        Plot.barY(directorateData, { x: "type", y: "value", fx: "name", fill: "type" }),
        Plot.ruleY([0])
      ]
    });
    document.getElementById("chart-directorate-cuts").appendChild(dirPlot);

    // Chart 11: Science Division Crisis
    const sciencePlot = Plot.plot({
      grid: true,
      marks: [
        Plot.lineY(scienceData, { x: "year", y: "value", fx: "field", stroke: "steelblue" }),
        Plot.lineY(scienceData.filter(d => d.year >= 2025), { x: "year", y: "value", fx: "field", stroke: "orange" })
      ]
    });
    document.getElementById("chart-science-crisis").appendChild(sciencePlot);

    // Chart 14: Overall Science Crisis
    const overallScience = d3.rollups(scienceData, v => d3.sum(v, d => d.value), d => d.year)
      .map(([year, value]) => ({ year, value }));

    const overallSciencePlot = Plot.plot({
      grid: true,
      marks: [
        Plot.lineY(overallScience.filter(d => d.year <= 2025), { x: "year", y: "value", stroke: "steelblue" }),
        Plot.lineY(overallScience.filter(d => d.year >= 2025), { x: "year", y: "value", stroke: "orange" })
      ]
    });
    document.getElementById("chart-overall-science").appendChild(overallSciencePlot);

    // Chart 15: Sprint to Moon
    const sprintData = [
      { vehicle: "Mercury", years: 2.3 },
      { vehicle: "Gemini", years: 3.3 },
      { vehicle: "New HLS Entrant (by 2030)", years: 5.0, type: "Highlight" },
      { vehicle: "Crew Dragon", years: 5.7 },
      { vehicle: "Blue Moon HLS (by 2029)", years: 6.6 },
      { vehicle: "Apollo LM", years: 6.7 },
      { vehicle: "Starship HLS (by 2027)", years: 6.7 },
      { vehicle: "Apollo CSM", years: 6.9 },
      { vehicle: "Shuttle Orbiter", years: 8.7 },
      { vehicle: "Starliner", years: 9.7 },
      { vehicle: "Orion (Artemis II)", years: 19.4 }
    ];

    const sprintPlot = Plot.plot({
      subtitle: "A new entrant to provide crewed landings for NASA's Artemis program by 2030 has five years to design and build their spacecraft. A feat not accomplished since the early 1960s.",
      marginLeft: 150,
      x: { grid: true, label: "Years from prime contract award to first crewed flight" },
      y: { label: null, domain: sprintData.map(d => d.vehicle) }, // Preserving order
      marks: [
        Plot.barX(sprintData, { y: "vehicle", x: "years", fill: d => d.type === "Highlight" ? "#ff4d4d" : "gray" }),
        Plot.text(sprintData, { y: "vehicle", x: "years", text: d => `${d.years} yrs`, dx: 5, textAnchor: "start" })
      ]
    });
    document.getElementById("chart-sprint-moon").appendChild(sprintPlot);

  </script>
</body>

</html>