<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
  <title>The Titanic Survival Analysis</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Data visualizations of the RMS Titanic disaster.">
  <meta name="author" content="Justin Chill">
  <!-- OpenGraph tags -->
  <meta name="keywords" content="titanic, RMS, data visualization, disaster, chart, graphic detail, graph,">
  <meta name="robots" content="all">
  <meta content="en_US" property="og:locale">
  <meta content="JustinChill" property="og:site_name">
  <meta content="website" property="og:type">
  <meta content="https://justinchill.com/titanic.html" property="og:url">
  <meta content="The Titanic Survival Analysis." property="og:title">
  <meta content="Data visualizations of the RMS Titanic disaster." property="og:description">
  <meta content="https://www.justinchill.com/blog.html" property="og:see_also">
  <link rel="canonical" href="https://www.justinchill.com/titanic.html">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="The Titanic Survival Analysis.">
  <meta name="twitter:description" content="Data visualizations of the RMS Titanic disaster.">

  <link type="text/plain" href="humans.txt" rel="author">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="/favicon.ico">

  <meta name="theme-color" content="#4C63B6">

  <script type="module">
    document.documentElement.classList.remove('no-js');
    document.documentElement.classList.add('js');
  </script>

  <style>
picture svg {
    width: 90%;
    max-height: 90%;
  }
  /* Try to animate ship & iceberg from this Codepen: https://codepen.io/maciekmaciej/pen/qjoZeR */
  #titanic-ship{
    animation-name: rotate;
    animation-duration: 3s;
    animation-iteration-count: infinite;
    animation-direction: alternate;
    transform-origin: center;
    animation-timing-function: ease-in-out;
  }
  #titanic-wave-fg{
    animation-name: move;
    animation-duration: 3s;
    animation-iteration-count: infinite;
    animation-direction: alternate;
    animation-timing-function: ease-in-out;
  }
  #titanic-wave-bg{
    animation-name: move;
  animation-duration: 3s;
  animation-iteration-count: infinite;
  animation-direction: alternate-reverse;
  animation-timing-function: ease-out;    
  }
@keyframes rotate {
    0% {
      transform: rotate(-10deg)
    }
    100% {
      transform: rotate(10deg)
    }
  }
  @keyframes move {
    0% {
      translate: -323.766px 0;
    }
    100% {
      translate: 0 0;
    }
  }
  </style>
</head>

<body>
  <nav class="nav">
    <div class="nav__list">
      <a href="index.html" class="nav__item">Home</a>
      <a href="blog.html" class="nav__item">Blog</a>
    </div>
    <div class="nav__list">
      <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
      <a href="#" class="nav__item js-email-link">Email</a>
    </div>
  </nav>

  <main>
    <article>
      <div class="article-hero mid-size">
        <h2 class="article-category">Bottoms up</h2>
        <h1 class="article-title">Titanic Survival Analysis</h1>
      </div>

      <figure id="synthetic"></figure>
      <figcaption>Data: <a href="https://cran.r-project.org/web/packages/titanic/readme/README.html">R project</a></figcaption>
      <p>The RMS Titanic, one of the most iconic and tragic maritime disasters in history, continues to captivate the world's imagination over a century after its sinking. Launched as the epitome of luxury and engineering prowess, the Titanic was hailed as "unsinkable" before its maiden voyage in 1912. Fate had other plans, however. On the fateful night of April 14th, the ship collided with an iceberg in the North Atlantic, leading to its catastrophic demise. The sinking of the Titanic resulted in the loss of over 1,500 lives and exposed the hubris of human endeavors against the forces of nature. Yet, amidst the tragedy, the story of the Titanic remains a testament to human courage, sacrifice, and the enduring lessons learned from its untimely end.</p>
      <!-- <p>The dataset used for this article highlights the passengers aboard the RMS Titanic. These are the columns or variables in the data and what they represent:</p> -->
      <!-- <ul>
        <li><strong>PassengerId</strong>: A unique identifier for each passenger.</li>
        <li><strong>Survived</strong>: Indicates whether the passenger survived (1) or not (0) – categorical</li>
        <li><strong>Pclass</strong>: Ticket class of the passenger (1st, 2nd, or 3rd) – categorical </li>
        <li><strong>Name</strong>: Name of the passenger.</li>
        <li><strong>Sex</strong>: Gender of the passenger (male or female) - categorical.</li>
        <li><strong>Age</strong>: Age of the passenger.</li>
        <li><strong>SibSp</strong>: Number of siblings/spouses aboard the Titanic.</li>
        <li><strong>Parch</strong>: Number of parents/children aboard the Titanic.</li>
        <li><strong>Ticket</strong>: Ticket number.</li>
        <li><strong>Fare</strong>: Fare paid by the passenger.</li>
        <li><strong>Embarked</strong>: Port of embarkation (C = Cherbourg, Q = Queenstown, S = Southampton) - categorical.</li>
      </ul> -->

      <table>
        <thead>
          <th></th>
          <th>Number on Board</th>
          <th>Number of Survivors</th>
          <th>Number Lost</th>
          <th>Male</th>
          <th>Female</th>
          <th>Child</th>
          </thead>
        <tbody>
          <tr>
            <td>First Class</td>
            <td>329</td>
            <td>199</td>
            <td>130</td>
            <td>175</td>
            <td>144</td>
            <td>6</td>
          </tr>
          <tr>
            <td>Second Class</td>
            <td>285</td>
            <td>119</td>
            <td>166</td>
            <td>168</td>
            <td>93</td>
            <td>24</td>
          </tr>
          <tr>
            <td>Third Class</td>
            <td>710</td>
            <td>174</td>
            <td>536</td>
            <td>462</td>
            <td>165</td>
            <td>79</td>
          </tr>
          <tr>
            <td>Crew</td>
            <td>899</td>
            <td>214</td>
            <td>685</td>
            <td>862</td>
            <td>23</td>
            <td>0</td>
          </tr>
          <tr>
            <td><b>TOTAL</b></td>
            <td><b>2,223</b></td>
            <td><b>706</b></td>
            <td><b>1,517</b></td>
            <td><b>1,667</b></td>
            <td><b>425</b></td>
            <td><b>109</b></td>
          </tr>
      </table>
      <h2>Age Distribution by Sex</h2>
      <figure id="agesFacet"></figure>
      <p>Looking at passengers by age shows a pretty typical distribution. There appears to be a roughly equal amount of young and old people but about double the number of males ages 20 - 30 years old. Since the crew is included in our data that would make sense for a steamship in 1912.</p>
      <h2>What is the relationship between passenger age and survival rate?</h2>
      <figure id="agesline"></figure>
      <p>Understanding the relationship between age and survival rate can provide insights into the prioritization and rescue operations during the Titanic disaster. I hypothesized that younger passengers, especially children, might have had higher survival rates due to evacuation priorities. To visualize this, we can use a histogram to represent the age distribution of passengers along with their survival status. The x-axis represents the age groups, while the y-axis shows the count of passengers. Different colors are used to differentiate between those who survived and those who perished. The histogram reveals that children had higher survival rates, supporting our hypothesis that younger passengers were more likely to be rescued.</p>
      <h2>How does the fare paid relate to survival rates across different classes?</h2>
      <figure id="classScatter"></figure>
      <p>The fare paid by passengers can be an indicator of their socioeconomic status and access to resources. I hypothesized that passengers who paid higher fares, particularly those in first class, had higher survival rates.</p>
      <p>To investigate this, we can use a strip plot to visualize the distribution of fares across different passenger classes and survival statuses. The x-axis represents the passenger class, while the y-axis shows the fare amount. Colors indicate survival status. This box plot clearly illustrates that higher fares are associated with higher survival rates, especially in the first class. This suggests that wealthier passengers had better access to lifeboats and safety measures.
</p>
      <h2>Lifeboats on the Titanic</h2>
      <h2>Stacked bar chart</h2>
      <figure id="lifeboat_bars"></figure>
      <figcaption>Data: <a href="https://cran.r-project.org/web/packages/titanic/readme/README.html">R project</a></figcaption>
      <p>A basic stacked bar graph looking at the distribution of passengers by lifeboat. This chart clearly shows the distribution of passengers in each boat but fails to capture how many lifeboats were underutilized.</p>

      <h2>Diverging bar chart</h2>
      <figure id="lifeboat_diverging"></figure>
      <figcaption>Data: <a href="https://cran.r-project.org/web/packages/titanic/readme/README.html">R project</a></figcaption>
      <h2>Coal fire theory</h2>
      <img src="https://www.thesun.ie/wp-content/uploads/sites/3/2020/02/CM-OFF-PLAT-TITANIC-1.jpg" loading="lazy" alt="The RMS Titanic with possible fire damage circled." />
      <p> The sinking of the <em>RMS Titanic</em> may have been caused by an enormous fire on board, compounded by hitting an iceberg in the North Atlantic.</p>
      <p>While the cause of the disaster has long been attributed to the iceberg, fresh evidence has surfaced of a fire in the ship’s hull, which researchers say burned unnoticed for almost three weeks leading up to the collision.</p>
      <p>Journalist Sean Molony, who has spent more than 30 years researching the sinking of the <i>Titanic</i>, studied photographs taken by the ship’s chief electrical engineers before it left Belfast shipyard.<a href="#molony" aria-describedby="footnote-label" id="molony-ref"></a></p>
      <p>Mr Malony said he was able to identify 30-foot-long black marks along the front right-hand side of the hull, just behind where the ship’s lining was pierced by the iceberg.</p>
      <p> He said: <em>“We are looking at the exact area where the iceberg stuck, and we appear to have a weakness or damage to the hull in that specific place, before she even left Belfast”.</em> Experts subsequently confirmed the marks were likely to have been caused by a fire started in a three-story high fuel store behind one of the ship’s boiler rooms.</p>
      <picture>
      <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 672.22 672.22">
        <circle id="XMLID_158_" cx="336.11" cy="336.11" r="336.11" fill="#73B2FF"/>
        <defs>
          <circle id="XMLID_2_" cx="336.11" cy="336.11" r="336.11"/>
        </defs>
        <clipPath id="XMLID_5_">
          <use xlink:href="#XMLID_2_" overflow="visible"/>
        </clipPath>
        <g clip-path="url(#XMLID_5_)">
          <path id="titanic-wave-bg" fill="#003B85" d="M1097.44 350.86c-24.86-.5-44.87-3.1-59.1-5.6-15.48-2.75-30.63-6.5-31.56-6.74-18.04-4.48-22.66-6.73-34.8-9.22-8.33-1.62-20.7-3.5-36.43-3.37-15.72-.12-28.2 1.75-36.42 3.37-12.14 2.5-16.77 4.74-34.8 9.22-.93.25-16.08 4-31.57 6.73-14.22 2.5-34.23 5.1-59.1 5.6-24.85-.5-44.85-3.1-59.08-5.6-15.5-2.74-30.64-6.48-31.56-6.73-18.04-4.48-22.67-6.73-34.8-9.22-8.33-1.62-20.7-3.5-36.43-3.37-15.8-.12-28.3 1.75-36.5 3.37-12.2 2.5-16.8 4.74-34.8 9.22-1 .25-16.1 4-31.6 6.73-14.3 2.5-34.3 5.1-59.1 5.6-1.2 0-2.4-.04-3.6-.08-2.8-.08-5.5-.18-8.2-.3l-3.9-.22-2.1-.13c-.3 0-.6-.03-.9-.05l-2.1-.14-3.7-.27-2.6-.22-2.3-.2-1.2-.12-5-.5c-.6-.08-1.2-.14-1.8-.2L409 348l-.56-.1c-.9-.1-1.8-.2-2.67-.4h-.16l-2.4-.4c-.8-.1-1.6-.27-2.5-.4-3.6-.52-7-1.07-10.1-1.62-15.5-2.75-30.6-6.5-31.5-6.74-18-4.48-22.6-6.73-34.8-9.2-8.3-1.64-20.7-3.5-36.4-3.4-15.7-.1-28.2 1.76-36.4 3.4-12.1 2.5-16.7 4.7-34.8 9.2-.9.23-16 4-31.5 6.7-14.2 2.5-34.2 5.1-59.1 5.6-24.8-.5-44.8-3.1-59-5.6-15.5-2.73-30.6-6.47-31.6-6.72-18-4.48-22.7-6.7-34.8-9.2-7.4-1.47-18.1-3.1-31.6-3.36v359.7h1144V350.2c-5 .3-10.2.5-15.6.63z"/>
        </g>
        <g id="titanic-ship">
          <g id="XMLID_67_">
            <path id="XMLID_3_" fill="#10183F" d="M310.83 185.6l-17.63 12.96-6.75-9.18 17.64-12.95 6.7 9.18zm-65.8 34.2l-17.65 12.96 6.74 9.2L251.76 229l-6.74-9.2zm-59.1 43.4l-17.62 12.95 6.8 9.18 17.7-12.95-6.7-9.2zm-59.06 43.38l-17.64 12.95 6.75 9.18 17.63-12.9-6.7-9.2z"/>
            <path id="XMLID_15_" fill="#E09E41" d="M326.4 206.8l-17.63 12.96-15.64-21.3 17.63-12.94 15.64 21.3zm-74.7 22.1l-17.65 12.95 15.64 21.3 17.6-12.96-15.7-21.3zm-59.08 43.38l-17.64 12.96 15.64 21.3 17.63-12.96-15.63-21.3zm-59.08 43.4L115.9 328.6l15.65 21.3 17.63-12.96-15.64-21.3z"/>
          </g>
          <path id="XMLID_12_" fill="#10183F" d="M470.14 214.83L105.4 482.67l-44.8-24.1 406.66-298.6c-5.83 21.16-2.26 40.57 2.88 54.86z"/>
          <path id="XMLID_13_" fill="#CC2E31" d="M477.46 242.55L131.38 496.67l-26-14 364.76-267.84c2.98 8.3 6.5 14.85 9 19.02 1.77 2.93 1.05 6.7-1.68 8.7z"/>
          <path id="XMLID_32_" fill="#D9E2F1" d="M65.15 426.92L419.9 166.4l13.5 18.38L78.66 445.3z"/>
          <path id="XMLID_35_" fill="#F5F8FC" d="M81.5 386.63L376.53 170l27.4 8.17L81.1 415.2z"/>
          <path id="XMLID_71_" fill="#B0BED9" d="M263.38 296.65l-4.8 3.53-1.06-1.44 4.8-3.53 1.06 1.5zm6.37-6.9l-4.8 3.53 1.06 1.43 4.8-3.5-1-1.4zm-14.87 10.93l-4.8 3.52 1.06 1.44 4.8-3.53-1.06-1.4zm-7.44 5.46l-4.8 3.52 1.06 1.44 4.8-3.52-1.06-1.44zM240 311.6l-4.8 3.52 1.07 1.44 4.8-3.52-1.06-1.44zm37.2-27.3l-4.8 3.5 1.05 1.45 4.8-3.52-1.06-1.44zm7.43-5.47l-4.8 3.52 1.06 1.44 4.7-3.6-1.1-1.5zm7.43-5.46l-4.8 3.52 1.06 1.4 4.8-3.5-1.06-1.5zm7.44-5.46l-4.8 3.6 1.06 1.5 4.8-3.5-1.06-1.4zm7.44-5.4l-4.8 3.5 1.05 1.5 4.8-3.5-1.1-1.4zm7.43-5.4l-4.8 3.5 1.06 1.5 4.8-3.5-1.06-1.4zm7.44-5.4l-4.8 3.6 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.4 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1.1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.4 4.8-3.5-1.1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.6 1 1.4 4.8-3.5-1.1-1.4zm7.4-5.4l-4.8 3.6 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.4 4.8-3.5-1.1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.4 4.8-3.5-1-1.4zM91.5 421l-4.8 3.55 1.1 1.47 4.8-3.5-1.1-1.45zm7.5-5.44l-4.8 3.5 1 1.4 4.8-3.5-1.1-1.45zm7.4-5.46l-4.8 3.5 1.03 1.47 4.8-3.5-1-1.43zm7.4-5.45l-4.8 3.5 1.1 1.45 4.8-3.55-1-1.45zm7.5-5.46l-4.8 3.5 1.1 1.4 4.8-3.6-1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.4 4.8-3.6-1.1-1.4zm7.5-5.5l-4.8 3.5 1 1.4 4.8-3.6-1.1-1.5zm7.4-5.5l-4.8 3.5 1.1 1.4 4.8-3.6-1.1-1.5zm7.4-5.5l-4.8 3.5 1.1 1.4 4.8-3.6-1.1-1.4zm7.4-5.5l-4.8 3.5 1.1 1.4 4.8-3.6-1.1-1.5zm7.44-5.5l-4.8 3.5 1.03 1.5 4.8-3.5-1.08-1.4zm7.4-5.5l-4.8 3.5 1.06 1.4 4.8-3.5-1.07-1.5zm7.44-5.5l-4.8 3.5 1.1 1.4 4.8-3.5-1.05-1.5zm7.5-5.5l-4.8 3.5 1 1.4 4.8-3.6-1.1-1.5zm7.4-5.5L191 348l1 1.4 4.8-3.6-1.05-1.5zm7.4-5.5l-4.8 3.5 1.05 1.5 4.7-3.5-1-1.4zm7.4-5.5l-4.8 3.6 1.05 1.5 4.8-3.5-1.1-1.4zm7.4-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1.07-1.4zm7.5-5.4l-4.8 3.5 1 1.5 4.8-3.5-1.1-1.5zm7.4-5.4l-4.8 3.5 1.04 1.4 4.8-3.6-1-1.4zm7.42-5.5l-4.8 3.5 1.05 1.4 4.8-3.5-1.04-1.48z"/>
          <path id="XMLID_36_" fill="#BECADE" d="M249.85 278.3l-4.8 3.52-1.06-1.44 4.8-3.53 1 1.44zm6.38-6.9l-4.8 3.52 1.05 1.43 4.8-3.52-1.05-1.44zm-14.88 10.92l-4.8 3.52 1.06 1.44 4.8-3.53-1-1.44zm-7.43 5.46l-4.8 3.52 1.05 1.44 4.8-3.52-1.05-1.44zm-7.44 5.46l-4.8 3.52 1.06 1.44 4.8-3.52-1.06-1.44zm37.18-27.3l-4.8 3.5 1.06 1.45 4.8-3.6-1.06-1.5zm7.44-5.47l-4.8 3.52 1.06 1.4 4.8-3.5-1.06-1.5zm7.43-5.46l-4.8 3.6 1.06 1.5 4.8-3.5-1.1-1.4zm7.44-5.4l-4.8 3.5 1.06 1.5 4.8-3.5-1.06-1.4zm7.44-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.4 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.4 4.8-3.5-1.1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.5zm7.4-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.4 4.8-3.5-1-1.4zm7.4-5.4l-4.8 3.6 1.1 1.4 4.8-3.5-1.1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.5 4.8-3.6-1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.5 4.8-3.5-1.1-1.4zm-275.2 202l-4.8 3.5 1.1 1.5 4.8-3.5-1.1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.5zm7.5-5.4l-4.8 3.5 1 1.48 4.8-3.5-1.1-1.42zm7.4-5.5l-4.8 3.6 1 1.47 4.8-3.5-1-1.5zm7.4-5.4l-4.8 3.57 1.1 1.43 4.8-3.5-1-1.4zm7.5-5.42L133 363l1.1 1.5 4.8-3.53-1.1-1.43zm7.4-5.5l-5 3.38 1.1 1.4 4.8-3.5-1.1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.5zm7.4-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.45zm7.4-5.6l-4.8 3.5 1.1 1.5 4.8-3.5-1.1-1.5zm7.5-5.4l-4.8 3.53 1.1 1.4 4.8-3.5-1-1.4zm7.4-5.46l-4.8 3.5 1.1 1.4 4.8-3.5-1-1.5zm7.5-5.5l-4.8 3.5 1.1 1.4 4.8-3.5-1.1-1.5zm7.5-5.5l-4.8 3.5 1 1.4 4.8-3.56-1.1-1.4zm7.4-5.5l-4.8 3.5 1.07 1.4 4.8-3.5-1.1-1.43zm7.4-5.5l-4.8 3.5 1.1 1.47 4.8-3.53-1.1-1.4zm7.5-5.44l-4.8 3.5 1.1 1.42 4.8-3.5-1.05-1.5zm7.5-5.5l-4.8 3.5 1.1 1.5 4.8-3.5-1.06-1.46z"/>
        </g>
        <g id="iceberg" opacity=".8">
          <path id="XMLID_134_" fill="#FFF" d="M517.64 262.1l14.77-38.92s34.5 36.7 32.8 37.06c-1.7.36 3.1-5.82 3.1-5.82l20.4 35.97v22.4l28 22.1-34.1 40.9-7.5 47.2-10.7-15-3.6 69.3-64.3-80.7.4-35-17.7-51.2 14 2.9-5.2-5.1 7-23.2 22.7-23z"/>
          <path id="XMLID_136_" fill="#8FC1FF" d="M525.04 279.63l9.26-43.15s28.58 44.64 27.27 44.9c-1.32.28 3.77-8.12 3.77-8.12l13.2 27.7v16.88l29.68 16.38-27.02 32.62-9.32 41.64-9.5-7.13-5.95 54.8-56.67-68.4-.22-39.03-12.34-24.3 17.48-2.7-4.46-12.36 1.42-21.2 23.4-8.53z"/>
        </g>
        <defs>
          <circle id="XMLID_1_" cx="336.11" cy="336.11" r="336.11"/>
        </defs>
        <clipPath id="XMLID_6_">
          <use xlink:href="#XMLID_1_" overflow="visible"/>
        </clipPath>
        <g clip-path="url(#XMLID_6_)">
          <path id="titanic-wave-fg" fill="#0060D6" d="M1149.23 685.67V325.93c-15.72-.13-28.2 1.75-36.42 3.37-12.1 2.5-16.7 4.73-34.8 9.22-.9.25-16 4-31.5 6.73-14.2 2.5-34.2 5.1-59.1 5.6-24.8-.5-44.8-3.1-59.1-5.6-15.5-2.74-30.6-6.48-31.5-6.73-18-4.5-22.6-6.73-34.8-9.22-8.3-1.62-20.7-3.5-36.4-3.37-15.7-.13-28.2 1.75-36.4 3.37-12.1 2.5-16.7 4.73-34.8 9.22-.9.25-16.1 4-31.6 6.73-14.2 2.5-34.2 5.1-59 5.6-24.9-.5-44.9-3.1-59.1-5.6-15.5-2.74-30.6-6.48-31.5-6.73-18-4.5-22.6-6.73-34.8-9.22-8.3-1.62-20.7-3.5-36.4-3.37-15.7-.13-28.2 1.75-36.4 3.37-12.1 2.5-16.7 4.73-34.8 9.22-.9.25-16 4-31.5 6.73-14.2 2.5-34.2 5.1-59.1 5.6-24.8-.5-44.8-3.1-59.1-5.6-15.5-2.74-30.6-6.48-31.5-6.73-18-4.5-22.7-6.73-34.8-9.22-8.3-1.62-20.7-3.5-36.4-3.37-15.7-.13-28.2 1.75-36.4 3.37-12.1 2.5-16.7 4.73-34.8 9.22-.9.25-16 4-31.5 6.73-14.2 2.5-34.2 5.1-59.1 5.6-19.4-.38-35.9-2.07-48.9-3.98v338.8h1182.1z" opacity=".59"/>
        </g>
      </svg>
      </picture>
    </article>
  </main>
  <footer>
    <h2 id="footnote-label">Footnotes</h2>
    <ol>
      <li id="molony"><a href="http://www.independent.co.uk/news/uk/home-news/rms-titanic-evidence-fire-senan-molony-belfast-new-york-southampton-sink-april-1912-a7504236.html">The Independent, <em>Titanic sank due to enormous uncontrollable fire, not iceberg, claim experts</em></a>. <a href="#molony-ref" aria-label="Back to content">↩</a></li>
    </ol>

    <div>
      <p>Justin Chill © 2024. Thanks&nbsp;for&nbsp;reading!</p>
      <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img src="imgs/github.svg" alt="GitHub logo" class="icon">Source code and feedback</a></span>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/d3"></script>
  <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>

  <script>
    var element = d3.select('figure:last-of-type').node();
    var width = element.getBoundingClientRect().width; // get width of article so graphic is responsive
    var size = width > 450 ? ".9rem" : ".7rem";

    var tb5 = d3.csvParse(`Sex,Age,p_sex,x1,x2,y1,y2,Class_c,Class,value,_x1,_x2,X1,X2
  Female,Adult,0.210336,0,0.210336,0,0.883156,1,First Class,144,0,0.338824,0,0.071267
  Female,Adult,0.210336,0,0.210336,0,0.883156,2,Second Class,93,0.338824,0.557647,0.071267,0.117293
  Female,Adult,0.210336,0,0.210336,0,0.883156,3,Third Class,165,0.557647,0.945882,0.117293,0.198953
  Female,Adult,0.210336,0,0.210336,0,0.883156,C,Crew,23,0.945882,1,0.198953,0.210336
  Female,Child,0.210336,0,0.210336,0.906489,1,1,First Class,1,0,0.022222,0,0.004674
  Female,Child,0.210336,0,0.210336,0.906489,1,2,Second Class,13,0.022222,0.311111,0.004674,0.065438
  Female,Child,0.210336,0,0.210336,0.906489,1,3,Third Class,31,0.311111,1,0.065438,0.210336
  Male,Adult,0.774664,0.225336,1,0,0.940557,1,First Class,175,0,0.104979,0.225336,0.30666
  Male,Adult,0.774664,0.225336,1,0,0.940557,2,Second Class,168,0.104979,0.205759,0.30666,0.38473
  Male,Adult,0.774664,0.225336,1,0,0.940557,3,Third Class,462,0.205759,0.482903,0.38473,0.599424
  Male,Adult,0.774664,0.225336,1,0,0.940557,C,Crew,862,0.482903,1,0.599424,1
  Male,Child,0.774664,0.225336,1,0.96389,1,1,First Class,5,0,0.078125,0.225336,0.285857
  Male,Child,0.774664,0.225336,1,0.96389,1,2,Second Class,11,0.078125,0.25,0.285857,0.419002
  Male,Child,0.774664,0.225336,1,0.96389,1,3,Third Class,48,0.25,1,0.419002,1`, d3.autoType);

    var tb6 = d3.csvParse(`Sex,Age,Class,survived,Class_c,p_fate,p_sex,x1,x2,y1,y2,value,_x1,_x2,X1,X2,Y1,Y2
  Male,Adult,Crew,192,C,0.222738,0.774664,0.225336,1,0,0.940557,862,0.482903,1,0.599424,1,0,0.209498
  Male,Adult,Third Class,75,3,0.162338,0.774664,0.225336,1,0,0.940557,462,0.205759,0.482903,0.38473,0.599424,0,0.152688
  Male,Adult,Second Class,14,2,0.083333,0.774664,0.225336,1,0,0.940557,168,0.104979,0.205759,0.30666,0.38473,0,0.07838
  Male,Adult,First Class,57,1,0.325714,0.774664,0.225336,1,0,0.940557,175,0,0.104979,0.225336,0.30666,0,0.306353
  Male,Child,Third Class,13,3,0.270833,0.774664,0.225336,1,0.96389,1,48,0.25,1,0.419002,1,0.96389,0.97367
  Male,Child,Second Class,11,2,1,0.774664,0.225336,1,0.96389,1,11,0.078125,0.25,0.285857,0.419002,0.96389,1
  Male,Child,First Class,5,1,1,0.774664,0.225336,1,0.96389,1,5,0,0.078125,0.225336,0.285857,0.96389,1
  Female,Adult,Crew,20,C,0.869565,0.210336,0,0.210336,0,0.883156,23,0.945882,1,0.198953,0.210336,0,0.767962
  Female,Adult,Third Class,76,3,0.460606,0.210336,0,0.210336,0,0.883156,165,0.557647,0.945882,0.117293,0.198953,0,0.406787
  Female,Adult,Second Class,80,2,0.860215,0.210336,0,0.210336,0,0.883156,93,0.338824,0.557647,0.071267,0.117293,0,0.759704
  Female,Adult,First Class,140,1,0.972222,0.210336,0,0.210336,0,0.883156,144,0,0.338824,0,0.071267,0,0.858624
  Female,Child,Third Class,14,3,0.451613,0.210336,0,0.210336,0.906489,1,31,0.311111,1,0.065438,0.210336,0.906489,0.94872
  Female,Child,Second Class,13,2,1,0.210336,0,0.210336,0.906489,1,13,0.022222,0.311111,0.004674,0.065438,0.906489,1
  Female,Child,First Class,1,1,1,0.210336,0,0.210336,0.906489,1,1,0,0.022222,0,0.004674,0.906489,1`, d3.autoType);

    // Use Promises to async request data
    var promises = [d3.csv("data/titanic_data.csv", d3.autoType), d3.csv("data/titanic_lifeboats.csv", d3.autoType)];

    myDataPromises = Promise.all(promises);

    // After data is successfully fetched, generate viz
    myDataPromises.then(function(data) {
      // Define the data. There's gotta be a better way to do this:
      var titanic = data[0];
      var lifeboats = data[1];

      var synthetic = {
        width: width,
        style: {
          fontSize: size,
          paddingLeft: 40,
          paddingBottom: 20,
        },
        x: {
          axis: null,
        },
        y: {
          axis: null,
        },
        marks: [
          Plot.rect(tb5, {
            x1: "X1",
            x2: "X2",
            y1: "y1",
            y2: "y2",
            fill: 'hsl(210, 36%, 96%)',
            title: d => `${d.Age}\n${d.Sex}\n${d.Class}\nTotal: ${d.value}`
          }),

          Plot.rect(tb6, {
            x1: "X1",
            x2: "X2",
            y1: "Y1",
            y2: "Y2",
            fill: 'hsl(211, 39%, 23%)',
            title: d => `${d.Age}\n${d.Sex}\n${d.Class}\nSurvived: ${d.survived}`
          }),

          Plot.rect(tb5, {
            stroke: '#ccc',
            x1: "X1",
            x2: "X2",
            y1: "y1",
            y2: "y2",
          }),

          Plot.text([{
            l: 'Adults',
            y: 0.45
          }, {
            l: 'Children',
            y: 0.95
          }], {
            x: 0,
            dx: -10,
            y: d => d.y,
            fontWeight: "bold",
            text: d => d.l,
            textAnchor: "end",
            fill: "hsl(211, 39%, 23%)",
          }),

          Plot.text([{
            l: 'Females',
            x: 0.1
          }, {
            l: 'Males',
            x: 0.6
          }], {
            y: 1,
            dy: -10,
            x: d => d.x,
            fontWeight: "bold",
            text: d => d.l,
            textAnchor: "middle",
            fill: "hsl(211, 39%, 23%)",
          }),

          Plot.text([{
                l: '1st',
                x: 0.035
              }, {
                l: '2nd',
                x: 0.09
              }, {
                l: '3rd',
                x: 0.15
              }, {
                l: 'C',
                x: 0.203
              },
              {
                l: '1st',
                x: 0.27
              }, {
                l: '2nd',
                x: 0.35
              }, {
                l: '3rd',
                x: 0.49
              }, {
                l: 'Crew',
                x: 0.8
              }
            ], //todo: derive from tb5
            {
              y: 0,
              dy: 10,
              x: d => d.x,
              fontWeight: "bold",
              text: d => d.l,
              textAnchor: "middle",
              fill: "hsl(211, 39%, 23%)",
            })
        ],
      };

      var agesFacet = {
        width: width,
        style: {
          fontSize: size,
          paddingLeft: 0,
          paddingRight: 10,
          paddingBottom: 10,
          textTransform: "capitalize"
        },
        color: {
          scheme: "RdBu",
          legend: false
        },
        x:{
          labelOffset: 40
        },
        facet: {
          data: titanic,
          x: "Sex",
          label: null,
        },
        marks: [
          Plot.rectY(titanic, Plot.binX({y: "count"}, {x: "Age", thresholds: 10, fill: "Sex", tip:true})),
          Plot.ruleY([0])
        ]
      };
      
      var agesline = {
        width: width,
        style: {
          fontSize: size,
          paddingLeft: 0,
          paddingRight: 10,
          paddingBottom: 10,
          textTransform: "capitalize"
        },
        color: {
          scheme: "RdBu",
          legend: true
        },
        x:{
          labelOffset: 40
        },
        // fx: {interval: 10},
        marks: [
    Plot.rectY(
            titanic,
            Plot.sort(
              {channel: "y2", order: "descending"}, // prevent occlusion 🌶️
              Plot.binX(
                {y2: "count"}, // opt-out of stacking
                {x: "Age", fill: "Sex", thresholds: 10}
              )
            )
          ),
          Plot.ruleY([0])
        ]
      };

      var classScatter = {
          width: width,
          style: {
            fontSize: size,
            paddingLeft: 0,
            paddingRight: 10,
            paddingBottom: 10,
            textTransform: "capitalize"
          },
          color: {
            scheme: "RdBu",
            legend: true,
            type: "categorical",
            domain: [0,1],
          },
          x:{
            labelOffset: 40,
            label: "Passenger class",
            domain: [1,2,3],
          },
          y:{
            tickFormat: (d, i, _) => (i === _.length - 1 ? `$${d}` : d), // Show $ on first tick only
            nice: true,
            labelOffset: -10,
          },
          marks: [
            Plot.dot(titanic, {x: "Pclass", y: "Fare", stroke: "Survived", tip: true,}),
          ]
        };

      var lifeboat_bars = {
        width: width,
        marginLeft: 0,
        marginRight: 0,
        style: {
          fontSize: size,
          textTransform: "capitalize",
          paddingBottom: 10,
          paddingRight: 10,
          paddingLeft: 40
        },
        x: {
          tickFormat: Math.abs
        },
        color: {
          domain: lifeboats.attribute,
          scheme: "RdBu",
          legend: true
        },
        marks: [
          Plot.barX(
            lifeboats,
            Plot.groupZ({
              x: "count"
            }, {
              fy: "boat",
              fill: "attribute",
              tip: true,
              ...lifeboats
            })
          ),
          Plot.ruleX([0])
        ]
      };

      var lifeboat_diverging = {
        width: width,
        marginLeft: 0,
        marginRight: 0,
        style: {
          fontSize: size,
          textTransform: "capitalize",
          paddingBottom: 10,
          paddingRight: 10,
          paddingLeft: 40
        },
        x: {
          tickFormat: Math.abs
        },
        fy: {
          domain: d3.groupSort(lifeboats, D => d3.sum(D, d => -Math.min(0, d.value)), d => d.boat),
          label: null
        },
        color: {
          domain: lifeboats.attribute,
          scheme: "RdBu",
          legend: true
        },
        marks: [
          Plot.barX(
            lifeboats,
            Plot.groupZ({
              x: "proportion-facet"
            }, {
              fy: "boat",
              fill: "attribute",
              x: "value",
              stroke: "#777",
              strokeWidth: 0.5,
              tip: true
            })
          ),
          Plot.ruleX([0])
        ]
      };

      document.getElementById("synthetic").appendChild(Plot.plot(synthetic));
      document.getElementById("agesFacet").appendChild(Plot.plot(agesFacet));
      document.getElementById("agesline").appendChild(Plot.plot(agesline));
      document.getElementById("classScatter").appendChild(Plot.plot(classScatter));
      document.getElementById("lifeboat_bars").appendChild(Plot.plot(lifeboat_bars));
      document.getElementById("lifeboat_diverging").appendChild(Plot.plot(lifeboat_diverging));
    });
  </script>
</body>

</html>