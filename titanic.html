<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
  <title>Titanic Survival Analysis | Justin Chill</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Data visualizations of the RMS Titanic disaster.">
  <meta name="author" content="Justin Chill">
  <!-- OpenGraph tags -->
  <meta name="keywords" content="titanic, RMS, data visualization, disaster, chart, graphic detail, graph, graphs; Categorical Data Analysis; RMS Titanic">
  <meta name="robots" content="all">
  <meta content="en_US" property="og:locale">
  <meta content="JustinChill" property="og:site_name">
  <meta content="website" property="og:type">
  <meta content="https://justinchill.com/titanic.html" property="og:url">
  <meta content="Titanic Survival Analysis | Justin Chill" property="og:title">
  <meta content="Data visualizations of the RMS Titanic disaster." property="og:description">
  <meta content="https://www.justinchill.com/blog.html" property="og:see_also">
  <link rel="canonical" href="https://www.justinchill.com/titanic.html">

  <meta property="og:locality" content="NY">
  <meta property="og:region" content="NY">
  <meta property="og:country_name" content="USA">

  <meta name="datePublished" content="2025-03-06">
  <meta name="dateModified" content="2025-07-06">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Titanic Survival Analysis | Justin Chill">
  <meta name="twitter:description" content="Data visualizations of the RMS Titanic disaster.">

  <link type="text/plain" href="humans.txt" rel="author">
  <link rel="preload" href="style.css" as="style" />
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="/favicon.ico">

  <meta name="theme-color" content="#4C63B6">

  <script type="module">
    document.documentElement.classList.remove('no-js');
    document.documentElement.classList.add('js');
  </script>

  <style>
    h3 span {
      font-size: inherit;
    }

    .titanic-ship svg {
      display: flex;
      flex-direction: row;
      justify-content: center;
      transform: scale(0.65);
      transform-origin: center;
      width: 100%;
      margin: 0 auto;
    }

    .titanic-ship {
      margin-top: 0;
    }

    .p-4 {
      padding: 1rem;
    }

    #whoSurvived g[aria-label*="x-axis"] path {
      stroke: hsl(209, 23%, 60%);
      opacity: .5;
    }

    table.Bron td {
      border: none;
    }

    th:first-child {
      position: initial;
    }

    /* Try to animate ship & iceberg from this Codepen: https://codepen.io/maciekmaciej/pen/qjoZeR */
    #titanic-ship {
      animation-name: rotate;
      animation-duration: 3s;
      animation-iteration-count: infinite;
      animation-direction: alternate;
      transform-origin: center;
      animation-timing-function: ease-in-out;
    }

    #titanic-wave-fg {
      animation-name: move;
      animation-duration: 3s;
      animation-iteration-count: infinite;
      animation-direction: alternate;
      animation-timing-function: ease-in-out;
    }

    #titanic-wave-bg {
      animation-name: move;
      animation-duration: 3s;
      animation-iteration-count: infinite;
      animation-direction: alternate-reverse;
      animation-timing-function: ease-out;
    }

    @keyframes rotate {
      0% {
        transform: rotate(-10deg)
      }

      100% {
        transform: rotate(10deg)
      }
    }

    @keyframes move {
      0% {
        translate: -323.766px 0;
      }

      100% {
        translate: 0 0;
      }
    }

    @media screen and (max-width: 680px) {

      g[aria-label*="fy-axis"] text,
      g[aria-label*="fx-axis"] text,
      g[aria-label*="x-axis"]>text {
        font-size: 1rem;
      }
    }

    @media screen and (max-width: 1020px) {

      g[aria-label*="fy-axis"] text,
      g[aria-label*="fx-axis"] text,
      g[aria-label*="x-axis"]>text {
        font-size: 1.15rem;
      }
    }
  </style>
</head>

<body>
  <nav class="nav" role="navigation">
    <div class="nav__list">
      <a href="index.html" class="nav__item" aria-label="Homepage">Home</a>
      <a href="blog.html" class="nav__item" aria-label="Blog section">Blog</a>
      <a href="now.html" class="nav__item" aria-label="Now page">Now</a>
    </div>
    <div class="nav__list">
      <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
      <a href="#" class="nav__item js-email-link">Email</a>
    </div>
  </nav>

  <main role="main">
    <article>
      <div class="article-hero mid-size">
        <h2 class="article-category">Bottoms up</h2>
        <h1 class="article-title">Titanic Survival Analysis</h1>
      </div>

      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>Prioritizing <span style="color: rgb(245, 129, 120); font-weight: bold;">female</span> and child safety increased fatality rates among 3rd class <span style="color: rgb(36, 63, 108); font-weight: bold;">male</span> passengers</h3>
      <figure id="whoSurvived">
        <figcaption class="right">Data: <a href="https://cran.r-project.org/web/packages/titanic/readme/README.html">R project</a></figcaption>
      </figure>

      <p>The sinking of the <em>RMS Titanic</em> is one of the most storied shipwrecks in maritime history. Touted as the ultimate in transatlantic travel and said to be “unsinkable”, the <em>Titanic</em> collided with an iceberg on April 14<sup>th</sup>, 1912 on her maiden voyage and sank shortly after on April 15<sup>th</sup>, killing 1,502 out of 2,224 passengers and crew.</p>
      <p>The sinking of the <em>Titanic</em> is not the largest in terms of lives lost at sea. But it is the one that has been documented most thoroughly – in government reports and personal accounts of survivors, and in numerous books and several popular movies.</p>
      <p>This is one legacy of the <em>Titanic</em> disaster, but it left another: a wealth of data, comprising details of passengers and crew, complete with names, ages, passenger class, and even cabin numbers for those in first and second class.</p>
      <p>I recently discovered an early data visualization showing survival among the <em>Titanic</em> passengers and crew, published less than one month after the disaster. This graph had a surprisingly modern look. I was inspired to recreate it using modern javascript while looking into the different ways historians have visualized the <em>Titanic</em> disaster over the past century.</p>
      <h3>The Loss of the <em>Titanic</em></h3>
      <p><em>The Sphere</em> was a popular British illustrated weekly newspaper, published by the Illustrated London News Group from January 1900 until June 1964. It was dedicated to worldwide reporting on popular issues. On May 4<sup>th</sup> 1912, only three weeks after the <em>Titanic</em> disaster, it published a chart by the graphic artist G. Bron using data released the week before by the House of Commons.</p>
      <aside>The <strong>House of Commons</strong> is the name for the elected lower house of the bicameral parliaments of the United Kingdom and Canada.</aside>
      <figure>
        <figcaption>G.Bron's chart of “The Loss of the <em>Titanic</em>”, from <em>The Sphere</em>, May 4, 1912. Each subgroup is shown by a bar whose area is proportional to the numbers of cases.</figcaption>
        <img src="imgs/The-Loss-of-the-Titanic-specially-drawn-for-The-Sphere-by-G-Bron-Originally.ppm.png" loading="lazy" alt="The results of the RMS Titanic analyzed and shown in The Sphere newspaper, 1912." />
      </figure>
      <p>Bron's graph shows the breakdown of survival among the passengers and crew – by passenger class, gender and age (comparing adults and children) – in what is clearly an early innovation in data display. It combines back-to-back bar charts for those who lived and those who perished, using area of the bars to convey the actual numbers. Within the passenger classes, the numbers and bars are subdivided by gender for adults, while children are shown as a separate group. It also includes two similar summary panels, showing the totals for all passengers and for all passengers and crew.</p>
      <p>Today, we might describe this as an early form of a mosaic plot, or as an area-proportional back-to-back array of bar charts. Whatever name we give, it deserves to be admired as an exceptional early example of data visualization and a tribute to the skills of the illustrator.</p>
      <h3>Who was G. Bron?</h3>
      <figure id="Bron"></figure>
      <p>G. Bron was a prolific technical illustrator who worked for <em>The Sphere</em>, the <em>Illustrated London News</em> and similar publications between about 1910 and 1925. Today, he would be called a data-graphic or info-vis designer, one far ahead of his time. Little about him is known for sure, not even his first name. G. Bron was most likely the pseudonym adopted by William B. Treeby, born in London, but further biographical details are still sketchy (see additional material <a href="http://bit.ly/titanicvis">here</a>). A <a href="http://bit.ly/2Rzv5dm">search</a> in the British Newspaper Archive turned up over 20 examples of his work, most published in <em>The Sphere</em>.</p>
      <table class="Bron">
        <tbody>
          <tr>
            <td>
              <img src="https://www.datavis.ca/papers/titanic/Bron/Sphere-15Jun1912-Titanic-Boats.png" width="200" alt="Drawing depicting the fate of the Titanics lifeboats, with numbered lifeboats floating away from the sinking ship. Each lifeboat is labeled with details about its passengers and fate, set against a dark ocean background.">
            </td>
            <td>
              <img src="imgs/Sphere-10Dec1910-ebb-flow.jpg" width="200" alt="An illustrated image showing a bridge with steps leading to a wall marked with election years and water levels. The water line indicates different years between 1832 and 1906, symbolizing the rise and fall of electoral influence.">
            </td>
            <td>
              <img src="imgs/Sphere-22Mar1913-Sphinx-2.jpg" width="200" alt="Illustrated cutaway diagram of the Sphinx, titled Remarkable Discoveries Within the Sphinx. It depicts hypothetical internal chambers and passages within the Sphinxs head and body, leading to a temple and other structures.">
            </td>
            <td>
              <img src="https://c8.alamy.com/comp/HKF75J/illustrated-london-news-front-page-HKF75J.jpg" width="200" alt="An old newspaper front page titled The Illustrated London News from November 26, 1864. It features an engraving of an art exhibition with people viewing paintings and sculptures in a large gallery. Text and articles surround the illustrations.">
            </td>
            <td>
              <img src="https://i.etsystatic.com/38479258/r/il/e4203b/5450130710/il_300x300.5450130710_1qgx.jpg" width="200" alt="A vintage scientific illustration featuring a solar system diagram, lunar phases, and a perpetual moonlight chart. The detailed graphics are accompanied by descriptive text and astronomical calculations. The design has a retro, diagrammatic style.">
            </td>
          </tr>
        </tbody>
      </table>
      <ul>
        <li><strong>What Became of the <em>Titanic</em> Boats?</strong>, <em>The Sphere</em>, June 15, 1912. <a href="https://www.britishnewspaperarchive.co.uk/viewer/bl/0001861/19120615/021/0016">British Newspaper archive</a></li>
        <li>
          <p><strong>The Ebb and Flow of the Electoral Tide</strong>, <em>The Sphere</em>, December 10, 1910. <a href="https://www.britishnewspaperarchive.co.uk/viewer/bl/0001861/19101210/018/0013">British Newspaper archive</a></p>
        </li>
        <li>
          <p><strong>Remarkable Discoveries Within the Sphinx</strong>, <em>The Sphere</em>, 22 March 1913. <a href="https://www.britishnewspaperarchive.co.uk/viewer/bl/0001861/19130322/015/0009">British Newspaper archive</a> page</p>
        </li>
        <li>
          <p><strong>The Meanderings Of Majorities: The Movements Of The “Waves” Of Political Power Over The Lands Of Conservatism And Liberalism</strong>, Illustrated London News, 24 December 1910. <a href="https://www.britishnewspaperarchive.co.uk/viewer/bl/0001578/19101224/080/0026">British News Archive</a></p>
        </li>
        <li>
          <p><strong>Moonlight Chart, No.&nbsp;6</strong>, <em>The Sphere</em>, Sept.&nbsp;22, 1917, <a href="https://www.britishnewspaperarchive.co.uk/viewer/bl/0001861/19170922/031/0021">British Newspaper archive</a></p>
        </li>
      </ul>
      <blockquote>
        <p>I was born in London, and brought to Australia by adventurous parents in infancy. Shirking real graft, I suffered an apprenticeship to the unreasonable occupation of wood-engraving, which was wearing to the eyes but good for the patience.</p>
        <br />
        <p>Tripped it to England (I, not Job) with wife and young family, and stopped there five years, it being while working in London, half engraver, half artist, that the name ‘G. Bron’ was invented– duplication that I sometimes would like to send to pot.</p>
        <cite>&mdash; G. Bron, aka George Treeby or William Brown Treeby</cite>
      </blockquote>
      <h3>The data</h3>
      <div class="wrapper" tabindex="0" role="region">
        <table class="simple">
          <thead>
            <tr>
              <th scope="col">Passenger class</th>
              <th scope="col">Number on Board</th>
              <th scope="col">Number of Survivors</th>
              <th scope="col">Number Lost</th>
              <th scope="col">Male</th>
              <th scope="col">Female</th>
              <th scope="col">Child</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>First Class</td>
              <td>329</td>
              <td>199</td>
              <td>130</td>
              <td>175</td>
              <td>144</td>
              <td>6</td>
            </tr>
            <tr>
              <td>Second Class</td>
              <td>285</td>
              <td>119</td>
              <td>166</td>
              <td>168</td>
              <td>93</td>
              <td>24</td>
            </tr>
            <tr>
              <td>Third Class</td>
              <td>710</td>
              <td>174</td>
              <td>536</td>
              <td>462</td>
              <td>165</td>
              <td>79</td>
            </tr>
            <tr>
              <td>Crew</td>
              <td>899</td>
              <td>214</td>
              <td>685</td>
              <td>862</td>
              <td>23</td>
              <td>0</td>
            </tr>
            <tr>
              <td><b>TOTAL</b></td>
              <td><b>2,223</b></td>
              <td><b>706</b></td>
              <td><b>1,517</b></td>
              <td><b>1,667</b></td>
              <td><b>425</b></td>
              <td><b>109</b></td>
            </tr>
          </tbody>
        </table>
      </div>
      <p>The primary sources of data on the <em>Titanic</em> derive from official inquiries launched in Britain and the USA. (Complete documents can be found at <a href="http://titanicinquiry.org">titanicinquiry.org</a>.) Shortly after the disaster, the British Parliament authorized the British Board of Trade Inquiry with Lord Mersey as chair. The committee interviewed more than 100 witnesses over 36 days of hearings. Their report, issued on July 30<sup>th</sup>, 1912, contained extensive tables of passengers and crew, broken down by age group, gender, class and survival, as well as details on the launching of the 20 lifeboats. In April–May 1912 a similar inquiry was initiated in the US Senate which interviewed 82 witnesses over 18 days. Among other things the report (over 1,000 pages) contained lists of the names and addresses of most passengers and crew.</p>
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>Passengers by age</h3>
      <figure id="agesFacet"></figure>
      <p>Looking at passengers by age shows a pretty typical distribution. There appears to be a roughly equal amount of young and old people but about double the number of males ages 20 - 30 years old. Since the crew is included in our data that would make sense for a steamship in 1912.</p>
      <p>Popular interest in the <em>Titanic</em> surged with the release of James Cameron's movie in November 1997. Immediately following this, Random House released a boxed set, <em>Titanic: The Official Story</em>, containing the Mersey report and facsimiles of 18 original documents from London's Public Record Office. These included the <em>Titanic</em> deck plans, the final telegram sent from the ship just prior to sinking, newspaper articles excoriating the White Star Line for criminal negligence, lists of deaths recorded in official logs, and so on.</p>
      <h2>Some modern uses</h2>
      <p>The significance of the disaster and the availability of information regarding the passengers and crew made the <em>Titanic</em> data attractive for various uses.</p>
      <p>Bron's initial graphic idea, to show deaths and survival on the <em>Titanic</em>, broken down by passenger class, gender and age group, was brilliant at the time, and perhaps under-appreciated in the history of data visualization. He was on to something important: how to display the proportions of survivors, classified by the other variables he had available. His solution anticipated modern methods.</p>
      <p>In the 1990s, two new ideas for graphical analysis of categorical data arose to meet this problem. The <em>Titanic</em> data provided great examples because they gave a context and a story to appreciate these new methods.</p>
      <h3>Mosaic plots</h3>
      <p>Bron’s chart illustrated some of the challenges in visualizing a table of frequencies of survival, classified by two or more factors. Mosaic plots<a href="#Hartigan" aria-describedby="footnote-label" id="Hartigan-ref"></a> provided an attractive alternative, where the frequencies in a table were show by areas of “tiles” in a recursive partitioning of a unit square.</p>
      <p>Mosaics are useful for discovering unusually high or small counts and for discovering dependencies between variables. In principle, mosaics may be used for any number of cross-classifying variables, but six seems to be a practical maximum.</p>
      <img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fslideplayer.com%2Fslide%2F15899575%2F88%2Fimages%2F14%2FMosaic%2BPlot%2B%25E2%2580%2593%2BTitanic%2BData.jpg&f=1&nofb=1&ipt=8e74bcf4a0edf6424193319a58c41b704d0242174b12efe9eb85cb9f128ad77d&ipo=images" loading="lazy" alt="Mosaic plot showing Titanic data. Left plot: survival by class, with larger survival for 1st and 3rd class. Right plot: survival by gender, with higher female survival; both plots use red for died, teal for survived." />
      <h3>Text plots</h3>
      <p>Brath (2018) created mosaic plots filling the tiles with the names of the victims and survivors among the 1308 passengers. This highlights the fact that the passengers were people, not statistics. For Brath, it provided an example of how typography could be used in data visualization.</p>
      <img src="imgs/text-survived.png" loading="lazy" alt="Infographic titled Who Survived on the Titanic? showing 1,308 passengers. Divided by class and gender, it uses colors to indicate survival (green) and death (red). Women and children have serif font; men have sans serif." />
      <h3>Parallel sets</h3>
      <p>Parallel coordinate plots provide a way to display multidimensional data in 2D plots. They do this by representing the variables as a set of parallel axes, and showing each observation as a line in parallel coordinate space, rather than as a point in standard coordinate space.</p>
      <figure>
        <figcaption><a href="https://www.jasondavies.com/parallel-sets/">Jason Davies</a></figcaption>
        <img src="imgs/titanic-parallel.png" loading="lazy" alt="Flow diagram titled Titanic Survivors showing paths between categories: Survived and Perished, divided by Sex (Female, Male), Age (Child, Adult), and Class (First, Second, Third, Crew). Blue indicates survival; orange indicates perished." />
      </figure>
      <h3>Lifeboats data</h3>
      <p>The Titanic sailed with only enough lifeboat space for half the people on board, the result of an antiquated safety code that hadn’t kept pace with the growing size of ocean liners. Yet some of those lifeboats were lowered <strong>less than half full</strong>.</p>
      <p>Bron tried to illustrate what he knew at the time, but the actual data allows for a richer story to be told with modern graphical and statistical methods.</p>
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>Titanic lifeboat utilization</h3>
      <figure id="lifeboat_bars">
        <figcaption class="right">Data: <a href="https://cran.r-project.org/web/packages/titanic/readme/README.html">R project</a></figcaption>
      </figure>

      <p>After the disaster, the British Board of Trade launched several inquiries, the most comprehensive of which resulted in the Report on the <em>Loss of the Titanic</em> (S.S.) by Lord Mersey (Mersey, 1912). The report lists the time of launch and composition of the 18 boats (out of 20) that actually launched, broken down as “male passengers”, “women and children”, and “men of crew”, as reported by witnesses.</p>
      <figure>
        <figcaption>Lifeboats on the Titanic, trilinear plot</figcaption>
        <img src="imgs/titanic-tri.png" class="p-4" loading="lazy" alt="Ternary plot showing distribution of ship passengers and crew, with axes labeled Men Passengers, Men of Crew, and Women and Children. Points represent port (red) and starboard (blue) sides, with varying sizes and positions." />
      </figure>
      <p>Trilinear plots are quite useful for showing the relative proportions in each row of <em>n</em> x 3 tables. Figure 12 shows the proportions of these three categories, classed by the side of the ship from which the lifeboat was launched. Boats with more than 10% male passengers are identified by number. The graph strongly suggests that the procedures for loading the lifeboats may have differed for the port and starboard side of the ship</p>
      <h3>Balloon plots</h3>
      <p>Jain and Warnes (2006) coined this term to refer to a semi-graphic table, in which the size of the cell entry was overlaid with a “balloon” to show the magnitude.</p>
      <img src="imgs/titanic-balloon.ppm.png" loading="lazy" alt="Balloon plot showing Titanic survivors by class, sex, and age. Larger circles indicate more passengers. Notable counts: adult male crew 192, adult female 3rd class 80, adult female 1st class 140." />
      <h3>Venn and Euler diagrams</h3>
      <p>Brath (2012) <em>Multi-Attribute Glyphs on Venn and Euler Diagrams to Represent Data and Aid Visual Decoding</em> used an annotated Venn and Euler diagrams to show the overlapping sets among combinations of the Titanic variables:</p>
      <img src="https://figures.semanticscholar.org/f5f784fd1ba95135e6e48a4a286482ff92af98ce/4-Figure5-1.png" alt="Scaled glyphs indicating quantities on both Venn and Euler diagrams." loading="lazy" />
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>What is the relationship between passenger age and survival rate?</h3>
      <figure id="agesline"></figure>
      <p>Understanding the relationship between age and survival rate can provide insights into the prioritization and rescue operations during the Titanic disaster. I hypothesized that younger passengers, especially children, might have had higher survival rates due to evacuation priorities. To visualize this, we can use a histogram to represent the age distribution of passengers along with their survival status. The x-axis represents the age groups, while the y-axis shows the count of passengers. Different colors are used to differentiate between those who survived and those who perished. The histogram reveals that children had higher survival rates, supporting our hypothesis that younger passengers were more likely to be rescued.</p>
      <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
      <h3>How does the fare paid relate to survival rates across different classes?</h3>
      <figure id="classScatter"></figure>
      <p>The fare paid by passengers can be an indicator of their socioeconomic status and access to resources. I hypothesized that passengers who paid higher fares, particularly those in first class, had higher survival rates.</p>
      <p>To investigate this, we can use a strip plot to visualize the distribution of fares across different passenger classes and survival statuses. The x-axis represents the passenger class, while the y-axis shows the fare amount. Colors indicate survival status. This box plot clearly illustrates that higher fares are associated with higher survival rates, especially in the first class. This suggests that wealthier passengers had better access to lifeboats and safety measures.
      </p>
      <h3>Information visualisation</h3>
      <p class="chapter-para">Following in the footsteps of Bron, modern graphic designers continue to be inspired by the tragedy of the <em>Titanic</em> and challenge themselves to tell the story of the disaster in ways that are both visually appealing and provide accurate information. Unlike statistical graphs which usually focus on just one aspect, an <em>information graphic</em> often attempts to tell the entire story all on one page.</p>
      <figure class="mid-size">
        <figcaption class="mid-size right">Infographic by (<a href="http://bit.ly/2RyjdbL" target="_blank">Barr and Johnson</a>).</figcaption>
        <img src="imgs/ESsfFNNXQAAOK2E.jpeg" alt="Infographic of the Titanic showing a side-view diagram, highlighting lifeboat locations, passenger survival rates by age, class, and nationality, and timelines of key events during the sinking. Charts and graphs display survival statistics." loading="lazy" />
      </figure>
      <p class="chapter-para">A great example of this is the graphic produced by Andrew Barr and Richard Johnson for the <em>National Post</em>. This illustration combines many aspects of visual storytelling: numbers, words and pictures (both images and graphs) are woven seamlessly into a narrative. The top portion contains back-to-back bar plots of the passengers by age and class, showing the age distributions of those who survived and those who died, with pie charts summarizing survival by class. It uses colors keyed to the locations of cabins for the classes in the dominant graphic of the ship. The bottom portion shows the loading of the lifeboats in the order they were launched, shaded to show the proportion of seats that were filled. It is clear that those launched early and those launched just before the ship sank were only partially filled. Other charts at the lower right give the death rates by gender and class and by nationality of the passenger. A text box gives an interpretation of survival, including the ideas of “women and children first” and the declining survival according to class.</p>


      <p>For the 100 year anniversary of the sinking, the <em>South China Morning Post</em> published the infographic below.</p>
      <img src="https://multimedia.scmp.com/culture/article/SCMP-printed-graphics-memory/img/graphics/titanic2.jpg" alt="Sinking the unsinkable - infographic of how the Titanic sunk." loading="lazy" />

      <h2>Coal fire theory</h2>
      <img src="https://www.thesun.ie/wp-content/uploads/sites/3/2020/02/CM-OFF-PLAT-TITANIC-1.jpg" loading="lazy" alt="The RMS Titanic with possible fire damage circled." />
      <p>The sinking of the <em>RMS Titanic</em> may have been caused by an enormous fire on board, compounded by hitting an iceberg in the North Atlantic.</p>
      <p>While the cause of the disaster has long been attributed to the iceberg, fresh evidence has surfaced of a fire in the ship’s hull, which researchers say burned unnoticed for almost three weeks leading up to the collision.</p>
      <p>Journalist Sean Molony, who has spent more than 30 years researching the sinking of the <i>Titanic</i>, studied photographs taken by the ship’s chief electrical engineers before it left Belfast shipyard.<a href="#molony" aria-describedby="footnote-label" id="molony-ref"></a></p>
      <p>Mr Malony said he was able to identify 30-foot-long black marks along the front right-hand side of the hull, just behind where the ship’s lining was pierced by the iceberg. <em>“We are looking at the exact area where the iceberg stuck, and we appear to have a weakness or damage to the hull in that specific place, before she even left Belfast”.</em></p>
      <p>Experts subsequently confirmed the marks were likely to have been caused by a fire started in a three-story high fuel store behind one of the ship’s boiler rooms.</p>
      <figure class="titanic-ship">
        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 672.22 672.22">
          <circle id="XMLID_158_" cx="336.11" cy="336.11" r="336.11" fill="#73B2FF" />
          <defs>
            <circle id="XMLID_2_" cx="336.11" cy="336.11" r="336.11" />
          </defs>
          <clipPath id="XMLID_5_">
            <use xlink:href="#XMLID_2_" overflow="visible" />
          </clipPath>
          <g clip-path="url(#XMLID_5_)">
            <path id="titanic-wave-bg" fill="#003B85" d="M1097.44 350.86c-24.86-.5-44.87-3.1-59.1-5.6-15.48-2.75-30.63-6.5-31.56-6.74-18.04-4.48-22.66-6.73-34.8-9.22-8.33-1.62-20.7-3.5-36.43-3.37-15.72-.12-28.2 1.75-36.42 3.37-12.14 2.5-16.77 4.74-34.8 9.22-.93.25-16.08 4-31.57 6.73-14.22 2.5-34.23 5.1-59.1 5.6-24.85-.5-44.85-3.1-59.08-5.6-15.5-2.74-30.64-6.48-31.56-6.73-18.04-4.48-22.67-6.73-34.8-9.22-8.33-1.62-20.7-3.5-36.43-3.37-15.8-.12-28.3 1.75-36.5 3.37-12.2 2.5-16.8 4.74-34.8 9.22-1 .25-16.1 4-31.6 6.73-14.3 2.5-34.3 5.1-59.1 5.6-1.2 0-2.4-.04-3.6-.08-2.8-.08-5.5-.18-8.2-.3l-3.9-.22-2.1-.13c-.3 0-.6-.03-.9-.05l-2.1-.14-3.7-.27-2.6-.22-2.3-.2-1.2-.12-5-.5c-.6-.08-1.2-.14-1.8-.2L409 348l-.56-.1c-.9-.1-1.8-.2-2.67-.4h-.16l-2.4-.4c-.8-.1-1.6-.27-2.5-.4-3.6-.52-7-1.07-10.1-1.62-15.5-2.75-30.6-6.5-31.5-6.74-18-4.48-22.6-6.73-34.8-9.2-8.3-1.64-20.7-3.5-36.4-3.4-15.7-.1-28.2 1.76-36.4 3.4-12.1 2.5-16.7 4.7-34.8 9.2-.9.23-16 4-31.5 6.7-14.2 2.5-34.2 5.1-59.1 5.6-24.8-.5-44.8-3.1-59-5.6-15.5-2.73-30.6-6.47-31.6-6.72-18-4.48-22.7-6.7-34.8-9.2-7.4-1.47-18.1-3.1-31.6-3.36v359.7h1144V350.2c-5 .3-10.2.5-15.6.63z" />
          </g>
          <g id="titanic-ship">
            <g id="XMLID_67_">
              <path id="XMLID_3_" fill="#10183F" d="M310.83 185.6l-17.63 12.96-6.75-9.18 17.64-12.95 6.7 9.18zm-65.8 34.2l-17.65 12.96 6.74 9.2L251.76 229l-6.74-9.2zm-59.1 43.4l-17.62 12.95 6.8 9.18 17.7-12.95-6.7-9.2zm-59.06 43.38l-17.64 12.95 6.75 9.18 17.63-12.9-6.7-9.2z" />
              <path id="XMLID_15_" fill="#E09E41" d="M326.4 206.8l-17.63 12.96-15.64-21.3 17.63-12.94 15.64 21.3zm-74.7 22.1l-17.65 12.95 15.64 21.3 17.6-12.96-15.7-21.3zm-59.08 43.38l-17.64 12.96 15.64 21.3 17.63-12.96-15.63-21.3zm-59.08 43.4L115.9 328.6l15.65 21.3 17.63-12.96-15.64-21.3z" />
            </g>
            <path id="XMLID_12_" fill="#10183F" d="M470.14 214.83L105.4 482.67l-44.8-24.1 406.66-298.6c-5.83 21.16-2.26 40.57 2.88 54.86z" />
            <path id="XMLID_13_" fill="#CC2E31" d="M477.46 242.55L131.38 496.67l-26-14 364.76-267.84c2.98 8.3 6.5 14.85 9 19.02 1.77 2.93 1.05 6.7-1.68 8.7z" />
            <path id="XMLID_32_" fill="#D9E2F1" d="M65.15 426.92L419.9 166.4l13.5 18.38L78.66 445.3z" />
            <path id="XMLID_35_" fill="#F5F8FC" d="M81.5 386.63L376.53 170l27.4 8.17L81.1 415.2z" />
            <path id="XMLID_71_" fill="#B0BED9" d="M263.38 296.65l-4.8 3.53-1.06-1.44 4.8-3.53 1.06 1.5zm6.37-6.9l-4.8 3.53 1.06 1.43 4.8-3.5-1-1.4zm-14.87 10.93l-4.8 3.52 1.06 1.44 4.8-3.53-1.06-1.4zm-7.44 5.46l-4.8 3.52 1.06 1.44 4.8-3.52-1.06-1.44zM240 311.6l-4.8 3.52 1.07 1.44 4.8-3.52-1.06-1.44zm37.2-27.3l-4.8 3.5 1.05 1.45 4.8-3.52-1.06-1.44zm7.43-5.47l-4.8 3.52 1.06 1.44 4.7-3.6-1.1-1.5zm7.43-5.46l-4.8 3.52 1.06 1.4 4.8-3.5-1.06-1.5zm7.44-5.46l-4.8 3.6 1.06 1.5 4.8-3.5-1.06-1.4zm7.44-5.4l-4.8 3.5 1.05 1.5 4.8-3.5-1.1-1.4zm7.43-5.4l-4.8 3.5 1.06 1.5 4.8-3.5-1.06-1.4zm7.44-5.4l-4.8 3.6 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.4 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1.1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.4 4.8-3.5-1.1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.6 1 1.4 4.8-3.5-1.1-1.4zm7.4-5.4l-4.8 3.6 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.4 4.8-3.5-1.1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.4 4.8-3.5-1-1.4zM91.5 421l-4.8 3.55 1.1 1.47 4.8-3.5-1.1-1.45zm7.5-5.44l-4.8 3.5 1 1.4 4.8-3.5-1.1-1.45zm7.4-5.46l-4.8 3.5 1.03 1.47 4.8-3.5-1-1.43zm7.4-5.45l-4.8 3.5 1.1 1.45 4.8-3.55-1-1.45zm7.5-5.46l-4.8 3.5 1.1 1.4 4.8-3.6-1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.4 4.8-3.6-1.1-1.4zm7.5-5.5l-4.8 3.5 1 1.4 4.8-3.6-1.1-1.5zm7.4-5.5l-4.8 3.5 1.1 1.4 4.8-3.6-1.1-1.5zm7.4-5.5l-4.8 3.5 1.1 1.4 4.8-3.6-1.1-1.4zm7.4-5.5l-4.8 3.5 1.1 1.4 4.8-3.6-1.1-1.5zm7.44-5.5l-4.8 3.5 1.03 1.5 4.8-3.5-1.08-1.4zm7.4-5.5l-4.8 3.5 1.06 1.4 4.8-3.5-1.07-1.5zm7.44-5.5l-4.8 3.5 1.1 1.4 4.8-3.5-1.05-1.5zm7.5-5.5l-4.8 3.5 1 1.4 4.8-3.6-1.1-1.5zm7.4-5.5L191 348l1 1.4 4.8-3.6-1.05-1.5zm7.4-5.5l-4.8 3.5 1.05 1.5 4.7-3.5-1-1.4zm7.4-5.5l-4.8 3.6 1.05 1.5 4.8-3.5-1.1-1.4zm7.4-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1.07-1.4zm7.5-5.4l-4.8 3.5 1 1.5 4.8-3.5-1.1-1.5zm7.4-5.4l-4.8 3.5 1.04 1.4 4.8-3.6-1-1.4zm7.42-5.5l-4.8 3.5 1.05 1.4 4.8-3.5-1.04-1.48z" />
            <path id="XMLID_36_" fill="#BECADE" d="M249.85 278.3l-4.8 3.52-1.06-1.44 4.8-3.53 1 1.44zm6.38-6.9l-4.8 3.52 1.05 1.43 4.8-3.52-1.05-1.44zm-14.88 10.92l-4.8 3.52 1.06 1.44 4.8-3.53-1-1.44zm-7.43 5.46l-4.8 3.52 1.05 1.44 4.8-3.52-1.05-1.44zm-7.44 5.46l-4.8 3.52 1.06 1.44 4.8-3.52-1.06-1.44zm37.18-27.3l-4.8 3.5 1.06 1.45 4.8-3.6-1.06-1.5zm7.44-5.47l-4.8 3.52 1.06 1.4 4.8-3.5-1.06-1.5zm7.43-5.46l-4.8 3.6 1.06 1.5 4.8-3.5-1.1-1.4zm7.44-5.4l-4.8 3.5 1.06 1.5 4.8-3.5-1.06-1.4zm7.44-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.4 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.4 4.8-3.5-1.1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.5zm7.4-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.4 4.8-3.5-1-1.4zm7.4-5.4l-4.8 3.6 1.1 1.4 4.8-3.5-1.1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.5 4.8-3.6-1-1.4zm7.5-5.4l-4.8 3.6 1.1 1.5 4.8-3.5-1.1-1.4zm-275.2 202l-4.8 3.5 1.1 1.5 4.8-3.5-1.1-1.4zm7.5-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.5zm7.5-5.4l-4.8 3.5 1 1.48 4.8-3.5-1.1-1.42zm7.4-5.5l-4.8 3.6 1 1.47 4.8-3.5-1-1.5zm7.4-5.4l-4.8 3.57 1.1 1.43 4.8-3.5-1-1.4zm7.5-5.42L133 363l1.1 1.5 4.8-3.53-1.1-1.43zm7.4-5.5l-5 3.38 1.1 1.4 4.8-3.5-1.1-1.4zm7.5-5.5l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.5zm7.4-5.4l-4.8 3.5 1.1 1.5 4.8-3.5-1-1.45zm7.4-5.6l-4.8 3.5 1.1 1.5 4.8-3.5-1.1-1.5zm7.5-5.4l-4.8 3.53 1.1 1.4 4.8-3.5-1-1.4zm7.4-5.46l-4.8 3.5 1.1 1.4 4.8-3.5-1-1.5zm7.5-5.5l-4.8 3.5 1.1 1.4 4.8-3.5-1.1-1.5zm7.5-5.5l-4.8 3.5 1 1.4 4.8-3.56-1.1-1.4zm7.4-5.5l-4.8 3.5 1.07 1.4 4.8-3.5-1.1-1.43zm7.4-5.5l-4.8 3.5 1.1 1.47 4.8-3.53-1.1-1.4zm7.5-5.44l-4.8 3.5 1.1 1.42 4.8-3.5-1.05-1.5zm7.5-5.5l-4.8 3.5 1.1 1.5 4.8-3.5-1.06-1.46z" />
          </g>
          <g id="iceberg" opacity=".8">
            <path id="XMLID_134_" fill="#FFF" d="M517.64 262.1l14.77-38.92s34.5 36.7 32.8 37.06c-1.7.36 3.1-5.82 3.1-5.82l20.4 35.97v22.4l28 22.1-34.1 40.9-7.5 47.2-10.7-15-3.6 69.3-64.3-80.7.4-35-17.7-51.2 14 2.9-5.2-5.1 7-23.2 22.7-23z" />
            <path id="XMLID_136_" fill="#8FC1FF" d="M525.04 279.63l9.26-43.15s28.58 44.64 27.27 44.9c-1.32.28 3.77-8.12 3.77-8.12l13.2 27.7v16.88l29.68 16.38-27.02 32.62-9.32 41.64-9.5-7.13-5.95 54.8-56.67-68.4-.22-39.03-12.34-24.3 17.48-2.7-4.46-12.36 1.42-21.2 23.4-8.53z" />
          </g>
          <defs>
            <circle id="XMLID_1_" cx="336.11" cy="336.11" r="336.11" />
          </defs>
          <clipPath id="XMLID_6_">
            <use xlink:href="#XMLID_1_" overflow="visible" />
          </clipPath>
          <g clip-path="url(#XMLID_6_)">
            <path id="titanic-wave-fg" fill="#0060D6" d="M1149.23 685.67V325.93c-15.72-.13-28.2 1.75-36.42 3.37-12.1 2.5-16.7 4.73-34.8 9.22-.9.25-16 4-31.5 6.73-14.2 2.5-34.2 5.1-59.1 5.6-24.8-.5-44.8-3.1-59.1-5.6-15.5-2.74-30.6-6.48-31.5-6.73-18-4.5-22.6-6.73-34.8-9.22-8.3-1.62-20.7-3.5-36.4-3.37-15.7-.13-28.2 1.75-36.4 3.37-12.1 2.5-16.7 4.73-34.8 9.22-.9.25-16.1 4-31.6 6.73-14.2 2.5-34.2 5.1-59 5.6-24.9-.5-44.9-3.1-59.1-5.6-15.5-2.74-30.6-6.48-31.5-6.73-18-4.5-22.6-6.73-34.8-9.22-8.3-1.62-20.7-3.5-36.4-3.37-15.7-.13-28.2 1.75-36.4 3.37-12.1 2.5-16.7 4.73-34.8 9.22-.9.25-16 4-31.5 6.73-14.2 2.5-34.2 5.1-59.1 5.6-24.8-.5-44.8-3.1-59.1-5.6-15.5-2.74-30.6-6.48-31.5-6.73-18-4.5-22.7-6.73-34.8-9.22-8.3-1.62-20.7-3.5-36.4-3.37-15.7-.13-28.2 1.75-36.4 3.37-12.1 2.5-16.7 4.73-34.8 9.22-.9.25-16 4-31.5 6.73-14.2 2.5-34.2 5.1-59.1 5.6-19.4-.38-35.9-2.07-48.9-3.98v338.8h1182.1z" opacity=".59" />
          </g>
        </svg>
      </figure>
    </article>
  </main>
  <footer>
    <h2 id="footnote-label">Footnotes</h2>
    <ol>
      <li id="molony"><strong>The Independent</strong>, <a href="http://www.independent.co.uk/news/uk/home-news/rms-titanic-evidence-fire-senan-molony-belfast-new-york-southampton-sink-april-1912-a7504236.html"><em>Titanic sank due to enormous uncontrollable fire, not iceberg, claim experts</em></a> <a href="#molony-ref" aria-label="Back to content">↩</a></li>
      <li id="Hartigan"><strong>J. A. Hartigan and Beat Kleiner</strong>, <a href="https://www.jstor.org/stable/2683556"><em>A Mosaic of Television Ratings</em></a> <a href="#Hartigan-ref" aria-label="Back to content">↩</a></li>
    </ol>

    <div>
      <p>Justin Chill &copy; 2025</p>
      <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img src="imgs/github.svg" alt="GitHub logo" class="icon">Source code</a></span>
    </div>
  </footer>
  <script type="text/javascript" src="js/growup.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/d3"></script>
  <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>

  <script>
    window.addEventListener("load", () => {
      var element = d3.select('figure:not(.mid-size)').node();
      var width = element.getBoundingClientRect().width;
      var size = width > 450 ? 18 : 14;

      var tb5 = d3.csvParse(`Sex,Age,p_sex,x1,x2,y1,y2,Class_c,Class,value,_x1,_x2,X1,X2
  Female,Adult,0.210336,0,0.210336,0,0.883156,1,First Class,144,0,0.338824,0,0.071267
  Female,Adult,0.210336,0,0.210336,0,0.883156,2,Second Class,93,0.338824,0.557647,0.071267,0.117293
  Female,Adult,0.210336,0,0.210336,0,0.883156,3,Third Class,165,0.557647,0.945882,0.117293,0.198953
  Female,Adult,0.210336,0,0.210336,0,0.883156,C,Crew,23,0.945882,1,0.198953,0.210336
  Female,Child,0.210336,0,0.210336,0.906489,1,1,First Class,1,0,0.022222,0,0.004674
  Female,Child,0.210336,0,0.210336,0.906489,1,2,Second Class,13,0.022222,0.311111,0.004674,0.065438
  Female,Child,0.210336,0,0.210336,0.906489,1,3,Third Class,31,0.311111,1,0.065438,0.210336
  Male,Adult,0.774664,0.225336,1,0,0.940557,1,First Class,175,0,0.104979,0.225336,0.30666
  Male,Adult,0.774664,0.225336,1,0,0.940557,2,Second Class,168,0.104979,0.205759,0.30666,0.38473
  Male,Adult,0.774664,0.225336,1,0,0.940557,3,Third Class,462,0.205759,0.482903,0.38473,0.599424
  Male,Adult,0.774664,0.225336,1,0,0.940557,C,Crew,862,0.482903,1,0.599424,1
  Male,Child,0.774664,0.225336,1,0.96389,1,1,First Class,5,0,0.078125,0.225336,0.285857
  Male,Child,0.774664,0.225336,1,0.96389,1,2,Second Class,11,0.078125,0.25,0.285857,0.419002
  Male,Child,0.774664,0.225336,1,0.96389,1,3,Third Class,48,0.25,1,0.419002,1`, d3.autoType);

      var tb6 = d3.csvParse(`Sex,Age,Class,survived,Class_c,p_fate,p_sex,x1,x2,y1,y2,value,_x1,_x2,X1,X2,Y1,Y2
  Male,Adult,Crew,192,C,0.222738,0.774664,0.225336,1,0,0.940557,862,0.482903,1,0.599424,1,0,0.209498
  Male,Adult,Third Class,75,3,0.162338,0.774664,0.225336,1,0,0.940557,462,0.205759,0.482903,0.38473,0.599424,0,0.152688
  Male,Adult,Second Class,14,2,0.083333,0.774664,0.225336,1,0,0.940557,168,0.104979,0.205759,0.30666,0.38473,0,0.07838
  Male,Adult,First Class,57,1,0.325714,0.774664,0.225336,1,0,0.940557,175,0,0.104979,0.225336,0.30666,0,0.306353
  Male,Child,Third Class,13,3,0.270833,0.774664,0.225336,1,0.96389,1,48,0.25,1,0.419002,1,0.96389,0.97367
  Male,Child,Second Class,11,2,1,0.774664,0.225336,1,0.96389,1,11,0.078125,0.25,0.285857,0.419002,0.96389,1
  Male,Child,First Class,5,1,1,0.774664,0.225336,1,0.96389,1,5,0,0.078125,0.225336,0.285857,0.96389,1
  Female,Adult,Crew,20,C,0.869565,0.210336,0,0.210336,0,0.883156,23,0.945882,1,0.198953,0.210336,0,0.767962
  Female,Adult,Third Class,76,3,0.460606,0.210336,0,0.210336,0,0.883156,165,0.557647,0.945882,0.117293,0.198953,0,0.406787
  Female,Adult,Second Class,80,2,0.860215,0.210336,0,0.210336,0,0.883156,93,0.338824,0.557647,0.071267,0.117293,0,0.759704
  Female,Adult,First Class,140,1,0.972222,0.210336,0,0.210336,0,0.883156,144,0,0.338824,0,0.071267,0,0.858624
  Female,Child,Third Class,14,3,0.451613,0.210336,0,0.210336,0.906489,1,31,0.311111,1,0.065438,0.210336,0.906489,0.94872
  Female,Child,Second Class,13,2,1,0.210336,0,0.210336,0.906489,1,13,0.022222,0.311111,0.004674,0.065438,0.906489,1
  Female,Child,First Class,1,1,1,0.210336,0,0.210336,0.906489,1,1,0,0.022222,0,0.004674,0.906489,1`, d3.autoType);

      // Use Promises to async request data
      var promises = [d3.csv("data/titanic_data.csv", d3.autoType), d3.csv("data/titanic_lifeboats.csv", d3.autoType)];

      myDataPromises = Promise.all(promises);

      // After data is successfully fetched, generate viz
      myDataPromises.then(function(data) {
        // Define the data. There's gotta be a better way to do this:
        var titanic = data[0];
        var lifeboats = data[1];

        var synthetic = {
          width: width,
          style: {
            fontSize: size,
            paddingLeft: 40,
            paddingBottom: 20,
          },
          x: {
            axis: null,
          },
          y: {
            axis: null,
          },
          marks: [
            Plot.rect(tb5, {
              x1: "X1",
              x2: "X2",
              y1: "y1",
              y2: "y2",
              fill: 'hsl(210, 36%, 96%)',
              title: d => `${d.Age}\n${d.Sex}\n${d.Class}\nTotal: ${d.value}`
            }),

            Plot.rect(tb6, {
              x1: "X1",
              x2: "X2",
              y1: "Y1",
              y2: "Y2",
              fill: 'hsl(211, 39%, 23%)',
              title: d => `${d.Age}\n${d.Sex}\n${d.Class}\nSurvived: ${d.survived}`
            }),

            Plot.rect(tb5, {
              stroke: '#ccc',
              x1: "X1",
              x2: "X2",
              y1: "y1",
              y2: "y2",
            }),

            Plot.text([{
              l: 'Adults',
              y: 0.45
            }, {
              l: 'Children',
              y: 0.95
            }], {
              x: 0,
              dx: -10,
              y: d => d.y,
              fontWeight: "bold",
              text: d => d.l,
              textAnchor: "end",
              fill: "hsl(211, 39%, 23%)",
            }),

            Plot.text([{
              l: 'Females',
              x: 0.1
            }, {
              l: 'Males',
              x: 0.6
            }], {
              y: 1,
              dy: -10,
              x: d => d.x,
              fontWeight: "bold",
              text: d => d.l,
              textAnchor: "middle",
              fill: "hsl(211, 39%, 23%)",
            }),

            Plot.text([{
                  l: '1st',
                  x: 0.035
                }, {
                  l: '2nd',
                  x: 0.09
                }, {
                  l: '3rd',
                  x: 0.15
                }, {
                  l: 'C',
                  x: 0.203
                },
                {
                  l: '1st',
                  x: 0.27
                }, {
                  l: '2nd',
                  x: 0.35
                }, {
                  l: '3rd',
                  x: 0.49
                }, {
                  l: 'Crew',
                  x: 0.8
                }
              ], //todo: derive from tb5
              {
                y: 0,
                dy: 10,
                x: d => d.x,
                fontWeight: "bold",
                text: d => d.l,
                textAnchor: "middle",
                fill: "hsl(211, 39%, 23%)",
              })
          ],
        };

        var agesFacet = {
          width: width,
          marginRight: 0,
          style: {
            fontSize: size,
            // paddingLeft: 0,
            // paddingRight: 10,
            paddingBottom: 10,
            textTransform: "capitalize"
          },
          color: {
            range: ["rgb(245, 129, 120)", "rgb(36, 63, 108)"],
            legend: false
          },
          x: {
            nice: true,
            tickSize: 8,
            labelAnchor: "center",
            labelOffset: 44,
          },
          y: {
            label: null,
            nice: true,
            tickSize: 0,
            grid: true,
          },
          facet: {
            data: titanic,
            x: "Sex",
            label: null,
          },
          marks: [
            Plot.frame({
              stroke: "hsl(209, 23%, 60%)",
              strokeOpacity: .35
            }),
            Plot.rectY(titanic, Plot.binX({
              y: "count"
            }, {
              x: "Age",
              thresholds: 10,
              fill: "Sex",
              tip: true
            })),
            Plot.ruleY([0])
          ]
        };

        var agesline = {
          width: width,
          marginRight: 0,
          style: {
            fontSize: size,
            textTransform: "capitalize"
          },
          color: {
            scheme: "GnBu",
            type: "categorical",
            legend: true,
            domain: ["Survived", "Perished"],
          },
          x: {
            labelOffset: 50,
            labelAnchor: "center"
          },
          y: {
            labelAnchor: "top",
            labelOffset: 0,
          },
          // fx: {interval: 10},
          marks: [
            Plot.rectY(
              titanic,
              Plot.sort({
                  channel: "y2",
                  order: "descending"
                }, // prevent occlusion 🌶️
                Plot.binX({
                    y2: "count"
                  }, // opt-out of stacking
                  {
                    x: "Age",
                    fill: (d) => d.Survived ? "Perished" : "Survived",
                    thresholds: 10,
                  }
                )
              )
            ),
            Plot.ruleY([0])
          ]
        };

        var classScatter = {
          width: width,
          marginRight: 0,
          style: {
            fontSize: size,
            paddingLeft: 0,
            paddingRight: 10,
            paddingBottom: 10,
            textTransform: "capitalize"
          },
          color: {
            scheme: "GnBu",
            legend: true,
            type: "categorical",
            domain: ["Survived", "Perished"],
            // reverse: true,
          },
          x: {
            labelOffset: 55,
            label: "Passenger class",
            domain: [1, 2, 3],
            tickSize: 0,
          },
          y: {
            tickFormat: (d, i, _) => (i === _.length - 1 ? `$${d}` : d), // Show $ on first tick only
            nice: true,
            ticks: 4,
            labelOffset: -10,
          },
          marks: [
            Plot.dot(titanic, {
              x: "Pclass",
              y: "Fare",
              stroke: (d) => d.Survived ? "Perished" : "Survived",
              channels: {
                Name: "Name",
                "Survived?": d => d.Survived == 1 ? "Yes" : "No",
                Fare: d => d3.format("$.2f")(d.Fare),
                Gender: "Sex",
                "Passenger Class": "Pclass"
              },
              tip: {
                format: {
                  fx: null,
                  fy: null,
                  x: null,
                  fill: null,
                },
              },
            }),
          ]
        };

        var lifeboat_bars = {
          width: width,
          height: 720,
          style: {
            fontSize: size,
            paddingTop: "1rem",
            paddingRight: width > 450 ? 30 : 10,
          },
          x: {
            label: "← Empty seats · Lifeboats · Filled seats →                               ",
            labelAnchor: "center",
            axis: "top",
            labelOffset: 45,
            tickSize: 0,
            grid: true,
            nice: true,
          },
          fy: {
            label: null,
          },
          y: {
            label: null,
            tickFormat: null,
            tickSize: 0
          },
          color: {
            domain: lifeboats.attribute,
            scheme: "BuRd",
            columns: 3,
            legend: true
          },
          marks: [
            Plot.barX(
              lifeboats,
              Plot.groupX({
                y: "count"
              }, {
                fy: "boat",
                x: "value",
                fill: "attribute",
                tip: {
                  format: {
                    x: null,
                    y: null,
                  },
                },
                sort: {
                  fy: "x"
                },
                // sort: d=> d3.groupSort(lifeboats, D => d3.sum(D, d => -Math.min(0, d.value)), d => d.boat)
              })
            ),
            Plot.ruleX([0])
          ]
        };

        var whoSurvived = {
          width: width,
          marginLeft: 0,
          marginRight: 60,
          height: width > 450 ? 700 : 550,
          style: {
            fontSize: size,
            textTransform: "capitalize",
            paddingBottom: 20,
            paddingRight: width > 450 ? 30 : 10,
          },
          color: {
            range: ["rgb(245, 129, 120)", "rgb(36, 63, 108)"],
            legend: false
          },
          facet: {
            label: null
          },
          x: {
            nice: true,
            tickSize: 8,
            labelAnchor: "center",
            labelOffset: 44,
            ticks: width > 450 ? 4 : 2,
          },
          fx: {
            tickFormat: (d, i) => (i === 0 ? `${d}st class` : `${d}nd class`), // Show $ on first tick only
          },
          fy: {
            tickFormat: d => d == 1 ? "Survived" : "Perished",
            reverse: true,
          },
          marks: [
            Plot.linearRegressionY(titanic, Plot.dodgeY("middle", {
              x: "Age",
              fx: "Pclass",
              fy: "Survived",
              stroke: null,
              ci: 0.95,
              fillOpacity: .075,
            })),
            Plot.frame({
              stroke: "hsl(209, 23%, 60%)",
              strokeOpacity: .35
            }),
            Plot.dot(titanic, Plot.dodgeY("middle", {
              x: "Age",
              // y: "Age",
              fill: "Sex",
              fx: "Pclass",
              fy: "Survived",
              r: width > 450 ? 2.55 : 1.65,
              tip: true,
              channels: {
                Name: "Name",
                "Survived?": d => d.Survived == 1 ? "Yes" : "No",
                Fare: d => d3.format("$.2f")(d.Fare),
                Gender: "Sex",
                "Passenger Class": "Pclass"
              },
              tip: {
                format: {
                  fx: null,
                  fy: null,
                  fill: null,
                },
              },
            }))
          ]
        };
        // 
        function sign(label) {
          label === 0 ? -1 : 1
        };
        var Bron = {
          width: width,
          style: {
            fontSize: size,
          },
          color: {
            legend: false
          },
          facet: {
            label: null
          },
          x: {
            nice: true,
            tickSize: 8,
            labelAnchor: "center",
            labelOffset: 44,
          },
          marks: [
            Plot.barX(
              titanic,
              Plot.stackX2({
                x: (d) => d.Survived === "1" ? 1 : -1,
                y: "Pclass",
                fill: "Sex",
                title: "Name"
              }, {
                fill: "Sex",
                y: "Pclass"
              })
            ),

            // Plot.barX(titanic, {y: "Sex", x: "Survived", fill: "Sex", sort: {y: "x"}, fy: "Pclass"}),
            Plot.ruleX([0]),

            Plot.frame({
              stroke: "hsl(209, 23%, 60%)",
              strokeOpacity: .35
            }),
          ]
        };

        document.getElementById("agesFacet").appendChild(Plot.plot(agesFacet));
        document.getElementById("agesline").appendChild(Plot.plot(agesline));
        document.getElementById("classScatter").appendChild(Plot.plot(classScatter));
        document.getElementById("lifeboat_bars").appendChild(Plot.plot(lifeboat_bars));
        document.getElementById("whoSurvived").appendChild(Plot.plot(whoSurvived));
        // document.getElementById("Bron").appendChild(Plot.plot(Bron));
      });
    });
  </script>
</body>

</html>