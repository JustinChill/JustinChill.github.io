<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <title>AI Eats the World (2025) | Justin Chill</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description"
        content="Every 10‚Äì15 years, a platform shift reshapes technology. We are currently living through the deployment phase of Generative AI.">
    <meta name="author" content="Justin Chill">

    <meta name="robots" content="all">
    <meta content="en_US" property="og:locale">
    <meta content="JustinChill" property="og:site_name">
    <meta content="article" property="og:type">
    <meta content="https://justinchill.com/ai-2025.html" property="og:url">
    <meta content="AI Eats the World (2025) | Justin Chill" property="og:title">
    <meta
        content="Every 10‚Äì15 years, a platform shift reshapes technology. We are currently living through the deployment phase of Generative AI."
        property="og:description">
    <meta content="https://www.justinchill.com/blog.html" property="og:see_also">
    <link rel="canonical" href="https://www.justinchill.com/ai-2025.html">

    <meta content="https://www.justinchill.com/imgs/cover/ai2025_cover.webp" property="og:image">
    <meta content="https://www.justinchill.com/imgs/cover/ai2025_cover.webp" property="twitter:image">
    <meta content="A chart showing overlapping S-curves of technology adoption." property="og:image:alt">

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="AI Eats the World (2025) | Justin Chill">
    <meta name="twitter:description"
        content="Every 10‚Äì15 years, a platform shift reshapes technology. We are currently living through the deployment phase of Generative AI.">

    <link type="text/plain" href="humans.txt" rel="author">
    <link rel="preload" href="style.css" as="style" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="/favicon.ico">
    <meta name="theme-color" content="#4C63B6">

    <script type="module">
        document.documentElement.classList.remove('no-js');
        document.documentElement.classList.add('js');
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&display=swap"
        rel="stylesheet">

    <style>
        /* Kept specific styles for the AI article diagrams */
        figure svg g[aria-label="tip"] text {
            text-transform: capitalize;
        }

        :root {
            --bg-color: #ffffff;
            --text-color: #222222;
            --accent-color: #D93025;
            --accent-secondary: #4285F4;
            --gray-light: #f8f9fa;
            --gray-medium: #767676;
            --font-serif: "Merriweather", Georgia, serif;
            --font-sans: "Lato", Helvetica, Arial, sans-serif;
            --max-width: 680px;
            --MTgray6: #f2f2f2;
            --MTgray25: #bebebe;
        }

        /* Diagram Container */
        .diagram-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            gap: 1rem;
            margin: 2rem 0;
        }

        .circle {
            background-color: white;
            border-radius: 50%;
            width: 260px;
            height: 260px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1.5rem;
            box-sizing: border-box;
            border: 2px solid #555;
            flex-shrink: 0;
        }

        .circle.highlight {
            border-color: #ea4335;
        }

        .circle h2 {
            font-size: 1.25rem;
            margin: 0 0 0.5rem 0;
            color: #333;
        }

        .circle p {
            font-size: 0.95rem;
            line-height: 1.4;
            margin: 0;
            color: #444;
        }

        .arrow {
            width: 0;
            height: 0;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
            border-left: 18px solid #999;
            margin: 0 10px;
            flex-shrink: 0;
        }

        @media (max-width: 850px) {
            .diagram-container {
                flex-direction: column;
            }

            .arrow {
                transform: rotate(90deg);
                margin: 20px 0;
            }
        }

        .circle.dark {
            background-color: #555;
            color: white;
            border: none;
        }

        .circle.dark h2,
        .circle.dark p {
            color: white;
        }

        .circle.red-filled {
            background-color: #D93025;
            color: white;
            border: none;
        }

        .circle.red-filled h2,
        .circle.red-filled p {
            color: white;
        }

        /* Diagram Utilities */
        .diagram-spaced {
            justify-content: space-around;
        }

        .circle-md {
            width: 200px;
            height: 200px;
        }

        .circle-sm {
            width: 160px;
            height: 160px;
            padding: 1rem;
        }

        .circle-250 {
            width: 250px;
            height: 250px;
            padding: 2rem;
        }

        .divider-vertical {
            border-left: 3px dotted #D93025;
            height: 250px;
            margin: 0 1rem;
        }

        .circle-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .circle-subtitle {
            font-size: 1rem;
            color: #eee;
            margin-bottom: 0.5rem;
        }

        .circle-text-lg {
            font-size: 1.2rem;
            line-height: 1.3;
        }

        /* Chart: Platform Shifts */
        #chart-platform-shifts svg {
            overflow: visible;
        }

        #chart-platform-shifts .label {
            font-family: var(--font-ui), var(--font-main), "Georgia", "Times New Roman", serif;
            font-size: 28px;
            text-anchor: middle;
            fill: #555555;
            font-weight: normal;
        }

        #chart-platform-shifts .divider {
            stroke: #E0E0E0;
            stroke-width: 4;
        }

        #chart-platform-shifts .curve-gray {
            fill: none;
            stroke: #757575;
            stroke-width: 4;
            marker-end: url(#arrowGray);
        }

        #chart-platform-shifts .curve-red {
            fill: none;
            stroke: #D93025;
            stroke-width: 4;
            stroke-dasharray: 8, 8;
            marker-end: url(#arrowRed);
        }

        #chart-platform-shifts .label-red {
            fill: #D93025;
        }

        /* Chart: Unexpected */
        #chart-unexpected svg {
            overflow: visible;
        }

        #chart-unexpected .label {
            font-family: var(--font-ui), var(--font-main), "Georgia", "Times New Roman", serif;
            font-size: 28px;
            text-anchor: middle;
            fill: #555555;
            font-weight: normal;
        }

        #chart-unexpected .divider {
            stroke: #E0E0E0;
            stroke-width: 4;
        }

        #chart-unexpected .curve-gray {
            fill: none;
            stroke: #757575;
            stroke-width: 4;
            marker-end: url(#arrowGray);
        }

        #chart-unexpected .curve-red {
            fill: none;
            stroke: #D93025;
            stroke-width: 4;
            stroke-dasharray: 8, 8;
            marker-end: url(#arrowRed);
        }

        #chart-unexpected .label-red {
            fill: #D93025;
        }

        /* Twitter card */
        .wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: var(--spacer-2) 0;
        }

        .wrapper p,
        .wrapper h1,
        .wrapper h2,
        .wrapper h3,
        .wrapper h4 {
            margin: 0;
            padding: 0;
        }

        .wrapper p,
        .wrapper a,
        .wrapper time {
            font-family: "Source Sans 3", sans-serif;
            font-weight: 400;
            color-scheme: light dark;
            color: #fff;
            text-decoration: none;

            font-synthesis: none;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-text-size-adjust: 100%;
        }

        .card {
            display: flex;
            flex-direction: column;
            width: 601px;
            height: auto;
            padding: 35px 31px;
            gap: 15px;
            border-radius: 10px;
            background: #243447;
            box-shadow: 0px 15px 60px 0px rgba(52, 81, 116, 0.15);
        }

        .user {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .profile {
            display: flex;
            align-items: center;
            gap: 22px;
        }

        .ava {
            border-radius: 50%;
            width: 50px;
            height: 50px;
        }

        .icon {
            font-size: 30px;
            color: #1da1f2;
        }

        .username {
            display: flex;
            flex-direction: column;
            gap: 1px;
        }

        .username .name {
            line-height: normal;
            font-size: 18px;
            font-style: normal;
            font-weight: 700;
        }

        .username .uname {
            color: rgba(255, 255, 255, 0.6);
            font-size: 16px;
            font-style: normal;
            font-weight: 400;
            line-height: normal;
        }

        .twitt .tag {
            text-decoration: none;
            color: #1da1f2;
        }

        .insight {
            display: flex;
            align-items: center;
            gap: 20px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 16px;
            font-weight: 600;
            line-height: 26px;
        }

        .like {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .like svg:hover {
            fill: crimson;
            filter: drop-shadow(0 0 10px crimson);
            cursor: pointer;
        }

        /* Photo span utility */
        .MTmini {
            position: relative;
            background-color: var(--MTgray6);
            padding: 2px 5px 2px 10px;
            margin-left: 23px;
            white-space: nowrap;
            margin-right: 3px;
            border-radius: 3px;
            border: 1px solid var(--MTgray25);
            line-height: inherit;
        }

        .MTmini span {
            display: inline-block;
            position: absolute;
            width: 30px;
            height: 30px;
            top: -6px;
            left: -20px;
            background-size: 100%;
            background-repeat: no-repeat;
            background-position: center center;
            border-radius: 50%;
            border: 1px solid #bfbfbf;
            background-color: white;
        }

        .MTmini .nvidia {
            background-image: url("imgs/nvidia_logo.svg");
        }

        .MTmini .intel {
            background-image: url("imgs/Intel_logo.svg");
        }

        .MTmini .tsmc {
            background-image: url("imgs/tsmc_logo.svg");
        }

        .MTmini .msft {
            background-image: url("imgs/msft_logo.svg");
        }

        .MTmini .apple {
            background-image: url("imgs/apple_logo.svg");
        }

        .MTmini .amazon {
            background-image: url("imgs/amazon_logo.svg");
        }

        .MTmini .google {
            background-image: url("imgs/google_logo.svg");
        }

        .MTmini .meta {
            background-image: url("imgs/meta_logo.svg");
        }

        .MTmini .openai {
            background-image: url("imgs/openai_icon_logo.svg");
        }
    </style>
</head>

<body>
    <nav class="nav" role="navigation">
        <div class="nav__list">
            <a href="index.html" class="nav__item" aria-label="Homepage">Home</a>
            <a href="blog.html" class="nav__item" aria-label="Blog section">Blog</a>
            <a href="now.html" class="nav__item" aria-label="Now page">Now</a>
        </div>
        <div class="nav__list">
            <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
            <a href="#" class="nav__item js-email-link">Email</a>
        </div>
    </nav>

    <main role="main">
        <article>
            <div class="article-hero">
                <h2 class="article-category">Presentation</h2>
                <h1 class="article-title">AI Eats The World</h1>
                <h2 class="article-subtitle">Analysis of Benedict Evans' Thesis</h2>
            </div>
            <h3>Platform Shifts</h3>
            <figure id="chart-platform-shifts"
                aria-label="A line chart showing overlapping S-curves of technology adoption.">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 450">
                    <defs>
                        <marker id="arrowGray" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto"
                            markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#757575" />
                        </marker>
                        <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto"
                            markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#D93025" />
                        </marker>
                    </defs>
                    <rect width="100%" height="100%" fill="white" />

                    <line x1="200" y1="0" x2="200" y2="450" class="divider" />
                    <line x1="400" y1="0" x2="400" y2="450" class="divider" />
                    <line x1="600" y1="0" x2="600" y2="450" class="divider" />
                    <line x1="800" y1="0" x2="800" y2="450" class="divider" />

                    <path d="M 10,325 C 100,325 110,250 185,240" class="curve-gray" />
                    <path d="M 210,285 C 300,285 310,210 385,200" class="curve-gray" />
                    <path d="M 410,245 C 500,245 510,170 585,160" class="curve-gray" />
                    <path d="M 610,205 C 700,205 710,130 785,120" class="curve-gray" />
                    <path d="M 810,165 C 900,165 910,90 985,80" class="curve-red" />

                    <text x="100" y="400" class="label">Mainframes</text>
                    <text x="300" y="400" class="label">PCs</text>
                    <text x="500" y="400" class="label">Web</text>
                    <text x="700" y="400" class="label">Mobile</text>
                    <text x="900" y="400" class="label label-red">Generative AI</text>
                </svg>
            </figure>
            <p>Every 10‚Äì15 years, a platform shift reshapes technology. We are currently living through the deployment
                phase of Generative AI, marked by massive capital expenditure, uncertainty, and the search for value.
            </p>
            <p>I'm riffing on former a16z Partner Benedict Evans' 2025 update, <a
                    href="https://static1.squarespace.com/static/50363cf324ac8e905e7df861/t/69267317ffc0332dfc580e20/1764127511109/2025+Autumn+AI.pdf">AI
                    eats the world</a>.

            <h2>The Next Platform Shift</h2>
            <p>We have seen this pattern before. Mainframes, PCs, the Web, and Smartphones each represented a sigmoid
                curve of adoption. Now, Generative AI attempts to start a new curve. However, unlike previous shifts
                where we knew the physical limits (screen size, bandwidth), we do not yet know the ceiling of LLM
                capability.</p>

            <h3>What happens in a platform shift?</h3>
            <p>Who is affected, and how much?</p>

            <div class="diagram-container mid-size">
                <section class="circle">
                    <h2>The New Thing!</h2>
                    <p>All tech innovation, investment and company creation switches over</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Inside tech</h2>
                    <p>New gatekeepers,<br>new value capture</p>
                    <p style="margin-top: 0.5rem;">New and bigger markets</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>Outside tech</h2>
                    <p>Is this a new tool, new revenue, or an existential threat?</p>
                </section>
            </div>

            <p>Dominance in one era does not guarantee survival in the next. <span class="MTmini"><span
                        class="msft"></span>Microsoft</span> dominated the PC era with a 90%+
                share of computing, but when the center of gravity shifted to smartphones, its share of total computing
                devices collapsed.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Microsoft OS share of global computer unit sales</h3>
            <figure id="chart-microsoft-share" aria-label="Chart showing Microsoft OS share decline">
                <figcaption class="right">Data: <a href='https://gs.statcounter.com' target='_blank'>StatCounter</a>,
                    Wikipedia.</figcaption>
            </figure>

            <p>Furthermore, early leaders often disappear. The "first" to market was not the winner in PCs, browsers,
                search, social, or smartphones. We should expect similar turbulence in the AI model layer.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Global PC unit sales share</h3>
            <figure id="chart-pc-share" aria-label="Chart showing PC market share evolution">
                <figcaption class="right">Data: <a href="https://www.gartner.com" target="_blank">Gartner</a>
                </figcaption>
            </figure>

            <h3>How will the new thing work? We don't know</h3>
            <p>For every new platform, we forget how many ideas failed and how unclear everything was.</p>

            <div class="diagram-container mid-size">
                <section class="circle">
                    <h2>Internet</h2>
                    <p>AOL, Yahoo,<br>Pointcast, Flash,<br>plugins, portals...<br>Sun? Netscape?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Mobile internet</h2>
                    <p>i-mode, J2ME, WAP,<br>mesh, DVB-H,<br>keyboards...<br>Nokia? RIM?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>Generative AI?</h2>
                    <p>Browsers? Agentic?<br>Voice? MCP?<br>Wearables? GEO?</p>
                </section>
            </div>

            <p>Similar to how the internet eventually became the default medium for meeting partners, AI adoption may
                follow a slow-then-explosive trajectory.</p>
            <p>When things are exciting, people get excited. This often leads to bubbles.</p>
            <h3>But when the dust settles, the world has changed</h3>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>US heterosexual couples who met online, by year of meeting</h3>
            <figure id="chart-online-dating" aria-label="Line chart showing the rise of couples meeting online">
                <figcaption class="right">Data: <a href="https://data.stanford.edu/hcmst2017" target="_blank">Rosenfeld
                        (HCMST)</a></figcaption>
            </figure>
            <p>The internet has gone from the New Thing to a basic part of daily life.</p>

            <h3>New platforms mean new tools (and new revenue)</h3>
            <p>SaaS means the typical large enterprise in the USA now uses 4-500 apps</p>

            <div class="diagram-container mid-size">
                <section class="circle dark circle-sm">
                    <h2>Mainframes</h2>
                    <p>One app</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle dark circle-sm">
                    <h2>PCs</h2>
                    <p>Dozens of apps</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle dark circle-sm">
                    <h2>SaaS</h2>
                    <p>4-500 apps*</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle red-filled circle-sm">
                    <h2>LLMs</h2>
                    <p>What can we automate next?</p>
                </section>
            </div>
            <h3>One way this platform shift is different, though</h3>
            <p>For PCs, the web or smartphones, we knew the
                physical limits of what could happen next year</p>
            <p>With LLMs, we don‚Äôt know how much better this could get ü§Ø</p>
            <blockquote>
                <p>‚ÄúThe race to AGI is afoot‚Äù</p>
                <cite>&mdash; Sergey Brin</cite>
            </blockquote>

            <h2>Another platform shift, or more?</h2>
            <p>We know this will get better, but we don‚Äôt know how much</p>
            <figure id="chart-unexpected"
                aria-label="A line chart showing overlapping S-curves of technology adoption.">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 450">
                    <defs>
                        <marker id="arrowGray" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto"
                            markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#757575" />
                        </marker>
                        <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto"
                            markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#D93025" />
                        </marker>
                    </defs>

                    <rect width="100%" height="100%" fill="white" />

                    <line x1="200" y1="0" x2="200" y2="450" class="divider" />
                    <line x1="400" y1="0" x2="400" y2="450" class="divider" />
                    <line x1="600" y1="0" x2="600" y2="450" class="divider" />
                    <line x1="800" y1="0" x2="800" y2="450" class="divider" />

                    <path d="M 10,325 C 100,325 110,250 185,240" class="curve-gray" />
                    <path d="M 210,285 C 300,285 310,210 385,200" class="curve-gray" />
                    <path d="M 410,245 C 500,245 510,170 585,160" class="curve-gray" />
                    <path d="M 610,205 C 700,205 710,130 785,120" class="curve-gray" />
                    <path d="M 810,165 L 850,20" class="curve-red" />
                    <path d="M 810,165 Q 880,165 920,120" class="curve-red" />
                    <text x="860" y="140" class="label label-red" style="font-size: 32px;">?</text>

                    <text x="100" y="400" class="label">Mainframes</text>
                    <text x="300" y="400" class="label">PCs</text>
                    <text x="500" y="400" class="label">Web</text>
                    <text x="700" y="400" class="label">Mobile</text>
                    <text x="900" y="400" class="label label-red">Generative AI</text>

                </svg>
            </figure>

            <h3>So how will the new thing turn out?</h3>
            <p>If this is ‚Äòonly‚Äô as big as mobile or the internet, that seems like enough</p>

            <div class="diagram-container mid-size diagram-spaced">
                <section class="circle red-filled circle-md">
                    <h2>How will this work?</h2>
                </section>

                <section class="circle red-filled circle-md">
                    <h2>How will this be useful?</h2>
                </section>

                <section class="circle red-filled circle-md">
                    <p style="font-size: 1.1rem; font-weight: bold;">Where is the distribution, value capture, and value
                        destruction?</p>
                </section>
            </div>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h2>2. The Capex Boom</h2>
            <p>The race for AGI has triggered an investment cycle without precedent. The "Big 4" (<span
                    class="MTmini"><span class="msft"></span>Microsoft</span>, <span class="MTmini"><span
                        class="meta"></span>Meta</span>, <span class="MTmini"><span
                        class="google"></span>Alphabet</span>, <span class="MTmini"><span
                        class="amazon"></span>Amazon</span>) are projected to spend over <strong>$330 billion</strong>
                in 2025 alone on AI infrastructure. This level of spending is driven by FOMO and the existential threat
                of missing the next platform.</p>

            <blockquote>
                <p>"The risk of under-investing is significantly greater than the risk of over-investing."</p>
                <cite>&mdash; Sundar Pichai, Q2 2024</cite>
            </blockquote>
            <h3>FOMO drives a capex surge</h3>
            <p>~$400bn in 2025 for the big four alone (for comparison, global telecoms is ~$300bn).</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Big Tech Capex ($bn)</h3>
            <figure id="chart-capex-surge" aria-label="Bar chart showing Capital Expenditure by Big Tech">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <p>Those four companies alone are expected to devote more than $380 billion combined to capital expenditures
                in their current fiscal years, with most going to chips, servers and other data center-related expenses.
                That‚Äôs a more than 1,300% jump from a decade ago. And they‚Äôve all pledged to spend significantly more in
                the year after that.</p>
            <blockquote>
                <p>"The very worst case would be that we have just pre-built for a couple of years."</p>
                <cite>&mdash; Mark Zuckerberg, Q3 2025</cite>
            </blockquote>
            <h2>A new investment cycle</h2>
            <p>This spending is reshaping the physical world. In the US, construction spending on data centers is
                rapidly approaching spending on office buildings.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>US construction value (2025 $bn, seasonally adjusted annual rate)</h3>
            <figure id="chart-construction" aria-label="Line chart showing US Construction Spending">
                <figcaption class="right">Data: <a href='https://www.census.gov/construction/c30/c30index.html'
                        target='_blank'>US Census Bureau</a></figcaption>
            </figure>

            <h3>Nvidia can‚Äôt keep up</h3>
            <p>While <span class="MTmini"><span class="nvidia"></span>Nvidia</span> is leading the AI chip market, it
                can‚Äôt keep up with the demand. They're trying to build a new Sun Microsystems (though China and the
                hyperscalers‚Äô own chip designs are coming up close behind).</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Nvidia vs Intel</h3>
            <figure id="chart-nvidia" aria-label="Line chart comparing Nvidia vs Intel revenue">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <p>This demand flows to one bottleneck: <span class="MTmini"><span class="nvidia"></span>Nvidia</span>.
                While <span class="MTmini"><span class="intel"></span>Intel</span> struggles to maintain relevance,
                <span class="MTmini"><span class="nvidia"></span>Nvidia's</span>
                revenue has exploded, decoupling entirely from traditional semiconductor cycles.
            </p>
            <h3>TSMC can't keep up either</h3>
            <p><span class="MTmini"><span class="tsmc"></span>TSMC</span> is unwilling (or unable) to expand
                capacity fast enough to meet <span class="MTmini"><span class="nvidia"></span>Nvidia's</span> book of
                business.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Quarterly revenue ($bn)</h3>
            <figure id="chart-tsmc" aria-label="Line chart showing Revenue of Nvidia, Intel and TSMC">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <h3>The Constraints</h3>
            <p>We are seeing wild estimates for future capacity. Some forecasts suggest we will need to triple global
                data center capacity by 2030, costing trillions of dollars. However, real-world constraints like power,
                chips, and permits are becoming major bottlenecks.</p>

            <div class="diagram-container mid-size">
                <section class="circle">
                    <h2>Power</h2>
                    <p>Utility power availability is now the primary bottleneck</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Chips</h2>
                    <p>Demand flows to one bottleneck: Nvidia
                    </p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>Permits</h2>
                    <p>Real-world constraints are becoming major bottlenecks</p>
                </section>
            </div>
            <p>Utility power availability is now the primary bottleneck in the US, where power demand growth has
                historically been flat (around 2%) but is now spiking due to AI.</p>
            <h3>US power backlogs becoming a major issue</h3>
            <p>US power demand growth is ~2%, and AI might add 1% that‚Äôs hard to build fast (this is not an issue in
                China)</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Main constraints to data centre construction, USA (February 2025)</h3>
            <figure id="chart-constraints" aria-label="Bar chart showing constraints to data center construction">
                <figcaption class="right">Data: <a href="https://www.se.com" target="_blank">Schneider Electric</a>
                </figcaption>
            </figure>
            <blockquote>
                <p>"It‚Äôs been almost impossible to build capacity fast enough since ChatGPT launched"</p>
                <cite>&mdash; Kevin Scott, Microsoft CTO </cite>
            </blockquote>
            <h2>Data centre capacity triples?</h2>
            <p>Some very large numbers (although some of these ‚Äòbragawatts‚Äô may be more performative than real).</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Global data centre capacity estimates, H1 2025 (<small>GW</small>)</h3>
            <figure id="chart-datacenter-capacity" aria-label="Bar chart showing Global Data Center Capacity estimates">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Omdia, BNEF,
                        Goldman, MS, McKinsey</a></figcaption>
            </figure>

            <h3>‚ÄúThree trillion dollars!‚Äù</h3>
            <p>Annualised AI capex aspirations are a similar magnitude to mature global capital-intensive industries</p>

            <div class="diagram-container mid-size diagram-spaced">
                <section class="circle dark circle-md">
                    <p>Global telecoms<br>~$300bn</p>
                </section>

                <section class="circle dark circle-md">
                    <p>Oil & gas ‚Äòupstream‚Äô<br>~$540bn</p>
                </section>

                <section class="circle dark circle-md">
                    <p>US private sector<br>~$4.1tr</p>
                </section>

                <section class="circle red-filled circle-md">
                    <p>GenAI<br>$500-750bn annual?</p>
                </section>
            </div>

            <h3>The hyperscalers can afford it‚Ä¶</h3>
            <p>The hyperscalers have massive cash flows, which generally cover their capital expenditures.</p>
            <aside>Hyperscalers are major cloud providers (like AWS, Azure, Google Cloud) operating massive, globally
                distributed data centers.</aside>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Annual Capex and Free Cash Flow, 2010 to 2025 ($bn)</h3>
            <figure id="chart-cash-flow" aria-label="Bar chart showing Hyperscaler Cash Flow vs Capex">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <h3>‚Ä¶ up to a point</h3>
            <p>However, when we include leases, the total burden is much higher, especially for <span
                    class="amazon"></span>Amazon</span> and <span class="msft"></span>Microsoft</span>.
                Capital leases are not new, but they‚Äôve grown much larger.
            </p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Annual Capex and Free Cash Flow, 2010 to 2025e ($bn)</h3>
            <figure id="chart-leases" aria-label="Stacked bar chart showing Hyperscaler Leases">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <p>Hyperscalers add leases and debt, while some analysts suggest Oracle‚Äôs cloud capex might be >100% of
                revenue.</p>
            <h3>Circular Revenue</h3>
            <p>Without its own cashflows, <span class="MTmini"><span class="openai"></span>OpenAI</span> partners with
                <span class="MTmini"><span class="nvidia"></span>Nvidia</span>, Oracle, Softbank, and <a
                    href="https://www.reuters.com/sustainability/land-use-biodiversity/altman-touts-trillion-dollar-ai-vision-openai-restructures-chase-scale-2025-10-29/">petrodollars</a>.
            </p>
            <p><span class="MTmini"><span class="openai"></span>OpenAI</span> is buying <span class="MTmini"><span
                        class="nvidia"></span>Nvidia</span> chips with <span class="MTmini"><span
                        class="nvidia"></span>Nvidia's</span>
                cashflow‚Ä¶</p>
            <figure id="chart-circular-revenue" aria-label="Stacked bar chart showing Hyperscaler Leases">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <p>Which comes from the hyperscalers‚Ä¶</p>
            <p>and using <span class="MTmini"><span class="nvidia"></span>Nvidia's</span> cash to turn AMD into an
                <span class="MTmini"><span class="nvidia"></span>Nvidia</span> competitor, and pay Broadcom to make its
                own chips‚Ä¶
            </p>
            <h2>Yes, but where has all this money got us?</h2>
            <p>After three years, lots more science and engineering, but no real clarity on the shape of the market</p>

            <div class="diagram-container mid-size diagram-spaced">
                <section class="circle dark circle-250">
                    <p class="circle-title">Models still improving</p>
                    <p class="circle-subtitle">Far more models, China, OSS</p>
                    <p class="circle-subtitle" style="margin-bottom: 0;">Lots of new acronyms</p>
                </section>

                <div class="divider-vertical" aria-hidden="true"></div>

                <section class="circle red-filled circle-250">
                    <p class="circle-title" style="margin-bottom: 1rem;">No apparent moats</p>
                    <p class="circle-text-lg">No clarity on product or value capture</p>
                </section>
            </div>
            <p>Every week introduces new models, new (problematic, gamed, and saturated) benchmarks, new acronyms.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Model Proliferation</h3>
            <figure id="chart-model-proliferation" aria-label="Scatter plot showing Model Proliferation">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Benedict Evans</a>
                </figcaption>
            </figure>
            <p>Meanwhile, the models themselves are converging. On general benchmarks, the gap between the leading model
                and the followers is shrinking, suggesting that raw intelligence might become a commodity.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Models converge and leaders change weekly</h3>
            <figure id="chart-model-convergence" aria-label="Bar chart showing model performance convergence">
                <figcaption class="right">Data: LMArena, Artificial Analysis</figcaption>
            </figure>
            <p>Dozens of (saturated) benchmarks to choose from, but on the most general, the leaders are very close.</p>
            <h2>Tech versus brand versus distribution?</h2>
            <p>The models may be close to commodities (especially for general use), but market position is not, so far.
            </p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Weekly active users of generative AI tools as share of the population, June 2025</h3>
            <figure id="chart-global-usage" aria-label="Bar chart showing Weekly active users of GenAI tools">
                <figcaption class="right">Data: <a href="https://reutersinstitute.politics.ox.ac.uk"
                        target="_blank">Reuters Institute</a></figcaption>
            </figure>
            <p>Adoption is also uneven globally. The US leads significantly in the usage of generative AI tools, while
                developed markets like Japan lag significantly behind.</p>
            <q style="text-align: center;">Everyone is already using this!</q>
            <h2>3. Usage and Adoption</h2>
            <p>Despite the hype, we are early. ChatGPT has roughly 800 million weekly active users, but usage intensity
                varies. Surveys suggest that for many, AI is a "sometimes" tool rather than a daily habit.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>ChatGPT global weekly active users (millions)</h3>
            <figure id="chart-chatgpt-growth" aria-label="Line chart showing ChatGPT Weekly Active Users">
                <figcaption class="right">Data: <a href='https://openai.com' target='_blank'>OpenAI</a></figcaption>
            </figure>

            <p>New tools like Cursor are seeing explosive growth, challenging traditional IDEs.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Cursor Growth (<small>ARR $m</small>)</h3>
            <figure id="chart-cursor" aria-label="Line chart showing Cursor growth">
                <figcaption class="right">Data: <a href="https://www.cursor.com" target="_blank">Company Reports</a>
                </figcaption>
            </figure>

            <h2>Still more experimentation than daily use</h2>
            <p>So far, many more people use chatbots occasionally than make them part of their daily lives.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>How many people use generative AI chatbots in the USA?</h3>
            <figure id="chart-engagement" aria-label="Bar chart showing Engagement Gap">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Multiple Surveys</a>
                </figcaption>
            </figure>
            <h2>Most data shows the same picture</h2>
            <p>Surveys are early, scattered and inconsistent, but an engagement gap seems clear.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>How many people use generative AI chatbots in the USA?</h3>
            <figure id="chart-survey-meta" aria-label="Stacked bar chart showing Weekly vs Daily usage across surveys">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Multiple Surveys</a>
                </figcaption>
            </figure>
            <h2>Is this just early? Or a harder problem?</h2>
            <p>Why do most users of ChatGPT only use it a little bit?</p>
            <blockquote>
                <p>People don‚Äôt know what they want until you show it to them.</p>
                <p>You‚Äôve got to start with the experience and work backwards to the technology</p>
                <cite>&mdash; Steve Jobs</cite>
            </blockquote>

            <div class="diagram-container mid-size">
                <section class="circle">
                    <h2>Weekly</h2>
                    <p>Usage is climbing, but is it a daily habit?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Daily</h2>
                    <p>Remains a smaller fraction of total usage</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>Invisible</h2>
                    <p>The technology becomes essential for everyone</p>
                </section>
            </div>

            <p>When the dust settles, however, new technologies fundamentally change society. The internet went from a
                novelty to the primary way couples meet, displacing friends and family.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>How Couples Meet</h3>
            <figure id="chart-couples" aria-label="Line chart showing how heterosexual couples meet in the US">
                <figcaption class="right">Data: <a href="https://data.stanford.edu/hcmst2017" target="_blank">Rosenfeld
                        (HCMST)</a></figcaption>
            </figure>
            <h2>So where does a model lab compete?</h2>
            <p>Where is the value capture for a research-heavy, capital-intensive commodity?</p>
            <div class="diagram-container mid-size">
                <section class="circle dark">
                    <h2>Go down the stack</h2>
                    <p>Win on scale?<br>(see: aircraft,<br>AWS, chips)</p>
                </section>

                <div class="arrow" role="presentation" style="transform: rotate(180deg);"></div>

                <section class="circle" style="border-style: dotted;">
                    <h2>If the models are commodities?</h2>
                    <p>And don‚Äôt have<br>network effects?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle red-filled">
                    <h2>Go up the stack</h2>
                    <p>Win on network<br>effects & product?<br>(See: software)</p>
                </section>
            </div>
            <h2><span class="msft"></span>Microsoft's</span> shift away from network effects?</h2>
            <p>From competing on network effects to competing on access to capital?</p>

            <p><span class="msft"></span>Microsoft's</span> capital intensity is spiking as it builds out the
                infrastructure for this new era.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Microsoft capex/sales</h3>
            <figure id="chart-microsoft-capex" aria-label="Bar chart showing Microsoft Capex Intensity">
                <figcaption class="right">Data: <a href="https://www.microsoft.com/en-us/investor"
                        target="_blank">Microsoft. Includes capital leases</a></figcaption>
            </figure>
            <h2>For OpenAI, ‚Äúyes!‚Äù to everything</h2>
            <p>Everything, everywhere, yesterday (on other people‚Äôs balance sheets), before the market slips away</p>

            <div class="diagram-container mid-size">
                <section class="circle dark">
                    <p>Infra deals<br>with Oracle,<br>Nvidia, Intel,<br>Broadcom,<br>AMD...</p>
                </section>
                <section class="circle dark">
                    <p>Ecommerce<br>integrations,<br>ads, vertical<br>data sets</p>
                </section>
                <section class="circle dark">
                    <p>App platform,<br>social video,<br>web browser</p>
                </section>
                <section class="circle red-filled">
                    <p>Robots<br>Jony Ive<br>Biotech</p>
                </section>
            </div>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h2>4. Automation and Unbundling</h2>
            <p>AI is often described as "infinite interns." This leads to the Jevons paradox: as the cost of
                intelligence drops, we will consume vastly more of it. We saw this with the steam engine, and we saw it
                with retail automation.</p>

            <div class="diagram-container mid-size">
                <section class="circle">
                    <h2>Steam Engine</h2>
                    <p>Jevons paradox: efficiency increases consumption</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Retail</h2>
                    <p>Automation allowed handling 5x more SKUs</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>Infinite Interns</h2>
                    <p>As cost of intelligence drops, we consume vastly more</p>
                </section>
            </div>

            <p>We are also seeing the unbundling of software. Startups are flooding into every vertical, attempting to
                unbundle Excel, <span class="google"></span>Google</span>, and traditional SaaS using AI.</p>
            <p>The coming wave of AI startups trying to unbundle Google, Excel, email and Oracle‚Ä¶ and ChatGPT.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Y Combinator startups by field</h3>
            <figure id="chart-ycombinator" aria-label="Bar chart showing Y Combinator startups by field">
                <figcaption class="right">Data: <a href="https://www.ycombinator.com" target="_blank">Y Combinator</a>
                </figcaption>
            </figure>
            <h2>AI coding as the new AWS</h2>
            <p>‚ÄúVibe coding‚Äù as the new abstraction layer, after AWS, libraries, operating systems‚Ä¶</p>
            <p>A new step change reduction in software creation costs.</p>
            <h3>How do you know what to automate?</h3>
            <p>Step one: ask your local systems integrator.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Accenture reported new quarterly ‚Äògenerative AI‚Äô contracts ($m)</h3>
            <figure id="chart-accenture" aria-label="Line chart showing Accenture new Generative AI bookings">
                <figcaption class="right">Data: <a href="https://newsroom.accenture.com" target="_blank">Accenture</a>
                </figcaption>
            </figure>
            <h3>How do you know what to automate?</h3>
            <p>Step two: buy some SaaS from Dr Evil.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Palantir quarterly revenue by segment ($m)</h3>
            <figure id="chart-palantir" aria-label="Bar chart showing Palantir revenue acceleration">
                <figcaption class="right">Data: <a href="https://investors.palantir.com" target="_blank">Palantir</a>
                </figcaption>
            </figure>
            <h2>Pilots come first and deployment takes time</h2>
            <p>‚ÄúAgentic!‚Äô is 2025‚Äôs buzzword, but deployment takes longer</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Pilots vs Deployment</h3>
            <figure id="pilots" aria-label="Stacked bar chart showing status of AI adoption by function">
                <figcaption class="right">Data: <a href="https://www.mckinsey.com" target="_blank">McKinsey</a>
                </figcaption>
            </figure>
            <h2>Not everything works? Welcome to tech</h2>
            <p>‚ÄúWhy did our AI pilot fail?‚Äù That‚Äôs a CTO question, not an AI question.</p>

            <div class="diagram-container mid-size diagram-spaced">
                <section class="circle dark circle-md">
                    <p>Security,<br>privacy, IPR,<br>error rates,<br>legal</p>
                </section>

                <section class="circle dark circle-md">
                    <p>Data<br>integration<br>& legacy<br>systems</p>
                </section>

                <section class="circle dark circle-md">
                    <p>Finding the<br>right solution<br>for the right<br>people</p>
                </section>

                <section class="circle red-filled circle-md">
                    <p>The same<br>issues as<br>deploying any<br>new tech</p>
                </section>
            </div>
            <h2>The future can take time</h2>
            <p>A quarter of CIOs have launched something - but 40% don‚Äôt plan anything until at least 2026</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>CIO expected timing for first LLM projects in production, September 2025</h3>
            <figure id="chart-cio-timing" aria-label="Bar chart showing CIO expected timing">
                <figcaption class="right">Data: <a href="https://www.morganstanley.com" target="_blank">Morgan Stanley
                        CIO Survey</a></figcaption>
            </figure>
            <h2>But the future always takes time</h2>
            <p>Cloud is old and boring - but still only 30% of workflows.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Enterprise workloads in public cloud</h3>
            <figure id="chart-cloud" aria-label="Line chart showing Enterprise workloads in public cloud">
                <figcaption class="right">Data: <a href="https://www.goldmansachs.com" target="_blank"> Goldman Sachs
                        CIO Survey</a>
                </figcaption>
            </figure>
            <h2>Sometimes ‚Äòautomation‚Äô alone is a big deal</h2>
            <p>Automation also allows us to handle complexity. The introduction of barcodes in the 1970s allowed
                supermarkets to handle 5x more SKUs than before.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Average SKUs per supermarket, USA</h3>
            <figure id="chart-skus" aria-label="Line chart showing growth of Supermarket SKUs">
                <figcaption class="right">Data: <a href="https://www.fmi.org" target="_blank">FMI</a></figcaption>
            </figure>

            <h2>What next?</h2>
            <p>What comes after automating the obvious, easy things?</p>
            <q style="text-align: center;">AI gives you infinite interns</q>
            <h3>How do we use automation that makes ‚Äòmistakes‚Äô?</h3>
            <p>We have no indication that error rates will go away, so where‚Äôs the human in the loop?</p>

            <div class="diagram-container mid-size diagram-spaced">
                <section class="circle dark circle-md">
                    <p>Do ‚Äòerrors‚Äô matter?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle dark circle-md">
                    <p>Can you automate verification?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle dark circle-md">
                    <p>Is human verification efficient?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle red-filled circle-md">
                    <p>How much do we need to wrap the LLM in software?</p>
                </section>
            </div>
            <h2>300m interns? Jevons paradox at work</h2>
            <p>In 1865, William Stanley Jevons first described a paradox. He maintained that more efficient steam
                engines would not decrease the use of coal in British factories but would actually increase it. As the
                fossil fuel became cheaper, demand for the resource would grow, leading to the construction of more
                engines.</p>
            <div class="wrapper">
                <div class="card">
                    <div class="user">
                        <div class="profile">
                            <img src="https://media.licdn.com/dms/image/v2/C5603AQHHUuOSlRVA1w/profile-displayphoto-shrink_400_400/profile-displayphoto-shrink_400_400/0/1579726625448?e=2147483647&v=beta&t=pJA2hyC4PlS23HlA6irA5KUc4dYwuwm4IAFtk2yge84"
                                alt="avatar" class="ava">
                            <div class="username">
                                <h3 class="name"><a href="https://x.com/satyanadella">Satya Nadella</a></h3>
                                <p class="uname">@satyanadella</p>
                            </div>
                        </div>
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="30"
                            height="30" fill="currentColor">
                            <path
                                d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" />
                        </svg>
                    </div>
                    <div class="twitt">
                        <p>Jevons paradox strikes again! As AI gets more efficient and accessible, we will see its use
                            skyrocket, turning it into a commodity we just can't get enough of.
                        </p>
                    </div>
                    <div class="insight">
                        <div class="like">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g id="heart">
                                    <path id="Vector"
                                        d="M20.84 4.61C20.3292 4.099 19.7228 3.69364 19.0554 3.41708C18.3879 3.14052 17.6725 2.99817 16.95 2.99817C16.2275 2.99817 15.5121 3.14052 14.8446 3.41708C14.1772 3.69364 13.5708 4.099 13.06 4.61L12 5.67L10.94 4.61C9.9083 3.57831 8.50903 2.99871 7.05 2.99871C5.59096 2.99871 4.19169 3.57831 3.16 4.61C2.1283 5.64169 1.54871 7.04097 1.54871 8.5C1.54871 9.95903 2.1283 11.3583 3.16 12.39L4.22 13.45L12 21.23L19.78 13.45L20.84 12.39C21.351 11.8792 21.7563 11.2728 22.0329 10.6054C22.3095 9.93789 22.4518 9.22249 22.4518 8.5C22.4518 7.77751 22.3095 7.0621 22.0329 6.39464C21.7563 5.72718 21.351 5.12075 20.84 4.61V4.61Z"
                                        stroke="white" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </g>
                            </svg>

                            <p class="like-value">1.6K</p>
                        </div>
                        <div class="created">
                            <time datetime="2024-09-17T17:15:56.000Z">1:15 PM ¬∑ Feb 7, 2025</time>
                        </div>
                    </div>
                </div>
            </div>
            <p>The paradox applies to various technological shifts. For example, Los Angeles had 10,000 horses in 1900,
                but by 1950, there were 1 million cars. Similarly, despite the rise of fuel-efficient and
                electric vehicles, total miles driven has increased, and energy-efficient computers have led to
                widespread smartphone use and data centers that now consume 1.5% of global electricity<a
                    href="#northeastern" aria-describedby="footnote-label" id="northeastern-ref"></a>.</p>
            <p>Steam engines gave Britain the equivalent labour of (very roughly) 5x its total population by 1900.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>UK population and steam engine labour unit equivalent (m)</h3>
            <figure id="chart-steam" aria-label="Chart showing UK Population vs Steam Engine Labor Equivalent">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Landes</a>
                </figcaption>
            </figure>
            <h2>Where‚Äôs the human in the loop?</h2>
            <p>All recommendation systems today work by driving, capturing and analysing user activity.</p>

            <div class="diagram-container mid-size" style="justify-content: space-around;">
                <section class="circle">
                    <h2>Pre-internet</h2>
                    <p>Human editors, for both retail & media<br>Physical assets as moat</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Internet</h2>
                    <p>All of us are mechanical turks feeding algorithms<br>Network effects as moat</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>GenAI?</h2>
                    <p>Can an LLM do this better?<br>Can an LLM do it without needing a user base?</p>
                </section>
            </div>
            <h2>Value to capture!</h2>
            <p>Brands spend a trillion dollars a year to talk to consumers - plus rent, shipping, marketing, returns‚Ä¶
            </p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Global ad revenue, 2024 ($bn)</h3>
            <figure id="chart-ads" aria-label="Bar chart showing Global Ad Revenue pools">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <h3>Old: ‚Äúhalf of AI will be turning three bullet points into emails, and the other half will be turning
                emails into three bullet points‚Äù</h3>
            <h3>New: half of AI will be turning three bullet points into 300 ads, and the other half‚Ä¶</h3>
            <p>We are already seeing generational shifts in how people find information. Younger users are much more
                likely to use Generative AI as a primary search tool compared to older generations who stick to
                traditional search.</p>

            <div class="diagram-container mid-size">
                <section class="circle">
                    <h2>Search</h2>
                    <p>Current dominant model for finding products</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Social</h2>
                    <p>Discovery driven by social graphs and feeds</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>AI Agents</h2>
                    <p>Promise to disrupt how products are found and bought</p>
                </section>
            </div>
            <h2>This is still early days</h2>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>US consumer search preference (September 2025)</h3>
            <figure id="chart-search-pref" aria-label="Bar chart showing Search vs GenAI preference by age">
                <figcaption class="right">Data: <a href="https://www.bain.com" target="_blank">Bain</a></figcaption>
            </figure>
            <h2>The web has been dying since 1997</h2>
            <a
                href="https://zeldman.com/2025/10/25/receipts-a-brief-list-of-prominent-articles-proclaiming-the-death-of-the-web/">
                <img src="https://i0.wp.com/zeldman.com/wp-content/uploads/18.09-w.webp"
                    alt="Wired Magazine: The Web is dead." loading="lazy">
            </a>
            <p><strong>Wired</strong>: March 1, 1997: ‚ÄúYou can kiss your web browser goodbye‚Äù ‚Äì&nbsp;Kevin Kelly and
                Gary Wolf, The Big Story</p>
            <p></p>
            <h2>But where are we going?</h2>
            <p>What if recommendations go from correlation to an understanding of what those SKUs really represent?
            </p>

            <div class="diagram-container mid-size diagram-spaced">
                <section class="circle dark circle-md">
                    <p>You bought packing tape - maybe you need boxes and bubblewrap?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle dark circle-md">
                    <p>Maybe you‚Äôre moving. How about some lightbulbs and smoke alarms?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle red-filled circle-md">
                    <p>Here‚Äôs an ad for home insurance</p>
                </section>
            </div>
            <h2>The old stuff from before ChatGPT is still here</h2>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>E-commerce as % US retail sales</h3>
            <figure id="chart-ecommerce" aria-label="Line chart showing E-commerce as % of total US Retail Sales">
                <figcaption class="right">Data: <a href="https://www.census.gov/retail/index.html" target="_blank">US
                        Census Bureau</a>.<br> ‚ÄòRetail‚Äô excludes restaurants & bars. ‚ÄòAddressable retail‚Äô also excludes
                    cars, car parts & service, and gasoline stations. ‚ÄòCore retail‚Äô excludes grocery from addressable
                    retail.</figcaption>
            </figure>
            <h2>And all the <em>other</em> new stuff</h2>
            <p>After a decade of promises and tens of billions of dollars, ‚Äòautomatic cars‚Äô might be starting to work
            </p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Monthly ‚Äòrobotaxi‚Äô trips in California</h3>
            <figure id="chart-robotaxi" aria-label="Line chart showing Monthly 'Robotaxi' trips in California">
                <figcaption class="right">Data: <a href="https://www.cpuc.ca.gov" target="_blank">CPUC</a>
                </figcaption>
            </figure>

            <p>But general-purpose robots are harder. This is "Moravec's Paradox": high-level reasoning (chess,
                poetry) requires very little computation, but low-level sensorimotor skills (walking, holding an egg)
                require enormous computational resources.</p>
            <p>We are seeing progress in "Embodied AI"‚Äîrobots that learn to move by themselves‚Äîbut we are still far
                from a Rosie the Robot in every home.</p>

            <h2>So what?</h2>
            <p>We are in the deployment phase. The technology works, the capital is flowing, and the models are
                getting
                better. Now comes the hard work of figuring out the product-market fit, the business models, and the
                societal impact.</p>
            <q style="text-align: center;">When automation works, it disappears</q>

            <p>Consider the elevator operator. In 1950, there were over 100,000 elevator operators in the US. Automation
                (buttons) didn't just remove the job; it made the elevator invisible.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Elevator attendants, USA</h3>
            <figure id="chart-elevators" aria-label="Chart showing employment of Elevator Operators">
                <figcaption class="right">Data: <a href="https://www.census.gov" target="_blank">US Census</a>, ITIF
                </figcaption>
            </figure>
            <blockquote>
                <p>‚ÄúAI is whatever machines can‚Äôt do yet‚Äù</p>
                <cite>&mdash; Larry Tesler, 1970</cite>
            </blockquote>
            <p>Watch Benedict Evans deliver this presentation at SuperAI Singapore 2025:</p>
            <figure style="margin: 0 auto;">
                <figcaption class="right">Benedict Evans at SuperAI Singapore 2025</figcaption>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/niJpDnNtNp4?si=_8nA6RLmQ-1J6yUv"
                    title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
                </iframe>
            </figure>
        </article>
    </main>

    <footer>
        <h2 id="footnote-label">Footnotes</h2>
        <ol>
            <li id="ben-evans"><strong>Benedict Evans</strong>, ‚Äú<em><a href="https://www.ben-evans.com">AI Eats the
                        World</a></em>" (2025 presentation).<a href="#ben-evans-ref" aria-label="Back to content">‚Ü©</a>
            </li>
            <li id="northeastern"><strong>Northeastern University</strong>, ‚Äú<em><a
                        href="https://news.northeastern.edu/2025/02/07/jevons-paradox-ai-future/">What is Jevons
                        Paradox? And why it may ‚Äî or may not ‚Äî predict AI‚Äôs future</a></em>" <a href="#northeastern-ref"
                    aria-label="Back to content">‚Ü©</a>
            </li>
        </ol>
        <div>
            <p>Justin Chill &copy; 2025</p>
            <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img
                        src="imgs/github.svg" alt="GitHub logo" class="icon">Source code</a></span>
        </div>
    </footer>
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        class="visually-hidden">
        <defs>
            <linearGradient id="gradient" gradientTransform="rotate(90)">
                <stop offset="5%" stop-color="rgba(89, 51, 128, .65)" stop-opacity="0.55" />
                <stop offset="100%" stop-color="#593380" stop-opacity=".35" />
            </linearGradient>
        </defs>
    </svg>
    <script src="https://cdn.jsdelivr.net/npm/d3"></script>
    <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>

    <script>
        // Constants for consistent visual style
        const colorMain = "#333";
        const colorAccent = "#D93025";
        const colorHighlight = "#4285F4";
        const colorGray = "#ccc";
        const fontFamily = "Lato, sans-serif";
        var element = d3.select('figure').node();
        var width = element.getBoundingClientRect().width; // get width of article so graphic is responsive
        var size = 12;

        // Data derived from Benedict Evans' "Microsoft OS share of global computer unit sales" chart
        const msftData = [
            { year: 1980, share: 0 },
            { year: 1981, share: 2 },
            { year: 1982, share: 5 },
            { year: 1983, share: 25 },
            { year: 1984, share: 30 },
            { year: 1985, share: 50 },
            { year: 1986, share: 55 },
            { year: 1987, share: 65 },
            { year: 1988, share: 78 },
            { year: 1989, share: 83 },
            { year: 1990, share: 84 },
            { year: 1991, share: 76 },
            { year: 1992, share: 85 },
            { year: 1993, share: 88 },
            { year: 1994, share: 90 },
            { year: 1995, share: 91 },
            { year: 1996, share: 95 },
            { year: 1997, share: 96 },
            { year: 1998, share: 97 },
            { year: 1999, share: 96 },
            { year: 2000, share: 97 },
            { year: 2001, share: 96 },
            { year: 2002, share: 96 },
            { year: 2003, share: 96 },
            { year: 2004, share: 96 },
            { year: 2005, share: 96 },
            { year: 2006, share: 95 },
            { year: 2007, share: 92 },
            { year: 2008, share: 85 },
            { year: 2009, share: 75 },
            { year: 2010, share: 60 },
            { year: 2011, share: 40 },
            { year: 2012, share: 25 },
            { year: 2013, share: 18 },
            { year: 2014, share: 15 },
            { year: 2015, share: 13 },
            { year: 2016, share: 12 },
            { year: 2017, share: 13 },
            { year: 2018, share: 12 },
            { year: 2019, share: 13 },
            { year: 2020, share: 14 },
            { year: 2021, share: 16 },
            { year: 2022, share: 15 },
            { year: 2023, share: 13 },
            { year: 2024, share: 13 },
            { year: 2025, share: 12 }
        ];

        document.getElementById("chart-microsoft-share").append(Plot.plot({
            width: width,
            height: 350,
            marginTop: 40,
            style: {
                fontFamily: "Lato, sans-serif",
                fontSize: "12px",
            },
            y: {
                grid: true,
                ticks: 4,
                tickFormat: ".0%",
                tickSize: 0,
                label: null,
                nice: true,
            },
            x: {
                tickFormat: "d",
                label: null,
                nice: true,
            },
            marks: [
                Plot.line(msftData, {
                    x: "year",
                    y: (d) => d.share / 100,
                    stroke: "#ea4335",
                    strokeWidth: 3,
                    curve: "natural"
                }),
                Plot.ruleX([2007, 2023], {
                    strokeOpacity: 0.5,
                    strokeDasharray: "4 4"
                }),
                Plot.text(["iPhone launched", "ChatGPT"], {
                    x: [2007, 2023],
                    y: 1,
                    dy: -10,
                    fontSize: 12,
                    fill: colorMain
                }),
                Plot.tip(msftData, Plot.pointerX({
                    x: "year",
                    y: (d) => d.share / 100,
                    title: (d) => `${d.year}: ${d.share}%`
                }))
            ]
        }));

        // Data estimated from the "Global PC unit sales share" chart
        const pcShareData = [
            // 1975
            { year: 1975, type: "All others", val: 100 },
            { year: 1975, type: "Apple", val: 0 },
            { year: 1975, type: "IBM-compatible", val: 0 },
            // 1976
            { year: 1976, type: "All others", val: 99 },
            { year: 1976, type: "Apple", val: 1 },
            { year: 1976, type: "IBM-compatible", val: 0 },
            // 1977
            { year: 1977, type: "All others", val: 97 },
            { year: 1977, type: "Apple", val: 3 },
            { year: 1977, type: "IBM-compatible", val: 0 },
            // 1978
            { year: 1978, type: "All others", val: 92 },
            { year: 1978, type: "Apple", val: 8 },
            { year: 1978, type: "IBM-compatible", val: 0 },
            // 1979
            { year: 1979, type: "All others", val: 91 },
            { year: 1979, type: "Apple", val: 9 },
            { year: 1979, type: "IBM-compatible", val: 0 },
            // 1980
            { year: 1980, type: "All others", val: 86 },
            { year: 1980, type: "Apple", val: 14 },
            { year: 1980, type: "IBM-compatible", val: 0 },
            // 1981 - IBM enters
            { year: 1981, type: "All others", val: 80 },
            { year: 1981, type: "Apple", val: 11 },
            { year: 1981, type: "IBM-compatible", val: 9 },
            // 1982
            { year: 1982, type: "All others", val: 54 },
            { year: 1982, type: "Apple", val: 11 },
            { year: 1982, type: "IBM-compatible", val: 35 },
            // 1983
            { year: 1983, type: "All others", val: 34 },
            { year: 1983, type: "Apple", val: 11 },
            { year: 1983, type: "IBM-compatible", val: 55 },
            // 1984 - Apple peak?
            { year: 1984, type: "All others", val: 29 },
            { year: 1984, type: "Apple", val: 28 },
            { year: 1984, type: "IBM-compatible", val: 43 },
            // 1985
            { year: 1985, type: "All others", val: 8 },
            { year: 1985, type: "Apple", val: 20 },
            { year: 1985, type: "IBM-compatible", val: 72 },
            // 1986
            { year: 1986, type: "All others", val: 7 },
            { year: 1986, type: "Apple", val: 16 },
            { year: 1986, type: "IBM-compatible", val: 77 },
            // 1987
            { year: 1987, type: "All others", val: 8 },
            { year: 1987, type: "Apple", val: 13 },
            { year: 1987, type: "IBM-compatible", val: 79 },
            // 1988
            { year: 1988, type: "All others", val: 6 },
            { year: 1988, type: "Apple", val: 7 },
            { year: 1988, type: "IBM-compatible", val: 87 },
            // 1989
            { year: 1989, type: "All others", val: 7 },
            { year: 1989, type: "Apple", val: 6 },
            { year: 1989, type: "IBM-compatible", val: 87 },
            // 1990 - Apple bump
            { year: 1990, type: "All others", val: 5 },
            { year: 1990, type: "Apple", val: 12 },
            { year: 1990, type: "IBM-compatible", val: 83 },
            // 1991
            { year: 1991, type: "All others", val: 4 },
            { year: 1991, type: "Apple", val: 12 },
            { year: 1991, type: "IBM-compatible", val: 84 },
            // 1992
            { year: 1992, type: "All others", val: 1 },
            { year: 1992, type: "Apple", val: 11 },
            { year: 1992, type: "IBM-compatible", val: 88 },
            // 1993
            { year: 1993, type: "All others", val: 0 },
            { year: 1993, type: "Apple", val: 9 },
            { year: 1993, type: "IBM-compatible", val: 91 },
            // 1994
            { year: 1994, type: "All others", val: 0 },
            { year: 1994, type: "Apple", val: 8 },
            { year: 1994, type: "IBM-compatible", val: 92 },
            // 1995
            { year: 1995, type: "All others", val: 0 },
            { year: 1995, type: "Apple", val: 4 },
            { year: 1995, type: "IBM-compatible", val: 96 },
            // 1996
            { year: 1996, type: "All others", val: 0 },
            { year: 1996, type: "Apple", val: 3 },
            { year: 1996, type: "IBM-compatible", val: 97 },
            // 1997
            { year: 1997, type: "All others", val: 0 },
            { year: 1997, type: "Apple", val: 3 },
            { year: 1997, type: "IBM-compatible", val: 97 },
            // 1998
            { year: 1998, type: "All others", val: 0 },
            { year: 1998, type: "Apple", val: 3 },
            { year: 1998, type: "IBM-compatible", val: 97 },
            // 1999
            { year: 1999, type: "All others", val: 0 },
            { year: 1999, type: "Apple", val: 3 },
            { year: 1999, type: "IBM-compatible", val: 97 },
            // 2000
            { year: 2000, type: "All others", val: 0 },
            { year: 2000, type: "Apple", val: 3 },
            { year: 2000, type: "IBM-compatible", val: 97 },
        ];

        document.getElementById("chart-pc-share").append(Plot.plot({
            width: width,
            height: 350,
            marginRight: 0,
            style: {
                fontFamily: "Lato, sans-serif",
                fontSize: size,
            },
            y: {
                grid: true,
                label: null,
                ticks: 4,
                tickSize: 0,
                tickFormat: "%",
            },
            x: {
                type: "time",
                label: null,
                tickSize: 0,
            },
            color: {
                legend: true,
                domain: ["IBM-compatible", "All others", "Apple"],
                range: ["#333", "#f4b4b4", "#ea4335"]
            },
            marks: [
                Plot.axisX({
                    ticks: "5 years",
                    label: null
                }),
                Plot.rectY(pcShareData, Plot.stackY({
                    x: (d) => new Date(d.year, 0),
                    y: (d) => d.val / 100,
                    fill: "type",
                    order: "type",
                    reverse: true,
                    interval: "1 year",
                    tip: true,
                })),
                Plot.ruleY([0])
            ]
        }));

        // Chart: US Heterosexual Couples Meeting Online (New)
        const datingData = [
            { year: 1995, pct: 2 },
            { year: 1997, pct: 4 },
            { year: 2000, pct: 9 },
            { year: 2002, pct: 12 },
            { year: 2005, pct: 18 },
            { year: 2007, pct: 20 },
            { year: 2009, pct: 21 },
            { year: 2011, pct: 22 },
            { year: 2013, pct: 25 },
            { year: 2015, pct: 30 },
            { year: 2017, pct: 35 },
            { year: 2019, pct: 40 },
            { year: 2021, pct: 50 },
            { year: 2023, pct: 55 },
            { year: 2024, pct: 59 }
        ];

        document.getElementById("chart-online-dating").append(Plot.plot({
            width: width,
            height: 350,
            marginTop: 40,
            style: {
                fontFamily: "Lato, sans-serif",
                fontSize: "12px",
            },
            y: {
                grid: true,
                label: null,
                nice: true,
                tickSize: 0,
                tickFormat: ".0%",
                ticks: 6,
            },
            x: {
                tickFormat: "d",
                label: null,
                nice: true,
            },
            marks: [
                Plot.line(datingData, {
                    x: "year",
                    y: (d) => d.pct / 100,
                    stroke: "#ea4335",
                    strokeWidth: 3,
                    curve: "natural"
                }),
                Plot.ruleX([2012, 2022], {
                    strokeOpacity: 0.5,
                    strokeDasharray: "4 4"
                }),
                Plot.text(["Tinder üî•", "Grindr"], {
                    x: [2012, 2022],
                    y: 0.6,
                    dy: -10,
                    fontSize: 12,
                    fill: colorMain
                }),
                Plot.tip(datingData, Plot.pointerX({
                    x: "year",
                    y: (d) => d.pct / 100,
                    title: (d) => `${d.year}: ${d.pct}%`
                }))
            ]
        }));

        // Chart 3: Capex Surge
        const capexData = [{
            year: 2010,
            company: "Microsoft",
            val: 2
        }, {
            year: 2010,
            company: "AWS",
            val: 2
        }, {
            year: 2010,
            company: "Alphabet",
            val: 2
        }, {
            year: 2010,
            company: "Meta",
            val: 1
        }, {
            year: 2010,
            company: "Oracle",
            val: 0.5
        }, {
            year: 2010,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2011,
            company: "Microsoft",
            val: 3
        }, {
            year: 2011,
            company: "AWS",
            val: 3
        }, {
            year: 2011,
            company: "Alphabet",
            val: 3
        }, {
            year: 2011,
            company: "Meta",
            val: 1
        }, {
            year: 2011,
            company: "Oracle",
            val: 0.5
        }, {
            year: 2011,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2012,
            company: "Microsoft",
            val: 4
        }, {
            year: 2012,
            company: "AWS",
            val: 4
        }, {
            year: 2012,
            company: "Alphabet",
            val: 4
        }, {
            year: 2012,
            company: "Meta",
            val: 2
        }, {
            year: 2012,
            company: "Oracle",
            val: 1
        }, {
            year: 2012,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2013,
            company: "Microsoft",
            val: 5
        }, {
            year: 2013,
            company: "AWS",
            val: 5
        }, {
            year: 2013,
            company: "Alphabet",
            val: 6
        }, {
            year: 2013,
            company: "Meta",
            val: 3
        }, {
            year: 2013,
            company: "Oracle",
            val: 1
        }, {
            year: 2013,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2014,
            company: "Microsoft",
            val: 6
        }, {
            year: 2014,
            company: "AWS",
            val: 6
        }, {
            year: 2014,
            company: "Alphabet",
            val: 8
        }, {
            year: 2014,
            company: "Meta",
            val: 4
        }, {
            year: 2014,
            company: "Oracle",
            val: 1
        }, {
            year: 2014,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2015,
            company: "Microsoft",
            val: 7
        }, {
            year: 2015,
            company: "AWS",
            val: 8
        }, {
            year: 2015,
            company: "Alphabet",
            val: 10
        }, {
            year: 2015,
            company: "Meta",
            val: 5
        }, {
            year: 2015,
            company: "Oracle",
            val: 1
        }, {
            year: 2015,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2016,
            company: "Microsoft",
            val: 9
        }, {
            year: 2016,
            company: "AWS",
            val: 10
        }, {
            year: 2016,
            company: "Alphabet",
            val: 12
        }, {
            year: 2016,
            company: "Meta",
            val: 6
        }, {
            year: 2016,
            company: "Oracle",
            val: 2
        }, {
            year: 2016,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2017,
            company: "Microsoft",
            val: 10
        }, {
            year: 2017,
            company: "AWS",
            val: 12
        }, {
            year: 2017,
            company: "Alphabet",
            val: 15
        }, {
            year: 2017,
            company: "Meta",
            val: 7
        }, {
            year: 2017,
            company: "Oracle",
            val: 2
        }, {
            year: 2017,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2018,
            company: "Microsoft",
            val: 15
        }, {
            year: 2018,
            company: "AWS",
            val: 15
        }, {
            year: 2018,
            company: "Alphabet",
            val: 20
        }, {
            year: 2018,
            company: "Meta",
            val: 10
        }, {
            year: 2018,
            company: "Oracle",
            val: 3
        }, {
            year: 2018,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2019,
            company: "Microsoft",
            val: 18
        }, {
            year: 2019,
            company: "AWS",
            val: 16
        }, {
            year: 2019,
            company: "Alphabet",
            val: 22
        }, {
            year: 2019,
            company: "Meta",
            val: 12
        }, {
            year: 2019,
            company: "Oracle",
            val: 3
        }, {
            year: 2019,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2020,
            company: "Microsoft",
            val: 20
        }, {
            year: 2020,
            company: "AWS",
            val: 18
        }, {
            year: 2020,
            company: "Alphabet",
            val: 25
        }, {
            year: 2020,
            company: "Meta",
            val: 15
        }, {
            year: 2020,
            company: "Oracle",
            val: 4
        }, {
            year: 2020,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2021,
            company: "Microsoft",
            val: 25
        }, {
            year: 2021,
            company: "AWS",
            val: 25
        }, {
            year: 2021,
            company: "Alphabet",
            val: 30
        }, {
            year: 2021,
            company: "Meta",
            val: 18
        }, {
            year: 2021,
            company: "Oracle",
            val: 5
        }, {
            year: 2021,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2022,
            company: "Microsoft",
            val: 30
        }, {
            year: 2022,
            company: "AWS",
            val: 30
        }, {
            year: 2022,
            company: "Alphabet",
            val: 35
        }, {
            year: 2022,
            company: "Meta",
            val: 25
        }, {
            year: 2022,
            company: "Oracle",
            val: 6
        }, {
            year: 2022,
            company: "Coreweave",
            val: 1
        },
        {
            year: 2023,
            company: "Microsoft",
            val: 40
        }, {
            year: 2023,
            company: "AWS",
            val: 35
        }, {
            year: 2023,
            company: "Alphabet",
            val: 35
        }, {
            year: 2023,
            company: "Meta",
            val: 28
        }, {
            year: 2023,
            company: "Oracle",
            val: 8
        }, {
            year: 2023,
            company: "Coreweave",
            val: 2
        },
        {
            year: 2024,
            company: "Microsoft",
            val: 56
        }, {
            year: 2024,
            company: "AWS",
            val: 75
        }, {
            year: 2024,
            company: "Alphabet",
            val: 52
        }, {
            year: 2024,
            company: "Meta",
            val: 39
        }, {
            year: 2024,
            company: "Oracle",
            val: 7
        }, {
            year: 2024,
            company: "Coreweave",
            val: 3
        },
        {
            year: 2025,
            company: "Microsoft",
            val: 95
        }, {
            year: 2025,
            company: "AWS",
            val: 110
        }, {
            year: 2025,
            company: "Alphabet",
            val: 100
        }, {
            year: 2025,
            company: "Meta",
            val: 80
        }, {
            year: 2025,
            company: "Oracle",
            val: 20
        }, {
            year: 2025,
            company: "Coreweave",
            val: 15
        }
        ];

        document.getElementById("chart-capex-surge").append(Plot.plot({
            width: width,
            height: 400,
            marginLeft: 0,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: "Capex ($bn)",
                nice: true,
                tickFormat: d => `$${d}B`,
                ticks: 6,
                tickSize: 0,
            },
            x: {
                label: null,
                nice: true,
                tickFormat: "d",
                tickSize: 4,
            },
            color: {
                legend: true,
                domain: ["Coreweave", "Oracle", "Meta", "Alphabet", "AWS", "Microsoft"],
                range: ["#999", "#444", "#000", "#fce8e6", "#f4b4b4", "#ea4335"]
            },
            marks: [
                Plot.axisY({
                    tickFormat: (d) => d === 0 ? "0" : (d >= 1000 ? `${d}B` : `$${d}M`),
                    tickSize: 0, // don‚Äôt draw ticks
                    ticks: 4,
                    dx: 2, // offset right
                    dy: -4, // offset up
                    lineAnchor: "bottom", // draw labels above grid lines
                    textAnchor: "start",
                }),
                Plot.barY(capexData, {
                    x: "year",
                    y: "val",
                    fill: "company",
                    order: "company", // Stack order
                    title: (d) => `${d.company}: $${d.val}bn`
                }),
                Plot.text(["Meta, Alphabet, Amazon (AWS) and Microsoft are expected to spend between $350 and $400 billion in 2025, most of it dedicated to building datacenters that are the foundation of all AI applications."], {
                    frameAnchor: "top-left",
                    dx: 40,
                    dy: 20,
                    fontFamily: fontFamily,
                    fontSize: 14,
                    lineHeight: 1.2,
                    lineWidth: 25,
                    stroke: "white", // Halo effect
                    strokeWidth: 10,
                    fill: "currentColor",
                    style: {
                        paintOrder: "stroke"
                    }
                }),
                Plot.ruleY([0])
            ]
        }));

        // Chart 4: Construction Spending
        const constructionData = [
            // Offices
            { date: new Date("1995-01-01"), type: "Offices", val: 52 },
            { date: new Date("1996-01-01"), type: "Offices", val: 55 },
            { date: new Date("1997-01-01"), type: "Offices", val: 65 },
            { date: new Date("1998-01-01"), type: "Offices", val: 75 },
            { date: new Date("1999-01-01"), type: "Offices", val: 85 },
            { date: new Date("2000-01-01"), type: "Offices", val: 95 },
            { date: new Date("2001-01-01"), type: "Offices", val: 110 }, // Peak 1
            { date: new Date("2002-01-01"), type: "Offices", val: 80 },
            { date: new Date("2003-01-01"), type: "Offices", val: 55 },
            { date: new Date("2004-01-01"), type: "Offices", val: 60 },
            { date: new Date("2005-01-01"), type: "Offices", val: 65 },
            { date: new Date("2006-01-01"), type: "Offices", val: 80 },
            { date: new Date("2007-01-01"), type: "Offices", val: 95 }, // Peak 2
            { date: new Date("2008-01-01"), type: "Offices", val: 90 },
            { date: new Date("2009-01-01"), type: "Offices", val: 50 },
            { date: new Date("2010-01-01"), type: "Offices", val: 35 },
            { date: new Date("2011-01-01"), type: "Offices", val: 38 },
            { date: new Date("2012-01-01"), type: "Offices", val: 42 },
            { date: new Date("2013-01-01"), type: "Offices", val: 50 },
            { date: new Date("2014-01-01"), type: "Offices", val: 60 },
            { date: new Date("2015-01-01"), type: "Offices", val: 75 },
            { date: new Date("2016-01-01"), type: "Offices", val: 82 },
            { date: new Date("2017-01-01"), type: "Offices", val: 75 },
            { date: new Date("2018-01-01"), type: "Offices", val: 80 },
            { date: new Date("2019-01-01"), type: "Offices", val: 90 },
            { date: new Date("2020-01-01"), type: "Offices", val: 85 },
            { date: new Date("2021-01-01"), type: "Offices", val: 78 },
            { date: new Date("2022-01-01"), type: "Offices", val: 80 },
            { date: new Date("2023-01-01"), type: "Offices", val: 65 },
            { date: new Date("2024-01-01"), type: "Offices", val: 50 },
            { date: new Date("2025-01-01"), type: "Offices", val: 48 },

            // Retail
            { date: new Date("1995-01-01"), type: "Retail", val: 45 },
            { date: new Date("1997-01-01"), type: "Retail", val: 50 },
            { date: new Date("1999-01-01"), type: "Retail", val: 52 },
            { date: new Date("2001-01-01"), type: "Retail", val: 55 },
            { date: new Date("2003-01-01"), type: "Retail", val: 50 },
            { date: new Date("2005-01-01"), type: "Retail", val: 55 },
            { date: new Date("2007-01-01"), type: "Retail", val: 75 },
            { date: new Date("2008-01-01"), type: "Retail", val: 60 },
            { date: new Date("2009-01-01"), type: "Retail", val: 35 },
            { date: new Date("2010-01-01"), type: "Retail", val: 25 },
            { date: new Date("2012-01-01"), type: "Retail", val: 30 },
            { date: new Date("2014-01-01"), type: "Retail", val: 35 },
            { date: new Date("2016-01-01"), type: "Retail", val: 40 },
            { date: new Date("2018-01-01"), type: "Retail", val: 35 },
            { date: new Date("2020-01-01"), type: "Retail", val: 25 },
            { date: new Date("2022-01-01"), type: "Retail", val: 28 },
            { date: new Date("2024-01-01"), type: "Retail", val: 22 },
            { date: new Date("2025-01-01"), type: "Retail", val: 22 },

            // Warehouses
            { date: new Date("1995-01-01"), type: "Warehouses", val: 18 },
            { date: new Date("1998-01-01"), type: "Warehouses", val: 25 },
            { date: new Date("2001-01-01"), type: "Warehouses", val: 28 },
            { date: new Date("2004-01-01"), type: "Warehouses", val: 20 },
            { date: new Date("2007-01-01"), type: "Warehouses", val: 25 },
            { date: new Date("2009-01-01"), type: "Warehouses", val: 15 },
            { date: new Date("2010-01-01"), type: "Warehouses", val: 8 },
            { date: new Date("2012-01-01"), type: "Warehouses", val: 10 },
            { date: new Date("2014-01-01"), type: "Warehouses", val: 15 },
            { date: new Date("2016-01-01"), type: "Warehouses", val: 25 },
            { date: new Date("2018-01-01"), type: "Warehouses", val: 35 },
            { date: new Date("2020-01-01"), type: "Warehouses", val: 40 },
            { date: new Date("2021-01-01"), type: "Warehouses", val: 55 },
            { date: new Date("2022-01-01"), type: "Warehouses", val: 75 },
            { date: new Date("2022-09-01"), type: "Warehouses", val: 82 }, // Peak
            { date: new Date("2023-01-01"), type: "Warehouses", val: 70 },
            { date: new Date("2024-01-01"), type: "Warehouses", val: 55 },
            { date: new Date("2025-01-01"), type: "Warehouses", val: 48 },

            // Data Centers
            { date: new Date("2014-01-01"), type: "Data Centers", val: 2 },
            { date: new Date("2015-01-01"), type: "Data Centers", val: 3 },
            { date: new Date("2016-01-01"), type: "Data Centers", val: 5 },
            { date: new Date("2017-01-01"), type: "Data Centers", val: 6 },
            { date: new Date("2018-01-01"), type: "Data Centers", val: 7 },
            { date: new Date("2019-01-01"), type: "Data Centers", val: 9 },
            { date: new Date("2020-01-01"), type: "Data Centers", val: 12 },
            { date: new Date("2021-01-01"), type: "Data Centers", val: 14 },
            { date: new Date("2022-01-01"), type: "Data Centers", val: 16 },
            { date: new Date("2023-01-01"), type: "Data Centers", val: 25 },
            { date: new Date("2024-01-01"), type: "Data Centers", val: 35 },
            { date: new Date("2025-01-01"), type: "Data Centers", val: 42 }
        ];

        document.getElementById("chart-construction").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: "Spending ($bn SAAR)",
                nice: true,
                ticks: 6,
                tickSize: 0,
            },
            x: {
                label: null,
                nice: true,
                tickSize: 0,
            },
            color: {
                legend: true,
                domain: ["Data Centers", "Warehouses", "Retail", "Offices"],
                range: [colorAccent, "#f4b4b4", "#999", "#333"]
            },
            marks: [
                Plot.line(constructionData, {
                    x: "date",
                    y: "val",
                    stroke: "type",
                    strokeWidth: 3,
                    curve: "natural"
                }),
                Plot.tip(constructionData, Plot.pointerX({
                    x: "date",
                    y: "val"
                }))
            ]
        }));

        // Chart: Data Center Capacity (Current vs 2030)
        const capacityData = [{
            source: "Omdia/IEA",
            year: "Current",
            val: 95
        }, {
            source: "Omdia/IEA",
            year: "Est. of 2030 plans",
            val: 195
        }, {
            source: "Bloomberg BNEF",
            year: "Current",
            val: 80
        }, {
            source: "Bloomberg BNEF",
            year: "Est. of 2030 plans",
            val: 220
        }, {
            source: "Goldman Sachs",
            year: "Current",
            val: 75
        }, {
            source: "Goldman Sachs",
            year: "Est. of 2030 plans",
            val: 150
        }, {
            source: "Morgan Stanley",
            year: "Current",
            val: 85
        }, {
            source: "Morgan Stanley",
            year: "Est. of 2030 plans",
            val: 250
        }, {
            source: "Bain",
            year: "Current",
            val: 70
        }, {
            source: "Bain",
            year: "Est. of 2030 plans",
            val: 160
        }, {
            source: "BCG",
            year: "Current",
            val: 80
        }, {
            source: "BCG",
            year: "Est. of 2030 plans",
            val: 170
        }, {
            source: "McKinsey",
            year: "Current",
            val: 80
        }, {
            source: "McKinsey",
            year: "Est. of 2030 plans",
            val: 215
        }];

        document.getElementById("chart-datacenter-capacity").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size,
                marginRight: 0,
            },
            x: {
                axis: null,
                padding: 0.2
            },
            y: {
                grid: true,
                label: "Capacity (GW)",
                nice: true,
                tickSize: 0,
                ticks: 6,
            },
            fx: {
                label: null,
                axis: "bottom"
            },
            color: {
                legend: true,
                domain: ["Current", "Est. of 2030 plans"],
                range: ["#555", colorAccent]
            },
            marks: [
                Plot.barY(capacityData, {
                    x: "year",
                    y: "val",
                    fill: "year",
                    fx: "source",
                    sort: {
                        fx: {
                            value: null,
                            order: null
                        }
                    }
                }),
                Plot.tip(capacityData, Plot.pointerX({
                    x: "year",
                    y: "val",
                    fx: "source",
                    title: (d) => `${d.source}\n${d.year}: ${d.val} GW`
                }))
            ]
        }));

        // Chart: Cash Flow vs Capex (New)
        const cashFlowData = [
            { year: 2010, company: "Alphabet", type: "Free Cash Flow", val: 8 }, { year: 2010, company: "Alphabet", type: "Cash capex", val: 4 },
            { year: 2011, company: "Alphabet", type: "Free Cash Flow", val: 10 }, { year: 2011, company: "Alphabet", type: "Cash capex", val: 5 },
            { year: 2012, company: "Alphabet", type: "Free Cash Flow", val: 12 }, { year: 2012, company: "Alphabet", type: "Cash capex", val: 6 },
            { year: 2013, company: "Alphabet", type: "Free Cash Flow", val: 12 }, { year: 2013, company: "Alphabet", type: "Cash capex", val: 8 },
            { year: 2014, company: "Alphabet", type: "Free Cash Flow", val: 14 }, { year: 2014, company: "Alphabet", type: "Cash capex", val: 10 },
            { year: 2015, company: "Alphabet", type: "Free Cash Flow", val: 16 }, { year: 2015, company: "Alphabet", type: "Cash capex", val: 10 },
            { year: 2016, company: "Alphabet", type: "Free Cash Flow", val: 26 }, { year: 2016, company: "Alphabet", type: "Cash capex", val: 11 },
            { year: 2017, company: "Alphabet", type: "Free Cash Flow", val: 24 }, { year: 2017, company: "Alphabet", type: "Cash capex", val: 13 },
            { year: 2018, company: "Alphabet", type: "Free Cash Flow", val: 23 }, { year: 2018, company: "Alphabet", type: "Cash capex", val: 25 },
            { year: 2019, company: "Alphabet", type: "Free Cash Flow", val: 30 }, { year: 2019, company: "Alphabet", type: "Cash capex", val: 24 },
            { year: 2020, company: "Alphabet", type: "Free Cash Flow", val: 43 }, { year: 2020, company: "Alphabet", type: "Cash capex", val: 22 },
            { year: 2021, company: "Alphabet", type: "Free Cash Flow", val: 67 }, { year: 2021, company: "Alphabet", type: "Cash capex", val: 25 },
            { year: 2022, company: "Alphabet", type: "Free Cash Flow", val: 60 }, { year: 2022, company: "Alphabet", type: "Cash capex", val: 32 },
            { year: 2023, company: "Alphabet", type: "Free Cash Flow", val: 69 }, { year: 2023, company: "Alphabet", type: "Cash capex", val: 32 },
            { year: 2024, company: "Alphabet", type: "Free Cash Flow", val: 74 }, { year: 2024, company: "Alphabet", type: "Cash capex", val: 51 },
            { year: 2025, company: "Alphabet", type: "Free Cash Flow", val: 68 }, { year: 2025, company: "Alphabet", type: "Cash capex", val: 92 },

            { year: 2010, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2010, company: "Amazon", type: "Cash capex", val: 1 },
            { year: 2011, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2011, company: "Amazon", type: "Cash capex", val: 2 },
            { year: 2012, company: "Amazon", type: "Free Cash Flow", val: 0 }, { year: 2012, company: "Amazon", type: "Cash capex", val: 4 },
            { year: 2013, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2013, company: "Amazon", type: "Cash capex", val: 5 },
            { year: 2014, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2014, company: "Amazon", type: "Cash capex", val: 8 },
            { year: 2015, company: "Amazon", type: "Free Cash Flow", val: 7 }, { year: 2015, company: "Amazon", type: "Cash capex", val: 5 },
            { year: 2016, company: "Amazon", type: "Free Cash Flow", val: 10 }, { year: 2016, company: "Amazon", type: "Cash capex", val: 10 },
            { year: 2017, company: "Amazon", type: "Free Cash Flow", val: 8 }, { year: 2017, company: "Amazon", type: "Cash capex", val: 12 },
            { year: 2018, company: "Amazon", type: "Free Cash Flow", val: 17 }, { year: 2018, company: "Amazon", type: "Cash capex", val: 13 },
            { year: 2019, company: "Amazon", type: "Free Cash Flow", val: 22 }, { year: 2019, company: "Amazon", type: "Cash capex", val: 17 },
            { year: 2020, company: "Amazon", type: "Free Cash Flow", val: 26 }, { year: 2020, company: "Amazon", type: "Cash capex", val: 35 },
            { year: 2021, company: "Amazon", type: "Free Cash Flow", val: -15 }, { year: 2021, company: "Amazon", type: "Cash capex", val: 55 },
            { year: 2022, company: "Amazon", type: "Free Cash Flow", val: -20 }, { year: 2022, company: "Amazon", type: "Cash capex", val: 58 },
            { year: 2023, company: "Amazon", type: "Free Cash Flow", val: 30 }, { year: 2023, company: "Amazon", type: "Cash capex", val: 48 },
            { year: 2024, company: "Amazon", type: "Free Cash Flow", val: 35 }, { year: 2024, company: "Amazon", type: "Cash capex", val: 75 },
            { year: 2025, company: "Amazon", type: "Free Cash Flow", val: 10 }, { year: 2025, company: "Amazon", type: "Cash capex", val: 125 },

            { year: 2010, company: "Meta", type: "Free Cash Flow", val: 1 }, { year: 2010, company: "Meta", type: "Cash capex", val: 1 },
            { year: 2011, company: "Meta", type: "Free Cash Flow", val: 2 }, { year: 2011, company: "Meta", type: "Cash capex", val: 1 },
            { year: 2012, company: "Meta", type: "Free Cash Flow", val: 4 }, { year: 2012, company: "Meta", type: "Cash capex", val: 2 },
            { year: 2013, company: "Meta", type: "Free Cash Flow", val: 7 }, { year: 2013, company: "Meta", type: "Cash capex", val: 2 },
            { year: 2014, company: "Meta", type: "Free Cash Flow", val: 12 }, { year: 2014, company: "Meta", type: "Cash capex", val: 3 },
            { year: 2015, company: "Meta", type: "Free Cash Flow", val: 15 }, { year: 2015, company: "Meta", type: "Cash capex", val: 5 },
            { year: 2016, company: "Meta", type: "Free Cash Flow", val: 17 }, { year: 2016, company: "Meta", type: "Cash capex", val: 6 },
            { year: 2017, company: "Meta", type: "Free Cash Flow", val: 20 }, { year: 2017, company: "Meta", type: "Cash capex", val: 8 },
            { year: 2018, company: "Meta", type: "Free Cash Flow", val: 22 }, { year: 2018, company: "Meta", type: "Cash capex", val: 14 },
            { year: 2019, company: "Meta", type: "Free Cash Flow", val: 24 }, { year: 2019, company: "Meta", type: "Cash capex", val: 15 },
            { year: 2020, company: "Meta", type: "Free Cash Flow", val: 18 }, { year: 2020, company: "Meta", type: "Cash capex", val: 20 },
            { year: 2021, company: "Meta", type: "Free Cash Flow", val: 39 }, { year: 2021, company: "Meta", type: "Cash capex", val: 18 },
            { year: 2022, company: "Meta", type: "Free Cash Flow", val: 18 }, { year: 2022, company: "Meta", type: "Cash capex", val: 32 },
            { year: 2023, company: "Meta", type: "Free Cash Flow", val: 43 }, { year: 2023, company: "Meta", type: "Cash capex", val: 28 },
            { year: 2024, company: "Meta", type: "Free Cash Flow", val: 52 }, { year: 2024, company: "Meta", type: "Cash capex", val: 37 },
            { year: 2025, company: "Meta", type: "Free Cash Flow", val: 58 }, { year: 2025, company: "Meta", type: "Cash capex", val: 70 },

            { year: 2010, company: "Microsoft", type: "Free Cash Flow", val: 22 }, { year: 2010, company: "Microsoft", type: "Cash capex", val: 2 },
            { year: 2011, company: "Microsoft", type: "Free Cash Flow", val: 25 }, { year: 2011, company: "Microsoft", type: "Cash capex", val: 3 },
            { year: 2012, company: "Microsoft", type: "Free Cash Flow", val: 28 }, { year: 2012, company: "Microsoft", type: "Cash capex", val: 3 },
            { year: 2013, company: "Microsoft", type: "Free Cash Flow", val: 28 }, { year: 2013, company: "Microsoft", type: "Cash capex", val: 3 },
            { year: 2014, company: "Microsoft", type: "Free Cash Flow", val: 22 }, { year: 2014, company: "Microsoft", type: "Cash capex", val: 5 },
            { year: 2015, company: "Microsoft", type: "Free Cash Flow", val: 25 }, { year: 2015, company: "Microsoft", type: "Cash capex", val: 5 },
            { year: 2016, company: "Microsoft", type: "Free Cash Flow", val: 24 }, { year: 2016, company: "Microsoft", type: "Cash capex", val: 8 },
            { year: 2017, company: "Microsoft", type: "Free Cash Flow", val: 27 }, { year: 2017, company: "Microsoft", type: "Cash capex", val: 10 },
            { year: 2018, company: "Microsoft", type: "Free Cash Flow", val: 32 }, { year: 2018, company: "Microsoft", type: "Cash capex", val: 12 },
            { year: 2019, company: "Microsoft", type: "Free Cash Flow", val: 30 }, { year: 2019, company: "Microsoft", type: "Cash capex", val: 15 },
            { year: 2020, company: "Microsoft", type: "Free Cash Flow", val: 40 }, { year: 2020, company: "Microsoft", type: "Cash capex", val: 14 },
            { year: 2021, company: "Microsoft", type: "Free Cash Flow", val: 50 }, { year: 2021, company: "Microsoft", type: "Cash capex", val: 17 },
            { year: 2022, company: "Microsoft", type: "Free Cash Flow", val: 65 }, { year: 2022, company: "Microsoft", type: "Cash capex", val: 19 },
            { year: 2023, company: "Microsoft", type: "Free Cash Flow", val: 60 }, { year: 2023, company: "Microsoft", type: "Cash capex", val: 22 },
            { year: 2024, company: "Microsoft", type: "Free Cash Flow", val: 67 }, { year: 2024, company: "Microsoft", type: "Cash capex", val: 35 },
            { year: 2025, company: "Microsoft", type: "Free Cash Flow", val: 75 }, { year: 2025, company: "Microsoft", type: "Cash capex", val: 80 }
        ];

        document.getElementById("chart-cash-flow").append(Plot.plot({
            width: width,
            height: 300,
            style: {
                fontFamily: fontFamily,
                fontSize: size,
                marginRight: 0,
            },
            x: {
                label: null,
                tickFormat: (d) => d % 5 === 0 ? String(d) : "", // Show every 5th year
            },
            y: {
                grid: true,
                label: "$bn",
                nice: true,
                tickSize: 0,
                ticks: 4,
                tickFormat: (d) => d === 0 ? "0" : (d >= 1000 ? `${d / 1000}B` : `$${d}M`),
            },
            fx: {
                label: null,
            },
            color: {
                legend: true,
                domain: ["Cash capex", "Free Cash Flow"],
                range: ["#ea4335", "#555"] // Red, Dark Grey
            },
            marks: [
                Plot.ruleY([0]),
                Plot.barY(cashFlowData, {
                    x: "year",
                    y: "val",
                    fill: "type",
                    fx: "company",
                    order: "type", // Stack order
                    title: (d) => `${d.company} ${d.year}\n${d.type}: $${d.val}bn`
                })
            ]
        }));

        // Chart: Leases (New)
        const leasesData = [
            { year: 2010, company: "Alphabet", type: "Free Cash Flow", val: 8 }, { year: 2010, company: "Alphabet", type: "Cash capex", val: 4 },
            { year: 2011, company: "Alphabet", type: "Free Cash Flow", val: 10 }, { year: 2011, company: "Alphabet", type: "Cash capex", val: 5 },
            { year: 2012, company: "Alphabet", type: "Free Cash Flow", val: 12 }, { year: 2012, company: "Alphabet", type: "Cash capex", val: 6 },
            { year: 2013, company: "Alphabet", type: "Free Cash Flow", val: 12 }, { year: 2013, company: "Alphabet", type: "Cash capex", val: 8 },
            { year: 2014, company: "Alphabet", type: "Free Cash Flow", val: 14 }, { year: 2014, company: "Alphabet", type: "Cash capex", val: 10 },
            { year: 2015, company: "Alphabet", type: "Free Cash Flow", val: 16 }, { year: 2015, company: "Alphabet", type: "Cash capex", val: 10 },
            { year: 2016, company: "Alphabet", type: "Free Cash Flow", val: 26 }, { year: 2016, company: "Alphabet", type: "Cash capex", val: 11 },
            { year: 2017, company: "Alphabet", type: "Free Cash Flow", val: 24 }, { year: 2017, company: "Alphabet", type: "Cash capex", val: 13 },
            { year: 2018, company: "Alphabet", type: "Free Cash Flow", val: 23 }, { year: 2018, company: "Alphabet", type: "Cash capex", val: 25 },
            { year: 2019, company: "Alphabet", type: "Free Cash Flow", val: 30 }, { year: 2019, company: "Alphabet", type: "Cash capex", val: 24 },
            { year: 2020, company: "Alphabet", type: "Free Cash Flow", val: 43 }, { year: 2020, company: "Alphabet", type: "Cash capex", val: 22 },
            { year: 2021, company: "Alphabet", type: "Free Cash Flow", val: 67 }, { year: 2021, company: "Alphabet", type: "Cash capex", val: 25 },
            { year: 2022, company: "Alphabet", type: "Free Cash Flow", val: 60 }, { year: 2022, company: "Alphabet", type: "Cash capex", val: 32 },
            { year: 2023, company: "Alphabet", type: "Free Cash Flow", val: 69 }, { year: 2023, company: "Alphabet", type: "Cash capex", val: 32 },
            { year: 2024, company: "Alphabet", type: "Free Cash Flow", val: 74 }, { year: 2024, company: "Alphabet", type: "Cash capex", val: 51 },
            { year: 2025, company: "Alphabet", type: "Free Cash Flow", val: 68 }, { year: 2025, company: "Alphabet", type: "Cash capex", val: 92 },

            { year: 2010, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2010, company: "Amazon", type: "Cash capex", val: 1 },
            { year: 2011, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2011, company: "Amazon", type: "Cash capex", val: 2 },
            { year: 2012, company: "Amazon", type: "Free Cash Flow", val: 0 }, { year: 2012, company: "Amazon", type: "Cash capex", val: 4 },
            { year: 2013, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2013, company: "Amazon", type: "Cash capex", val: 5 },
            { year: 2014, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2014, company: "Amazon", type: "Cash capex", val: 8 },
            { year: 2015, company: "Amazon", type: "Free Cash Flow", val: 7 }, { year: 2015, company: "Amazon", type: "Cash capex", val: 5 },
            { year: 2016, company: "Amazon", type: "Free Cash Flow", val: 10 }, { year: 2016, company: "Amazon", type: "Cash capex", val: 10 },
            { year: 2017, company: "Amazon", type: "Free Cash Flow", val: 8 }, { year: 2017, company: "Amazon", type: "Cash capex", val: 12 },
            { year: 2018, company: "Amazon", type: "Free Cash Flow", val: 17 }, { year: 2018, company: "Amazon", type: "Cash capex", val: 13 },
            { year: 2019, company: "Amazon", type: "Free Cash Flow", val: 22 }, { year: 2019, company: "Amazon", type: "Cash capex", val: 17 },
            { year: 2020, company: "Amazon", type: "Free Cash Flow", val: 26 }, { year: 2020, company: "Amazon", type: "Cash capex", val: 35 },
            { year: 2021, company: "Amazon", type: "Free Cash Flow", val: -15 }, { year: 2021, company: "Amazon", type: "Cash capex", val: 55 },
            { year: 2022, company: "Amazon", type: "Free Cash Flow", val: -20 }, { year: 2022, company: "Amazon", type: "Cash capex", val: 58 },
            { year: 2023, company: "Amazon", type: "Free Cash Flow", val: 30 }, { year: 2023, company: "Amazon", type: "Cash capex", val: 48 },
            { year: 2024, company: "Amazon", type: "Free Cash Flow", val: 35 }, { year: 2024, company: "Amazon", type: "Cash capex", val: 75 },
            { year: 2025, company: "Amazon", type: "Free Cash Flow", val: 10 }, { year: 2025, company: "Amazon", type: "Cash capex", val: 125 },

            { year: 2010, company: "Meta", type: "Free Cash Flow", val: 1 }, { year: 2010, company: "Meta", type: "Cash capex", val: 1 },
            { year: 2011, company: "Meta", type: "Free Cash Flow", val: 2 }, { year: 2011, company: "Meta", type: "Cash capex", val: 1 },
            { year: 2012, company: "Meta", type: "Free Cash Flow", val: 4 }, { year: 2012, company: "Meta", type: "Cash capex", val: 2 },
            { year: 2013, company: "Meta", type: "Free Cash Flow", val: 7 }, { year: 2013, company: "Meta", type: "Cash capex", val: 2 },
            { year: 2014, company: "Meta", type: "Free Cash Flow", val: 12 }, { year: 2014, company: "Meta", type: "Cash capex", val: 3 },
            { year: 2015, company: "Meta", type: "Free Cash Flow", val: 15 }, { year: 2015, company: "Meta", type: "Cash capex", val: 5 },
            { year: 2016, company: "Meta", type: "Free Cash Flow", val: 17 }, { year: 2016, company: "Meta", type: "Cash capex", val: 6 },
            { year: 2017, company: "Meta", type: "Free Cash Flow", val: 20 }, { year: 2017, company: "Meta", type: "Cash capex", val: 8 },
            { year: 2018, company: "Meta", type: "Free Cash Flow", val: 22 }, { year: 2018, company: "Meta", type: "Cash capex", val: 14 },
            { year: 2019, company: "Meta", type: "Free Cash Flow", val: 24 }, { year: 2019, company: "Meta", type: "Cash capex", val: 15 },
            { year: 2020, company: "Meta", type: "Free Cash Flow", val: 18 }, { year: 2020, company: "Meta", type: "Cash capex", val: 20 },
            { year: 2021, company: "Meta", type: "Free Cash Flow", val: 39 }, { year: 2021, company: "Meta", type: "Cash capex", val: 18 },
            { year: 2022, company: "Meta", type: "Free Cash Flow", val: 18 }, { year: 2022, company: "Meta", type: "Cash capex", val: 32 },
            { year: 2023, company: "Meta", type: "Free Cash Flow", val: 43 }, { year: 2023, company: "Meta", type: "Cash capex", val: 28 },
            { year: 2024, company: "Meta", type: "Free Cash Flow", val: 52 }, { year: 2024, company: "Meta", type: "Cash capex", val: 37 },
            { year: 2025, company: "Meta", type: "Free Cash Flow", val: 58 }, { year: 2025, company: "Meta", type: "Cash capex", val: 70 },

            { year: 2010, company: "Microsoft", type: "Free Cash Flow", val: 22 }, { year: 2010, company: "Microsoft", type: "Cash capex", val: 2 },
            { year: 2011, company: "Microsoft", type: "Free Cash Flow", val: 25 }, { year: 2011, company: "Microsoft", type: "Cash capex", val: 3 },
            { year: 2012, company: "Microsoft", type: "Free Cash Flow", val: 28 }, { year: 2012, company: "Microsoft", type: "Cash capex", val: 3 },
            { year: 2013, company: "Microsoft", type: "Free Cash Flow", val: 28 }, { year: 2013, company: "Microsoft", type: "Cash capex", val: 3 },
            { year: 2014, company: "Microsoft", type: "Free Cash Flow", val: 22 }, { year: 2014, company: "Microsoft", type: "Cash capex", val: 5 },
            { year: 2015, company: "Microsoft", type: "Free Cash Flow", val: 25 }, { year: 2015, company: "Microsoft", type: "Cash capex", val: 5 },
            { year: 2016, company: "Microsoft", type: "Free Cash Flow", val: 24 }, { year: 2016, company: "Microsoft", type: "Cash capex", val: 8 },
            { year: 2017, company: "Microsoft", type: "Free Cash Flow", val: 27 }, { year: 2017, company: "Microsoft", type: "Cash capex", val: 10 },
            { year: 2018, company: "Microsoft", type: "Free Cash Flow", val: 32 }, { year: 2018, company: "Microsoft", type: "Cash capex", val: 12 },
            { year: 2019, company: "Microsoft", type: "Free Cash Flow", val: 30 }, { year: 2019, company: "Microsoft", type: "Cash capex", val: 15 },
            { year: 2020, company: "Microsoft", type: "Free Cash Flow", val: 40 }, { year: 2020, company: "Microsoft", type: "Cash capex", val: 14 },
            { year: 2021, company: "Microsoft", type: "Free Cash Flow", val: 50 }, { year: 2021, company: "Microsoft", type: "Cash capex", val: 17 },
            { year: 2022, company: "Microsoft", type: "Free Cash Flow", val: 65 }, { year: 2022, company: "Microsoft", type: "Cash capex", val: 19 }, { year: 2022, company: "Microsoft", type: "Leases", val: 2 },
            { year: 2023, company: "Microsoft", type: "Free Cash Flow", val: 60 }, { year: 2023, company: "Microsoft", type: "Cash capex", val: 22 }, { year: 2023, company: "Microsoft", type: "Leases", val: 5 },
            { year: 2024, company: "Microsoft", type: "Free Cash Flow", val: 67 }, { year: 2024, company: "Microsoft", type: "Cash capex", val: 35 }, { year: 2024, company: "Microsoft", type: "Leases", val: 10 },
            { year: 2025, company: "Microsoft", type: "Free Cash Flow", val: 75 }, { year: 2025, company: "Microsoft", type: "Cash capex", val: 80 }, { year: 2025, company: "Microsoft", type: "Leases", val: 40 }
        ];

        document.getElementById("chart-leases").append(Plot.plot({
            width: width,
            height: 300,
            style: {
                fontFamily: fontFamily,
                fontSize: size,
                marginRight: 0,
            },
            x: {
                label: null,
                tickFormat: (d) => d % 5 === 0 ? String(d) : "", // Show every 5th year
            },
            y: {
                grid: true,
                label: "$bn",
                nice: true,
                tickSize: 0,
                tickFormat: (d) => d === 0 ? "0" : (d >= 1000 ? `${d / 1000}B` : `$${d}M`),
            },
            fx: {
                label: null,
            },
            color: {
                legend: true,
                domain: ["Leases", "Cash capex", "Free Cash Flow"],
                range: ["#ea4335", "#aaa", "#555"]
            },
            marks: [
                Plot.barY(leasesData, {
                    x: "year",
                    y: "val",
                    fill: "type",
                    fx: "company",
                    order: "type", // Stack order
                    title: (d) => `${d.company} ${d.year}\n${d.type}: $${d.val}bn`
                }),
                Plot.ruleY([0])
            ]
        }));

        // Chart: Circular Revenue (D3.js)
        {
            const container = document.getElementById("chart-circular-revenue");
            container.innerHTML = ""; // Clear existing

            const width = container.clientWidth;
            const height = 600;

            const svg = d3.select(container).append("svg")
                .attr("viewBox", [0, 0, width, height])
                .attr("style", "max-width: 100%; height: auto; font: 12px sans-serif;");

            // 1. Data Structure
            const nodes = [
                { id: "Microsoft", x: width * 0.5, y: height * 0.45, color: "#EA7F22" },      // Center-ish (Orange)
                { id: "OpenAI", x: width * 0.5, y: height * 0.15, color: "#88D4F6" },         // Top (Light Blue)
                { id: "Oracle", x: width * 0.15, y: height * 0.45, color: "#55CBAF" },        // Left (Teal)
                { id: "AMD", x: width * 0.2, y: height * 0.75, color: "#EC5887" },            // Bottom-Left (Pink)
                { id: "Nvidia", x: width * 0.5, y: height * 0.85, color: "#297FD5" },         // Bottom (Dark Blue)
                { id: "Data Center Lease", x: width * 0.8, y: height * 0.75, color: "#91AA2F" }, // Bottom-Right (Green)
                { id: "Coreweave", x: width * 0.85, y: height * 0.45, color: "#F6C455" }      // Right (Yellow)
            ];

            const links = [
                // Microsoft -> OpenAI (Investors - Dashed - Left side arc)
                { source: "Microsoft", target: "OpenAI", value: "$13B", type: "Investor", offset: -30 },
                { source: "Microsoft", target: "OpenAI", value: "$14.5B", type: "Investor", offset: -50 },
                { source: "Microsoft", target: "OpenAI", value: "$100B", type: "Investor", offset: -70 },

                // OpenAI -> Microsoft (Rev Share/Customer - Solid/Thick - Right side arc)
                { source: "OpenAI", target: "Microsoft", value: "$5.8B", type: "Revenue Share", offset: 30 },
                { source: "OpenAI", target: "Microsoft", value: "$0.69B", type: "Customer", offset: 50 },

                // Microsoft -> Coreweave (Straight)
                { source: "Microsoft", target: "Coreweave", value: "$10B", type: "Customer", offset: 0 },

                // Microsoft -> Nvidia (Customer - Curves)
                { source: "Microsoft", target: "Nvidia", value: "$33B", type: "Customer", offset: 20 },
                { source: "Microsoft", target: "Nvidia", value: "$82.7B", type: "Customer", offset: 40 },

                // Oracle -> OpenAI (Customer - Wide Left Arc)
                { source: "Oracle", target: "OpenAI", value: "$300B", type: "Customer", offset: -50 },

                // OpenAI -> Coreweave (Top Right Arc)
                { source: "OpenAI", target: "Coreweave", value: "$0.35B", type: "Investor", offset: -40 },
                { source: "OpenAI", target: "Coreweave", value: "$22.4B", type: "Customer", offset: -20 },

                // Oracle -> Nvidia (Left side down)
                { source: "Oracle", target: "Nvidia", value: "$40B", type: "Customer", offset: 30 },
                { source: "Oracle", target: "Data Center Lease", value: "$106.4B", type: "Customer", offset: 40 },

                // Oracle -> AMD (Straight-ish)
                { source: "Oracle", target: "AMD", value: "$0.75B", type: "Customer", offset: 10 },

                // Nvidia -> Coreweave (Investor - Dashed)
                { source: "Nvidia", target: "Coreweave", value: "$2.9B", type: "Investor", offset: -20 },

                // Coreweave -> Nvidia (Customer)
                { source: "Coreweave", target: "Nvidia", value: "$12B", type: "Customer", offset: 20 },

                // Nvidia -> Data Center Lease
                { source: "Nvidia", target: "Data Center Lease", value: "$7.1B", type: "Customer", offset: 0 },

                // Coreweave -> Data Center Lease
                { source: "Coreweave", target: "Data Center Lease", value: "$34B", type: "Customer", offset: 0 },

                // AMD -> OpenAI (Investor - Dashed - Long Left Arc)
                { source: "AMD", target: "OpenAI", value: "$34B", type: "Investor", offset: -60 },
            ];

            // Assign linkNum for multi-edges
            const linkGroups = {};
            links.forEach(l => {
                const id = [l.source, l.target].sort().join("-");
                if (!linkGroups[id]) linkGroups[id] = [];
                linkGroups[id].push(l);
            });

            // Calculate curvature index (0, 1, -1, 2, -2...) centered around 0
            Object.values(linkGroups).forEach(group => {
                const n = group.length;
                group.forEach((l, i) => {
                    l.linkIndex = i - (n - 1) / 2;
                });
            });

            // 2. Definitions (Markers)
            const defs = svg.append("defs");
            nodes.forEach(node => {
                defs.append("marker")
                    .attr("id", `arrow-${node.id.replace(/\s+/g, '')}`)
                    .attr("viewBox", "0 -5 10 10")
                    .attr("refX", 10) // Standard tip offset (UserSpace: Tip is at 10, Line ends at 10)
                    .attr("refY", 0)
                    .attr("markerWidth", 6)
                    .attr("markerHeight", 6)
                    .attr("orient", "auto")
                    .attr("markerUnits", "userSpaceOnUse") // Critical: keep size constant regardless of stroke width
                    .append("path")
                    .attr("d", "M0,-5L10,0L0,5")
                    .attr("fill", node.color);
            });

            // 3. Link Implementation
            const linkData = links.map((l, i) => {
                const s = nodes.find(n => n.id === l.source);
                const t = nodes.find(n => n.id === l.target);
                return { ...l, sourceNode: s, targetNode: t, id: `link-${i}` };
            });

            const linkParams = (d) => {
                const r = 45; // Node radius
                const padding = 2; // Extra padding for arrow tip

                // 1. Calculate Control Point (same as before)
                const mx = (d.sourceNode.x + d.targetNode.x) / 2;
                const my = (d.sourceNode.y + d.targetNode.y) / 2;
                const dx = d.targetNode.x - d.sourceNode.x;
                const dy = d.targetNode.y - d.sourceNode.y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                if (dist === 0) return "";

                const nx = -dy / dist;
                const ny = dx / dist;
                const offset = d.offset !== undefined ? d.offset : 0;

                const cx = mx + nx * offset;
                const cy = my + ny * offset;

                // 2. Calculate Intersection Point at Target (Shorten path)
                // Vector from Control to Target
                let vcx = d.targetNode.x - cx;
                let vcy = d.targetNode.y - cy;

                // Handle straight lines (offset=0, mid to target)
                if (offset === 0) {
                    vcx = d.targetNode.x - d.sourceNode.x;
                    vcy = d.targetNode.y - d.sourceNode.y;
                }

                const vLen = Math.sqrt(vcx * vcx + vcy * vcy);
                // Position arrow tip at radius + padding from center
                const shortDist = r + 8; // 8px for arrow length/padding

                // If path is too short, just draw to center (fallback)
                if (vLen < shortDist) return `M${d.sourceNode.x},${d.sourceNode.y} Q${cx},${cy} ${d.targetNode.x},${d.targetNode.y}`;

                const ratio = shortDist / vLen;
                const tx = d.targetNode.x - vcx * ratio;
                const ty = d.targetNode.y - vcy * ratio;

                return `M${d.sourceNode.x},${d.sourceNode.y} Q${cx},${cy} ${tx},${ty}`;
            };

            const linkPaths = svg.append("g")
                .attr("fill", "none")
                .selectAll("path")
                .data(linkData)
                .join("path")
                .attr("id", d => d.id)
                .attr("d", d => linkParams(d))
                .attr("stroke", d => d.sourceNode.color)
                .attr("stroke-width", d => d.type === "Revenue Share" ? 4 : 2)
                .attr("stroke-dasharray", d => d.type === "Investor" ? "5,5" : null)
                .attr("marker-end", d => `url(#arrow-${d.sourceNode.id.replace(/\s+/g, '')})`);

            // 4. Edge Labels (TextPath)
            const edgeLabels = svg.append("g")
                .selectAll("text")
                .data(linkData)
                .join("text")
                .attr("dy", -5) // Lift off the line slightly
                .append("textPath")
                .attr("href", d => `#${d.id}`)
                .attr("startOffset", "50%")
                .attr("text-anchor", "middle")
                .style("fill", "#000") // Text color
                .style("font-weight", "bold")
                .style("stroke", "white")
                .style("stroke-width", 3)
                .style("paint-order", "stroke") // Stroke behind fill
                .text(d => d.value);

            // 5. Nodes
            const nodeGroup = svg.append("g")
                .selectAll("g")
                .data(nodes)
                .join("g")
                .attr("transform", d => `translate(${d.x},${d.y})`);

            nodeGroup.append("circle")
                .attr("r", 45)
                .attr("fill", d => d.color)
                .attr("stroke", "#fff")
                .attr("stroke-width", 2);

            nodeGroup.append("text")
                .attr("dy", "0.35em")
                .attr("text-anchor", "middle")
                .attr("fill", "#000") // Per prompt "black or dark grey"
                .style("font-weight", "bold")
                .style("pointer-events", "none") // Let clicks pass
                .text(d => d.id)
                .call(text => text.filter(d => d.id.includes(" ")).text(d => "")) // Clear complex ones
                .filter(d => d.id.includes(" ")) // Handle multi-line
                .each(function (d) {
                    const words = d.id.split(/\s+/);
                    d3.select(this).append("tspan").attr("x", 0).attr("dy", "-0.6em").text(words[0]);
                    d3.select(this).append("tspan").attr("x", 0).attr("dy", "1.2em").text(words.slice(1).join(" "));
                });

            // 6. Legend
            const legend = svg.append("g")
                .attr("transform", "translate(20, 20)");

            const legendItems = [
                { label: "Customer", type: "Customer" },
                { label: "Investor", type: "Investor" },
                { label: "Revenue Share", type: "Revenue Share" }
            ];

            legendItems.forEach((item, i) => {
                const g = legend.append("g").attr("transform", `translate(0, ${i * 25})`);

                g.append("line")
                    .attr("x1", 0).attr("x2", 40).attr("y1", 0).attr("y2", 0)
                    .attr("stroke", "#333")
                    .attr("stroke-width", item.type === "Revenue Share" ? 4 : 2)
                    .attr("stroke-dasharray", item.type === "Investor" ? "5,5" : null);

                g.append("text")
                    .attr("x", 50)
                    .attr("y", 4)
                    .text(item.label)
                    .style("font-weight", "bold");
            });
        }


        // Chart: DC Constraints
        const constraintsData = [
            { type: "Utility power", level: "Extremely significant", val: 40 },
            { type: "Utility power", level: "Very significant", val: 33 },
            { type: "Utility power", level: "Somewhat significant", val: 19 },

            { type: "Access to chips", level: "Extremely significant", val: 32 },
            { type: "Access to chips", level: "Very significant", val: 34 },
            { type: "Access to chips", level: "Somewhat significant", val: 15 },

            { type: "Fibre", level: "Extremely significant", val: 26 },
            { type: "Fibre", level: "Very significant", val: 33 },
            { type: "Fibre", level: "Somewhat significant", val: 26 },

            { type: "Permitting", level: "Extremely significant", val: 26 },
            { type: "Permitting", level: "Very significant", val: 30 },
            { type: "Permitting", level: "Somewhat significant", val: 30 },

            { type: "Water availability", level: "Extremely significant", val: 21 },
            { type: "Water availability", level: "Very significant", val: 20 },
            { type: "Water availability", level: "Somewhat significant", val: 32 },

            { type: "Access to natural gas", level: "Extremely significant", val: 19 },
            { type: "Access to natural gas", level: "Very significant", val: 23 },
            { type: "Access to natural gas", level: "Somewhat significant", val: 34 },

            { type: "Land", level: "Extremely significant", val: 17 },
            { type: "Land", level: "Very significant", val: 30 },
            { type: "Land", level: "Somewhat significant", val: 27 },

            { type: "Public opposition", level: "Extremely significant", val: 16 },
            { type: "Public opposition", level: "Very significant", val: 25 },
            { type: "Public opposition", level: "Somewhat significant", val: 33 }
        ];

        document.getElementById("chart-constraints").append(Plot.plot({
            width: width,
            height: 350,
            marginRight: 0,
            marginBottom: 70,
            style: {
                fontFamily: fontFamily,
                fontSize: size,
            },
            x: {
                label: null,
                nice: true,
                tickSize: 0,
                tickRotate: -45,
                domain: ["Utility power", "Access to chips", "Fibre", "Permitting", "Water availability", "Access to natural gas", "Land", "Public opposition"]
            },
            y: {
                grid: true,
                percent: null,
                label: null,
                nice: true,
                ticks: 4,
                tickSize: 0,
                tickFormat: (d) => `${d}%`
            },
            color: {
                legend: true,
                domain: ["Extremely significant", "Very significant", "Somewhat significant"],
                range: ["#ea4335", "#f4b4b4", "#757575"]
            },
            marks: [
                Plot.barY(constraintsData, {
                    x: "type",
                    y: "val",
                    fill: "level",
                    tip: true,
                    order: "level", // Stack order
                    title: (d) => `${d.type}\n${d.level}: ${d.val}%`
                })
            ]
        }));

        // Chart 5: Nvidia Revenue
        const revenueData = [
            // Intel Data
            { date: new Date("2000-01-01"), company: "Intel", revenue: 8.0 },
            { date: new Date("2001-01-01"), company: "Intel", revenue: 6.5 },
            { date: new Date("2002-01-01"), company: "Intel", revenue: 7.0 },
            { date: new Date("2003-01-01"), company: "Intel", revenue: 7.5 },
            { date: new Date("2004-01-01"), company: "Intel", revenue: 8.0 },
            { date: new Date("2005-01-01"), company: "Intel", revenue: 9.0 },
            { date: new Date("2006-01-01"), company: "Intel", revenue: 8.0 },
            { date: new Date("2007-06-01"), company: "Intel", revenue: 10.0 },
            { date: new Date("2008-01-01"), company: "Intel", revenue: 9.5 },
            { date: new Date("2009-01-01"), company: "Intel", revenue: 7.0 },
            { date: new Date("2010-06-01"), company: "Intel", revenue: 10.5 },
            { date: new Date("2011-06-01"), company: "Intel", revenue: 13.0 },
            { date: new Date("2012-06-01"), company: "Intel", revenue: 13.5 },
            { date: new Date("2013-06-01"), company: "Intel", revenue: 13.0 },
            { date: new Date("2014-06-01"), company: "Intel", revenue: 13.8 },
            { date: new Date("2015-06-01"), company: "Intel", revenue: 14.0 },
            { date: new Date("2016-06-01"), company: "Intel", revenue: 15.0 },
            { date: new Date("2017-06-01"), company: "Intel", revenue: 16.0 },
            { date: new Date("2018-06-01"), company: "Intel", revenue: 17.0 },
            { date: new Date("2019-06-01"), company: "Intel", revenue: 16.0 },
            { date: new Date("2020-01-01"), company: "Intel", revenue: 20.0 },
            { date: new Date("2021-06-01"), company: "Intel", revenue: 19.5 },
            { date: new Date("2022-01-01"), company: "Intel", revenue: 19.0 },
            { date: new Date("2022-06-01"), company: "Intel", revenue: 15.3 },
            { date: new Date("2023-01-01"), company: "Intel", revenue: 11.7 },
            { date: new Date("2023-06-01"), company: "Intel", revenue: 12.9 },
            { date: new Date("2024-01-01"), company: "Intel", revenue: 13.0 },
            { date: new Date("2024-06-01"), company: "Intel", revenue: 13.5 },
            { date: new Date("2025-01-01"), company: "Intel", revenue: 13.0 },

            // Nvidia Data
            { date: new Date("2000-01-01"), company: "Nvidia", revenue: 0.1 },
            { date: new Date("2005-01-01"), company: "Nvidia", revenue: 0.5 },
            { date: new Date("2010-01-01"), company: "Nvidia", revenue: 1.0 },
            { date: new Date("2015-01-01"), company: "Nvidia", revenue: 1.2 },
            { date: new Date("2016-01-01"), company: "Nvidia", revenue: 1.5 },
            { date: new Date("2017-01-01"), company: "Nvidia", revenue: 2.5 },
            { date: new Date("2018-01-01"), company: "Nvidia", revenue: 3.2 },
            { date: new Date("2019-01-01"), company: "Nvidia", revenue: 2.2 },
            { date: new Date("2020-01-01"), company: "Nvidia", revenue: 3.0 },
            { date: new Date("2021-01-01"), company: "Nvidia", revenue: 5.0 },
            { date: new Date("2021-06-01"), company: "Nvidia", revenue: 6.5 },
            { date: new Date("2022-01-01"), company: "Nvidia", revenue: 8.2 },
            { date: new Date("2022-06-01"), company: "Nvidia", revenue: 6.7 },
            { date: new Date("2023-01-01"), company: "Nvidia", revenue: 6.0 },
            { date: new Date("2023-04-01"), company: "Nvidia", revenue: 7.2 },
            { date: new Date("2023-07-01"), company: "Nvidia", revenue: 13.5 },
            { date: new Date("2023-10-01"), company: "Nvidia", revenue: 18.1 },
            { date: new Date("2024-01-01"), company: "Nvidia", revenue: 22.1 },
            { date: new Date("2024-04-01"), company: "Nvidia", revenue: 26.0 },
            { date: new Date("2024-07-01"), company: "Nvidia", revenue: 30.0 },
            { date: new Date("2024-10-01"), company: "Nvidia", revenue: 35.1 },
            { date: new Date("2025-01-01"), company: "Nvidia", revenue: 45.0 },
            { date: new Date("2025-04-01"), company: "Nvidia", revenue: 58.0 } // Estimated top of chart
        ];

        document.getElementById("chart-nvidia").append(Plot.plot({
            width: width,
            height: 350,
            marginRight: 40,
            marginTop: 30,
            style: {
                fontFamily: fontFamily,
                fontSize: (size + 2) + "px",
            },
            y: {
                grid: true,
                label: "Quarterly Revenue ($bn)",
                nice: true,
                ticks: 4,
                tickSize: 0,
                tickFormat: (d) => d === 0 ? "$0" : (d >= 1000 ? `${d / 1000}B` : `$${d}M`),
            },
            x: {
                label: null,
                tickFormat: "%Y",
                nice: true,
                tickSize: 0,
            },
            color: {
                legend: true,
                domain: ["Intel", "Nvidia"],
                range: ["#444", "#ea4335"] // Dark Grey for Intel, Red for Nvidia
            },
            marks: [
                Plot.line(revenueData, {
                    x: "date",
                    y: "revenue",
                    stroke: "company",
                    strokeWidth: 3,
                    curve: "monotone-x"
                }),
                Plot.text(revenueData, Plot.selectLast({
                    x: "date",
                    y: "revenue",
                    z: "company",
                    text: "company",
                    textAnchor: "start",
                    dx: 3,
                    fill: "company"
                })),
                Plot.tip(revenueData, Plot.pointerX({
                    x: "date",
                    y: "revenue",
                    stroke: "company"
                }))
            ]
        }));

        // Chart: TSMC vs Nvidia vs Intel
        const tsmcData = [
            ...revenueData,
            // TSMC Data
            { date: new Date("2000-01-01"), company: "TSMC", revenue: 1.5 },
            { date: new Date("2001-01-01"), company: "TSMC", revenue: 1.2 },
            { date: new Date("2002-01-01"), company: "TSMC", revenue: 1.6 },
            { date: new Date("2003-01-01"), company: "TSMC", revenue: 1.8 },
            { date: new Date("2004-01-01"), company: "TSMC", revenue: 2.3 },
            { date: new Date("2005-01-01"), company: "TSMC", revenue: 2.5 },
            { date: new Date("2006-01-01"), company: "TSMC", revenue: 2.8 },
            { date: new Date("2007-01-01"), company: "TSMC", revenue: 3.0 },
            { date: new Date("2008-01-01"), company: "TSMC", revenue: 3.2 },
            { date: new Date("2009-01-01"), company: "TSMC", revenue: 2.5 },
            { date: new Date("2010-01-01"), company: "TSMC", revenue: 3.8 },
            { date: new Date("2011-01-01"), company: "TSMC", revenue: 4.2 },
            { date: new Date("2012-01-01"), company: "TSMC", revenue: 4.8 },
            { date: new Date("2013-01-01"), company: "TSMC", revenue: 5.2 },
            { date: new Date("2014-01-01"), company: "TSMC", revenue: 6.0 },
            { date: new Date("2015-01-01"), company: "TSMC", revenue: 7.5 },
            { date: new Date("2016-01-01"), company: "TSMC", revenue: 8.5 },
            { date: new Date("2017-01-01"), company: "TSMC", revenue: 9.0 },
            { date: new Date("2018-01-01"), company: "TSMC", revenue: 9.5 },
            { date: new Date("2019-01-01"), company: "TSMC", revenue: 10.5 },
            { date: new Date("2020-01-01"), company: "TSMC", revenue: 12.5 },
            { date: new Date("2021-01-01"), company: "TSMC", revenue: 15.0 },
            { date: new Date("2022-01-01"), company: "TSMC", revenue: 19.5 },
            { date: new Date("2023-01-01"), company: "TSMC", revenue: 16.5 },
            { date: new Date("2023-06-01"), company: "TSMC", revenue: 17.0 },
            { date: new Date("2024-01-01"), company: "TSMC", revenue: 19.5 },
            { date: new Date("2024-06-01"), company: "TSMC", revenue: 23.0 },
            { date: new Date("2024-10-01"), company: "TSMC", revenue: 26.5 },
            { date: new Date("2025-01-01"), company: "TSMC", revenue: 29.5 }
        ];

        document.getElementById("chart-tsmc").append(Plot.plot({
            width: width,
            height: 350,
            marginRight: 40,
            style: {
                fontFamily: fontFamily,
                fontSize: (size + 2) + "px",
            },
            y: {
                grid: true,
                label: "Quarterly Revenue ($bn)",
                nice: true,
                ticks: 6,
                tickSize: 0,
            },
            x: {
                label: null,
                tickFormat: "%Y",
                nice: true,
                tickSize: 0,
            },
            color: {
                legend: true,
                domain: ["Intel", "Nvidia", "TSMC"],
                range: ["#444", "#ea4335", "#ea4335"] // Dark Grey, Red, Red (for dashed)
            },
            marks: [
                Plot.line(tsmcData.filter(d => d.company !== "TSMC"), {
                    x: "date",
                    y: "revenue",
                    stroke: "company",
                    strokeWidth: 3,
                    curve: "monotone-x"
                }),
                Plot.line(tsmcData.filter(d => d.company === "TSMC"), {
                    x: "date",
                    y: "revenue",
                    stroke: "company",
                    strokeWidth: 3,
                    curve: "monotone-x",
                    strokeDasharray: "5,5"
                }),
                Plot.text(tsmcData, Plot.selectLast({
                    x: "date",
                    y: "revenue",
                    z: "company",
                    text: "company",
                    textAnchor: "start",
                    dx: 3,
                    fill: "company"
                })),
                Plot.tip(tsmcData, Plot.pointerX({
                    x: "date",
                    y: "revenue",
                    stroke: "company"
                }))
            ]
        }));

        // Chart 6: ChatGPT Growth
        const gptData = [
            // Active Users (Red)
            { date: new Date("2024-01-01"), users: 100, type: "ChatGPT weekly active users" },
            { date: new Date("2024-02-01"), users: 125, type: "ChatGPT weekly active users" },
            { date: new Date("2024-03-01"), users: 120, type: "ChatGPT weekly active users" },
            { date: new Date("2024-04-01"), users: 160, type: "ChatGPT weekly active users" },
            { date: new Date("2024-05-01"), users: 170, type: "ChatGPT weekly active users" },
            { date: new Date("2024-06-01"), users: 165, type: "ChatGPT weekly active users" },
            { date: new Date("2024-07-01"), users: 165, type: "ChatGPT weekly active users" },
            { date: new Date("2024-08-01"), users: 200, type: "ChatGPT weekly active users" },
            { date: new Date("2024-09-01"), users: 260, type: "ChatGPT weekly active users" },
            { date: new Date("2024-10-01"), users: 300, type: "ChatGPT weekly active users" },
            { date: new Date("2024-11-01"), users: 335, type: "ChatGPT weekly active users" },
            { date: new Date("2024-12-01"), users: 260, type: "ChatGPT weekly active users" },
            { date: new Date("2025-01-01"), users: 375, type: "ChatGPT weekly active users" },
            { date: new Date("2025-02-01"), users: 410, type: "ChatGPT weekly active users" },
            { date: new Date("2025-04-01"), users: 515, type: "ChatGPT weekly active users" },
            { date: new Date("2025-05-01"), users: 565, type: "ChatGPT weekly active users" },
            { date: new Date("2025-06-01"), users: 605, type: "ChatGPT weekly active users" },
            { date: new Date("2025-07-01"), users: 655, type: "ChatGPT weekly active users" },
            { date: new Date("2025-08-01"), users: 690, type: "ChatGPT weekly active users" },

            // Subscribers (Blue)
            { date: new Date("2024-01-01"), users: 5, type: "ChatGPT subscribers" },
            { date: new Date("2024-02-01"), users: 5, type: "ChatGPT subscribers" },
            { date: new Date("2024-03-01"), users: 6, type: "ChatGPT subscribers" },
            { date: new Date("2024-04-01"), users: 6, type: "ChatGPT subscribers" },
            { date: new Date("2024-05-01"), users: 7, type: "ChatGPT subscribers" },
            { date: new Date("2024-06-01"), users: 8, type: "ChatGPT subscribers" },
            { date: new Date("2024-07-01"), users: 9, type: "ChatGPT subscribers" },
            { date: new Date("2024-08-01"), users: 10, type: "ChatGPT subscribers" },
            { date: new Date("2024-09-01"), users: 12, type: "ChatGPT subscribers" },
            { date: new Date("2024-10-01"), users: 13, type: "ChatGPT subscribers" },
            { date: new Date("2024-11-01"), users: 14, type: "ChatGPT subscribers" },
            { date: new Date("2024-12-01"), users: 15, type: "ChatGPT subscribers" },
            { date: new Date("2025-01-01"), users: 16, type: "ChatGPT subscribers" },
            { date: new Date("2025-02-01"), users: 18, type: "ChatGPT subscribers" },
            { date: new Date("2025-03-01"), users: 20, type: "ChatGPT subscribers" },
            { date: new Date("2025-04-01"), users: 25, type: "ChatGPT subscribers" },
            { date: new Date("2025-05-01"), users: 29, type: "ChatGPT subscribers" },
            { date: new Date("2025-06-01"), users: 31, type: "ChatGPT subscribers" },
            { date: new Date("2025-07-01"), users: 33, type: "ChatGPT subscribers" },
            { date: new Date("2025-08-01"), users: 34, type: "ChatGPT subscribers" },
        ];

        document.getElementById("chart-chatgpt-growth").append(Plot.plot({
            width: width,
            height: 250,
            marginRight: 60,
            marginLeft: 0,
            style: {
                fontFamily: fontFamily,
                fontSize: (size + 2) + "px",
            },
            y: {
                grid: true,
                label: null,
                nice: true,
                ticks: 4,
                tickSize: 0,
            },
            x: {
                label: null,
                nice: true,
                // tickSize: 0,
            },
            color: {
                domain: ["ChatGPT weekly active users", "ChatGPT subscribers"],
                range: ["#ea4335", "#2859C0"]
            },
            marks: [
                Plot.axisY({
                    tickFormat: (d) => d === 0 ? "0" : (d >= 1000 ? `${d / 1000}B` : `${d}M`),
                    tickSize: 0, // don‚Äôt draw ticks
                    ticks: 4,
                    dx: -2, // offset right
                    dy: -4, // offset up
                    lineAnchor: "bottom", // draw labels above grid lines
                    textAnchor: "start",
                }),
                Plot.line(gptData, {
                    x: "date",
                    y: "users",
                    stroke: "type",
                    strokeWidth: 3
                }),
                Plot.dot(gptData, {
                    x: "date",
                    y: "users",
                    fill: "type"
                }),
                Plot.text(gptData, Plot.selectLast({
                    x: "date",
                    y: "users",
                    z: "type",
                    text: "type",
                    textAnchor: "start",
                    dx: 10,
                    dy: -4,
                    fill: "type",
                    lineWidth: 10
                })),
                Plot.tip(gptData, Plot.pointerX({
                    x: "date",
                    y: "users",
                    stroke: "type"
                })),
                Plot.text(["For every hundred weekly active users of ChatGPT, five people pay for its Pro or Plus services."], {
                    frameAnchor: "top-left",
                    dx: 40,
                    dy: -2,
                    fontFamily: fontFamily,
                    fontSize: 14,
                    lineHeight: 1.2,
                    lineWidth: 25,
                    stroke: "white", // Halo effect
                    strokeWidth: 10,
                    fill: "currentColor",
                    style: {
                        paintOrder: "stroke"
                    }
                })
            ]
        }));

        // Chart: Engagement Gap
        const engagementData = [
            // USA
            { location: "USA", year: "2023", freq: "Monthly", val: 13, rank: 3 },
            { location: "USA", year: "2023", freq: "Weekly", val: 1, rank: 2 },
            { location: "USA", year: "2023", freq: "Daily", val: 2, rank: 1 },
            { location: "USA", year: "2024", freq: "Monthly", val: 27, rank: 3 },
            { location: "USA", year: "2024", freq: "Weekly", val: 4, rank: 2 },
            { location: "USA", year: "2024", freq: "Daily", val: 4, rank: 1 },
            { location: "USA", year: "2025", freq: "Monthly", val: 33, rank: 3 },
            { location: "USA", year: "2025", freq: "Weekly", val: 8, rank: 2 },
            { location: "USA", year: "2025", freq: "Daily", val: 10, rank: 1 },

            // UK
            { location: "UK", year: "2023", freq: "Monthly", val: 9, rank: 3 },
            { location: "UK", year: "2023", freq: "Weekly", val: 7, rank: 2 },
            { location: "UK", year: "2023", freq: "Daily", val: 2, rank: 1 },
            { location: "UK", year: "2024", freq: "Monthly", val: 13, rank: 3 },
            { location: "UK", year: "2024", freq: "Weekly", val: 9, rank: 2 },
            { location: "UK", year: "2024", freq: "Daily", val: 4, rank: 1 },
            { location: "UK", year: "2025", freq: "Monthly", val: 15, rank: 3 },
            { location: "UK", year: "2025", freq: "Weekly", val: 15, rank: 2 },
            { location: "UK", year: "2025", freq: "Daily", val: 6, rank: 1 },
        ];

        document.getElementById("chart-engagement").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: null,
                domain: [0, 60],
                nice: true,
                ticks: 4,
                tickSize: 0,
                tickFormat: (d) => `${d}%`
            },
            x: {
                type: "band",
                label: null,
                padding: 0.3
            },
            fx: {
                label: null,
                padding: 0.05
            },
            color: {
                legend: true,
                domain: ["Monthly", "Weekly", "Daily"],
                range: ["#757575", "#555", "#ea4335"] // Light Grey, Dark Grey, Red
            },
            marks: [
                Plot.barY(engagementData, {
                    x: "year",
                    y: "val",
                    fill: "freq",
                    fx: "location",
                    order: "rank",
                    tip: true,
                    title: (d) => `${d.location} ${d.year}\n${d.freq}: ${d.val}%`
                })
            ]
        }));

        // Chart: Global Usage (Recreated Reuters source)
        const globalUsageData = [
            // USA
            { country: "USA", tool: "ChatGPT", usage: 0.22 },
            { country: "USA", tool: "Google Gemini", usage: 0.15 },
            { country: "USA", tool: "Meta AI", usage: 0.11 },
            { country: "USA", tool: "Microsoft Copilot", usage: 0.08 },
            { country: "USA", tool: "Grok", usage: 0.04 },
            { country: "USA", tool: "Claude", usage: 0.02 },

            { country: "UK", tool: "ChatGPT", usage: 0.17 },
            { country: "UK", tool: "Google Gemini", usage: 0.06 },
            { country: "UK", tool: "Meta AI", usage: 0.08 },
            { country: "UK", tool: "Microsoft Copilot", usage: 0.06 },
            { country: "UK", tool: "Grok", usage: 0.01 },
            { country: "UK", tool: "Claude", usage: 0.01 },

            { country: "France", tool: "ChatGPT", usage: 0.18 },
            { country: "France", tool: "Google Gemini", usage: 0.08 },
            { country: "France", tool: "Meta AI", usage: 0.04 },
            { country: "France", tool: "Microsoft Copilot", usage: 0.05 },
            { country: "France", tool: "Grok", usage: 0.01 },
            { country: "France", tool: "Claude", usage: 0.01 },

            { country: "Denmark", tool: "ChatGPT", usage: 0.28 },
            { country: "Denmark", tool: "Google Gemini", usage: 0.07 },
            { country: "Denmark", tool: "Meta AI", usage: 0.03 },
            { country: "Denmark", tool: "Microsoft Copilot", usage: 0.06 },
            { country: "Denmark", tool: "Grok", usage: 0.01 },
            { country: "Denmark", tool: "Claude", usage: 0.00 },

            { country: "Japan", tool: "ChatGPT", usage: 0.16 },
            { country: "Japan", tool: "Google Gemini", usage: 0.13 },
            { country: "Japan", tool: "Meta AI", usage: 0.04 },
            { country: "Japan", tool: "Microsoft Copilot", usage: 0.07 },
            { country: "Japan", tool: "Grok", usage: 0.03 },
            { country: "Japan", tool: "Claude", usage: 0.02 },
        ];

        document.getElementById("chart-global-usage").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                axis: null,
                domain: ["ChatGPT", "Google Gemini", "Meta AI", "Microsoft Copilot", "Grok", "Claude"]
            },
            fx: {
                label: null,
                domain: ["USA", "UK", "France", "Denmark", "Japan"]
            },
            y: {
                grid: true,
                label: null,
                tickFormat: ".0%",
                nice: true,
                tickSize: 0,
                ticks: 4,
            },
            color: {
                legend: true,
                domain: ["ChatGPT", "Google Gemini", "Meta AI", "Microsoft Copilot", "Grok", "Claude"],
                range: ["#ea4335", "#000", "#444", "#999", "#ddd", "#f4b4b4"]
            },
            marks: [
                Plot.barY(globalUsageData, {
                    x: "tool",
                    y: "usage",
                    fx: "country",
                    fill: "tool",
                    tip: true,
                    title: (d) => `${d.tool}: ${(d.usage * 100).toFixed(0)}%`
                })
            ]
        }));

        // Chart: Model Proliferation
        const proliferationData = [
            // OpenAI (Red)
            { date: new Date("2022-11-30"), model: "ChatGPT (GPT-3.5)", company: "OpenAI", score: 50 },
            { date: new Date("2023-03-14"), model: "GPT-4", company: "OpenAI", score: 73 },
            { date: new Date("2023-11-06"), model: "GPT-4 Turbo", company: "OpenAI", score: 75 },
            { date: new Date("2024-05-13"), model: "GPT-4o", company: "OpenAI", score: 80 },
            { date: new Date("2024-09-12"), model: "o1-preview", company: "OpenAI", score: 82 },
            { date: new Date("2024-12-05"), model: "o1", company: "OpenAI", score: 85 },
            { date: new Date("2025-01-31"), model: "o3-mini", company: "OpenAI", score: 87 },
            { date: new Date("2025-02-15"), model: "GPT-4.5", company: "OpenAI", score: 88 },
            { date: new Date("2025-04-10"), model: "o3-pro", company: "OpenAI", score: 90 },
            { date: new Date("2025-05-20"), model: "o4-mini", company: "OpenAI", score: 86 },
            { date: new Date("2025-08-15"), model: "GPT-5", company: "OpenAI", score: 92 },
            { date: new Date("2025-10-10"), model: "GPT-5.1", company: "OpenAI", score: 94 },

            // Google
            { date: new Date("2022-04-04"), model: "PaLM", company: "Google", score: 35 },
            { date: new Date("2023-05-10"), model: "PaLM 2", company: "Google", score: 60 },
            { date: new Date("2023-12-06"), model: "Gemini 1.0 Pro", company: "Google", score: 68 },
            { date: new Date("2024-02-08"), model: "Gemini 1.0 Ultra", company: "Google", score: 72 },
            { date: new Date("2024-02-21"), model: "Gemma", company: "Google", score: 45 },
            { date: new Date("2024-02-15"), model: "Gemini 1.5 Pro", company: "Google", score: 78 },
            { date: new Date("2024-06-27"), model: "Gemma 2", company: "Google", score: 65 },
            { date: new Date("2024-12-15"), model: "Gemini 2.0", company: "Google", score: 84 },
            { date: new Date("2025-04-01"), model: "Gemma 3", company: "Google", score: 75 },
            { date: new Date("2025-06-15"), model: "Gemini 2.5", company: "Google", score: 89 },

            // Meta
            { date: new Date("2022-05-03"), model: "OPT", company: "Meta", score: 25 },
            { date: new Date("2023-02-24"), model: "LLaMA 1", company: "Meta", score: 40 },
            { date: new Date("2023-07-18"), model: "Llama 2", company: "Meta", score: 62 },
            { date: new Date("2024-04-18"), model: "Llama 3", company: "Meta", score: 74 },
            { date: new Date("2024-07-23"), model: "Llama 3.1", company: "Meta", score: 79 },
            { date: new Date("2024-09-25"), model: "Llama 3.2", company: "Meta", score: 70 },
            { date: new Date("2025-04-15"), model: "Llama 4 Scout", company: "Meta", score: 83 },
            { date: new Date("2025-08-01"), model: "Llama 4 Maverick", company: "Meta", score: 88 },

            // Anthropic
            { date: new Date("2023-03-14"), model: "Claude 1", company: "Anthropic", score: 55 },
            { date: new Date("2023-07-11"), model: "Claude 2", company: "Anthropic", score: 68 },
            { date: new Date("2024-03-04"), model: "Claude 3 Opus", company: "Anthropic", score: 77 },
            { date: new Date("2024-06-21"), model: "Claude 3.5 Sonnet", company: "Anthropic", score: 81 },
            { date: new Date("2024-11-15"), model: "Claude 3.5 Opus", company: "Anthropic", score: 83 },
            { date: new Date("2025-03-01"), model: "Claude 4", company: "Anthropic", score: 89 },
            { date: new Date("2025-09-01"), model: "Claude 4.5", company: "Anthropic", score: 91 },

            // Mistral
            { date: new Date("2023-09-27"), model: "Mistral 7B", company: "Mistral", score: 52 },
            { date: new Date("2023-12-11"), model: "Mixtral 8x7B", company: "Mistral", score: 65 },
            { date: new Date("2024-02-26"), model: "Mistral Large", company: "Mistral", score: 72 },
            { date: new Date("2024-07-24"), model: "Mistral Large 2", company: "Mistral", score: 76 },

            // Others
            { date: new Date("2022-07-12"), model: "BLOOM", company: "Other", score: 38 },
            { date: new Date("2023-05-25"), model: "Falcon 40B", company: "Other", score: 48 },
            { date: new Date("2023-09-06"), model: "Falcon 180B", company: "Other", score: 60 },
            { date: new Date("2023-11-06"), model: "Yi-34B", company: "Other", score: 63 },
            { date: new Date("2023-11-30"), model: "Qwen-72B", company: "Other", score: 66 },
            { date: new Date("2024-03-17"), model: "Grok-1", company: "Other", score: 58 },
            { date: new Date("2024-03-27"), model: "DBRX", company: "Other", score: 64 },
            { date: new Date("2024-05-06"), model: "DeepSeek-V2", company: "Other", score: 71 },
            { date: new Date("2024-06-07"), model: "Qwen 2", company: "Other", score: 75 },
            { date: new Date("2024-08-14"), model: "Grok-2", company: "Other", score: 73 },
            { date: new Date("2025-01-20"), model: "DeepSeek-R1", company: "Other", score: 82 },
            { date: new Date("2025-02-01"), model: "Grok 3", company: "Other", score: 83 },
            { date: new Date("2025-05-01"), model: "DeepSeek-V3", company: "Other", score: 85 },
            { date: new Date("2025-07-01"), model: "Qwen 3", company: "Other", score: 87 },
            { date: new Date("2025-07-15"), model: "Grok 4", company: "Other", score: 89 },
            { date: new Date("2025-07-20"), model: "Kimi K2", company: "Other", score: 84 }
        ];

        document.getElementById("chart-model-proliferation").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size,
                overflow: "visible"
            },
            x: {
                label: null,
                ticks: "6 months",
                tickFormat: "%b %Y"
            },
            y: {
                grid: true,
                label: "Artificial Analysis Intelligence Index",
                domain: [20, 100],
                nice: true,
                tickSize: 0,
                ticks: 4,
            },
            color: {
                legend: true,
                domain: ["OpenAI", "All others"],
                range: ["#ea4335", "#555"]
            },
            marks: [
                Plot.dot(proliferationData, {
                    x: "date",
                    y: "score",
                    fill: (d) => d.company === "OpenAI" ? "OpenAI" : "All others",
                    opacity: (d) => d.company === "OpenAI" ? 1 : 0.7,
                    r: (d) => d.company === "OpenAI" ? 8 : 6,
                    title: (d) => `${d.model}\n${d.company}\n${d.date.toLocaleDateString()}\nScore: ${d.score}`
                }),
                Plot.text(proliferationData.filter(d => ["ChatGPT (GPT-3.5)", "GPT-4", "GPT-4o", "o1", "GPT-5"].includes(d.model)), {
                    x: "date",
                    y: "score",
                    text: "model",
                    dy: -12,
                    fill: "#333",
                    stroke: "#fafafa",
                    strokeWidth: 3,
                    fontSize: 13,
                    fontWeight: 500
                }),
                Plot.tip(proliferationData, Plot.pointer({
                    x: "date",
                    y: "score",
                    title: (d) => `${d.model}\n${d.company}\n${d.date.toLocaleDateString()}\nScore: ${d.score}`
                }))
            ]
        }));

        // Chart: Model Convergence
        const modelData = [
            // LMArena Text
            { category: "LMArena Text", company: "Anthropic", score: 100, rank: 1 },
            { category: "LMArena Text", company: "Google", score: 99.8, rank: 2 },
            { category: "LMArena Text", company: "OpenAI", score: 99.2, rank: 3 },
            { category: "LMArena Text", company: "Other: China", score: 98.7, rank: 4 },
            { category: "LMArena Text", company: "Other: China", score: 98.2, rank: 5 },
            { category: "LMArena Text", company: "Other: Western", score: 97.9, rank: 6 },
            { category: "LMArena Text", company: "Other: China", score: 97.5, rank: 7 },
            { category: "LMArena Text", company: "Other: Western", score: 97.2, rank: 8 },
            { category: "LMArena Text", company: "Other: Western", score: 96.0, rank: 9 },

            // MMLU-Pro
            { category: "MMLU-Pro", company: "Anthropic", score: 100, rank: 1 },
            { category: "MMLU-Pro", company: "OpenAI", score: 99.1, rank: 2 },
            { category: "MMLU-Pro", company: "Other: Western", score: 98.4, rank: 3 },
            { category: "MMLU-Pro", company: "Google", score: 97.8, rank: 4 },
            { category: "MMLU-Pro", company: "Other: China", score: 96.5, rank: 5 },
            { category: "MMLU-Pro", company: "Other: China", score: 95.9, rank: 6 },
            { category: "MMLU-Pro", company: "Other: China", score: 94.2, rank: 7 },
            { category: "MMLU-Pro", company: "Other: Western", score: 93.0, rank: 8 },
            { category: "MMLU-Pro", company: "Other: Western", score: 92.2, rank: 9 },
        ];

        document.getElementById("chart-model-convergence").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size,
            },
            fx: {
                label: null,
                // padding: 0.2
            },
            x: {
                axis: null,
                // padding: 0.1
            },
            y: {
                grid: true,
                ticks: 3,
                nice: true,
                domain: [90, 100],
                label: null,
                tickFormat: (d) => `${d}%`
            },
            color: {
                legend: true,
                domain: ["Anthropic", "Google", "OpenAI", "Other: China", "Other: Western"],
                range: ["#ea4335", "#333", "#666", "#ccc", "#f4b4b4"]
            },
            marks: [
                Plot.barY(modelData, {
                    x: "rank",
                    y: "score",
                    fx: "category",
                    fill: "company",
                    tip: true,
                    y1: 90, // Fix overflow by setting baseline to matches domain min
                    title: (d) => `${d.company}: ${d.score}%`
                }),
            ]
        }));

        // Chart 7: How Couples Meet
        const couplesData = [
            // Online
            {
                year: 1980,
                method: "Online",
                val: 0.0
            },
            {
                year: 1990,
                method: "Online",
                val: 0.01
            },
            {
                year: 1995,
                method: "Online",
                val: 0.02
            },
            {
                year: 2000,
                method: "Online",
                val: 0.10
            },
            {
                year: 2005,
                method: "Online",
                val: 0.20
            },
            {
                year: 2010,
                method: "Online",
                val: 0.25
            },
            {
                year: 2017,
                method: "Online",
                val: 0.40
            },
            {
                year: 2020,
                method: "Online",
                val: 0.50
            },
            {
                year: 2024,
                method: "Online",
                val: 0.55
            },
            // Friends
            {
                year: 1940,
                method: "Friends",
                val: 0.20
            },
            {
                year: 1950,
                method: "Friends",
                val: 0.25
            },
            {
                year: 1960,
                method: "Friends",
                val: 0.30
            },
            {
                year: 1970,
                method: "Friends",
                val: 0.32
            },
            {
                year: 1980,
                method: "Friends",
                val: 0.33
            },
            {
                year: 1990,
                method: "Friends",
                val: 0.34
            },
            {
                year: 2000,
                method: "Friends",
                val: 0.30
            },
            {
                year: 2010,
                method: "Friends",
                val: 0.25
            },
            {
                year: 2017,
                method: "Friends",
                val: 0.20
            },
            {
                year: 2024,
                method: "Friends",
                val: 0.15
            },
            // Work
            {
                year: 1940,
                method: "Work",
                val: 0.15
            },
            {
                year: 1960,
                method: "Work",
                val: 0.15
            },
            {
                year: 1980,
                method: "Work",
                val: 0.20
            },
            {
                year: 1990,
                method: "Work",
                val: 0.21
            },
            {
                year: 2000,
                method: "Work",
                val: 0.18
            },
            {
                year: 2010,
                method: "Work",
                val: 0.15
            },
            {
                year: 2024,
                method: "Work",
                val: 0.10
            },
            // Bar/Restaurant
            {
                year: 1940,
                method: "Bar/Restaurant",
                val: 0.05
            },
            {
                year: 1960,
                method: "Bar/Restaurant",
                val: 0.08
            },
            {
                year: 1980,
                method: "Bar/Restaurant",
                val: 0.12
            },
            {
                year: 2000,
                method: "Bar/Restaurant",
                val: 0.11
            },
            {
                year: 2010,
                method: "Bar/Restaurant",
                val: 0.10
            },
            {
                year: 2024,
                method: "Bar/Restaurant",
                val: 0.07
            },
            // Family
            {
                year: 1940,
                method: "Family",
                val: 0.25
            },
            {
                year: 1960,
                method: "Family",
                val: 0.15
            },
            {
                year: 1980,
                method: "Family",
                val: 0.10
            },
            {
                year: 2000,
                method: "Family",
                val: 0.07
            },
            {
                year: 2024,
                method: "Family",
                val: 0.05
            },
            // School/College
            {
                year: 1940,
                method: "School",
                val: 0.20
            },
            {
                year: 1960,
                method: "School",
                val: 0.18
            },
            {
                year: 1980,
                method: "School",
                val: 0.15
            },
            {
                year: 2000,
                method: "School",
                val: 0.14
            },
            {
                year: 2024,
                method: "School",
                val: 0.10
            }
        ];

        document.getElementById("chart-couples").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                tickFormat: ".0%",
                label: "% of Couples",
                tickSize: 0,
                nice: true,
                ticks: 6
            },
            x: {
                tickFormat: "d",
                nice: true,
            },
            color: {
                legend: true,
                domain: ["Online", "Friends", "Work", "Bar/Restaurant", "School", "Family"],
                range: [colorAccent, "#555", "#777", "#999", "#bbb", "#ddd"]
            },
            marks: [
                Plot.line(couplesData, {
                    x: "year",
                    y: "val",
                    stroke: "method",
                    strokeWidth: (d) => d.method === "Online" ? 4 : 2,
                    curve: "natural"
                }),
                Plot.text(couplesData, Plot.selectLast({
                    x: "year",
                    y: "val",
                    text: "method",
                    textAnchor: "start",
                    dx: 5,
                    fontSize: (size + 2) + "px",
                    fill: (d) => d.method === "Online" ? colorAccent : "#777"
                }))
            ]
        }));

        // Chart 13: Steam Engines
        const steamData = [{
            year: 1840,
            type: "Population",
            val: 27
        }, {
            year: 1840,
            type: "Steam engine equivalent",
            val: 10
        }, {
            year: 1870,
            type: "Population",
            val: 31
        }, {
            year: 1870,
            type: "Steam engine equivalent",
            val: 80
        }, {
            year: 1896,
            type: "Population",
            val: 40
        }, {
            year: 1896,
            type: "Steam engine equivalent",
            val: 270
        }];

        document.getElementById("chart-steam").append(Plot.plot({
            width: width,
            height: 300,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: null,
                domain: [0, 300],
                nice: true,
                ticks: 4,
                tickSize: 0,
                tickFormat: d => `${d}M`,
            },
            x: {
                axis: null,
                padding: 0.2
            },
            fx: {
                tickFormat: "d",
                label: null,
                padding: 0.2
            },
            color: {
                legend: true,
                domain: ["Population", "Steam engine equivalent"],
                range: ["#555", colorAccent]
            },
            marks: [
                Plot.barY(steamData, {
                    x: "type",
                    y: "val",
                    fill: "type",
                    fx: "year",
                    sort: {
                        color: null,
                        domain: ["Population", "Steam engine equivalent"]
                    },
                    tip: true
                })
            ]
        }));

        // Chart 8: Elevator Operators
        const elevatorData = [{
            year: 1870,
            count: 500
        }, {
            year: 1900,
            count: 12000
        }, {
            year: 1920,
            count: 45000
        }, {
            year: 1950,
            count: 114000
        }, {
            year: 1970,
            count: 40000
        }, {
            year: 1990,
            count: 2000
        }];

        document.getElementById("chart-elevators").append(Plot.plot({
            width: width,
            height: 200,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: "Elevator Operators",
                nice: true,
                ticks: 4,
                tickSize: 0,
            },
            x: {
                tickFormat: "d"
            },
            marks: [
                Plot.line(elevatorData, {
                    x: "year",
                    y: "count",
                    stroke: colorAccent,
                    strokeWidth: 3,
                    curve: "natural"
                }),
                Plot.areaY(elevatorData, {
                    x: "year",
                    y: "count",
                    fill: colorAccent,
                    fillOpacity: 0.2,
                    curve: "natural"
                }),
                Plot.ruleX([1950], {
                    stroke: "#555",
                    strokeWidth: 2,
                    strokeDasharray: "4 4"
                }),
                Plot.text([{
                    year: 1950,
                    count: 122000
                }], {
                    x: "year",
                    y: "count",
                    text: _ => "Otis launched ‚ÄòAutotronic‚Äô\nautomatic elevator in 1950",
                    dy: -10,
                    dx: 20,
                    lineHeight: 1.2,
                    textAnchor: "start",
                    fill: "#555"
                })
            ]
        }));

        const skuData = [{
            year: 1955,
            skus: 3000
        },
        {
            year: 1960,
            skus: 6000
        },
        {
            year: 1970,
            skus: 8000
        },
        {
            year: 1974,
            skus: 9000
        }, // Barcode launch
        {
            year: 1980,
            skus: 14000
        },
        {
            year: 1985,
            skus: 17000
        },
        {
            year: 1990,
            skus: 26000
        },
        {
            year: 2000,
            skus: 32000
        },
        {
            year: 2005,
            skus: 36000
        },
        {
            year: 2008,
            skus: 51000
        }, // The Peak
        {
            year: 2010,
            skus: 47000
        },
        {
            year: 2015,
            skus: 42000
        },
        {
            year: 2018,
            skus: 33000
        },
        {
            year: 2020,
            skus: 31000
        },
        {
            year: 2024,
            skus: 31800
        }
        ];

        document.getElementById("chart-skus").append(Plot.plot({
            width: width,
            height: 400,
            marginLeft: 0,
            style: {
                fontSize: size,
                color: "#4a4a4a"
            },
            y: {
                grid: true,
                label: null,
                nice: true,
                tickSize: 0,
                ticks: 6,
            },
            x: {
                tickFormat: "d",
                nice: true,
                tickSize: 4,
                label: null,
            },
            marks: [
                Plot.axisY({
                    tickSize: 0, // don‚Äôt draw ticks
                    ticks: 4,
                    dx: 4, // offset right
                    dy: -4, // offset up
                    lineAnchor: "bottom", // draw labels above grid lines
                    textAnchor: "start",
                }),
                Plot.line(skuData, {
                    x: "year",
                    y: "skus",
                    stroke: "#e15746",
                    strokeWidth: 3,
                    curve: "natural"
                }),

                Plot.ruleX([1974], {
                    stroke: "#555",
                    strokeWidth: 2,
                    strokeDasharray: "3 3" // Dotted effect
                }),

                Plot.text([{
                    year: 1974
                }], {
                    x: "year",
                    y: 55000, // Positioned near the top, not on the line
                    text: d => "Grocery barcodes launched in 1974",
                    dx: 8, // Offset slightly right of the line
                    textAnchor: "start",
                    fontSize: 14,
                    fill: "#555"
                })
            ]
        }));

        const ycDataDisplay = [
            { batch: "W 2015", type: "Other", val: 90 }, { batch: "W 2015", type: "AI", val: 20 },
            { batch: "S 2015", type: "Other", val: 85 }, { batch: "S 2015", type: "AI", val: 15 },
            { batch: "W 2016", type: "Other", val: 100 }, { batch: "W 2016", type: "AI", val: 20 },
            { batch: "S 2016", type: "Other", val: 80 }, { batch: "S 2016", type: "AI", val: 20 },
            { batch: "W 2017", type: "Other", val: 90 }, { batch: "W 2017", type: "AI", val: 25 },
            { batch: "S 2017", type: "Other", val: 95 }, { batch: "S 2017", type: "AI", val: 25 },
            { batch: "W 2018", type: "Other", val: 115 }, { batch: "W 2018", type: "AI", val: 30 },
            { batch: "S 2018", type: "Other", val: 100 }, { batch: "S 2018", type: "AI", val: 30 },
            { batch: "W 2019", type: "Other", val: 150 }, { batch: "W 2019", type: "AI", val: 45 },
            { batch: "S 2019", type: "Other", val: 130 }, { batch: "S 2019", type: "AI", val: 45 },
            { batch: "W 2020", type: "Other", val: 160 }, { batch: "W 2020", type: "AI", val: 65 },
            { batch: "S 2020", type: "Other", val: 140 }, { batch: "S 2020", type: "AI", val: 65 },
            { batch: "W 2021", type: "Other", val: 240 }, { batch: "W 2021", type: "AI", val: 95 },
            { batch: "S 2021", type: "Other", val: 260 }, { batch: "S 2021", type: "AI", val: 130 },
            { batch: "W 2022", type: "Other", val: 230 }, { batch: "W 2022", type: "AI", val: 170 },
            { batch: "S 2022", type: "Other", val: 110 }, { batch: "S 2022", type: "AI", val: 125 },
            { batch: "W 2023", type: "Other", val: 100 }, { batch: "W 2023", type: "AI", val: 180 },
            { batch: "S 2023", type: "Other", val: 45 }, { batch: "S 2023", type: "AI", val: 175 },
            { batch: "W 2024", type: "Other", val: 50 }, { batch: "W 2024", type: "AI", val: 200 },
            { batch: "F 2024", type: "Other", val: 15 }, { batch: "F 2024", type: "AI", val: 80 }, // Small dip
            { batch: "S 2025", type: "Other", val: 20 }, { batch: "S 2025", type: "AI", val: 145 }
        ];

        document.getElementById("chart-ycombinator").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                domain: ycDataDisplay.map(d => d.batch), // Preserve order
                tickFormat: (d, i) => i % 2 === 0 ? d : "" // Show every other label to avoid crowding like in the original image? Actually visual has mostly all W labeled.
            },
            y: {
                grid: true,
                label: null,
                nice: true
            },
            color: {
                legend: true,
                domain: ["Other", "AI"],
                range: ["#555", "#e15746"]
            },
            marks: [
                Plot.barY(ycDataDisplay, {
                    x: "batch",
                    y: "val",
                    fill: "type",
                    title: (d) => `${d.batch}\n${d.type}: ${d.val}`
                }),
                Plot.image([0], {
                    frameAnchor: "top-right",
                    src: "/imgs/Y_Combinator_.logo.svg",
                    title: "Y Combinator logo",
                    width: 40,
                })
            ]
        }));

        // Chart 11: Accenture Bookings
        const accentureData = [
            { date: new Date("2023-02-01"), val: 0 },
            { date: new Date("2023-05-01"), val: 100 },
            { date: new Date("2023-08-01"), val: 200 },
            { date: new Date("2023-11-01"), val: 450 },
            { date: new Date("2024-02-01"), val: 650 },
            { date: new Date("2024-05-01"), val: 900 },
            { date: new Date("2024-08-01"), val: 1000 },
            { date: new Date("2024-11-01"), val: 1200 },
            { date: new Date("2025-02-01"), val: 1400 },
            { date: new Date("2025-05-01"), val: 1500 },
            { date: new Date("2025-08-01"), val: 1800 }
        ];

        document.getElementById("chart-accenture").append(Plot.plot({
            width: width,
            height: 300,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: null,
                nice: true,
                // domain: [0, 2000]
                tickSize: 0,
                ticks: 3,
            },
            x: {
                label: null,
                tickFormat: "%b %Y",
                ticks: "6 months"
            },
            marks: [
                Plot.line(accentureData, {
                    x: "date",
                    y: "val",
                    stroke: "#e15746", // Matching the red/orange from image
                    strokeWidth: 3,
                    curve: "monotone-x"
                }),
                Plot.dot(accentureData, {
                    x: "date",
                    y: "val",
                    fill: "#e15746",
                    r: 4
                }),
                Plot.image([0], {
                    frameAnchor: "top",
                    dy: 20,
                    src: "https://upload.wikimedia.org/wikipedia/commons/c/cd/Accenture.svg",
                    title: "Accenture logo",
                    width: 100,
                }),
                Plot.tip(accentureData, Plot.pointerX({
                    x: "date",
                    y: "val",
                    title: (d) => `${d.date.toLocaleDateString('default', { month: 'short', year: 'numeric' })}: $${d.val}m`
                }))
            ]
        }));

        // Chart: CIO Timing
        const cioData = [{
            status: "Already deployed\nat least one project",
            pct: 34
        }, {
            status: "H2 2025",
            pct: 24
        }, {
            status: "2026",
            pct: 20
        }, {
            status: "Later or no plan",
            pct: 22
        }];

        document.getElementById("chart-cio-timing").append(Plot.plot({
            width: width,
            height: 150,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                axis: null
            },
            y: {
                label: null,
                axis: null
            },
            color: {
                domain: ["Already deployed\nat least one project", "H2 2025", "2026", "Later or no plan"],
                range: [colorAccent, "#fad2d2", "black", "#555"]
            },
            marks: [
                Plot.barX(cioData, {
                    x: "pct",
                    fill: "status",
                    order: null
                }),
                Plot.text(cioData, Plot.stackX({
                    x: "pct",
                    text: (d) => `${d.status} \n(${d.pct}%)`,
                    fill: (d) => d.status === "H2 2025" ? "#555" : "white",
                    fontSize: 14
                }))
            ]
        }));

        // Chart: E-commerce
        const ecomData = [
            { year: 2000, type: "Core retail", val: 2.0 }, { year: 2000, type: "Addressable retail", val: 1.5 }, { year: 2000, type: "All retail", val: 1.0 },
            { year: 2005, type: "Core retail", val: 4.5 }, { year: 2005, type: "Addressable retail", val: 3.5 }, { year: 2005, type: "All retail", val: 2.5 },
            { year: 2010, type: "Core retail", val: 8.0 }, { year: 2010, type: "Addressable retail", val: 6.0 }, { year: 2010, type: "All retail", val: 4.0 },
            { year: 2015, type: "Core retail", val: 13.0 }, { year: 2015, type: "Addressable retail", val: 10.0 }, { year: 2015, type: "All retail", val: 6.5 },
            { year: 2019, type: "Core retail", val: 19.5 }, { year: 2019, type: "Addressable retail", val: 15.0 }, { year: 2019, type: "All retail", val: 10.5 },
            { year: 2020.25, type: "Core retail", val: 28.0 }, { year: 2020.25, type: "Addressable retail", val: 22.0 }, { year: 2020.25, type: "All retail", val: 16.0 },
            { year: 2020.5, type: "Core retail", val: 27.0 }, { year: 2020.5, type: "Addressable retail", val: 21.0 }, { year: 2020.5, type: "All retail", val: 15.0 },
            { year: 2021, type: "Core retail", val: 27.5 }, { year: 2021, type: "Addressable retail", val: 21.5 }, { year: 2021, type: "All retail", val: 15.0 },
            { year: 2022, type: "Core retail", val: 26.5 }, { year: 2022, type: "Addressable retail", val: 21.0 }, { year: 2022, type: "All retail", val: 14.5 },
            { year: 2023, type: "Core retail", val: 28.0 }, { year: 2023, type: "Addressable retail", val: 22.5 }, { year: 2023, type: "All retail", val: 15.5 },
            { year: 2024, type: "Core retail", val: 29.0 }, { year: 2024, type: "Addressable retail", val: 23.0 }, { year: 2024, type: "All retail", val: 16.0 },
            { year: 2025, type: "Core retail", val: 29.0 }, { year: 2025, type: "Addressable retail", val: 23.5 }, { year: 2025, type: "All retail", val: 16.5 }
        ];

        document.getElementById("chart-ecommerce").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: null,
                percent: false,
                nice: true,
                tickFormat: (d) => d + "%"
            },
            x: {
                tickFormat: "d",
                label: null
            },
            color: {
                domain: ["Core retail", "Addressable retail", "All retail"],
                range: [colorAccent, colorMain, "#999"],
                legend: true
            },
            marks: [
                Plot.line(ecomData, {
                    x: "year",
                    y: "val",
                    stroke: "type",
                    strokeWidth: 3,
                    curve: "natural"
                }),
                Plot.tip(ecomData, Plot.pointerX({
                    x: "year",
                    y: "val",
                    title: (d) => `${d.type}\n${d.year}: ${d.val}%`
                }))
            ]
        }));

        // Chart 12: Cloud Workloads
        const cloudData = [
            { year: 2014.0, type: "Expected in 3 years", val: 9 }, { year: 2014.0, type: "Today", val: 4 },
            { year: 2014.5, type: "Expected in 3 years", val: 14 }, { year: 2014.5, type: "Today", val: 5 },
            { year: 2015.0, type: "Expected in 3 years", val: 16 }, { year: 2015.0, type: "Today", val: 6 },
            { year: 2015.5, type: "Expected in 3 years", val: 19 }, { year: 2015.5, type: "Today", val: 11 },
            { year: 2016.0, type: "Expected in 3 years", val: 38 }, { year: 2016.0, type: "Today", val: 18 },
            { year: 2016.5, type: "Expected in 3 years", val: 33 }, { year: 2016.5, type: "Today", val: 20 },
            { year: 2017.0, type: "Expected in 3 years", val: 35 }, { year: 2017.0, type: "Today", val: 19 },
            { year: 2017.5, type: "Expected in 3 years", val: 34 }, { year: 2017.5, type: "Today", val: 18 },
            { year: 2018.0, type: "Expected in 3 years", val: 38 }, { year: 2018.0, type: "Today", val: 26 },
            { year: 2018.5, type: "Expected in 3 years", val: 36 }, { year: 2018.5, type: "Today", val: 19 },
            { year: 2019.0, type: "Expected in 3 years", val: 43 }, { year: 2019.0, type: "Today", val: 23 },
            { year: 2019.5, type: "Expected in 3 years", val: 42 }, { year: 2019.5, type: "Today", val: 23 },
            { year: 2020.0, type: "Expected in 3 years", val: 41 }, { year: 2020.0, type: "Today", val: 22 },
            { year: 2020.5, type: "Expected in 3 years", val: 40 }, { year: 2020.5, type: "Today", val: 21 },
            { year: 2021.0, type: "Expected in 3 years", val: 41 }, { year: 2021.0, type: "Today", val: 22 },
            { year: 2021.5, type: "Expected in 3 years", val: 42 }, { year: 2021.5, type: "Today", val: 24 },
            { year: 2022.2, type: "Expected in 3 years", val: 51 }, { year: 2022.2, type: "Today", val: 31 },
            { year: 2022.8, type: "Expected in 3 years", val: 47 }, { year: 2022.8, type: "Today", val: 29 },
            { year: 2023.5, type: "Expected in 3 years", val: 48 }, { year: 2023.5, type: "Today", val: 30 },
            { year: 2024.0, type: "Expected in 3 years", val: 46 }, { year: 2024.0, type: "Today", val: 28 },
            { year: 2024.5, type: "Expected in 3 years", val: 45 }, { year: 2024.5, type: "Today", val: 28 }
        ];

        document.getElementById("chart-cloud").append(Plot.plot({
            width: width,
            height: 300,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                nice: true,
                tickSize: 0,
                ticks: 4,
                tickFormat: "0%"
            },
            x: {
                tickFormat: "d",
                nice: true,
            },
            color: {
                domain: ["Today", "Expected in 3 years"],
                range: ["#e15746", "#4a4a4a"],
                legend: true
            },
            marks: [
                Plot.line(cloudData, {
                    x: "year",
                    y: (d) => d.val / 100,
                    stroke: "type",
                    strokeWidth: 3,
                    curve: "monotone-x"
                }),
                Plot.dot(cloudData, {
                    x: "year",
                    y: (d) => d.val / 100,
                    fill: "type",
                    r: 4
                }),
                Plot.tip(cloudData, Plot.pointerX({
                    x: "year",
                    y: (d) => d.val / 100,
                    title: (d) => `${d.year}\n${d.type}: ${d.val}%`
                }))
            ]
        }));

        // Chart 23: Global Ad Revenue (2024 Company Split)
        const adsData = [{
            company: "Google Search",
            val: 180,
            color: "#EA4335"
        },
        {
            company: "Google Network",
            val: 30,
            color: "#D93025"
        },
        {
            company: "YouTube",
            val: 35,
            color: "#B31412"
        },
        {
            company: "Meta",
            val: 185,
            color: "#F27C7C"
        },
        {
            company: "Amazon",
            val: 70,
            color: "#FAD2D2"
        },
        {
            company: "All other ex-China",
            val: 360,
            color: "#4A4A4A"
        },
        {
            company: "China",
            val: 180,
            color: "#999999"
        }
        ];

        document.getElementById("chart-ads").append(Plot.plot({
            width: width,
            height: 180,
            marginRight: 0,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                grid: true,
                domain: [0, 1100]
            },
            y: {
                axis: null
            },
            color: {
                domain: adsData.map(d => d.company),
                range: adsData.map(d => d.color),
                legend: false
            },
            marks: [
                Plot.barX(adsData, Plot.stackX({
                    x: "val",
                    fill: "company",
                    title: (d) => `${d.company}: $${d.val}bn`
                })),
                Plot.text(adsData, Plot.stackX({
                    x: "val",
                    text: (d) => ["Google Network", "YouTube", "Amazon"].includes(d.company) ? "" : d.company,
                    fill: (d) => d.company.includes("Amazon") ? "black" : "white",
                    fontSize: 14,
                    inset: 5
                })),
                Plot.text(adsData, Plot.stackX({
                    x: "val",
                    text: (d) => ["Google Network", "YouTube", "Amazon"].includes(d.company) ? d.company : "",
                    fill: (d) => d.company === "Amazon" ? "black" : "white",
                    fontSize: 12,
                    rotate: -90,
                    textAnchor: "middle"
                }))
            ]
        }));

        // Chart 24: Search vs GenAI Preference
        const searchPrefData = [
            // All
            { age: "All", pref: "Always GenAI", val: 0.05 },
            { age: "All", pref: "Mostly GenAI", val: 0.11 },
            { age: "All", pref: "Mixed", val: 0.28 },
            { age: "All", pref: "Mostly search", val: 0.26 },
            { age: "All", pref: "Always search", val: 0.30 },

            // Under 30
            { age: "Under 30", pref: "Always GenAI", val: 0.08 },
            { age: "Under 30", pref: "Mostly GenAI", val: 0.17 },
            { age: "Under 30", pref: "Mixed", val: 0.33 },
            { age: "Under 30", pref: "Mostly search", val: 0.24 },
            { age: "Under 30", pref: "Always search", val: 0.18 },

            // 30-45
            { age: "30-45", pref: "Always GenAI", val: 0.08 },
            { age: "30-45", pref: "Mostly GenAI", val: 0.16 },
            { age: "30-45", pref: "Mixed", val: 0.34 },
            { age: "30-45", pref: "Mostly search", val: 0.24 },
            { age: "30-45", pref: "Always search", val: 0.18 },

            // 45-60
            { age: "45-60", pref: "Always GenAI", val: 0.04 },
            { age: "45-60", pref: "Mostly GenAI", val: 0.10 },
            { age: "45-60", pref: "Mixed", val: 0.31 },
            { age: "45-60", pref: "Mostly search", val: 0.28 },
            { age: "45-60", pref: "Always search", val: 0.27 },

            // 60-80
            { age: "60-80", pref: "Always GenAI", val: 0.02 },
            { age: "60-80", pref: "Mostly GenAI", val: 0.05 },
            { age: "60-80", pref: "Mixed", val: 0.18 },
            { age: "60-80", pref: "Mostly search", val: 0.27 },
            { age: "60-80", pref: "Always search", val: 0.48 },

            // Older
            { age: "Older", pref: "Always GenAI", val: 0.00 },
            { age: "Older", pref: "Mostly GenAI", val: 0.00 },
            { age: "Older", pref: "Mixed", val: 0.14 },
            { age: "Older", pref: "Mostly search", val: 0.18 },
            { age: "Older", pref: "Always search", val: 0.68 },
        ];

        document.getElementById("chart-search-pref").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                domain: ["All", "Under 30", "30-45", "45-60", "60-80", "Older"]
            },
            y: {
                grid: true,
                label: null,
                nice: true,
                ticks: 4,
                tickSize: 0,
                tickFormat: (d) => `${d * 100}%`,
            },
            color: {
                legend: true,
                domain: ["Always GenAI", "Mostly GenAI", "Mixed", "Mostly search", "Always search"],
                range: [colorAccent, "#FAD2D2", "#999", "#555", "black"]
            },
            marks: [
                Plot.barY(searchPrefData, {
                    x: "age",
                    y: "val",
                    tip: true,
                    fill: "pref",
                    order: "pref", // Ensure consistent stacking order
                    title: (d) => `${d.pref}: ${(d.val * 100).toFixed(0)}%`
                })
            ]
        }));

        // Chart 25: Palantir Revenue Acceleration (Revised to Absolute)
        const palantirData = [{
            quarter: "Q1 23",
            segment: "Government",
            val: 289
        }, {
            quarter: "Q1 23",
            segment: "Commercial",
            val: 236
        },
        {
            quarter: "Q2 23",
            segment: "Government",
            val: 302
        }, {
            quarter: "Q2 23",
            segment: "Commercial",
            val: 232
        },
        {
            quarter: "Q3 23",
            segment: "Government",
            val: 308
        }, {
            quarter: "Q3 23",
            segment: "Commercial",
            val: 251
        },
        {
            quarter: "Q4 23",
            segment: "Government",
            val: 324
        }, {
            quarter: "Q4 23",
            segment: "Commercial",
            val: 284
        },
        {
            quarter: "Q1 24",
            segment: "Government",
            val: 335
        }, {
            quarter: "Q1 24",
            segment: "Commercial",
            val: 299
        },
        {
            quarter: "Q2 24",
            segment: "Government",
            val: 371
        }, {
            quarter: "Q2 24",
            segment: "Commercial",
            val: 307
        },
        {
            quarter: "Q3 24",
            segment: "Government",
            val: 408
        }, {
            quarter: "Q3 24",
            segment: "Commercial",
            val: 317
        },
        {
            quarter: "Q4 24",
            segment: "Government",
            val: 450
        }, {
            quarter: "Q4 24",
            segment: "Commercial",
            val: 350
        }, // Est
        {
            quarter: "Q1 25",
            segment: "Government",
            val: 500
        }, {
            quarter: "Q1 25",
            segment: "Commercial",
            val: 400
        }, // Est
        {
            quarter: "Q2 25",
            segment: "Government",
            val: 550
        }, {
            quarter: "Q2 25",
            segment: "Commercial",
            val: 450
        }, // Est
        {
            quarter: "Q3 25",
            segment: "Government",
            val: 620
        }, {
            quarter: "Q3 25",
            segment: "Commercial",
            val: 520
        } // Est rising to >1.1bn total
        ];

        document.getElementById("chart-palantir").append(Plot.plot({
            width: width,
            height: 350,
            marginRight: 0,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                domain: ["Q1 23", "Q2 23", "Q3 23", "Q4 23", "Q1 24", "Q2 24", "Q3 24", "Q4 24", "Q1 25", "Q2 25", "Q3 25"]
            },
            y: {
                grid: true,
                label: "Revenue ($m)",
                nice: true,
                ticks: 4,
                tickSize: 0,
            },
            color: {
                legend: true,
                domain: ["Government", "Commercial"],
                range: ["#333", colorAccent]
            },
            marks: [
                Plot.barY(palantirData, {
                    x: "quarter",
                    y: "val",
                    fill: "segment",
                    title: (d) => `${d.segment}: $${d.val}m`
                }),
                Plot.text(palantirData, Plot.stackY({
                    x: "quarter",
                    y: "val",
                    text: (d) => d.val > 300 ? `$${d.val}` : "",
                    fill: "white",
                    dy: 5
                }))
            ]
        }));

        // Chart 26: Robotaxi Trips
        const robotaxiData = [
            // Waymo Data
            {
                date: new Date("2023-09-01"),
                company: "Waymo",
                rides: 15000
            },
            {
                date: new Date("2023-10-01"),
                company: "Waymo",
                rides: 35000
            },
            {
                date: new Date("2023-11-01"),
                company: "Waymo",
                rides: 55000
            },
            {
                date: new Date("2023-12-01"),
                company: "Waymo",
                rides: 60000
            },
            {
                date: new Date("2024-01-01"),
                company: "Waymo",
                rides: 70000
            },
            {
                date: new Date("2024-02-01"),
                company: "Waymo",
                rides: 72000
            },
            {
                date: new Date("2024-03-01"),
                company: "Waymo",
                rides: 75000
            },
            {
                date: new Date("2024-04-01"),
                company: "Waymo",
                rides: 85000
            },
            {
                date: new Date("2024-05-01"),
                company: "Waymo",
                rides: 140000
            },
            {
                date: new Date("2024-06-01"),
                company: "Waymo",
                rides: 190000
            },
            {
                date: new Date("2024-07-01"),
                company: "Waymo",
                rides: 250000
            },
            {
                date: new Date("2024-08-01"),
                company: "Waymo",
                rides: 310000
            },
            {
                date: new Date("2024-09-01"),
                company: "Waymo",
                rides: 360000
            },
            {
                date: new Date("2024-10-01"),
                company: "Waymo",
                rides: 450000
            },
            {
                date: new Date("2024-11-01"),
                company: "Waymo",
                rides: 500000
            },
            {
                date: new Date("2024-12-01"),
                company: "Waymo",
                rides: 540000
            },
            {
                date: new Date("2025-01-01"),
                company: "Waymo",
                rides: 550000
            },
            {
                date: new Date("2025-02-01"),
                company: "Waymo",
                rides: 560000
            },
            {
                date: new Date("2025-03-01"),
                company: "Waymo",
                rides: 710000
            },
            {
                date: new Date("2025-04-01"),
                company: "Waymo",
                rides: 775000
            },
            {
                date: new Date("2025-05-01"),
                company: "Waymo",
                rides: 880000
            },
            {
                date: new Date("2025-06-01"),
                company: "Waymo",
                rides: 590000
            }, // The visual dip
            {
                date: new Date("2025-07-01"),
                company: "Waymo",
                rides: 780000
            },
            {
                date: new Date("2025-08-01"),
                company: "Waymo",
                rides: 885000
            },
            {
                date: new Date("2025-09-01"),
                company: "Waymo",
                rides: 1020000
            },

            // Cruise Data
            {
                date: new Date("2023-09-01"),
                company: "Cruise",
                rides: 10000
            },
            {
                date: new Date("2023-10-01"),
                company: "Cruise",
                rides: 10000
            },
            {
                date: new Date("2023-11-01"),
                company: "Cruise",
                rides: 5000
            },
            {
                date: new Date("2023-12-01"),
                company: "Cruise",
                rides: 0
            },
        ];

        document.getElementById("chart-robotaxi").append(Plot.plot({
            width: width,
            height: 400,
            style: {
                fontFamily: "system-ui, sans-serif",
                fontSize: size,
                overflow: "visible"
            },
            y: {
                grid: true,
                label: null,
                nice: true,
                ticks: 6,
                tickSize: 0,
                tickFormat: "s",
            },
            x: {
                label: null,
                domain: [new Date("2023-08-01"), new Date("2025-10-01")] // Add buffer to sides
            },
            // Maybe update to include Tesla in the future
            color: {
                legend: true,
                domain: ["Waymo", "Cruise"],
                range: ["#e15746", "#4a4a4a"]
            },
            marks: [
                // 1. The Line
                Plot.line(robotaxiData, {
                    x: "date",
                    y: "rides",
                    stroke: "company",
                    strokeWidth: 3,
                    curve: "monotone-x"
                }),
                Plot.dot(robotaxiData, {
                    x: "date",
                    y: "rides",
                    fill: "company",
                    r: 5,
                    stroke: "white",
                    strokeWidth: 1
                }),
                Plot.tip(robotaxiData, Plot.pointerX({
                    x: "date",
                    y: "rides",
                    title: (d) => `${d.company}: ${d.rides.toLocaleString()} trips`
                }))
            ]
        }));

        // Chart: Survey Meta-Analysis
        const surveyMetaData = [
            { survey: "Pew,\nAug 2024", freq: "Weekly active", val: 0.15 },
            { survey: "Pew,\nAug 2024", freq: "Daily active", val: 0.11 },
            { survey: "CCIA,\nNov 2024", freq: "Weekly active", val: 0.16 },
            { survey: "CCIA,\nNov 2024", freq: "Daily active", val: 0.13 },
            { survey: "Blick et al RPS,\nNov 2024", freq: "Weekly active", val: 0.29 },
            { survey: "Blick et al RPS,\nNov 2024", freq: "Daily active", val: 0.09 },
            { survey: "Bain,\nDec 2024", freq: "Weekly active", val: 0.19 },
            { survey: "Bain,\nDec 2024", freq: "Daily active", val: 0.12 },
            { survey: "Hartley et al,\nDec 2024", freq: "Weekly active", val: 0.20 },
            { survey: "Hartley et al,\nDec 2024", freq: "Daily active", val: 0.09 },
            { survey: "YouGov,\nMar 2025", freq: "Weekly active", val: 0.16 },
            { survey: "YouGov,\nMar 2025", freq: "Daily active", val: 0.12 },
            { survey: "Hartley et al,\nJun 2025", freq: "Weekly active", val: 0.30 },
            { survey: "Hartley et al,\nJun 2025", freq: "Daily active", val: 0.15 },
            { survey: "Reuters Inst.,\nJun 2025", freq: "Weekly active", val: 0.36 },
            { survey: "Reuters Inst.,\nJun 2025", freq: "Daily active", val: 0.0 },
            { survey: "Deloitte,\nJun 2025", freq: "Weekly active", val: 0.08 },
            { survey: "Deloitte,\nJun 2025", freq: "Daily active", val: 0.10 },
            { survey: "Bain,\nSep 2025", freq: "Weekly active", val: 0.26 },
            { survey: "Bain,\nSep 2025", freq: "Daily active", val: 0.18 }
        ];

        document.getElementById("chart-survey-meta").append(Plot.plot({
            width: width,
            height: 440,
            marginBottom: 40,
            marginRight: 0,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                domain: ["Pew,\nAug 2024", "CCIA,\nNov 2024", "Blick et al RPS,\nNov 2024", "Bain,\nDec 2024", "Hartley et al,\nDec 2024", "YouGov,\nMar 2025", "Hartley et al,\nJun 2025", "Reuters Inst.,\nJun 2025", "Deloitte,\nJun 2025", "Bain,\nSep 2025"],
                padding: 0.1,
            },
            y: {
                grid: true,
                label: null,
                tickFormat: "%",
                nice: true,
                tickSize: 0,
                ticks: 4,
            },
            color: {
                legend: true,
                domain: ["Weekly active", "Daily active"],
                range: ["#555555", "#e15746"]
            },
            marks: [
                Plot.barY(surveyMetaData, {
                    x: "survey",
                    y: "val",
                    tip: true,
                    title: (d) => `${d.survey}\n${d.freq}: ${(d.val * 100).toFixed(0)}%`,
                    fill: "freq",
                    order: "freq", // stacks order
                    reverse: true   // Puts Daily (red) on bottom
                }),
                Plot.ruleY([0])
            ]
        }));

        // Chart: Microsoft Capex Intensity
        const msftCapexData = [
            { date: new Date("1995-03-31"), val: 0.06 }, { date: new Date("1995-06-30"), val: 0.14 }, { date: new Date("1995-09-30"), val: 0.05 }, { date: new Date("1995-12-31"), val: 0.07 },
            { date: new Date("1996-03-31"), val: 0.04 }, { date: new Date("1996-06-30"), val: 0.06 }, { date: new Date("1996-09-30"), val: 0.07 }, { date: new Date("1996-12-31"), val: 0.04 },
            { date: new Date("1997-03-31"), val: 0.04 }, { date: new Date("1997-06-30"), val: 0.03 }, { date: new Date("1997-09-30"), val: 0.05 }, { date: new Date("1997-12-31"), val: 0.04 },
            { date: new Date("1998-03-31"), val: 0.04 }, { date: new Date("1998-06-30"), val: 0.06 }, { date: new Date("1998-09-30"), val: 0.02 }, { date: new Date("1998-12-31"), val: 0.02 },
            { date: new Date("1999-03-31"), val: 0.01 }, { date: new Date("1999-06-30"), val: 0.05 }, { date: new Date("1999-09-30"), val: 0.02 }, { date: new Date("1999-12-31"), val: 0.04 },
            { date: new Date("2000-03-31"), val: 0.04 }, { date: new Date("2000-06-30"), val: 0.04 }, { date: new Date("2000-09-30"), val: 0.04 }, { date: new Date("2000-12-31"), val: 0.04 },
            { date: new Date("2001-03-31"), val: 0.05 }, { date: new Date("2001-06-30"), val: 0.02 }, { date: new Date("2001-09-30"), val: 0.02 }, { date: new Date("2001-12-31"), val: 0.02 },
            { date: new Date("2002-03-31"), val: 0.04 }, { date: new Date("2002-06-30"), val: 0.02 }, { date: new Date("2002-09-30"), val: 0.03 }, { date: new Date("2002-12-31"), val: 0.02 },
            { date: new Date("2003-03-31"), val: 0.01 }, { date: new Date("2003-06-30"), val: 0.02 }, { date: new Date("2003-09-30"), val: 0.06 }, { date: new Date("2003-12-31"), val: 0.01 },
            { date: new Date("2004-03-31"), val: 0.01 }, { date: new Date("2004-06-30"), val: 0.02 }, { date: new Date("2004-09-30"), val: 0.02 }, { date: new Date("2004-12-31"), val: 0.03 },
            { date: new Date("2005-03-31"), val: 0.03 }, { date: new Date("2005-06-30"), val: 0.06 }, { date: new Date("2005-09-30"), val: 0.04 }, { date: new Date("2005-12-31"), val: 0.04 },
            { date: new Date("2006-03-31"), val: 0.06 }, { date: new Date("2006-06-30"), val: 0.03 }, { date: new Date("2006-09-30"), val: 0.04 }, { date: new Date("2006-12-31"), val: 0.05 },
            { date: new Date("2007-03-31"), val: 0.08 }, { date: new Date("2007-06-30"), val: 0.05 }, { date: new Date("2007-09-30"), val: 0.05 }, { date: new Date("2007-12-31"), val: 0.04 },
            { date: new Date("2008-03-31"), val: 0.06 }, { date: new Date("2008-06-30"), val: 0.03 }, { date: new Date("2008-09-30"), val: 0.02 }, { date: new Date("2008-12-31"), val: 0.05 },
            { date: new Date("2009-03-31"), val: 0.03 }, { date: new Date("2009-06-30"), val: 0.02 }, { date: new Date("2009-09-30"), val: 0.04 }, { date: new Date("2009-12-31"), val: 0.04 },
            { date: new Date("2010-03-31"), val: 0.02 }, { date: new Date("2010-06-30"), val: 0.03 }, { date: new Date("2010-09-30"), val: 0.04 }, { date: new Date("2010-12-31"), val: 0.03 },
            { date: new Date("2011-03-31"), val: 0.04 }, { date: new Date("2011-06-30"), val: 0.05 }, { date: new Date("2011-09-30"), val: 0.07 }, { date: new Date("2011-12-31"), val: 0.06 },
            { date: new Date("2012-03-31"), val: 0.09 }, { date: new Date("2012-06-30"), val: 0.06 }, { date: new Date("2012-09-30"), val: 0.06 }, { date: new Date("2012-12-31"), val: 0.05 },
            { date: new Date("2013-03-31"), val: 0.05 }, { date: new Date("2013-06-30"), val: 0.06 }, { date: new Date("2013-09-30"), val: 0.07 }, { date: new Date("2013-12-31"), val: 0.08 },
            { date: new Date("2014-03-31"), val: 0.07 }, { date: new Date("2014-06-30"), val: 0.11 }, { date: new Date("2014-09-30"), val: 0.15 }, { date: new Date("2014-12-31"), val: 0.10 },
            { date: new Date("2015-03-31"), val: 0.10 }, { date: new Date("2015-06-30"), val: 0.09 }, { date: new Date("2015-09-30"), val: 0.13 }, { date: new Date("2015-12-31"), val: 0.11 },
            { date: new Date("2016-03-31"), val: 0.11 }, { date: new Date("2016-06-30"), val: 0.13 }, { date: new Date("2016-09-30"), val: 0.14 }, { date: new Date("2016-12-31"), val: 0.11 },
            { date: new Date("2017-03-31"), val: 0.12 }, { date: new Date("2017-06-30"), val: 0.15 }, { date: new Date("2017-09-30"), val: 0.12 }, { date: new Date("2017-12-31"), val: 0.14 },
            { date: new Date("2018-03-31"), val: 0.15 }, { date: new Date("2018-06-30"), val: 0.16 }, { date: new Date("2018-09-30"), val: 0.13 }, { date: new Date("2018-12-31"), val: 0.12 },
            { date: new Date("2019-03-31"), val: 0.17 }, { date: new Date("2019-06-30"), val: 0.13 }, { date: new Date("2019-09-30"), val: 0.13 }, { date: new Date("2019-12-31"), val: 0.15 },
            { date: new Date("2020-03-31"), val: 0.19 }, { date: new Date("2020-06-30"), val: 0.20 }, { date: new Date("2020-09-30"), val: 0.18 }, { date: new Date("2020-12-31"), val: 0.22 },
            { date: new Date("2021-03-31"), val: 0.29 }, { date: new Date("2021-06-30"), val: 0.30 }, { date: new Date("2021-09-30"), val: 0.31 }, { date: new Date("2021-12-31"), val: 0.31 },
            { date: new Date("2022-03-31"), val: 0.32 }, { date: new Date("2022-06-30"), val: 0.33 }, { date: new Date("2022-09-30"), val: 0.14 }, { date: new Date("2022-12-31"), val: 0.16 },
            { date: new Date("2023-03-31"), val: 0.19 }, { date: new Date("2023-06-30"), val: 0.18 }, { date: new Date("2023-09-30"), val: 0.22 }, { date: new Date("2023-12-31"), val: 0.29 },
            { date: new Date("2024-03-31"), val: 0.30 }, { date: new Date("2024-06-30"), val: 0.31 }, { date: new Date("2024-09-30"), val: 0.32 }, { date: new Date("2024-12-31"), val: 0.33 },
            { date: new Date("2025-03-31"), val: 0.45 }
        ];

        document.getElementById("chart-microsoft-capex").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                tickFormat: (d) => d.toLocaleString('default', { month: 'short', year: 'numeric' }), // e.g., 'Mar 1995'
                ticks: "5 years" // Only show a tick every 5 years to match the image
            },
            y: {
                grid: true,
                label: null,
                percent: true,
                tickSize: 0,
                nice: true,
                tickFormat: (d) => d + "%",
                ticks: 6
            },
            marks: [
                Plot.rectY(msftCapexData, {
                    x: "date",
                    y: "val",
                    fill: "#e15746", // Using the red color from the image
                    interval: "3 months",
                    tip: true
                }),
                Plot.text(["Microsoft‚Äôs capex is now 25% of its revenue, more than three times what it was 10 years ago, according to Bloomberg data. "], {
                    frameAnchor: "top-left",
                    dx: 40,
                    dy: 20,
                    fontFamily: fontFamily,
                    fontSize: 14,
                    lineHeight: 1.2,
                    lineWidth: 25,
                    stroke: "white", // Halo effect
                    strokeWidth: 10,
                    fill: "currentColor",
                    style: {
                        paintOrder: "stroke"
                    }
                }),
                Plot.ruleY([0])
            ]
        }));

        // Chart: Cursor Growth (New)
        const cursorData = [{
            date: new Date("2023-01-01"),
            val: 0.1
        },
        {
            date: new Date("2023-06-01"),
            val: 0.5
        },
        {
            date: new Date("2024-01-01"),
            val: 2.0
        },
        {
            date: new Date("2024-06-01"),
            val: 8.0
        },
        {
            date: new Date("2024-10-01"),
            val: 15.0
        },
        {
            date: new Date("2025-01-01"),
            val: 30.0
        },
        {
            date: new Date("2025-06-01"),
            val: 60.0
        },
        {
            date: new Date("2025-11-01"),
            val: 100.0
        }
        ];

        document.getElementById("chart-cursor").append(Plot.plot({
            width: width,
            height: 300,
            marginLeft: 0,
            style: {
                fontFamily: fontFamily,
                fontSize: size,
            },
            x: {
                label: null
            },
            y: {
                grid: true,
                label: null,
                nice: true,
                ticks: 4,
                tickSize: 0,
            },
            marks: [
                Plot.axisY({
                    tickFormat: (d) => d === 0 ? "0" : (d >= 1000 ? `${d}B` : `$${d}M`),
                    tickSize: 0, // don‚Äôt draw ticks
                    ticks: 4,
                    dx: 2, // offset right
                    dy: -4, // offset up
                    lineAnchor: "bottom", // draw labels above grid lines
                    textAnchor: "start",
                }),
                Plot.line(cursorData, {
                    x: "date",
                    y: "val",
                    strokeWidth: 3.75,
                    stroke: "#593380",
                    curve: "catmull-rom",
                }),
                Plot.areaY(cursorData, {
                    x: "date",
                    y: "val",
                    fill: "url(#gradient)",
                    curve: "catmull-rom",
                    fillOpacity: 0.1,
                }),
                Plot.tip(cursorData, Plot.pointerX({
                    x: "date",
                    y: "val"
                })),
                Plot.image([0], {
                    x: new Date("2024-06-01"),
                    src: "https://cdn.prod.website-files.com/66d7fce027e564db2ca93b06/6743094de405ccdd2bd06625_Cusor-Logo.svg",
                    width: 200,
                    title: "Cursor logo",
                }),
            ]
        }));

        // Pilots chart data and rendering
        const pilotsData = [
            { function: "IT", status: "Experiment", value: 7 },
            { function: "IT", status: "Pilot", value: 6 },
            { function: "IT", status: "Deploying", value: 8 },
            { function: "IT", status: "Deployed", value: 2 },
            { function: "Knowledge management", status: "Experiment", value: 12 },
            { function: "Knowledge management", status: "Pilot", value: 6 },
            { function: "Knowledge management", status: "Deploying", value: 7 },
            { function: "Knowledge management", status: "Deployed", value: 1 },
            { function: "Marketing", status: "Experiment", value: 11 },
            { function: "Marketing", status: "Pilot", value: 6 },
            { function: "Marketing", status: "Deploying", value: 6 },
            { function: "Marketing", status: "Deployed", value: 1 },
            { function: "Service", status: "Experiment", value: 8 },
            { function: "Service", status: "Pilot", value: 7 },
            { function: "Service", status: "Deploying", value: 6 },
            { function: "Service", status: "Deployed", value: 1 },
            { function: "Product", status: "Experiment", value: 9 },
            { function: "Product", status: "Pilot", value: 6 },
            { function: "Product", status: "Deploying", value: 5 },
            { function: "Product", status: "Deployed", value: 1 },
            { function: "Software development", status: "Experiment", value: 6 },
            { function: "Software development", status: "Pilot", value: 5 },
            { function: "Software development", status: "Deploying", value: 5 },
            { function: "Software development", status: "Deployed", value: 1 },
            { function: "HR", status: "Experiment", value: 5 },
            { function: "HR", status: "Pilot", value: 3 },
            { function: "HR", status: "Deploying", value: 3 },
            { function: "HR", status: "Deployed", value: 0.5 },
            { function: "Supply chain", status: "Experiment", value: 4 },
            { function: "Supply chain", status: "Pilot", value: 3 },
            { function: "Supply chain", status: "Deploying", value: 2 },
            { function: "Supply chain", status: "Deployed", value: 0.5 },
            { function: "Manufacturing", status: "Experiment", value: 3 },
            { function: "Manufacturing", status: "Pilot", value: 1 },
            { function: "Manufacturing", status: "Deploying", value: 1 },
            { function: "Manufacturing", status: "Deployed", value: 0.5 }
        ];

        document.getElementById("pilots").append(Plot.plot({
            width: width,
            marginBottom: 40,
            style: {
                fontFamily: "Lato, sans-serif",
                fontSize: "12px",
            },
            x: {
                label: null,
                tickFormat: d => d.replace(" ", "\n"),
            },
            y: {
                grid: true,
                label: null,
                percent: true,
                ticks: 4,
                tickSize: 0,
                tickFormat: d => d + "%"
            },
            color: {
                domain: ["Experiment", "Pilot", "Deploying", "Deployed"],
                range: ["#bdbdbd", "#5c5c5c", "#fddbc7", "#e41a1c"],
                legend: true
            },
            marks: [
                Plot.barY(pilotsData, {
                    x: "function",
                    y: (d) => d.value / 100,
                    fill: "status",
                    sort: { x: "y", reverse: true, reduce: "sum" },
                    tip: true
                })
            ]
        }));
    </script>
</body>

</html>