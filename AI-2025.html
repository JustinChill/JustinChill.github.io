<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <title>AI Eats the World (2025) | Justin Chill</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description"
        content="Every 10‚Äì15 years, a platform shift reshapes technology. We are currently living through the deployment phase of Generative AI.">
    <meta name="author" content="Justin Chill">

    <meta name="robots" content="all">
    <meta content="en_US" property="og:locale">
    <meta content="JustinChill" property="og:site_name">
    <meta content="article" property="og:type">
    <meta content="https://justinchill.com/ai-2025.html" property="og:url">
    <meta content="AI Eats the World (2025) | Justin Chill" property="og:title">
    <meta
        content="Every 10‚Äì15 years, a platform shift reshapes technology. We are currently living through the deployment phase of Generative AI."
        property="og:description">
    <meta content="https://www.justinchill.com/blog.html" property="og:see_also">
    <link rel="canonical" href="https://www.justinchill.com/ai-2025.html">

    <meta content="https://www.justinchill.com/imgs/cover/ai2025_cover.webp" property="og:image">
    <meta content="https://www.justinchill.com/imgs/cover/ai2025_cover.webp" property="twitter:image">
    <meta content="A chart showing overlapping S-curves of technology adoption." property="og:image:alt">

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="AI Eats the World (2025) | Justin Chill">
    <meta name="twitter:description"
        content="Every 10‚Äì15 years, a platform shift reshapes technology. We are currently living through the deployment phase of Generative AI.">

    <link type="text/plain" href="humans.txt" rel="author">
    <link rel="preload" href="style.css" as="style" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="/favicon.ico">
    <meta name="theme-color" content="#4C63B6">

    <script type="module">
        document.documentElement.classList.remove('no-js');
        document.documentElement.classList.add('js');
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&display=swap"
        rel="stylesheet">

    <style>
        /* Kept specific styles for the AI article diagrams */
        :root {
            --bg-color: #ffffff;
            --text-color: #222222;
            --accent-color: #D93025;
            --accent-secondary: #4285F4;
            --gray-light: #f8f9fa;
            --gray-medium: #767676;
            --font-serif: "Merriweather", Georgia, serif;
            --font-sans: "Lato", Helvetica, Arial, sans-serif;
            --max-width: 680px;
        }

        /* Diagram Container */
        .diagram-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            gap: 1rem;
            margin: 2rem 0;
        }

        .circle {
            background-color: white;
            border-radius: 50%;
            width: 260px;
            height: 260px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1.5rem;
            box-sizing: border-box;
            border: 2px solid #555;
            flex-shrink: 0;
        }

        .circle.highlight {
            border-color: #ea4335;
        }

        .circle h2 {
            font-size: 1.25rem;
            margin: 0 0 0.5rem 0;
            color: #333;
        }

        .circle p {
            font-size: 0.95rem;
            line-height: 1.4;
            margin: 0;
            color: #444;
        }

        .arrow {
            width: 0;
            height: 0;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
            border-left: 18px solid #999;
            margin: 0 10px;
            flex-shrink: 0;
        }

        @media (max-width: 850px) {
            .diagram-container {
                flex-direction: column;
            }

            .arrow {
                transform: rotate(90deg);
                margin: 20px 0;
            }
        }

        .circle.dark {
            background-color: #555;
            color: white;
            border: none;
        }

        .circle.dark h2,
        .circle.dark p {
            color: white;
        }

        .circle.red-filled {
            background-color: #D93025;
            color: white;
            border: none;
        }

        .circle.red-filled h2,
        .circle.red-filled p {
            color: white;
        }
    </style>
</head>

<body>
    <nav class="nav" role="navigation">
        <div class="nav__list">
            <a href="index.html" class="nav__item" aria-label="Homepage">Home</a>
            <a href="blog.html" class="nav__item" aria-label="Blog section">Blog</a>
            <a href="now.html" class="nav__item" aria-label="Now page">Now</a>
        </div>
        <div class="nav__list">
            <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
            <a href="#" class="nav__item js-email-link">Email</a>
        </div>
    </nav>

    <main role="main">
        <article>
            <div class="article-hero">
                <h2 class="article-category">Presentation</h2>
                <h1 class="article-title">AI Eats The World</h1>
                <h2 class="article-subtitle">Analysis of Benedict Evans' Thesis</h2>
            </div>
            <h3>Platform Shifts</h3>
            <figure id="chart-platform-shifts"
                aria-label="A line chart showing overlapping S-curves of technology adoption.">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 450">
                    <defs>
                        <marker id="arrowGray" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto"
                            markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#757575" />
                        </marker>
                        <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto"
                            markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#D93025" />
                        </marker>
                    </defs>

                    <style>
                        svg {
                            overflow: visible;
                        }

                        .label {
                            font-family: var(--font-ui), var(--font-main), "Georgia", "Times New Roman", serif;
                            font-size: 28px;
                            text-anchor: middle;
                            fill: #555555;
                        }

                        .divider {
                            stroke: #E0E0E0;
                            stroke-width: 4;
                        }

                        .curve-gray {
                            fill: none;
                            stroke: #757575;
                            stroke-width: 4;
                            marker-end: url(#arrowGray);
                        }

                        .curve-red {
                            fill: none;
                            stroke: #D93025;
                            stroke-width: 4;
                            stroke-dasharray: 8, 8;
                            marker-end: url(#arrowRed);
                        }

                        .label-red {
                            fill: #D93025;
                        }
                    </style>

                    <rect width="100%" height="100%" fill="white" />

                    <line x1="200" y1="0" x2="200" y2="450" class="divider" />
                    <line x1="400" y1="0" x2="400" y2="450" class="divider" />
                    <line x1="600" y1="0" x2="600" y2="450" class="divider" />
                    <line x1="800" y1="0" x2="800" y2="450" class="divider" />

                    <path d="M 10,325 C 100,325 110,250 185,240" class="curve-gray" />

                    <path d="M 210,285 C 300,285 310,210 385,200" class="curve-gray" />

                    <path d="M 410,245 C 500,245 510,170 585,160" class="curve-gray" />

                    <path d="M 610,205 C 700,205 710,130 785,120" class="curve-gray" />

                    <path d="M 810,165 C 900,165 910,90 985,80" class="curve-red" />

                    <text x="100" y="390" class="label">Mainframes</text>
                    <text x="300" y="390" class="label">PCs</text>
                    <text x="500" y="390" class="label">Web</text>
                    <text x="700" y="390" class="label">Mobile</text>
                    <text x="900" y="390" class="label label-red">Generative AI</text>

                </svg>
            </figure>
            <p>Every 10‚Äì15 years, a platform shift reshapes technology. We are currently living through the deployment
                phase of Generative AI, marked by massive capital expenditure, uncertainty, and the search for value.
            </p>
            <p>I'm riffing on former a16z Partner Benedict Evans' 2025 update, <a
                    href="https://static1.squarespace.com/static/50363cf324ac8e905e7df861/t/69267317ffc0332dfc580e20/1764127511109/2025+Autumn+AI.pdf">AI
                    eats the world</a>.

            <h2>The Next Platform Shift</h2>
            <p>We have seen this pattern before. Mainframes, PCs, the Web, and Smartphones each represented a sigmoid
                curve of adoption. Now, Generative AI attempts to start a new curve. However, unlike previous shifts
                where we knew the physical limits (screen size, bandwidth), we do not yet know the ceiling of LLM
                capability.</p>

            <h3>What happens in a platform shift?</h3>
            <p>Who is affected, and how much?</p>

            <div class="diagram-container mid-size">
                <section class="circle">
                    <h2>The New Thing!</h2>
                    <p>All tech innovation, investment and company creation switches over</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Inside tech</h2>
                    <p>New gatekeepers,<br>new value capture</p>
                    <p style="margin-top: 0.5rem;">New and bigger markets</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>Outside tech</h2>
                    <p>Is this a new tool, new revenue, or an existential threat?</p>
                </section>
            </div>

            <p>Dominance in one era does not guarantee survival in the next. Microsoft dominated the PC era with a 90%+
                share of computing, but when the center of gravity shifted to smartphones, its share of total computing
                devices collapsed.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Microsoft OS share of global computer unit sales</h3>
            <figure id="chart-microsoft-share" aria-label="Chart showing Microsoft OS share decline">
                <figcaption class="right">Data: <a href='https://gs.statcounter.com' target='_blank'>StatCounter</a>,
                    Wikipedia.</figcaption>
            </figure>

            <p>Furthermore, early leaders often disappear. The "first" to market was not the winner in PCs, browsers,
                search, social, or smartphones. We should expect similar turbulence in the AI model layer.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Global PC unit sales share</h3>
            <figure id="chart-pc-share" aria-label="Chart showing PC market share evolution">
                <figcaption class="right">Data: <a href="https://www.gartner.com" target="_blank">Gartner</a>
                </figcaption>
            </figure>

            <h3>How will the new thing work? We don't know</h3>
            <p>For every new platform, we forget how many ideas failed and how unclear everything was.</p>

            <div class="diagram-container mid-size">
                <section class="circle">
                    <h2>Internet</h2>
                    <p>AOL, Yahoo,<br>Pointcast, Flash,<br>plugins, portals...<br>Sun? Netscape?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Mobile internet</h2>
                    <p>i-mode, J2ME, WAP,<br>mesh, DVB-H,<br>keyboards...<br>Nokia? RIM?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>Generative AI?</h2>
                    <p>Browsers? Agentic?<br>Voice? MCP?<br>Wearables? GEO?</p>
                </section>
            </div>

            <p>Similar to how the internet eventually became the default medium for meeting partners, AI adoption may
                follow a slow-then-explosive trajectory.</p>
            <p>When things are exciting, people get excited. This often leads to bubbles.</p>
            <h3>But when the dust settles, the world has changed</h3>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>US heterosexual couples who met online, by year of meeting</h3>
            <figure id="chart-online-dating" aria-label="Line chart showing the rise of couples meeting online">
                <figcaption class="right">Data: <a href="https://data.stanford.edu/hcmst2017" target="_blank">Rosenfeld
                        (HCMST)</a></figcaption>
            </figure>
            <p>The internet has gone from the New Thing to a basic part of daily life.</p>

            <h3>New platforms mean new tools (and new revenue)</h3>
            <p>SaaS means the typical large enterprise in the USA now uses 4-500 apps</p>

            <div class="diagram-container mid-size">
                <section class="circle dark" style="width: 160px; height: 160px; padding: 1rem;">
                    <h2>Mainframes</h2>
                    <p>One app</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle dark" style="width: 160px; height: 160px; padding: 1rem;">
                    <h2>PCs</h2>
                    <p>Dozens of apps</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle dark" style="width: 160px; height: 160px; padding: 1rem;">
                    <h2>SaaS</h2>
                    <p>4-500 apps*</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle red-filled" style="width: 160px; height: 160px; padding: 1rem;">
                    <h2>LLMs</h2>
                    <p>What can we automate next?</p>
                </section>
            </div>
            <h3>One way this platform shift is different, though</h3>
            <p>For PCs, the web or smartphones, we knew the
                physical limits of what could happen next year</p>
            <p>With LLMs, we don‚Äôt know how much better this could get ü§Ø</p>
            <blockquote>
                <p>‚ÄúThe race to AGI is afoot‚Äù</p>
                <cite>&mdash; Sergey Brin</cite>
            </blockquote>

            <h2>Another platform shift, or more?</h2>
            <p>We know this will get better, but we don‚Äôt know how much</p>
            <figure id="chart-unexpected"
                aria-label="A line chart showing overlapping S-curves of technology adoption.">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 450">
                    <defs>
                        <marker id="arrowGray" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto"
                            markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#757575" />
                        </marker>
                        <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto"
                            markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#D93025" />
                        </marker>
                    </defs>

                    <style>
                        svg {
                            overflow: visible;
                        }

                        .label {
                            font-family: var(--font-ui), var(--font-main), "Georgia", "Times New Roman", serif;
                            font-size: 28px;
                            text-anchor: middle;
                            fill: #555555;
                        }

                        .divider {
                            stroke: #E0E0E0;
                            stroke-width: 4;
                        }

                        .curve-gray {
                            fill: none;
                            stroke: #757575;
                            stroke-width: 4;
                            marker-end: url(#arrowGray);
                        }

                        .curve-red {
                            fill: none;
                            stroke: #D93025;
                            stroke-width: 4;
                            stroke-dasharray: 8, 8;
                            marker-end: url(#arrowRed);
                        }

                        .label-red {
                            fill: #D93025;
                        }
                    </style>

                    <rect width="100%" height="100%" fill="white" />

                    <line x1="200" y1="0" x2="200" y2="450" class="divider" />
                    <line x1="400" y1="0" x2="400" y2="450" class="divider" />
                    <line x1="600" y1="0" x2="600" y2="450" class="divider" />
                    <line x1="800" y1="0" x2="800" y2="450" class="divider" />

                    <path d="M 10,325 C 100,325 110,250 185,240" class="curve-gray" />

                    <path d="M 210,285 C 300,285 310,210 385,200" class="curve-gray" />

                    <path d="M 410,245 C 500,245 510,170 585,160" class="curve-gray" />

                    <path d="M 610,205 C 700,205 710,130 785,120" class="curve-gray" />

                    <path d="M 810,165 L 850,20" class="curve-red" />
                    <path d="M 810,165 Q 880,165 920,120" class="curve-red" />
                    <text x="860" y="140" class="label label-red" style="font-size: 32px;">?</text>

                    <text x="100" y="390" class="label">Mainframes</text>
                    <text x="300" y="390" class="label">PCs</text>
                    <text x="500" y="390" class="label">Web</text>
                    <text x="700" y="390" class="label">Mobile</text>
                    <text x="900" y="390" class="label label-red">Generative AI</text>

                </svg>
            </figure>

            <h3>So how will the new thing turn out?</h3>
            <p>If this is ‚Äòonly‚Äô as big as mobile or the internet, that seems like enough</p>

            <div class="diagram-container mid-size" style="justify-content: space-around;">
                <section class="circle red-filled" style="width: 200px; height: 200px;">
                    <h2>How will this work?</h2>
                </section>

                <section class="circle red-filled" style="width: 200px; height: 200px;">
                    <h2>How will this be useful?</h2>
                </section>

                <section class="circle red-filled" style="width: 200px; height: 200px;">
                    <p style="font-size: 1.1rem; font-weight: bold;">Where is the distribution, value capture, and value
                        destruction?</p>
                </section>
            </div>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h2>2. The Capex Boom</h2>
            <p>The race for AGI has triggered an investment cycle without precedent. The "Big 4" (Microsoft, Meta,
                Alphabet, Amazon) are projected to spend over <strong>$330 billion</strong> in 2025 alone on AI
                infrastructure. This level of spending is driven by FOMO and the existential threat of missing the next
                platform.</p>

            <blockquote>
                <p>"The risk of under-investing is significantly greater than the risk of over-investing."</p>
                <cite>&mdash; Sundar Pichai, Q2 2024</cite>
            </blockquote>
            <h3>FOMO drives a capex surge</h3>
            <p>~$400bn in 2025 for the big four alone (for comparison, global telecoms is ~$300bn).</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Big Tech Capex ($bn)</h3>
            <figure id="chart-capex-surge" aria-label="Bar chart showing Capital Expenditure by Big Tech">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <blockquote>
                <p>"The very worst case would be that we have just pre-built for a couple of years."</p>
                <cite>&mdash; Mark Zuckerberg, Q3 2025</cite>
            </blockquote>
            <p>This spending is reshaping the physical world. In the US, construction spending on data centers is
                rapidly approaching spending on office buildings.</p>
            <h2>A new investment cycle</h2>
            <p>US data centre construction is overtaking office construction.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>US construction value (2025 $bn, seasonally adjusted annual rate)</h3>
            <figure id="chart-construction" aria-label="Line chart showing US Construction Spending">
                <figcaption class="right">Data: <a href='https://www.census.gov/construction/c30/c30index.html'
                        target='_blank'>US Census Bureau</a></figcaption>
            </figure>

            <h3>Nvidia can‚Äôt keep up</h3>
            <p>While Nvidia is leading the AI chip market, it can‚Äôt keep up with the demand. They're trying to build a
                new Sun Microsystems (though China and the hyperscalers‚Äô own chips are coming up close behind).</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Nvidia vs Intel</h3>
            <figure id="chart-nvidia" aria-label="Line chart comparing Nvidia vs Intel revenue">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <p>This demand flows to one bottleneck: Nvidia. While Intel struggles to maintain relevance, Nvidia's
                revenue has exploded, decoupling entirely from traditional semiconductor cycles.</p>
            <h3>TSMC can't keep up either</h3>
            <p>TSMC is unwilling (or unable) to expand capacity fast enough to meet Nvidia‚Äôs book of business.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Quarterly revenue ($bn)</h3>
            <figure id="chart-tsmc" aria-label="Line chart showing Revenue of Nvidia, Intel and TSMC">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <h3>The Constraints</h3>
            <p>We are seeing wild estimates for future capacity. Some forecasts suggest we will need to triple global
                data center capacity by 2030, costing trillions of dollars. However, real-world constraints like power,
                chips, and permits are becoming major bottlenecks.</p>

            <div class="diagram-container mid-size">
                <section class="circle">
                    <h2>Power</h2>
                    <p>Utility power availability is now the primary bottleneck</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Chips</h2>
                    <p>Demand flows to one bottleneck: Nvidia</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>Permits</h2>
                    <p>Real-world constraints are becoming major bottlenecks</p>
                </section>
            </div>
            <p>Utility power availability is now the primary bottleneck in the US, where power demand growth has
                historically been flat (around 2%) but is now spiking due to AI.</p>
            <h3>US power backlogs becoming a major issue</h3>
            <p>US power demand growth is ~2%, and AI might add 1% that‚Äôs hard to build fast (this is not an issue in
                China)</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Main constraints to data centre construction, USA (February 2025)</h3>
            <figure id="chart-constraints" aria-label="Bar chart showing constraints to data center construction">
                <figcaption class="right">Data: <a href="https://www.se.com" target="_blank">Schneider Electric</a>
                </figcaption>
            </figure>
            <blockquote>
                <p>"It‚Äôs been almost impossible to build capacity fast enough since ChatGPT launched"</p>
                <cite>&mdash; Kevin Scott, Microsoft CTO </cite>
            </blockquote>
            <h2>Data centre capacity triples?</h2>
            <p>Some very large numbers (although some of the ‚Äòbragawatts‚Äô may be more performative than real).</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Global data centre capacity estimates, H1 2025 (<small>GW</small>)</h3>
            <figure id="chart-datacenter-capacity" aria-label="Bar chart showing Global Data Center Capacity estimates">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Omdia, BNEF,
                        Goldman, MS, McKinsey</a></figcaption>
            </figure>

            <h3>‚ÄúThree trillion dollars!‚Äù</h3>
            <p>Annualised AI capex aspirations are a similar magnitude to mature global capital-intensive industries</p>

            <div class="diagram-container mid-size" style="justify-content: space-around;">
                <section class="circle dark" style="width: 200px; height: 200px; background-color: #555;">
                    <p>Global telecoms<br>~$300bn</p>
                </section>

                <section class="circle dark" style="width: 200px; height: 200px; background-color: #555;">
                    <p>Oil & gas ‚Äòupstream‚Äô<br>~$540bn</p>
                </section>

                <section class="circle dark" style="width: 200px; height: 200px; background-color: #555;">
                    <p>US private sector<br>~$4.1tr</p>
                </section>

                <section class="circle red-filled" style="width: 200px; height: 200px;">
                    <p>GenAI<br>$500-750bn annual?</p>
                </section>
            </div>

            <h3>The hyperscalers can afford it‚Ä¶</h3>
            <p>The hyperscalers have massive cash flows, which generally cover their capital expenditures.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Annual Capex and Free Cash Flow, 2010 to 2025 ($bn)</h3>
            <figure id="chart-cash-flow" aria-label="Bar chart showing Hyperscaler Cash Flow vs Capex">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <h3>‚Ä¶ up to a point</h3>
            <p>However, when we include leases, the total burden is much higher, especially for Amazon and Microsoft.
                Capital leases are not new, but they‚Äôve grown much larger.
            </p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Annual Capex and Free Cash Flow, 2010 to 2025e ($bn)</h3>
            <figure id="chart-leases" aria-label="Stacked bar chart showing Hyperscaler Leases">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <p>Hyperscalers add leases and debt, while some analysts suggest Oracle‚Äôs cloud capex might be >100% of
                revenue.</p>
            <h3>Circular Revenue</h3>
            <p>Without its own cashflows, OpenAI partners with Nvidia, Oracle, Softbank, and <a
                    href="https://www.reuters.com/sustainability/land-use-biodiversity/altman-touts-trillion-dollar-ai-vision-openai-restructures-chase-scale-2025-10-29/">petrodollars</a>.
            </p>
            <p>OpenAI is buying Nvidia chips with Nvidia‚Äôs cashflow‚Ä¶</p>
            <figure id="chart-circular-revenue" aria-label="Stacked bar chart showing Hyperscaler Leases">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>
            <p>Which comes from the hyperscalers‚Ä¶</p>
            <p>and using Nvidia‚Äôs cash to turn AMD into an Nvidia competitor, and pay Broadcom to make its own chips‚Ä¶
            </p>
            <h2>Yes, but where has all this money got us?</h2>
            <p>After three years, lots more science and engineering, but no real clarity on the shape of the market</p>

            <div class="diagram-container" style="justify-content: space-around; align-items: center; margin: 2rem 0;">
                <section class="circle dark"
                    style="width: 250px; height: 250px; padding: 2rem; border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
                    <p style="font-size: 1.2rem; margin-bottom: 0.5rem; color: white; font-weight: bold;">Models still
                        improving</p>
                    <p style="font-size: 1rem; color: #eee; margin-bottom: 0.5rem;">Far more models, China, OSS</p>
                    <p style="font-size: 1rem; color: #eee;">Lots of new acronyms</p>
                </section>

                <div style="border-left: 3px dotted #D93025; height: 250px; margin: 0 1rem;" aria-hidden="true"></div>

                <section class="circle red-filled"
                    style="width: 250px; height: 250px; padding: 2rem; border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
                    <p style="font-size: 1.2rem; margin-bottom: 1rem; color: white; font-weight: bold;">No apparent
                        moats</p>
                    <p style="font-size: 1.2rem; color: white; line-height: 1.3;">No clarity on product or value capture
                    </p>
                </section>
            </div>
            <p>Every week introduces new models, new (problematic, gamed, and saturated) benchmarks, new acronyms.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Model Proliferation</h3>
            <figure id="chart-model-proliferation" aria-label="Scatter plot showing Model Proliferation">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Benedict Evans</a>
                </figcaption>
            </figure>
            <p>Meanwhile, the models themselves are converging. On general benchmarks, the gap between the leading model
                and the followers is shrinking, suggesting that raw intelligence might become a commodity.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Models converge and leaders change weekly</h3>
            <figure id="chart-model-convergence" aria-label="Bar chart showing model performance convergence">
                <figcaption class="right">Data: LMArena, Artificial Analysis</figcaption>
            </figure>
            <p>Dozens of (saturated) benchmarks to choose from, but on the most general, the leaders are very close.</p>
            <h2>Tech versus brand versus distribution?</h2>
            <p>The models may be close to commodities (especially for general use), but market position is not, so far.
            </p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Weekly active users of generative AI tools as share of the population, June 2025</h3>
            <figure id="chart-global-usage" aria-label="Bar chart showing Weekly active users of GenAI tools">
                <figcaption class="right">Data: <a href="https://reutersinstitute.politics.ox.ac.uk"
                        target="_blank">Reuters Institute</a></figcaption>
            </figure>
            <p>Adoption is also uneven globally. The US leads significantly in the usage of generative AI tools, while
                developed markets like Japan lag significantly behind.</p>
            <q style="text-align: center;">Everyone is already using this!</q>
            <h2>3. Usage and Adoption</h2>
            <p>Despite the hype, we are early. ChatGPT has roughly 800 million weekly active users, but usage intensity
                varies. Surveys suggest that for many, AI is a "sometimes" tool rather than a daily habit.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>ChatGPT global weekly active users (millions)</h3>
            <figure id="chart-chatgpt-growth" aria-label="Line chart showing ChatGPT Weekly Active Users">
                <figcaption class="right">Data: <a href='https://openai.com' target='_blank'>OpenAI</a></figcaption>
            </figure>
            <h2>Still more experimentation than daily use</h2>
            <p>So far, many more people use chatbots occasionally than make them part of their daily lives.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Engagement Gap</h3>
            <figure id="chart-engagement" aria-label="Bar chart showing Engagement Gap">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Multiple Surveys</a>
                </figcaption>
            </figure>
            <h2>Most data shows the same picture</h2>
            <p>Surveys are early, scattered and inconsistent, but an engagement gap seems clear.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>How many people use generative AI chatbots in the USA?</h3>
            <figure id="chart-survey-meta" aria-label="Stacked bar chart showing Weekly vs Daily usage across surveys">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Multiple Surveys</a>
                </figcaption>
            </figure>
            <h2>Is this just early? Or a harder problem?</h2>
            <p>Why do most users of ChatGPT only use it a little bit?</p>
            <blockquote>
                <p>People don‚Äôt know what they want until you show it to them.</p>
                <p>You‚Äôve got to start with the experience and work backwards to the technology</p>
                <cite>&mdash; Steve Jobs</cite>
            </blockquote>

            <div class="diagram-container mid-size">
                <section class="circle">
                    <h2>Weekly</h2>
                    <p>Usage is climbing, but is it a daily habit?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Daily</h2>
                    <p>Remains a smaller fraction of total usage</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>Invisible</h2>
                    <p>The technology becomes essential for everyone</p>
                </section>
            </div>

            <p>When the dust settles, however, new technologies fundamentally change society. The internet went from a
                novelty to the primary way couples meet, displacing friends and family.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>How Couples Meet</h3>
            <figure id="chart-couples" aria-label="Line chart showing how heterosexual couples meet in the US">
                <figcaption class="right">Data: <a href="https://data.stanford.edu/hcmst2017" target="_blank">Rosenfeld
                        (HCMST)</a></figcaption>
            </figure>
            <h2>So where does a model lab compete?</h2>
            <p>Where is the value capture for a research-heavy, capital-intensive commodity?</p>
            <div class="diagram-container mid-size">
                <section class="circle dark">
                    <h2>Go down the stack</h2>
                    <p>Win on scale?<br>(see: aircraft,<br>AWS, chips)</p>
                </section>

                <div class="arrow" role="presentation" style="transform: rotate(180deg);"></div>

                <section class="circle" style="border-style: dotted;">
                    <h2>If the models are commodities?</h2>
                    <p>And don‚Äôt have<br>network effects?</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle red-filled">
                    <h2>Go up the stack</h2>
                    <p>Win on network<br>effects & product?<br>(See: software)</p>
                </section>
            </div>
            <h2>Microsoft‚Äôs shift away from network effects?</h2>
            <p>From competing on network effects to competing on access to capital?</p>

            <p>Microsoft's capital intensity is spiking as it builds out the infrastructure for this new era.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Microsoft capex/sales</h3>
            <figure id="chart-microsoft-capex" aria-label="Bar chart showing Microsoft Capex Intensity">
                <figcaption class="right">Data: <a href="https://www.microsoft.com/en-us/investor"
                        target="_blank">Microsoft. Includes capital leases</a></figcaption>
            </figure>
            <h2>For OpenAI, ‚Äúyes!‚Äù to everything</h2>
            <p>Everything, everywhere, yesterday (on other people‚Äôs balance sheets), before the market slips away</p>

            <div class="diagram-container mid-size">
                <section class="circle dark">
                    <p>Infra deals<br>with Oracle,<br>Nvidia, Intel,<br>Broadcom,<br>AMD...</p>
                </section>
                <section class="circle dark">
                    <p>Ecommerce<br>integrations,<br>ads, vertical<br>data sets</p>
                </section>
                <section class="circle dark">
                    <p>App platform,<br>social video,<br>web browser</p>
                </section>
                <section class="circle red-filled">
                    <p>Robots<br>Jony Ive<br>Biotech</p>
                </section>
            </div>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h2>4. Automation and Unbundling</h2>
            <p>AI is often described as "infinite interns." This leads to the Jevons paradox: as the cost of
                intelligence drops, we will consume vastly more of it. We saw this with the steam engine, and we saw it
                with retail automation.</p>

            <div class="diagram-container mid-size">
                <section class="circle">
                    <h2>Steam Engine</h2>
                    <p>Jevons paradox: efficiency increases consumption</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Retail</h2>
                    <p>Automation allowed handling 5x more SKUs</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>Infinite Interns</h2>
                    <p>As cost of intelligence drops, we consume vastly more</p>
                </section>
            </div>

            <p>We are also seeing the unbundling of software. Startups are flooding into every vertical, attempting to
                unbundle Excel, Google, and traditional SaaS using AI.</p>
            <p>The coming wave of AI startups trying to unbundle Google, Excel, email and Oracle‚Ä¶ and ChatGPT.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Y Combinator startups by field</h3>
            <figure id="chart-ycombinator" aria-label="Bar chart showing Y Combinator startups by field">
                <figcaption class="right">Data: <a href="https://www.ycombinator.com" target="_blank">Y Combinator</a>
                </figcaption>
            </figure>
            <h2>AI coding as the new AWS</h2>
            <p>‚ÄúVibe coding‚Äù as the new abstraction layer, after AWS, libraries, operating systems‚Ä¶</p>
            <p>A new step change reduction in software creation costs.</p>
            <h3>How do you know what to automate?</h3>
            <p>Step one: ask your local systems integrator.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Accenture reported new quarterly ‚Äògenerative AI‚Äô contracts ($m)</h3>
            <figure id="chart-accenture" aria-label="Line chart showing Accenture new Generative AI bookings">
                <figcaption class="right">Data: <a href="https://newsroom.accenture.com" target="_blank">Accenture</a>
                </figcaption>
            </figure>
            <h3>How do you know what to automate?</h3>
            <p>Step two: buy some SaaS from Dr Evil.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Palantir quarterly revenue by segment ($m)</h3>
            <figure id="chart-palantir" aria-label="Bar chart showing Palantir revenue acceleration">
                <figcaption class="right">Data: <a href="https://investors.palantir.com" target="_blank">Palantir</a>
                </figcaption>
            </figure>
            <h2>Pilots come first and deployment takes time</h2>
            <p>‚ÄúAgentic!‚Äô is 2025‚Äôs buzzword, but deployment takes longer</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Pilots vs Deployment</h3>
            <figure id="pilots" aria-label="Stacked bar chart showing status of AI adoption by function">
                <figcaption class="right">Data: <a href="https://www.mckinsey.com" target="_blank">McKinsey</a>
                </figcaption>
            </figure>
            <h2>Not everything works? Welcome to tech</h2>
            <p>‚ÄúWhy did our AI pilot fail?‚Äù That‚Äôs a CTO question, not an AI question.</p>

            <div class="diagram-container mid-size" style="justify-content: space-around;">
                <section class="circle dark" style="width: 200px; height: 200px; background-color: #555;">
                    <p>Security,<br>privacy, IPR,<br>error rates,<br>legal</p>
                </section>

                <section class="circle dark" style="width: 200px; height: 200px; background-color: #555;">
                    <p>Data<br>integration<br>& legacy<br>systems</p>
                </section>

                <section class="circle dark" style="width: 200px; height: 200px; background-color: #555;">
                    <p>Finding the<br>right solution<br>for the right<br>people</p>
                </section>

                <section class="circle red-filled" style="width: 200px; height: 200px;">
                    <p>The same<br>issues as<br>deploying any<br>new tech</p>
                </section>
            </div>
            <h2>The future can take time</h2>
            <p>A quarter of CIOs have launched something - but 40% don‚Äôt plan anything until at least 2026</p>

            <p>Deployment takes time. A survey of CIOs shows that while many have launched "pilots," full production
                deployment is a multi-year journey. 40% don't plan significant deployment until 2026 or later.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>CIO Deployment Timing</h3>
            <figure id="chart-cio-timing" aria-label="Bar chart showing CIO expected timing">
                <figcaption class="right">Data: <a href="https://www.morganstanley.com" target="_blank">Morgan
                        Stanley</a></figcaption>
            </figure>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Steam Engine Labor</h3>
            <figure id="chart-steam" aria-label="Chart showing UK Population vs Steam Engine Labor Equivalent">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Landes</a>
                </figcaption>
            </figure>

            <p>Automation also allows us to handle complexity. The introduction of barcodes in the 1970s allowed
                supermarkets to handle 5x more SKUs than before.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Average SKUs per supermarket, USA</h3>
            <figure id="chart-skus" aria-label="Line chart showing growth of Supermarket SKUs">
                <figcaption class="right">Data: <a href="https://www.fmi.org" target="_blank">FMI</a></figcaption>
            </figure>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h2>5. Enterprise Reality</h2>

            <p>Usage varies significantly by function. IT, Knowledge Management, and Marketing are leading the way,
                while Manufacturing and Supply Chain lag behind.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>AI Agent Adoption</h3>
            <figure id="chart-agent-use" aria-label="Bar chart showing AI 'agent' use by business function">
                <figcaption class="right">Data: <a href="https://www.mckinsey.com" target="_blank">McKinsey</a>
                </figcaption>
            </figure>

            <p>This is normal. E-commerce took 25 years to reach ~30% of US core retail sales. The "old stuff"
                sticks
                around for a long time.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>E-commerce Share</h3>
            <figure id="chart-ecommerce" aria-label="Line chart showing E-commerce as % of total US Retail Sales">
                <figcaption class="right">Data: <a href="https://www.census.gov/retail/index.html" target="_blank">US
                        Census Bureau</a></figcaption>
            </figure>

            <p>But the future takes time. Cloud computing is old and boring news, yet after more than a decade, only
                about 30% of enterprise workloads have actually moved to the public cloud.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Cloud Adoption</h3>
            <figure id="chart-cloud" aria-label="Line chart showing Enterprise workloads in public cloud">
                <figcaption class="right">Data: <a href="https://www.goldmansachs.com" target="_blank">Goldman
                        Sachs</a>
                </figcaption>
            </figure>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h2>6. Value Capture</h2>
            <p>Where does the money go? Currently, brands spend a trillion dollars a year to talk to consumers.
                Search
                and Social dominate this, but AI agents promise to disrupt how products are found and bought.</p>

            <div class="diagram-container mid-size">
                <section class="circle">
                    <h2>Search</h2>
                    <p>Current dominant model for finding products</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle">
                    <h2>Social</h2>
                    <p>Discovery driven by social graphs and feeds</p>
                </section>

                <div class="arrow" role="presentation"></div>

                <section class="circle highlight">
                    <h2>AI Agents</h2>
                    <p>Promise to disrupt how products are found and bought</p>
                </section>
            </div>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Global Ad Revenue</h3>
            <figure id="chart-ads" aria-label="Bar chart showing Global Ad Revenue pools">
                <figcaption class="right">Data: <a href="https://www.sec.gov/edgar/searchedgar/companysearch"
                        target="_blank">Company Reports</a></figcaption>
            </figure>

            <p>We are already seeing generational shifts in how people find information. Younger users are much more
                likely to use Generative AI as a primary search tool compared to older generations who stick to
                traditional search.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Search Preference</h3>
            <figure id="chart-search-pref" aria-label="Bar chart showing Search vs GenAI preference by age">
                <figcaption class="right">Data: <a href="https://www.bain.com" target="_blank">Bain</a></figcaption>
            </figure>

            <p>And software companies are benefiting. Palantir has seen revenue re-accelerate as governments and
                enterprises scramble to deploy AI on their data.</p>

            <h3>Physical AI</h3>
            <p>While we focus on LLMs in the browser, the physical world is also being eaten. After a decade of
                broken
                promises and billions in burnt capital, "automatic cars" (robotaxis) are finally starting to work at
                scale.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Monthly ‚Äòrobotaxi‚Äô trips in California</h3>
            <figure id="chart-robotaxi" aria-label="Line chart showing Monthly 'Robotaxi' trips in California">
                <figcaption class="right">Data: <a href="https://www.cpuc.ca.gov" target="_blank">CPUC</a>
                </figcaption>
            </figure>

            <p>But general-purpose robots are harder. This is "Moravec's Paradox": high-level reasoning (chess,
                poetry)
                requires very little computation, but low-level sensorimotor skills (walking, holding an egg)
                require
                enormous computational resources.</p>
            <p>We are seeing progress in "Embodied AI"‚Äîrobots that learn to move by themselves‚Äîbut we are still far
                from
                a Rosie the Robot in every home.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h2>7. Regulation & Society</h2>
            <p>It's not just about business. AI is colliding with society. We see a split between "Safety" (bias,
                hallucination, legal liability) and "Doomerism" (existential risk).</p>
            <p>Evans dismisses the "Doomer" view‚Äîthat AI will kill us all‚Äîas "childish," preferring to focus on the
                tangible, immediate risks of deployment.</p>

            <h3>Copyright & Legal</h3>
            <p>The legal battles are just beginning. The <em>NYT vs OpenAI</em> case is a bellwether for how we
                treat
                training data. Is it fair use? Or is it theft?</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h2>8. Models</h2>
            <p>The scaling laws hold. We are seeing exponential growth in model size and capability. The number of
                parameters in leading models has grown from 100 million to over a trillion in just a few years.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Model Parameters</h3>
            <figure id="chart-parameters" aria-label="Scatter chart showing growth of Model Parameters">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Company
                        Papers</a>
                </figcaption>
            </figure>

            <p>This scale comes at a cost. Training costs are also rising exponentially. What cost $50k in 2018 now
                costs hundreds of millions, with billion-dollar training runs on the horizon.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Training Costs</h3>
            <figure id="chart-training-cost" aria-label="Scatter chart showing growth of Training Costs">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Company
                        Reports</a>
                </figcaption>
            </figure>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h2>9. Applications</h2>
            <p>What are we actually doing with this? While chat is the default interface, users are finding value in
                creative writing, coding assistance, and summarization.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>GenAI Use Cases</h3>
            <figure id="chart-use-cases" aria-label="Bar chart showing GenAI Use Cases">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">User Surveys</a>
                </figcaption>
            </figure>

            <p>New tools like Cursor are seeing explosive growth, challenging traditional IDEs.</p>
            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Cursor Growth</h3>
            <figure id="chart-cursor" aria-label="Line chart showing Cursor growth">
                <figcaption class="right">Data: <a href="https://www.cursor.com" target="_blank">Company Reports</a>
                </figcaption>
            </figure>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Coding Assistant Share</h3>
            <figure id="chart-coding-share" aria-label="Bar chart showing AI Coding Assistant Users">
                <figcaption class="right">Data: <a href="https://www.ben-evans.com" target="_blank">Company
                        Reports</a>
                </figcaption>
            </figure>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h2>10. So what?</h2>
            <p>We are in the deployment phase. The technology works, the capital is flowing, and the models are
                getting
                better. Now comes the hard work of figuring out the product-market fit, the business models, and the
                societal impact.</p>
            <p>As with the internet and mobile, the real revolution isn't the technology itself, but what we build
                with
                it.</p>

            <p>Consider the elevator operator. In 1950, there were over 100,000 elevator operators in the US.
                Automation
                (buttons) didn't just remove the job; it made the elevator invisible.</p>

            <span class="header-tag"><img src="imgs/tag.svg" alt="Chart header tag"></span>
            <h3>Elevator Operators</h3>
            <figure id="chart-elevators" aria-label="Chart showing employment of Elevator Operators">
                <figcaption class="right">Data: <a href="https://www.census.gov" target="_blank">US Census</a>, ITIF
                </figcaption>
            </figure>
            <p>Otis launched the ‚ÄòAutotronic‚Äô automatic elevator in 1950.</p>

            <figure style="aspect-ratio: 16 / 9; width: 100%; margin: 2rem 0;">
                <iframe width="100%" height="100%" src="https://www.youtube.com/embed/jWc8sy16W5w"
                    title="Benedict Evans - AI Eats the World" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen style="min-height: 400px;"></iframe>
                <figcaption class="right">Watch Benedict Evans deliver the presentation at SuperAI Singapore 2025.
                </figcaption>
            </figure>

        </article>
    </main>

    <footer>
        <h2 id="footnote-label">Footnotes</h2>
        <ol>
            <li id="ben-evans"><strong>Benedict Evans</strong>, ‚Äú<em><a href="https://www.ben-evans.com">AI Eats the
                        World</a></em>" (2025 presentation). Data sources: Company reports, US Census Bureau, Gartner,
                Rosenfeld, Y Combinator.<a href="#ben-evans-ref" aria-label="Back to content">‚Ü©</a></li>
        </ol>
        <div>
            <p>Justin Chill &copy; 2025</p>
            <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img
                        src="imgs/github.svg" alt="GitHub logo" class="icon">Source code</a></span>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/d3"></script>
    <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>

    <script>
        // Constants for consistent visual style
        const colorMain = "#333";
        const colorAccent = "#D93025";
        const colorHighlight = "#4285F4";
        const colorGray = "#ccc";
        const fontFamily = "Lato, sans-serif";
        var element = d3.select('figure').node();
        var width = element.getBoundingClientRect().width; // get width of article so graphic is responsive
        var size = 12;

        // Data derived from Benedict Evans' "Microsoft OS share of global computer unit sales" chart
        const msftData = [
            { year: 1980, share: 0 },
            { year: 1981, share: 2 },
            { year: 1982, share: 5 },
            { year: 1983, share: 25 },
            { year: 1984, share: 30 },
            { year: 1985, share: 50 },
            { year: 1986, share: 55 },
            { year: 1987, share: 65 },
            { year: 1988, share: 78 },
            { year: 1989, share: 83 },
            { year: 1990, share: 84 },
            { year: 1991, share: 76 },
            { year: 1992, share: 85 },
            { year: 1993, share: 88 },
            { year: 1994, share: 90 },
            { year: 1995, share: 91 },
            { year: 1996, share: 95 },
            { year: 1997, share: 96 },
            { year: 1998, share: 97 },
            { year: 1999, share: 96 },
            { year: 2000, share: 97 },
            { year: 2001, share: 96 },
            { year: 2002, share: 96 },
            { year: 2003, share: 96 },
            { year: 2004, share: 96 },
            { year: 2005, share: 96 },
            { year: 2006, share: 95 },
            { year: 2007, share: 92 },
            { year: 2008, share: 85 },
            { year: 2009, share: 75 },
            { year: 2010, share: 60 },
            { year: 2011, share: 40 },
            { year: 2012, share: 25 },
            { year: 2013, share: 18 },
            { year: 2014, share: 15 },
            { year: 2015, share: 13 },
            { year: 2016, share: 12 },
            { year: 2017, share: 13 },
            { year: 2018, share: 12 },
            { year: 2019, share: 13 },
            { year: 2020, share: 14 },
            { year: 2021, share: 16 },
            { year: 2022, share: 15 },
            { year: 2023, share: 13 },
            { year: 2024, share: 13 },
            { year: 2025, share: 12 }
        ];

        document.getElementById("chart-microsoft-share").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: "Lato, sans-serif",
                fontSize: "12px",
            },
            y: {
                grid: true,
                ticks: 4,
                tickFormat: ".0%",
                tickSize: 0,
                label: null,
                nice: true,
            },
            x: {
                tickFormat: "d",
                label: null,
                nice: true,
            },
            marks: [
                Plot.line(msftData, {
                    x: "year",
                    y: (d) => d.share / 100,
                    stroke: "#ea4335",
                    strokeWidth: 3,
                    curve: "natural"
                }),
                Plot.tip(msftData, Plot.pointerX({
                    x: "year",
                    y: (d) => d.share / 100,
                    title: (d) => `${d.year}: ${d.share}%`
                }))
            ]
        }));

        // Data estimated from the "Global PC unit sales share" chart
        const pcShareData = [
            // 1975
            { year: 1975, type: "All others", val: 100 },
            { year: 1975, type: "Apple", val: 0 },
            { year: 1975, type: "IBM-compatible", val: 0 },
            // 1976
            { year: 1976, type: "All others", val: 99 },
            { year: 1976, type: "Apple", val: 1 },
            { year: 1976, type: "IBM-compatible", val: 0 },
            // 1977
            { year: 1977, type: "All others", val: 97 },
            { year: 1977, type: "Apple", val: 3 },
            { year: 1977, type: "IBM-compatible", val: 0 },
            // 1978
            { year: 1978, type: "All others", val: 92 },
            { year: 1978, type: "Apple", val: 8 },
            { year: 1978, type: "IBM-compatible", val: 0 },
            // 1979
            { year: 1979, type: "All others", val: 91 },
            { year: 1979, type: "Apple", val: 9 },
            { year: 1979, type: "IBM-compatible", val: 0 },
            // 1980
            { year: 1980, type: "All others", val: 86 },
            { year: 1980, type: "Apple", val: 14 },
            { year: 1980, type: "IBM-compatible", val: 0 },
            // 1981 - IBM enters
            { year: 1981, type: "All others", val: 80 },
            { year: 1981, type: "Apple", val: 11 },
            { year: 1981, type: "IBM-compatible", val: 9 },
            // 1982
            { year: 1982, type: "All others", val: 54 },
            { year: 1982, type: "Apple", val: 11 },
            { year: 1982, type: "IBM-compatible", val: 35 },
            // 1983
            { year: 1983, type: "All others", val: 34 },
            { year: 1983, type: "Apple", val: 11 },
            { year: 1983, type: "IBM-compatible", val: 55 },
            // 1984 - Apple peak?
            { year: 1984, type: "All others", val: 29 },
            { year: 1984, type: "Apple", val: 28 },
            { year: 1984, type: "IBM-compatible", val: 43 },
            // 1985
            { year: 1985, type: "All others", val: 8 },
            { year: 1985, type: "Apple", val: 20 },
            { year: 1985, type: "IBM-compatible", val: 72 },
            // 1986
            { year: 1986, type: "All others", val: 7 },
            { year: 1986, type: "Apple", val: 16 },
            { year: 1986, type: "IBM-compatible", val: 77 },
            // 1987
            { year: 1987, type: "All others", val: 8 },
            { year: 1987, type: "Apple", val: 13 },
            { year: 1987, type: "IBM-compatible", val: 79 },
            // 1988
            { year: 1988, type: "All others", val: 6 },
            { year: 1988, type: "Apple", val: 7 },
            { year: 1988, type: "IBM-compatible", val: 87 },
            // 1989
            { year: 1989, type: "All others", val: 7 },
            { year: 1989, type: "Apple", val: 6 },
            { year: 1989, type: "IBM-compatible", val: 87 },
            // 1990 - Apple bump
            { year: 1990, type: "All others", val: 5 },
            { year: 1990, type: "Apple", val: 12 },
            { year: 1990, type: "IBM-compatible", val: 83 },
            // 1991
            { year: 1991, type: "All others", val: 4 },
            { year: 1991, type: "Apple", val: 12 },
            { year: 1991, type: "IBM-compatible", val: 84 },
            // 1992
            { year: 1992, type: "All others", val: 1 },
            { year: 1992, type: "Apple", val: 11 },
            { year: 1992, type: "IBM-compatible", val: 88 },
            // 1993
            { year: 1993, type: "All others", val: 0 },
            { year: 1993, type: "Apple", val: 9 },
            { year: 1993, type: "IBM-compatible", val: 91 },
            // 1994
            { year: 1994, type: "All others", val: 0 },
            { year: 1994, type: "Apple", val: 8 },
            { year: 1994, type: "IBM-compatible", val: 92 },
            // 1995
            { year: 1995, type: "All others", val: 0 },
            { year: 1995, type: "Apple", val: 4 },
            { year: 1995, type: "IBM-compatible", val: 96 },
            // 1996
            { year: 1996, type: "All others", val: 0 },
            { year: 1996, type: "Apple", val: 3 },
            { year: 1996, type: "IBM-compatible", val: 97 },
            // 1997
            { year: 1997, type: "All others", val: 0 },
            { year: 1997, type: "Apple", val: 3 },
            { year: 1997, type: "IBM-compatible", val: 97 },
            // 1998
            { year: 1998, type: "All others", val: 0 },
            { year: 1998, type: "Apple", val: 3 },
            { year: 1998, type: "IBM-compatible", val: 97 },
            // 1999
            { year: 1999, type: "All others", val: 0 },
            { year: 1999, type: "Apple", val: 3 },
            { year: 1999, type: "IBM-compatible", val: 97 },
            // 2000
            { year: 2000, type: "All others", val: 0 },
            { year: 2000, type: "Apple", val: 3 },
            { year: 2000, type: "IBM-compatible", val: 97 },
        ];

        document.getElementById("chart-pc-share").append(Plot.plot({
            width: width,
            height: 350,
            marginRight: 0,
            style: {
                fontFamily: "Lato, sans-serif",
                fontSize: size,
            },
            y: {
                grid: true,
                label: null,
                ticks: 4,
                tickSize: 0,
                tickFormat: "%",
            },
            x: {
                type: "time",
                label: null,
                tickSize: 0,
            },
            color: {
                legend: true,
                domain: ["IBM-compatible", "All others", "Apple"],
                range: ["#333", "#f4b4b4", "#ea4335"]
            },
            marks: [
                Plot.axisX({
                    ticks: "5 years",
                    label: null
                }),
                Plot.rectY(pcShareData, Plot.stackY({
                    x: (d) => new Date(d.year, 0),
                    y: (d) => d.val / 100,
                    fill: "type",
                    order: "type",
                    reverse: true,
                    interval: "1 year",
                    tip: true,
                })),
                Plot.ruleY([0])
            ]
        }));

        // Chart: US Heterosexual Couples Meeting Online (New)
        const datingData = [
            { year: 1995, pct: 2 },
            { year: 1997, pct: 4 },
            { year: 2000, pct: 9 },
            { year: 2002, pct: 12 },
            { year: 2005, pct: 18 },
            { year: 2007, pct: 20 },
            { year: 2009, pct: 21 },
            { year: 2011, pct: 22 },
            { year: 2013, pct: 25 },
            { year: 2015, pct: 30 },
            { year: 2017, pct: 35 },
            { year: 2019, pct: 40 },
            { year: 2021, pct: 50 },
            { year: 2023, pct: 55 },
            { year: 2024, pct: 59 }
        ];

        document.getElementById("chart-online-dating").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: "Lato, sans-serif",
                fontSize: "12px",
            },
            y: {
                grid: true,
                label: null,
                nice: true,
                tickSize: 0,
                tickFormat: ".0%",
                ticks: 6,
            },
            x: {
                tickFormat: "d",
                label: null,
                nice: true,
            },
            marks: [
                Plot.axisX({
                    ticks: "3 months",
                    label: null
                }),
                Plot.line(datingData, {
                    x: "year",
                    y: (d) => d.pct / 100,
                    stroke: "#ea4335",
                    strokeWidth: 3,
                    curve: "natural"
                }),
                Plot.tip(datingData, Plot.pointerX({
                    x: "year",
                    y: (d) => d.pct / 100,
                    title: (d) => `${d.year}: ${d.pct}%`
                }))
            ]
        }));

        // Chart 3: Capex Surge
        const capexData = [{
            year: 2010,
            company: "Microsoft",
            val: 2
        }, {
            year: 2010,
            company: "AWS",
            val: 2
        }, {
            year: 2010,
            company: "Alphabet",
            val: 2
        }, {
            year: 2010,
            company: "Meta",
            val: 1
        }, {
            year: 2010,
            company: "Oracle",
            val: 0.5
        }, {
            year: 2010,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2011,
            company: "Microsoft",
            val: 3
        }, {
            year: 2011,
            company: "AWS",
            val: 3
        }, {
            year: 2011,
            company: "Alphabet",
            val: 3
        }, {
            year: 2011,
            company: "Meta",
            val: 1
        }, {
            year: 2011,
            company: "Oracle",
            val: 0.5
        }, {
            year: 2011,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2012,
            company: "Microsoft",
            val: 4
        }, {
            year: 2012,
            company: "AWS",
            val: 4
        }, {
            year: 2012,
            company: "Alphabet",
            val: 4
        }, {
            year: 2012,
            company: "Meta",
            val: 2
        }, {
            year: 2012,
            company: "Oracle",
            val: 1
        }, {
            year: 2012,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2013,
            company: "Microsoft",
            val: 5
        }, {
            year: 2013,
            company: "AWS",
            val: 5
        }, {
            year: 2013,
            company: "Alphabet",
            val: 6
        }, {
            year: 2013,
            company: "Meta",
            val: 3
        }, {
            year: 2013,
            company: "Oracle",
            val: 1
        }, {
            year: 2013,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2014,
            company: "Microsoft",
            val: 6
        }, {
            year: 2014,
            company: "AWS",
            val: 6
        }, {
            year: 2014,
            company: "Alphabet",
            val: 8
        }, {
            year: 2014,
            company: "Meta",
            val: 4
        }, {
            year: 2014,
            company: "Oracle",
            val: 1
        }, {
            year: 2014,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2015,
            company: "Microsoft",
            val: 7
        }, {
            year: 2015,
            company: "AWS",
            val: 8
        }, {
            year: 2015,
            company: "Alphabet",
            val: 10
        }, {
            year: 2015,
            company: "Meta",
            val: 5
        }, {
            year: 2015,
            company: "Oracle",
            val: 1
        }, {
            year: 2015,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2016,
            company: "Microsoft",
            val: 9
        }, {
            year: 2016,
            company: "AWS",
            val: 10
        }, {
            year: 2016,
            company: "Alphabet",
            val: 12
        }, {
            year: 2016,
            company: "Meta",
            val: 6
        }, {
            year: 2016,
            company: "Oracle",
            val: 2
        }, {
            year: 2016,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2017,
            company: "Microsoft",
            val: 10
        }, {
            year: 2017,
            company: "AWS",
            val: 12
        }, {
            year: 2017,
            company: "Alphabet",
            val: 15
        }, {
            year: 2017,
            company: "Meta",
            val: 7
        }, {
            year: 2017,
            company: "Oracle",
            val: 2
        }, {
            year: 2017,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2018,
            company: "Microsoft",
            val: 15
        }, {
            year: 2018,
            company: "AWS",
            val: 15
        }, {
            year: 2018,
            company: "Alphabet",
            val: 20
        }, {
            year: 2018,
            company: "Meta",
            val: 10
        }, {
            year: 2018,
            company: "Oracle",
            val: 3
        }, {
            year: 2018,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2019,
            company: "Microsoft",
            val: 18
        }, {
            year: 2019,
            company: "AWS",
            val: 16
        }, {
            year: 2019,
            company: "Alphabet",
            val: 22
        }, {
            year: 2019,
            company: "Meta",
            val: 12
        }, {
            year: 2019,
            company: "Oracle",
            val: 3
        }, {
            year: 2019,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2020,
            company: "Microsoft",
            val: 20
        }, {
            year: 2020,
            company: "AWS",
            val: 18
        }, {
            year: 2020,
            company: "Alphabet",
            val: 25
        }, {
            year: 2020,
            company: "Meta",
            val: 15
        }, {
            year: 2020,
            company: "Oracle",
            val: 4
        }, {
            year: 2020,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2021,
            company: "Microsoft",
            val: 25
        }, {
            year: 2021,
            company: "AWS",
            val: 25
        }, {
            year: 2021,
            company: "Alphabet",
            val: 30
        }, {
            year: 2021,
            company: "Meta",
            val: 18
        }, {
            year: 2021,
            company: "Oracle",
            val: 5
        }, {
            year: 2021,
            company: "Coreweave",
            val: 0
        },
        {
            year: 2022,
            company: "Microsoft",
            val: 30
        }, {
            year: 2022,
            company: "AWS",
            val: 30
        }, {
            year: 2022,
            company: "Alphabet",
            val: 35
        }, {
            year: 2022,
            company: "Meta",
            val: 25
        }, {
            year: 2022,
            company: "Oracle",
            val: 6
        }, {
            year: 2022,
            company: "Coreweave",
            val: 1
        },
        {
            year: 2023,
            company: "Microsoft",
            val: 40
        }, {
            year: 2023,
            company: "AWS",
            val: 35
        }, {
            year: 2023,
            company: "Alphabet",
            val: 35
        }, {
            year: 2023,
            company: "Meta",
            val: 28
        }, {
            year: 2023,
            company: "Oracle",
            val: 8
        }, {
            year: 2023,
            company: "Coreweave",
            val: 2
        },
        {
            year: 2024,
            company: "Microsoft",
            val: 56
        }, {
            year: 2024,
            company: "AWS",
            val: 75
        }, {
            year: 2024,
            company: "Alphabet",
            val: 52
        }, {
            year: 2024,
            company: "Meta",
            val: 39
        }, {
            year: 2024,
            company: "Oracle",
            val: 7
        }, {
            year: 2024,
            company: "Coreweave",
            val: 3
        },
        {
            year: 2025,
            company: "Microsoft",
            val: 95
        }, {
            year: 2025,
            company: "AWS",
            val: 110
        }, {
            year: 2025,
            company: "Alphabet",
            val: 100
        }, {
            year: 2025,
            company: "Meta",
            val: 80
        }, {
            year: 2025,
            company: "Oracle",
            val: 20
        }, {
            year: 2025,
            company: "Coreweave",
            val: 15
        }
        ];

        document.getElementById("chart-capex-surge").append(Plot.plot({
            width: width,
            height: 400,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: "Capex ($bn)",
                nice: true,
                tickFormat: d => `$${d}B`,
                ticks: 6,
                tickSize: 0,
            },
            x: {
                label: null,
                nice: true,
                tickFormat: "d",
                tickSize: 4,
            },
            color: {
                legend: true,
                domain: ["Coreweave", "Oracle", "Meta", "Alphabet", "AWS", "Microsoft"],
                range: ["#999", "#444", "#000", "#fce8e6", "#f4b4b4", "#ea4335"]
            },
            marks: [
                Plot.barY(capexData, {
                    x: "year",
                    y: "val",
                    fill: "company",
                    order: "company", // Stack order
                    title: (d) => `${d.company}: $${d.val}bn`
                }),
                Plot.ruleY([0])
            ]
        }));

        // Chart 4: Construction Spending
        const constructionData = [
            // Offices
            { date: new Date("1995-01-01"), type: "Offices", val: 52 },
            { date: new Date("1996-01-01"), type: "Offices", val: 55 },
            { date: new Date("1997-01-01"), type: "Offices", val: 65 },
            { date: new Date("1998-01-01"), type: "Offices", val: 75 },
            { date: new Date("1999-01-01"), type: "Offices", val: 85 },
            { date: new Date("2000-01-01"), type: "Offices", val: 95 },
            { date: new Date("2001-01-01"), type: "Offices", val: 110 }, // Peak 1
            { date: new Date("2002-01-01"), type: "Offices", val: 80 },
            { date: new Date("2003-01-01"), type: "Offices", val: 55 },
            { date: new Date("2004-01-01"), type: "Offices", val: 60 },
            { date: new Date("2005-01-01"), type: "Offices", val: 65 },
            { date: new Date("2006-01-01"), type: "Offices", val: 80 },
            { date: new Date("2007-01-01"), type: "Offices", val: 95 }, // Peak 2
            { date: new Date("2008-01-01"), type: "Offices", val: 90 },
            { date: new Date("2009-01-01"), type: "Offices", val: 50 },
            { date: new Date("2010-01-01"), type: "Offices", val: 35 },
            { date: new Date("2011-01-01"), type: "Offices", val: 38 },
            { date: new Date("2012-01-01"), type: "Offices", val: 42 },
            { date: new Date("2013-01-01"), type: "Offices", val: 50 },
            { date: new Date("2014-01-01"), type: "Offices", val: 60 },
            { date: new Date("2015-01-01"), type: "Offices", val: 75 },
            { date: new Date("2016-01-01"), type: "Offices", val: 82 },
            { date: new Date("2017-01-01"), type: "Offices", val: 75 },
            { date: new Date("2018-01-01"), type: "Offices", val: 80 },
            { date: new Date("2019-01-01"), type: "Offices", val: 90 },
            { date: new Date("2020-01-01"), type: "Offices", val: 85 },
            { date: new Date("2021-01-01"), type: "Offices", val: 78 },
            { date: new Date("2022-01-01"), type: "Offices", val: 80 },
            { date: new Date("2023-01-01"), type: "Offices", val: 65 },
            { date: new Date("2024-01-01"), type: "Offices", val: 50 },
            { date: new Date("2025-01-01"), type: "Offices", val: 48 },

            // Retail
            { date: new Date("1995-01-01"), type: "Retail", val: 45 },
            { date: new Date("1997-01-01"), type: "Retail", val: 50 },
            { date: new Date("1999-01-01"), type: "Retail", val: 52 },
            { date: new Date("2001-01-01"), type: "Retail", val: 55 },
            { date: new Date("2003-01-01"), type: "Retail", val: 50 },
            { date: new Date("2005-01-01"), type: "Retail", val: 55 },
            { date: new Date("2007-01-01"), type: "Retail", val: 75 },
            { date: new Date("2008-01-01"), type: "Retail", val: 60 },
            { date: new Date("2009-01-01"), type: "Retail", val: 35 },
            { date: new Date("2010-01-01"), type: "Retail", val: 25 },
            { date: new Date("2012-01-01"), type: "Retail", val: 30 },
            { date: new Date("2014-01-01"), type: "Retail", val: 35 },
            { date: new Date("2016-01-01"), type: "Retail", val: 40 },
            { date: new Date("2018-01-01"), type: "Retail", val: 35 },
            { date: new Date("2020-01-01"), type: "Retail", val: 25 },
            { date: new Date("2022-01-01"), type: "Retail", val: 28 },
            { date: new Date("2024-01-01"), type: "Retail", val: 22 },
            { date: new Date("2025-01-01"), type: "Retail", val: 22 },

            // Warehouses
            { date: new Date("1995-01-01"), type: "Warehouses", val: 18 },
            { date: new Date("1998-01-01"), type: "Warehouses", val: 25 },
            { date: new Date("2001-01-01"), type: "Warehouses", val: 28 },
            { date: new Date("2004-01-01"), type: "Warehouses", val: 20 },
            { date: new Date("2007-01-01"), type: "Warehouses", val: 25 },
            { date: new Date("2009-01-01"), type: "Warehouses", val: 15 },
            { date: new Date("2010-01-01"), type: "Warehouses", val: 8 },
            { date: new Date("2012-01-01"), type: "Warehouses", val: 10 },
            { date: new Date("2014-01-01"), type: "Warehouses", val: 15 },
            { date: new Date("2016-01-01"), type: "Warehouses", val: 25 },
            { date: new Date("2018-01-01"), type: "Warehouses", val: 35 },
            { date: new Date("2020-01-01"), type: "Warehouses", val: 40 },
            { date: new Date("2021-01-01"), type: "Warehouses", val: 55 },
            { date: new Date("2022-01-01"), type: "Warehouses", val: 75 },
            { date: new Date("2022-09-01"), type: "Warehouses", val: 82 }, // Peak
            { date: new Date("2023-01-01"), type: "Warehouses", val: 70 },
            { date: new Date("2024-01-01"), type: "Warehouses", val: 55 },
            { date: new Date("2025-01-01"), type: "Warehouses", val: 48 },

            // Data Centers
            { date: new Date("2014-01-01"), type: "Data Centers", val: 2 },
            { date: new Date("2015-01-01"), type: "Data Centers", val: 3 },
            { date: new Date("2016-01-01"), type: "Data Centers", val: 5 },
            { date: new Date("2017-01-01"), type: "Data Centers", val: 6 },
            { date: new Date("2018-01-01"), type: "Data Centers", val: 7 },
            { date: new Date("2019-01-01"), type: "Data Centers", val: 9 },
            { date: new Date("2020-01-01"), type: "Data Centers", val: 12 },
            { date: new Date("2021-01-01"), type: "Data Centers", val: 14 },
            { date: new Date("2022-01-01"), type: "Data Centers", val: 16 },
            { date: new Date("2023-01-01"), type: "Data Centers", val: 25 },
            { date: new Date("2024-01-01"), type: "Data Centers", val: 35 },
            { date: new Date("2025-01-01"), type: "Data Centers", val: 42 }
        ];

        document.getElementById("chart-construction").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: "Spending ($bn SAAR)",
                nice: true,
                ticks: 6,
                tickSize: 0,
            },
            x: {
                label: null,
                nice: true,
                tickSize: 0,
            },
            color: {
                legend: true,
                domain: ["Data Centers", "Warehouses", "Retail", "Offices"],
                range: [colorAccent, "#f4b4b4", "#999", "#333"]
            },
            marks: [
                Plot.line(constructionData, {
                    x: "date",
                    y: "val",
                    stroke: "type",
                    strokeWidth: 3,
                    curve: "natural"
                }),
                Plot.tip(constructionData, Plot.pointerX({
                    x: "date",
                    y: "val"
                }))
            ]
        }));

        // Chart: Data Center Capacity (Current vs 2030)
        const capacityData = [{
            source: "Omdia/IEA",
            year: "Current",
            val: 95
        }, {
            source: "Omdia/IEA",
            year: "Est. of 2030 plans",
            val: 195
        }, {
            source: "Bloomberg BNEF",
            year: "Current",
            val: 80
        }, {
            source: "Bloomberg BNEF",
            year: "Est. of 2030 plans",
            val: 220
        }, {
            source: "Goldman Sachs",
            year: "Current",
            val: 75
        }, {
            source: "Goldman Sachs",
            year: "Est. of 2030 plans",
            val: 150
        }, {
            source: "Morgan Stanley",
            year: "Current",
            val: 85
        }, {
            source: "Morgan Stanley",
            year: "Est. of 2030 plans",
            val: 250
        }, {
            source: "Bain",
            year: "Current",
            val: 70
        }, {
            source: "Bain",
            year: "Est. of 2030 plans",
            val: 160
        }, {
            source: "BCG",
            year: "Current",
            val: 80
        }, {
            source: "BCG",
            year: "Est. of 2030 plans",
            val: 170
        }, {
            source: "McKinsey",
            year: "Current",
            val: 80
        }, {
            source: "McKinsey",
            year: "Est. of 2030 plans",
            val: 215
        }];

        document.getElementById("chart-datacenter-capacity").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size,
                marginRight: 0,
            },
            x: {
                axis: null,
                padding: 0.2
            },
            y: {
                grid: true,
                label: "Capacity (GW)",
                nice: true,
                tickSize: 0,
                ticks: 6,
            },
            fx: {
                label: null,
                axis: "bottom"
            },
            color: {
                legend: true,
                domain: ["Current", "Est. of 2030 plans"],
                range: ["#555", colorAccent]
            },
            marks: [
                Plot.barY(capacityData, {
                    x: "year",
                    y: "val",
                    fill: "year",
                    fx: "source",
                    sort: {
                        fx: {
                            value: null,
                            order: null
                        }
                    }
                }),
                Plot.tip(capacityData, Plot.pointerX({
                    x: "year",
                    y: "val",
                    fx: "source",
                    title: (d) => `${d.source}\n${d.year}: ${d.val} GW`
                }))
            ]
        }));

        // Chart: Cash Flow vs Capex (New)
        const cashFlowData = [
            { year: 2010, company: "Alphabet", type: "Free Cash Flow", val: 8 }, { year: 2010, company: "Alphabet", type: "Cash capex", val: 4 },
            { year: 2011, company: "Alphabet", type: "Free Cash Flow", val: 10 }, { year: 2011, company: "Alphabet", type: "Cash capex", val: 5 },
            { year: 2012, company: "Alphabet", type: "Free Cash Flow", val: 12 }, { year: 2012, company: "Alphabet", type: "Cash capex", val: 6 },
            { year: 2013, company: "Alphabet", type: "Free Cash Flow", val: 12 }, { year: 2013, company: "Alphabet", type: "Cash capex", val: 8 },
            { year: 2014, company: "Alphabet", type: "Free Cash Flow", val: 14 }, { year: 2014, company: "Alphabet", type: "Cash capex", val: 10 },
            { year: 2015, company: "Alphabet", type: "Free Cash Flow", val: 16 }, { year: 2015, company: "Alphabet", type: "Cash capex", val: 10 },
            { year: 2016, company: "Alphabet", type: "Free Cash Flow", val: 26 }, { year: 2016, company: "Alphabet", type: "Cash capex", val: 11 },
            { year: 2017, company: "Alphabet", type: "Free Cash Flow", val: 24 }, { year: 2017, company: "Alphabet", type: "Cash capex", val: 13 },
            { year: 2018, company: "Alphabet", type: "Free Cash Flow", val: 23 }, { year: 2018, company: "Alphabet", type: "Cash capex", val: 25 },
            { year: 2019, company: "Alphabet", type: "Free Cash Flow", val: 30 }, { year: 2019, company: "Alphabet", type: "Cash capex", val: 24 },
            { year: 2020, company: "Alphabet", type: "Free Cash Flow", val: 43 }, { year: 2020, company: "Alphabet", type: "Cash capex", val: 22 },
            { year: 2021, company: "Alphabet", type: "Free Cash Flow", val: 67 }, { year: 2021, company: "Alphabet", type: "Cash capex", val: 25 },
            { year: 2022, company: "Alphabet", type: "Free Cash Flow", val: 60 }, { year: 2022, company: "Alphabet", type: "Cash capex", val: 32 },
            { year: 2023, company: "Alphabet", type: "Free Cash Flow", val: 69 }, { year: 2023, company: "Alphabet", type: "Cash capex", val: 32 },
            { year: 2024, company: "Alphabet", type: "Free Cash Flow", val: 74 }, { year: 2024, company: "Alphabet", type: "Cash capex", val: 51 },
            { year: 2025, company: "Alphabet", type: "Free Cash Flow", val: 68 }, { year: 2025, company: "Alphabet", type: "Cash capex", val: 92 },

            { year: 2010, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2010, company: "Amazon", type: "Cash capex", val: 1 },
            { year: 2011, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2011, company: "Amazon", type: "Cash capex", val: 2 },
            { year: 2012, company: "Amazon", type: "Free Cash Flow", val: 0 }, { year: 2012, company: "Amazon", type: "Cash capex", val: 4 },
            { year: 2013, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2013, company: "Amazon", type: "Cash capex", val: 5 },
            { year: 2014, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2014, company: "Amazon", type: "Cash capex", val: 8 },
            { year: 2015, company: "Amazon", type: "Free Cash Flow", val: 7 }, { year: 2015, company: "Amazon", type: "Cash capex", val: 5 },
            { year: 2016, company: "Amazon", type: "Free Cash Flow", val: 10 }, { year: 2016, company: "Amazon", type: "Cash capex", val: 10 },
            { year: 2017, company: "Amazon", type: "Free Cash Flow", val: 8 }, { year: 2017, company: "Amazon", type: "Cash capex", val: 12 },
            { year: 2018, company: "Amazon", type: "Free Cash Flow", val: 17 }, { year: 2018, company: "Amazon", type: "Cash capex", val: 13 },
            { year: 2019, company: "Amazon", type: "Free Cash Flow", val: 22 }, { year: 2019, company: "Amazon", type: "Cash capex", val: 17 },
            { year: 2020, company: "Amazon", type: "Free Cash Flow", val: 26 }, { year: 2020, company: "Amazon", type: "Cash capex", val: 35 },
            { year: 2021, company: "Amazon", type: "Free Cash Flow", val: -15 }, { year: 2021, company: "Amazon", type: "Cash capex", val: 55 },
            { year: 2022, company: "Amazon", type: "Free Cash Flow", val: -20 }, { year: 2022, company: "Amazon", type: "Cash capex", val: 58 },
            { year: 2023, company: "Amazon", type: "Free Cash Flow", val: 30 }, { year: 2023, company: "Amazon", type: "Cash capex", val: 48 },
            { year: 2024, company: "Amazon", type: "Free Cash Flow", val: 35 }, { year: 2024, company: "Amazon", type: "Cash capex", val: 75 },
            { year: 2025, company: "Amazon", type: "Free Cash Flow", val: 10 }, { year: 2025, company: "Amazon", type: "Cash capex", val: 125 },

            { year: 2010, company: "Meta", type: "Free Cash Flow", val: 1 }, { year: 2010, company: "Meta", type: "Cash capex", val: 1 },
            { year: 2011, company: "Meta", type: "Free Cash Flow", val: 2 }, { year: 2011, company: "Meta", type: "Cash capex", val: 1 },
            { year: 2012, company: "Meta", type: "Free Cash Flow", val: 4 }, { year: 2012, company: "Meta", type: "Cash capex", val: 2 },
            { year: 2013, company: "Meta", type: "Free Cash Flow", val: 7 }, { year: 2013, company: "Meta", type: "Cash capex", val: 2 },
            { year: 2014, company: "Meta", type: "Free Cash Flow", val: 12 }, { year: 2014, company: "Meta", type: "Cash capex", val: 3 },
            { year: 2015, company: "Meta", type: "Free Cash Flow", val: 15 }, { year: 2015, company: "Meta", type: "Cash capex", val: 5 },
            { year: 2016, company: "Meta", type: "Free Cash Flow", val: 17 }, { year: 2016, company: "Meta", type: "Cash capex", val: 6 },
            { year: 2017, company: "Meta", type: "Free Cash Flow", val: 20 }, { year: 2017, company: "Meta", type: "Cash capex", val: 8 },
            { year: 2018, company: "Meta", type: "Free Cash Flow", val: 22 }, { year: 2018, company: "Meta", type: "Cash capex", val: 14 },
            { year: 2019, company: "Meta", type: "Free Cash Flow", val: 24 }, { year: 2019, company: "Meta", type: "Cash capex", val: 15 },
            { year: 2020, company: "Meta", type: "Free Cash Flow", val: 18 }, { year: 2020, company: "Meta", type: "Cash capex", val: 20 },
            { year: 2021, company: "Meta", type: "Free Cash Flow", val: 39 }, { year: 2021, company: "Meta", type: "Cash capex", val: 18 },
            { year: 2022, company: "Meta", type: "Free Cash Flow", val: 18 }, { year: 2022, company: "Meta", type: "Cash capex", val: 32 },
            { year: 2023, company: "Meta", type: "Free Cash Flow", val: 43 }, { year: 2023, company: "Meta", type: "Cash capex", val: 28 },
            { year: 2024, company: "Meta", type: "Free Cash Flow", val: 52 }, { year: 2024, company: "Meta", type: "Cash capex", val: 37 },
            { year: 2025, company: "Meta", type: "Free Cash Flow", val: 58 }, { year: 2025, company: "Meta", type: "Cash capex", val: 70 },

            { year: 2010, company: "Microsoft", type: "Free Cash Flow", val: 22 }, { year: 2010, company: "Microsoft", type: "Cash capex", val: 2 },
            { year: 2011, company: "Microsoft", type: "Free Cash Flow", val: 25 }, { year: 2011, company: "Microsoft", type: "Cash capex", val: 3 },
            { year: 2012, company: "Microsoft", type: "Free Cash Flow", val: 28 }, { year: 2012, company: "Microsoft", type: "Cash capex", val: 3 },
            { year: 2013, company: "Microsoft", type: "Free Cash Flow", val: 28 }, { year: 2013, company: "Microsoft", type: "Cash capex", val: 3 },
            { year: 2014, company: "Microsoft", type: "Free Cash Flow", val: 22 }, { year: 2014, company: "Microsoft", type: "Cash capex", val: 5 },
            { year: 2015, company: "Microsoft", type: "Free Cash Flow", val: 25 }, { year: 2015, company: "Microsoft", type: "Cash capex", val: 5 },
            { year: 2016, company: "Microsoft", type: "Free Cash Flow", val: 24 }, { year: 2016, company: "Microsoft", type: "Cash capex", val: 8 },
            { year: 2017, company: "Microsoft", type: "Free Cash Flow", val: 27 }, { year: 2017, company: "Microsoft", type: "Cash capex", val: 10 },
            { year: 2018, company: "Microsoft", type: "Free Cash Flow", val: 32 }, { year: 2018, company: "Microsoft", type: "Cash capex", val: 12 },
            { year: 2019, company: "Microsoft", type: "Free Cash Flow", val: 30 }, { year: 2019, company: "Microsoft", type: "Cash capex", val: 15 },
            { year: 2020, company: "Microsoft", type: "Free Cash Flow", val: 40 }, { year: 2020, company: "Microsoft", type: "Cash capex", val: 14 },
            { year: 2021, company: "Microsoft", type: "Free Cash Flow", val: 50 }, { year: 2021, company: "Microsoft", type: "Cash capex", val: 17 },
            { year: 2022, company: "Microsoft", type: "Free Cash Flow", val: 65 }, { year: 2022, company: "Microsoft", type: "Cash capex", val: 19 },
            { year: 2023, company: "Microsoft", type: "Free Cash Flow", val: 60 }, { year: 2023, company: "Microsoft", type: "Cash capex", val: 22 },
            { year: 2024, company: "Microsoft", type: "Free Cash Flow", val: 67 }, { year: 2024, company: "Microsoft", type: "Cash capex", val: 35 },
            { year: 2025, company: "Microsoft", type: "Free Cash Flow", val: 75 }, { year: 2025, company: "Microsoft", type: "Cash capex", val: 80 }
        ];

        document.getElementById("chart-cash-flow").append(Plot.plot({
            width: width,
            height: 300,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                tickFormat: (d) => d % 5 === 0 ? String(d) : "", // Show every 5th year
            },
            y: {
                grid: true,
                label: "$bn",
                nice: true,
                tickSize: 0,
            },
            fx: {
                label: null,
            },
            color: {
                legend: true,
                domain: ["Cash capex", "Free Cash Flow"],
                range: ["#ea4335", "#555"] // Red, Dark Grey
            },
            marks: [
                Plot.ruleY([0]),
                Plot.barY(cashFlowData, {
                    x: "year",
                    y: "val",
                    fill: "type",
                    fx: "company",
                    order: "type", // Stack order
                    title: (d) => `${d.company} ${d.year}\n${d.type}: $${d.val}bn`
                })
            ]
        }));

        // Chart: Leases (New)
        const leasesData = [
            { year: 2010, company: "Alphabet", type: "Free Cash Flow", val: 8 }, { year: 2010, company: "Alphabet", type: "Cash capex", val: 4 },
            { year: 2011, company: "Alphabet", type: "Free Cash Flow", val: 10 }, { year: 2011, company: "Alphabet", type: "Cash capex", val: 5 },
            { year: 2012, company: "Alphabet", type: "Free Cash Flow", val: 12 }, { year: 2012, company: "Alphabet", type: "Cash capex", val: 6 },
            { year: 2013, company: "Alphabet", type: "Free Cash Flow", val: 12 }, { year: 2013, company: "Alphabet", type: "Cash capex", val: 8 },
            { year: 2014, company: "Alphabet", type: "Free Cash Flow", val: 14 }, { year: 2014, company: "Alphabet", type: "Cash capex", val: 10 },
            { year: 2015, company: "Alphabet", type: "Free Cash Flow", val: 16 }, { year: 2015, company: "Alphabet", type: "Cash capex", val: 10 },
            { year: 2016, company: "Alphabet", type: "Free Cash Flow", val: 26 }, { year: 2016, company: "Alphabet", type: "Cash capex", val: 11 },
            { year: 2017, company: "Alphabet", type: "Free Cash Flow", val: 24 }, { year: 2017, company: "Alphabet", type: "Cash capex", val: 13 },
            { year: 2018, company: "Alphabet", type: "Free Cash Flow", val: 23 }, { year: 2018, company: "Alphabet", type: "Cash capex", val: 25 },
            { year: 2019, company: "Alphabet", type: "Free Cash Flow", val: 30 }, { year: 2019, company: "Alphabet", type: "Cash capex", val: 24 },
            { year: 2020, company: "Alphabet", type: "Free Cash Flow", val: 43 }, { year: 2020, company: "Alphabet", type: "Cash capex", val: 22 },
            { year: 2021, company: "Alphabet", type: "Free Cash Flow", val: 67 }, { year: 2021, company: "Alphabet", type: "Cash capex", val: 25 },
            { year: 2022, company: "Alphabet", type: "Free Cash Flow", val: 60 }, { year: 2022, company: "Alphabet", type: "Cash capex", val: 32 },
            { year: 2023, company: "Alphabet", type: "Free Cash Flow", val: 69 }, { year: 2023, company: "Alphabet", type: "Cash capex", val: 32 },
            { year: 2024, company: "Alphabet", type: "Free Cash Flow", val: 74 }, { year: 2024, company: "Alphabet", type: "Cash capex", val: 51 },
            { year: 2025, company: "Alphabet", type: "Free Cash Flow", val: 68 }, { year: 2025, company: "Alphabet", type: "Cash capex", val: 92 },

            { year: 2010, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2010, company: "Amazon", type: "Cash capex", val: 1 },
            { year: 2011, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2011, company: "Amazon", type: "Cash capex", val: 2 },
            { year: 2012, company: "Amazon", type: "Free Cash Flow", val: 0 }, { year: 2012, company: "Amazon", type: "Cash capex", val: 4 },
            { year: 2013, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2013, company: "Amazon", type: "Cash capex", val: 5 },
            { year: 2014, company: "Amazon", type: "Free Cash Flow", val: 2 }, { year: 2014, company: "Amazon", type: "Cash capex", val: 8 },
            { year: 2015, company: "Amazon", type: "Free Cash Flow", val: 7 }, { year: 2015, company: "Amazon", type: "Cash capex", val: 5 },
            { year: 2016, company: "Amazon", type: "Free Cash Flow", val: 10 }, { year: 2016, company: "Amazon", type: "Cash capex", val: 10 },
            { year: 2017, company: "Amazon", type: "Free Cash Flow", val: 8 }, { year: 2017, company: "Amazon", type: "Cash capex", val: 12 },
            { year: 2018, company: "Amazon", type: "Free Cash Flow", val: 17 }, { year: 2018, company: "Amazon", type: "Cash capex", val: 13 },
            { year: 2019, company: "Amazon", type: "Free Cash Flow", val: 22 }, { year: 2019, company: "Amazon", type: "Cash capex", val: 17 },
            { year: 2020, company: "Amazon", type: "Free Cash Flow", val: 26 }, { year: 2020, company: "Amazon", type: "Cash capex", val: 35 },
            { year: 2021, company: "Amazon", type: "Free Cash Flow", val: -15 }, { year: 2021, company: "Amazon", type: "Cash capex", val: 55 },
            { year: 2022, company: "Amazon", type: "Free Cash Flow", val: -20 }, { year: 2022, company: "Amazon", type: "Cash capex", val: 58 },
            { year: 2023, company: "Amazon", type: "Free Cash Flow", val: 30 }, { year: 2023, company: "Amazon", type: "Cash capex", val: 48 },
            { year: 2024, company: "Amazon", type: "Free Cash Flow", val: 35 }, { year: 2024, company: "Amazon", type: "Cash capex", val: 75 },
            { year: 2025, company: "Amazon", type: "Free Cash Flow", val: 10 }, { year: 2025, company: "Amazon", type: "Cash capex", val: 125 },

            { year: 2010, company: "Meta", type: "Free Cash Flow", val: 1 }, { year: 2010, company: "Meta", type: "Cash capex", val: 1 },
            { year: 2011, company: "Meta", type: "Free Cash Flow", val: 2 }, { year: 2011, company: "Meta", type: "Cash capex", val: 1 },
            { year: 2012, company: "Meta", type: "Free Cash Flow", val: 4 }, { year: 2012, company: "Meta", type: "Cash capex", val: 2 },
            { year: 2013, company: "Meta", type: "Free Cash Flow", val: 7 }, { year: 2013, company: "Meta", type: "Cash capex", val: 2 },
            { year: 2014, company: "Meta", type: "Free Cash Flow", val: 12 }, { year: 2014, company: "Meta", type: "Cash capex", val: 3 },
            { year: 2015, company: "Meta", type: "Free Cash Flow", val: 15 }, { year: 2015, company: "Meta", type: "Cash capex", val: 5 },
            { year: 2016, company: "Meta", type: "Free Cash Flow", val: 17 }, { year: 2016, company: "Meta", type: "Cash capex", val: 6 },
            { year: 2017, company: "Meta", type: "Free Cash Flow", val: 20 }, { year: 2017, company: "Meta", type: "Cash capex", val: 8 },
            { year: 2018, company: "Meta", type: "Free Cash Flow", val: 22 }, { year: 2018, company: "Meta", type: "Cash capex", val: 14 },
            { year: 2019, company: "Meta", type: "Free Cash Flow", val: 24 }, { year: 2019, company: "Meta", type: "Cash capex", val: 15 },
            { year: 2020, company: "Meta", type: "Free Cash Flow", val: 18 }, { year: 2020, company: "Meta", type: "Cash capex", val: 20 },
            { year: 2021, company: "Meta", type: "Free Cash Flow", val: 39 }, { year: 2021, company: "Meta", type: "Cash capex", val: 18 },
            { year: 2022, company: "Meta", type: "Free Cash Flow", val: 18 }, { year: 2022, company: "Meta", type: "Cash capex", val: 32 },
            { year: 2023, company: "Meta", type: "Free Cash Flow", val: 43 }, { year: 2023, company: "Meta", type: "Cash capex", val: 28 },
            { year: 2024, company: "Meta", type: "Free Cash Flow", val: 52 }, { year: 2024, company: "Meta", type: "Cash capex", val: 37 },
            { year: 2025, company: "Meta", type: "Free Cash Flow", val: 58 }, { year: 2025, company: "Meta", type: "Cash capex", val: 70 },

            { year: 2010, company: "Microsoft", type: "Free Cash Flow", val: 22 }, { year: 2010, company: "Microsoft", type: "Cash capex", val: 2 },
            { year: 2011, company: "Microsoft", type: "Free Cash Flow", val: 25 }, { year: 2011, company: "Microsoft", type: "Cash capex", val: 3 },
            { year: 2012, company: "Microsoft", type: "Free Cash Flow", val: 28 }, { year: 2012, company: "Microsoft", type: "Cash capex", val: 3 },
            { year: 2013, company: "Microsoft", type: "Free Cash Flow", val: 28 }, { year: 2013, company: "Microsoft", type: "Cash capex", val: 3 },
            { year: 2014, company: "Microsoft", type: "Free Cash Flow", val: 22 }, { year: 2014, company: "Microsoft", type: "Cash capex", val: 5 },
            { year: 2015, company: "Microsoft", type: "Free Cash Flow", val: 25 }, { year: 2015, company: "Microsoft", type: "Cash capex", val: 5 },
            { year: 2016, company: "Microsoft", type: "Free Cash Flow", val: 24 }, { year: 2016, company: "Microsoft", type: "Cash capex", val: 8 },
            { year: 2017, company: "Microsoft", type: "Free Cash Flow", val: 27 }, { year: 2017, company: "Microsoft", type: "Cash capex", val: 10 },
            { year: 2018, company: "Microsoft", type: "Free Cash Flow", val: 32 }, { year: 2018, company: "Microsoft", type: "Cash capex", val: 12 },
            { year: 2019, company: "Microsoft", type: "Free Cash Flow", val: 30 }, { year: 2019, company: "Microsoft", type: "Cash capex", val: 15 },
            { year: 2020, company: "Microsoft", type: "Free Cash Flow", val: 40 }, { year: 2020, company: "Microsoft", type: "Cash capex", val: 14 },
            { year: 2021, company: "Microsoft", type: "Free Cash Flow", val: 50 }, { year: 2021, company: "Microsoft", type: "Cash capex", val: 17 },
            { year: 2022, company: "Microsoft", type: "Free Cash Flow", val: 65 }, { year: 2022, company: "Microsoft", type: "Cash capex", val: 19 }, { year: 2022, company: "Microsoft", type: "Leases", val: 2 },
            { year: 2023, company: "Microsoft", type: "Free Cash Flow", val: 60 }, { year: 2023, company: "Microsoft", type: "Cash capex", val: 22 }, { year: 2023, company: "Microsoft", type: "Leases", val: 5 },
            { year: 2024, company: "Microsoft", type: "Free Cash Flow", val: 67 }, { year: 2024, company: "Microsoft", type: "Cash capex", val: 35 }, { year: 2024, company: "Microsoft", type: "Leases", val: 10 },
            { year: 2025, company: "Microsoft", type: "Free Cash Flow", val: 75 }, { year: 2025, company: "Microsoft", type: "Cash capex", val: 80 }, { year: 2025, company: "Microsoft", type: "Leases", val: 40 }
        ];

        document.getElementById("chart-leases").append(Plot.plot({
            width: width,
            height: 300,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                tickFormat: (d) => d % 5 === 0 ? String(d) : "", // Show every 5th year
            },
            y: {
                grid: true,
                label: "$bn",
                nice: true,
                tickSize: 0,
            },
            fx: {
                label: null,
            },
            color: {
                legend: true,
                domain: ["Leases", "Cash capex", "Free Cash Flow"],
                range: ["#ea4335", "#aaa", "#555"]
            },
            marks: [
                Plot.barY(leasesData, {
                    x: "year",
                    y: "val",
                    fill: "type",
                    fx: "company",
                    order: "type", // Stack order
                    title: (d) => `${d.company} ${d.year}\n${d.type}: $${d.val}bn`
                }),
                Plot.ruleY([0])
            ]
        }));

        // Chart: Circular Revenue (D3.js)
        {
            const container = document.getElementById("chart-circular-revenue");
            container.innerHTML = ""; // Clear existing

            const width = container.clientWidth;
            const height = 600;

            const svg = d3.select(container).append("svg")
                .attr("viewBox", [0, 0, width, height])
                .attr("style", "max-width: 100%; height: auto; font: 12px sans-serif;");

            // 1. Data Structure
            const nodes = [
                { id: "Microsoft", x: width * 0.5, y: height * 0.45, color: "#EA7F22" },      // Center-ish (Orange)
                { id: "OpenAI", x: width * 0.5, y: height * 0.15, color: "#88D4F6" },         // Top (Light Blue)
                { id: "Oracle", x: width * 0.15, y: height * 0.45, color: "#55CBAF" },        // Left (Teal)
                { id: "AMD", x: width * 0.2, y: height * 0.75, color: "#EC5887" },            // Bottom-Left (Pink)
                { id: "Nvidia", x: width * 0.5, y: height * 0.85, color: "#297FD5" },         // Bottom (Dark Blue)
                { id: "Data Center Lease", x: width * 0.8, y: height * 0.75, color: "#91AA2F" }, // Bottom-Right (Green)
                { id: "Coreweave", x: width * 0.85, y: height * 0.45, color: "#F6C455" }      // Right (Yellow)
            ];

            const links = [
                // Microsoft -> OpenAI (Investors - Dashed - Left side arc)
                { source: "Microsoft", target: "OpenAI", value: "$13B", type: "Investor", offset: -30 },
                { source: "Microsoft", target: "OpenAI", value: "$14.5B", type: "Investor", offset: -50 },
                { source: "Microsoft", target: "OpenAI", value: "$100B", type: "Investor", offset: -70 },

                // OpenAI -> Microsoft (Rev Share/Customer - Solid/Thick - Right side arc)
                { source: "OpenAI", target: "Microsoft", value: "$5.8B", type: "Revenue Share", offset: 30 },
                { source: "OpenAI", target: "Microsoft", value: "$0.69B", type: "Customer", offset: 50 },

                // Microsoft -> Coreweave (Straight)
                { source: "Microsoft", target: "Coreweave", value: "$10B", type: "Customer", offset: 0 },

                // Microsoft -> Nvidia (Customer - Curves)
                { source: "Microsoft", target: "Nvidia", value: "$33B", type: "Customer", offset: 20 },
                { source: "Microsoft", target: "Nvidia", value: "$82.7B", type: "Customer", offset: 40 },

                // Oracle -> OpenAI (Customer - Wide Left Arc)
                { source: "Oracle", target: "OpenAI", value: "$300B", type: "Customer", offset: -50 },

                // OpenAI -> Coreweave (Top Right Arc)
                { source: "OpenAI", target: "Coreweave", value: "$0.35B", type: "Investor", offset: -40 },
                { source: "OpenAI", target: "Coreweave", value: "$22.4B", type: "Customer", offset: -20 },

                // Oracle -> Nvidia (Left side down)
                { source: "Oracle", target: "Nvidia", value: "$40B", type: "Customer", offset: 30 },
                { source: "Oracle", target: "Data Center Lease", value: "$106.4B", type: "Customer", offset: 40 },

                // Oracle -> AMD (Straight-ish)
                { source: "Oracle", target: "AMD", value: "$0.75B", type: "Customer", offset: 10 },

                // Nvidia -> Coreweave (Investor - Dashed)
                { source: "Nvidia", target: "Coreweave", value: "$2.9B", type: "Investor", offset: -20 },

                // Coreweave -> Nvidia (Customer)
                { source: "Coreweave", target: "Nvidia", value: "$12B", type: "Customer", offset: 20 },

                // Nvidia -> Data Center Lease
                { source: "Nvidia", target: "Data Center Lease", value: "$7.1B", type: "Customer", offset: 0 },

                // Coreweave -> Data Center Lease
                { source: "Coreweave", target: "Data Center Lease", value: "$34B", type: "Customer", offset: 0 },

                // AMD -> OpenAI (Investor - Dashed - Long Left Arc)
                { source: "AMD", target: "OpenAI", value: "$34B", type: "Investor", offset: -60 },
            ];

            // Assign linkNum for multi-edges
            const linkGroups = {};
            links.forEach(l => {
                const id = [l.source, l.target].sort().join("-");
                if (!linkGroups[id]) linkGroups[id] = [];
                linkGroups[id].push(l);
            });

            // Calculate curvature index (0, 1, -1, 2, -2...) centered around 0
            Object.values(linkGroups).forEach(group => {
                const n = group.length;
                group.forEach((l, i) => {
                    l.linkIndex = i - (n - 1) / 2;
                });
            });

            // 2. Definitions (Markers)
            const defs = svg.append("defs");
            nodes.forEach(node => {
                defs.append("marker")
                    .attr("id", `arrow-${node.id.replace(/\s+/g, '')}`)
                    .attr("viewBox", "0 -5 10 10")
                    .attr("refX", 10) // Standard tip offset (UserSpace: Tip is at 10, Line ends at 10)
                    .attr("refY", 0)
                    .attr("markerWidth", 6)
                    .attr("markerHeight", 6)
                    .attr("orient", "auto")
                    .attr("markerUnits", "userSpaceOnUse") // Critical: keep size constant regardless of stroke width
                    .append("path")
                    .attr("d", "M0,-5L10,0L0,5")
                    .attr("fill", node.color);
            });

            // 3. Link Implementation
            const linkData = links.map((l, i) => {
                const s = nodes.find(n => n.id === l.source);
                const t = nodes.find(n => n.id === l.target);
                return { ...l, sourceNode: s, targetNode: t, id: `link-${i}` };
            });

            const linkParams = (d) => {
                const r = 45; // Node radius
                const padding = 2; // Extra padding for arrow tip

                // 1. Calculate Control Point (same as before)
                const mx = (d.sourceNode.x + d.targetNode.x) / 2;
                const my = (d.sourceNode.y + d.targetNode.y) / 2;
                const dx = d.targetNode.x - d.sourceNode.x;
                const dy = d.targetNode.y - d.sourceNode.y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                if (dist === 0) return "";

                const nx = -dy / dist;
                const ny = dx / dist;
                const offset = d.offset !== undefined ? d.offset : 0;

                const cx = mx + nx * offset;
                const cy = my + ny * offset;

                // 2. Calculate Intersection Point at Target (Shorten path)
                // Vector from Control to Target
                let vcx = d.targetNode.x - cx;
                let vcy = d.targetNode.y - cy;

                // Handle straight lines (offset=0, mid to target)
                if (offset === 0) {
                    vcx = d.targetNode.x - d.sourceNode.x;
                    vcy = d.targetNode.y - d.sourceNode.y;
                }

                const vLen = Math.sqrt(vcx * vcx + vcy * vcy);
                // Position arrow tip at radius + padding from center
                const shortDist = r + 8; // 8px for arrow length/padding

                // If path is too short, just draw to center (fallback)
                if (vLen < shortDist) return `M${d.sourceNode.x},${d.sourceNode.y} Q${cx},${cy} ${d.targetNode.x},${d.targetNode.y}`;

                const ratio = shortDist / vLen;
                const tx = d.targetNode.x - vcx * ratio;
                const ty = d.targetNode.y - vcy * ratio;

                return `M${d.sourceNode.x},${d.sourceNode.y} Q${cx},${cy} ${tx},${ty}`;
            };

            const linkPaths = svg.append("g")
                .attr("fill", "none")
                .selectAll("path")
                .data(linkData)
                .join("path")
                .attr("id", d => d.id)
                .attr("d", d => linkParams(d))
                .attr("stroke", d => d.sourceNode.color)
                .attr("stroke-width", d => d.type === "Revenue Share" ? 4 : 2)
                .attr("stroke-dasharray", d => d.type === "Investor" ? "5,5" : null)
                .attr("marker-end", d => `url(#arrow-${d.sourceNode.id.replace(/\s+/g, '')})`);

            // 4. Edge Labels (TextPath)
            const edgeLabels = svg.append("g")
                .selectAll("text")
                .data(linkData)
                .join("text")
                .attr("dy", -5) // Lift off the line slightly
                .append("textPath")
                .attr("href", d => `#${d.id}`)
                .attr("startOffset", "50%")
                .attr("text-anchor", "middle")
                .style("fill", "#000") // Text color
                .style("font-weight", "bold")
                .style("stroke", "white")
                .style("stroke-width", 3)
                .style("paint-order", "stroke") // Stroke behind fill
                .text(d => d.value);

            // 5. Nodes
            const nodeGroup = svg.append("g")
                .selectAll("g")
                .data(nodes)
                .join("g")
                .attr("transform", d => `translate(${d.x},${d.y})`);

            nodeGroup.append("circle")
                .attr("r", 45)
                .attr("fill", d => d.color)
                .attr("stroke", "#fff")
                .attr("stroke-width", 2);

            nodeGroup.append("text")
                .attr("dy", "0.35em")
                .attr("text-anchor", "middle")
                .attr("fill", "#000") // Per prompt "black or dark grey"
                .style("font-weight", "bold")
                .style("pointer-events", "none") // Let clicks pass
                .text(d => d.id)
                .call(text => text.filter(d => d.id.includes(" ")).text(d => "")) // Clear complex ones
                .filter(d => d.id.includes(" ")) // Handle multi-line
                .each(function (d) {
                    const words = d.id.split(/\s+/);
                    d3.select(this).append("tspan").attr("x", 0).attr("dy", "-0.6em").text(words[0]);
                    d3.select(this).append("tspan").attr("x", 0).attr("dy", "1.2em").text(words.slice(1).join(" "));
                });

            // 6. Legend
            const legend = svg.append("g")
                .attr("transform", "translate(20, 20)");

            const legendItems = [
                { label: "Customer", type: "Customer" },
                { label: "Investor", type: "Investor" },
                { label: "Revenue Share", type: "Revenue Share" }
            ];

            legendItems.forEach((item, i) => {
                const g = legend.append("g").attr("transform", `translate(0, ${i * 25})`);

                g.append("line")
                    .attr("x1", 0).attr("x2", 40).attr("y1", 0).attr("y2", 0)
                    .attr("stroke", "#333")
                    .attr("stroke-width", item.type === "Revenue Share" ? 4 : 2)
                    .attr("stroke-dasharray", item.type === "Investor" ? "5,5" : null);

                g.append("text")
                    .attr("x", 50)
                    .attr("y", 4)
                    .text(item.label)
                    .style("font-weight", "bold");
            });
        }


        // Chart: DC Constraints
        const constraintsData = [
            { type: "Utility power", level: "Extremely significant", val: 40 },
            { type: "Utility power", level: "Very significant", val: 33 },
            { type: "Utility power", level: "Somewhat significant", val: 19 },

            { type: "Access to chips", level: "Extremely significant", val: 32 },
            { type: "Access to chips", level: "Very significant", val: 34 },
            { type: "Access to chips", level: "Somewhat significant", val: 15 },

            { type: "Fibre", level: "Extremely significant", val: 26 },
            { type: "Fibre", level: "Very significant", val: 33 },
            { type: "Fibre", level: "Somewhat significant", val: 26 },

            { type: "Permitting", level: "Extremely significant", val: 26 },
            { type: "Permitting", level: "Very significant", val: 30 },
            { type: "Permitting", level: "Somewhat significant", val: 30 },

            { type: "Water availability", level: "Extremely significant", val: 21 },
            { type: "Water availability", level: "Very significant", val: 20 },
            { type: "Water availability", level: "Somewhat significant", val: 32 },

            { type: "Access to natural gas", level: "Extremely significant", val: 19 },
            { type: "Access to natural gas", level: "Very significant", val: 23 },
            { type: "Access to natural gas", level: "Somewhat significant", val: 34 },

            { type: "Land", level: "Extremely significant", val: 17 },
            { type: "Land", level: "Very significant", val: 30 },
            { type: "Land", level: "Somewhat significant", val: 27 },

            { type: "Public opposition", level: "Extremely significant", val: 16 },
            { type: "Public opposition", level: "Very significant", val: 25 },
            { type: "Public opposition", level: "Somewhat significant", val: 33 }
        ];

        document.getElementById("chart-constraints").append(Plot.plot({
            width: width,
            height: 350,
            marginRight: 0,
            marginBottom: 70,
            style: {
                fontFamily: fontFamily,
                fontSize: size,
            },
            x: {
                label: null,
                nice: true,
                tickSize: 0,
                tickRotate: -45,
                domain: ["Utility power", "Access to chips", "Fibre", "Permitting", "Water availability", "Access to natural gas", "Land", "Public opposition"]
            },
            y: {
                grid: true,
                percent: null,
                label: null,
                nice: true,
                ticks: 4,
                tickSize: 0,
                tickFormat: (d) => `${d}%`
            },
            color: {
                legend: true,
                domain: ["Extremely significant", "Very significant", "Somewhat significant"],
                range: ["#ea4335", "#f4b4b4", "#757575"]
            },
            marks: [
                Plot.barY(constraintsData, {
                    x: "type",
                    y: "val",
                    fill: "level",
                    tip: true,
                    order: "level", // Stack order
                    title: (d) => `${d.type}\n${d.level}: ${d.val}%`
                })
            ]
        }));

        // Chart 5: Nvidia Revenue
        const revenueData = [
            // Intel Data
            { date: new Date("2000-01-01"), company: "Intel", revenue: 8.0 },
            { date: new Date("2001-01-01"), company: "Intel", revenue: 6.5 },
            { date: new Date("2002-01-01"), company: "Intel", revenue: 7.0 },
            { date: new Date("2003-01-01"), company: "Intel", revenue: 7.5 },
            { date: new Date("2004-01-01"), company: "Intel", revenue: 8.0 },
            { date: new Date("2005-01-01"), company: "Intel", revenue: 9.0 },
            { date: new Date("2006-01-01"), company: "Intel", revenue: 8.0 },
            { date: new Date("2007-06-01"), company: "Intel", revenue: 10.0 },
            { date: new Date("2008-01-01"), company: "Intel", revenue: 9.5 },
            { date: new Date("2009-01-01"), company: "Intel", revenue: 7.0 },
            { date: new Date("2010-06-01"), company: "Intel", revenue: 10.5 },
            { date: new Date("2011-06-01"), company: "Intel", revenue: 13.0 },
            { date: new Date("2012-06-01"), company: "Intel", revenue: 13.5 },
            { date: new Date("2013-06-01"), company: "Intel", revenue: 13.0 },
            { date: new Date("2014-06-01"), company: "Intel", revenue: 13.8 },
            { date: new Date("2015-06-01"), company: "Intel", revenue: 14.0 },
            { date: new Date("2016-06-01"), company: "Intel", revenue: 15.0 },
            { date: new Date("2017-06-01"), company: "Intel", revenue: 16.0 },
            { date: new Date("2018-06-01"), company: "Intel", revenue: 17.0 },
            { date: new Date("2019-06-01"), company: "Intel", revenue: 16.0 },
            { date: new Date("2020-01-01"), company: "Intel", revenue: 20.0 },
            { date: new Date("2021-06-01"), company: "Intel", revenue: 19.5 },
            { date: new Date("2022-01-01"), company: "Intel", revenue: 19.0 },
            { date: new Date("2022-06-01"), company: "Intel", revenue: 15.3 },
            { date: new Date("2023-01-01"), company: "Intel", revenue: 11.7 },
            { date: new Date("2023-06-01"), company: "Intel", revenue: 12.9 },
            { date: new Date("2024-01-01"), company: "Intel", revenue: 13.0 },
            { date: new Date("2024-06-01"), company: "Intel", revenue: 13.5 },
            { date: new Date("2025-01-01"), company: "Intel", revenue: 13.0 },

            // Nvidia Data
            { date: new Date("2000-01-01"), company: "Nvidia", revenue: 0.1 },
            { date: new Date("2005-01-01"), company: "Nvidia", revenue: 0.5 },
            { date: new Date("2010-01-01"), company: "Nvidia", revenue: 1.0 },
            { date: new Date("2015-01-01"), company: "Nvidia", revenue: 1.2 },
            { date: new Date("2016-01-01"), company: "Nvidia", revenue: 1.5 },
            { date: new Date("2017-01-01"), company: "Nvidia", revenue: 2.5 },
            { date: new Date("2018-01-01"), company: "Nvidia", revenue: 3.2 },
            { date: new Date("2019-01-01"), company: "Nvidia", revenue: 2.2 },
            { date: new Date("2020-01-01"), company: "Nvidia", revenue: 3.0 },
            { date: new Date("2021-01-01"), company: "Nvidia", revenue: 5.0 },
            { date: new Date("2021-06-01"), company: "Nvidia", revenue: 6.5 },
            { date: new Date("2022-01-01"), company: "Nvidia", revenue: 8.2 },
            { date: new Date("2022-06-01"), company: "Nvidia", revenue: 6.7 },
            { date: new Date("2023-01-01"), company: "Nvidia", revenue: 6.0 },
            { date: new Date("2023-04-01"), company: "Nvidia", revenue: 7.2 },
            { date: new Date("2023-07-01"), company: "Nvidia", revenue: 13.5 },
            { date: new Date("2023-10-01"), company: "Nvidia", revenue: 18.1 },
            { date: new Date("2024-01-01"), company: "Nvidia", revenue: 22.1 },
            { date: new Date("2024-04-01"), company: "Nvidia", revenue: 26.0 },
            { date: new Date("2024-07-01"), company: "Nvidia", revenue: 30.0 },
            { date: new Date("2024-10-01"), company: "Nvidia", revenue: 35.1 },
            { date: new Date("2025-01-01"), company: "Nvidia", revenue: 45.0 },
            { date: new Date("2025-04-01"), company: "Nvidia", revenue: 58.0 } // Estimated top of chart
        ];

        document.getElementById("chart-nvidia").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: "Quarterly Revenue ($bn)",
                nice: true,
                ticks: 6,
                tickSize: 0,
            },
            x: {
                label: null,
                tickFormat: "%Y",
                nice: true,
                tickSize: 0,
            },
            color: {
                legend: true,
                domain: ["Intel", "Nvidia"],
                range: ["#444", "#ea4335"] // Dark Grey for Intel, Red for Nvidia
            },
            marks: [
                Plot.line(revenueData, {
                    x: "date",
                    y: "revenue",
                    stroke: "company",
                    strokeWidth: 3,
                    curve: "monotone-x"
                }),
                Plot.tip(revenueData, Plot.pointerX({
                    x: "date",
                    y: "revenue",
                    stroke: "company"
                }))
            ]
        }));

        // Chart: TSMC vs Nvidia vs Intel
        const tsmcData = [
            ...revenueData,
            // TSMC Data
            { date: new Date("2000-01-01"), company: "TSMC", revenue: 1.5 },
            { date: new Date("2001-01-01"), company: "TSMC", revenue: 1.2 },
            { date: new Date("2002-01-01"), company: "TSMC", revenue: 1.6 },
            { date: new Date("2003-01-01"), company: "TSMC", revenue: 1.8 },
            { date: new Date("2004-01-01"), company: "TSMC", revenue: 2.3 },
            { date: new Date("2005-01-01"), company: "TSMC", revenue: 2.5 },
            { date: new Date("2006-01-01"), company: "TSMC", revenue: 2.8 },
            { date: new Date("2007-01-01"), company: "TSMC", revenue: 3.0 },
            { date: new Date("2008-01-01"), company: "TSMC", revenue: 3.2 },
            { date: new Date("2009-01-01"), company: "TSMC", revenue: 2.5 },
            { date: new Date("2010-01-01"), company: "TSMC", revenue: 3.8 },
            { date: new Date("2011-01-01"), company: "TSMC", revenue: 4.2 },
            { date: new Date("2012-01-01"), company: "TSMC", revenue: 4.8 },
            { date: new Date("2013-01-01"), company: "TSMC", revenue: 5.2 },
            { date: new Date("2014-01-01"), company: "TSMC", revenue: 6.0 },
            { date: new Date("2015-01-01"), company: "TSMC", revenue: 7.5 },
            { date: new Date("2016-01-01"), company: "TSMC", revenue: 8.5 },
            { date: new Date("2017-01-01"), company: "TSMC", revenue: 9.0 },
            { date: new Date("2018-01-01"), company: "TSMC", revenue: 9.5 },
            { date: new Date("2019-01-01"), company: "TSMC", revenue: 10.5 },
            { date: new Date("2020-01-01"), company: "TSMC", revenue: 12.5 },
            { date: new Date("2021-01-01"), company: "TSMC", revenue: 15.0 },
            { date: new Date("2022-01-01"), company: "TSMC", revenue: 19.5 },
            { date: new Date("2023-01-01"), company: "TSMC", revenue: 16.5 },
            { date: new Date("2023-06-01"), company: "TSMC", revenue: 17.0 },
            { date: new Date("2024-01-01"), company: "TSMC", revenue: 19.5 },
            { date: new Date("2024-06-01"), company: "TSMC", revenue: 23.0 },
            { date: new Date("2024-10-01"), company: "TSMC", revenue: 26.5 },
            { date: new Date("2025-01-01"), company: "TSMC", revenue: 29.5 }
        ];

        document.getElementById("chart-tsmc").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: "Quarterly Revenue ($bn)",
                nice: true,
                ticks: 6,
                tickSize: 0,
            },
            x: {
                label: null,
                tickFormat: "%Y",
                nice: true,
                tickSize: 0,
            },
            color: {
                legend: true,
                domain: ["Intel", "Nvidia", "TSMC"],
                range: ["#444", "#ea4335", "#ea4335"] // Dark Grey, Red, Red (for dashed)
            },
            marks: [
                Plot.line(tsmcData.filter(d => d.company !== "TSMC"), {
                    x: "date",
                    y: "revenue",
                    stroke: "company",
                    strokeWidth: 3,
                    curve: "monotone-x"
                }),
                Plot.line(tsmcData.filter(d => d.company === "TSMC"), {
                    x: "date",
                    y: "revenue",
                    stroke: "company",
                    strokeWidth: 3,
                    curve: "monotone-x",
                    strokeDasharray: "5,5"
                }),
                Plot.tip(tsmcData, Plot.pointerX({
                    x: "date",
                    y: "revenue",
                    stroke: "company"
                }))
            ]
        }));

        // Chart 6: ChatGPT Growth
        const gptData = [{
            date: new Date("2022-11-30"),
            users: 0
        }, {
            date: new Date("2023-01-31"),
            users: 100
        }, {
            date: new Date("2023-11-01"),
            users: 100
        }, {
            date: new Date("2024-08-01"),
            users: 200
        }, {
            date: new Date("2024-10-01"),
            users: 250
        }, {
            date: new Date("2024-12-01"),
            users: 300
        }, {
            date: new Date("2025-02-01"),
            users: 400
        }, {
            date: new Date("2025-11-01"),
            users: 800
        }];

        document.getElementById("chart-chatgpt-growth").append(Plot.plot({
            width: width,
            height: 250,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: "Weekly Active Users (m)",
                nice: true,
                ticks: 4,
                tickSize: 0,
            },
            x: {
                label: null,
                tickFormat: "%Y",
                nice: true,
                tickSize: 0,
            },
            marks: [
                Plot.line(gptData, {
                    x: "date",
                    y: "users",
                    stroke: colorAccent,
                    strokeWidth: 3
                }),
                Plot.dot(gptData, {
                    x: "date",
                    y: "users",
                    fill: colorAccent
                }),
                Plot.tip(gptData, Plot.pointerX({
                    x: "date",
                    y: "users"
                }))
            ]
        }));

        // Chart: Engagement Gap
        const engagementData = [
            // USA
            { location: "USA", year: "2023", freq: "Monthly", val: 13, rank: 3 },
            { location: "USA", year: "2023", freq: "Weekly", val: 1, rank: 2 },
            { location: "USA", year: "2023", freq: "Daily", val: 2, rank: 1 },
            { location: "USA", year: "2024", freq: "Monthly", val: 27, rank: 3 },
            { location: "USA", year: "2024", freq: "Weekly", val: 4, rank: 2 },
            { location: "USA", year: "2024", freq: "Daily", val: 4, rank: 1 },
            { location: "USA", year: "2025", freq: "Monthly", val: 33, rank: 3 },
            { location: "USA", year: "2025", freq: "Weekly", val: 8, rank: 2 },
            { location: "USA", year: "2025", freq: "Daily", val: 10, rank: 1 },

            // UK
            { location: "UK", year: "2023", freq: "Monthly", val: 9, rank: 3 },
            { location: "UK", year: "2023", freq: "Weekly", val: 7, rank: 2 },
            { location: "UK", year: "2023", freq: "Daily", val: 2, rank: 1 },
            { location: "UK", year: "2024", freq: "Monthly", val: 13, rank: 3 },
            { location: "UK", year: "2024", freq: "Weekly", val: 9, rank: 2 },
            { location: "UK", year: "2024", freq: "Daily", val: 4, rank: 1 },
            { location: "UK", year: "2025", freq: "Monthly", val: 15, rank: 3 },
            { location: "UK", year: "2025", freq: "Weekly", val: 15, rank: 2 },
            { location: "UK", year: "2025", freq: "Daily", val: 6, rank: 1 },
        ];

        document.getElementById("chart-engagement").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: null,
                domain: [0, 60],
                nice: true,
                ticks: 4,
                tickSize: 0,
                tickFormat: (d) => `${d}%`
            },
            x: {
                type: "band",
                label: null,
                padding: 0.3
            },
            fx: {
                label: null,
                padding: 0.05
            },
            color: {
                legend: true,
                domain: ["Monthly", "Weekly", "Daily"],
                range: ["#757575", "#555", "#ea4335"] // Light Grey, Dark Grey, Red
            },
            marks: [
                Plot.barY(engagementData, {
                    x: "year",
                    y: "val",
                    fill: "freq",
                    fx: "location",
                    order: "rank",
                    tip: true,
                    title: (d) => `${d.location} ${d.year}\n${d.freq}: ${d.val}%`
                })
            ]
        }));

        // Chart: Global Usage (Recreated Reuters source)
        const globalUsageData = [
            // USA
            { country: "USA", tool: "ChatGPT", usage: 0.22 },
            { country: "USA", tool: "Google Gemini", usage: 0.15 },
            { country: "USA", tool: "Meta AI", usage: 0.11 },
            { country: "USA", tool: "Microsoft Copilot", usage: 0.08 },
            { country: "USA", tool: "Grok", usage: 0.04 },
            { country: "USA", tool: "Claude", usage: 0.02 },

            { country: "UK", tool: "ChatGPT", usage: 0.17 },
            { country: "UK", tool: "Google Gemini", usage: 0.06 },
            { country: "UK", tool: "Meta AI", usage: 0.08 },
            { country: "UK", tool: "Microsoft Copilot", usage: 0.06 },
            { country: "UK", tool: "Grok", usage: 0.01 },
            { country: "UK", tool: "Claude", usage: 0.01 },

            { country: "France", tool: "ChatGPT", usage: 0.18 },
            { country: "France", tool: "Google Gemini", usage: 0.08 },
            { country: "France", tool: "Meta AI", usage: 0.04 },
            { country: "France", tool: "Microsoft Copilot", usage: 0.05 },
            { country: "France", tool: "Grok", usage: 0.01 },
            { country: "France", tool: "Claude", usage: 0.01 },

            { country: "Denmark", tool: "ChatGPT", usage: 0.28 },
            { country: "Denmark", tool: "Google Gemini", usage: 0.07 },
            { country: "Denmark", tool: "Meta AI", usage: 0.03 },
            { country: "Denmark", tool: "Microsoft Copilot", usage: 0.06 },
            { country: "Denmark", tool: "Grok", usage: 0.01 },
            { country: "Denmark", tool: "Claude", usage: 0.00 },

            { country: "Japan", tool: "ChatGPT", usage: 0.16 },
            { country: "Japan", tool: "Google Gemini", usage: 0.13 },
            { country: "Japan", tool: "Meta AI", usage: 0.04 },
            { country: "Japan", tool: "Microsoft Copilot", usage: 0.07 },
            { country: "Japan", tool: "Grok", usage: 0.03 },
            { country: "Japan", tool: "Claude", usage: 0.02 },
        ];

        document.getElementById("chart-global-usage").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                axis: null,
                domain: ["ChatGPT", "Google Gemini", "Meta AI", "Microsoft Copilot", "Grok", "Claude"]
            },
            fx: {
                label: null,
                domain: ["USA", "UK", "France", "Denmark", "Japan"]
            },
            y: {
                grid: true,
                label: null,
                tickFormat: ".0%",
                nice: true,
                tickSize: 0,
                ticks: 4,
            },
            color: {
                legend: true,
                domain: ["ChatGPT", "Google Gemini", "Meta AI", "Microsoft Copilot", "Grok", "Claude"],
                range: ["#ea4335", "#000", "#444", "#999", "#ddd", "#f4b4b4"]
            },
            marks: [
                Plot.barY(globalUsageData, {
                    x: "tool",
                    y: "usage",
                    fx: "country",
                    fill: "tool",
                    tip: true,
                    title: (d) => `${d.tool}: ${(d.usage * 100).toFixed(0)}%`
                })
            ]
        }));

        // Chart: Model Proliferation
        const proliferationData = [
            // OpenAI (Red)
            { date: new Date("2022-11-30"), model: "ChatGPT (GPT-3.5)", company: "OpenAI", score: 50 },
            { date: new Date("2023-03-14"), model: "GPT-4", company: "OpenAI", score: 73 },
            { date: new Date("2023-11-06"), model: "GPT-4 Turbo", company: "OpenAI", score: 75 },
            { date: new Date("2024-05-13"), model: "GPT-4o", company: "OpenAI", score: 80 },
            { date: new Date("2024-09-12"), model: "o1-preview", company: "OpenAI", score: 82 },
            { date: new Date("2024-12-05"), model: "o1", company: "OpenAI", score: 85 },
            { date: new Date("2025-01-31"), model: "o3-mini", company: "OpenAI", score: 87 },
            { date: new Date("2025-02-15"), model: "GPT-4.5", company: "OpenAI", score: 88 },
            { date: new Date("2025-04-10"), model: "o3-pro", company: "OpenAI", score: 90 },
            { date: new Date("2025-05-20"), model: "o4-mini", company: "OpenAI", score: 86 },
            { date: new Date("2025-08-15"), model: "GPT-5", company: "OpenAI", score: 92 },
            { date: new Date("2025-10-10"), model: "GPT-5.1", company: "OpenAI", score: 94 },

            // Google
            { date: new Date("2022-04-04"), model: "PaLM", company: "Google", score: 35 },
            { date: new Date("2023-05-10"), model: "PaLM 2", company: "Google", score: 60 },
            { date: new Date("2023-12-06"), model: "Gemini 1.0 Pro", company: "Google", score: 68 },
            { date: new Date("2024-02-08"), model: "Gemini 1.0 Ultra", company: "Google", score: 72 },
            { date: new Date("2024-02-21"), model: "Gemma", company: "Google", score: 45 },
            { date: new Date("2024-02-15"), model: "Gemini 1.5 Pro", company: "Google", score: 78 },
            { date: new Date("2024-06-27"), model: "Gemma 2", company: "Google", score: 65 },
            { date: new Date("2024-12-15"), model: "Gemini 2.0", company: "Google", score: 84 },
            { date: new Date("2025-04-01"), model: "Gemma 3", company: "Google", score: 75 },
            { date: new Date("2025-06-15"), model: "Gemini 2.5", company: "Google", score: 89 },

            // Meta
            { date: new Date("2022-05-03"), model: "OPT", company: "Meta", score: 25 },
            { date: new Date("2023-02-24"), model: "LLaMA 1", company: "Meta", score: 40 },
            { date: new Date("2023-07-18"), model: "Llama 2", company: "Meta", score: 62 },
            { date: new Date("2024-04-18"), model: "Llama 3", company: "Meta", score: 74 },
            { date: new Date("2024-07-23"), model: "Llama 3.1", company: "Meta", score: 79 },
            { date: new Date("2024-09-25"), model: "Llama 3.2", company: "Meta", score: 70 },
            { date: new Date("2025-04-15"), model: "Llama 4 Scout", company: "Meta", score: 83 },
            { date: new Date("2025-08-01"), model: "Llama 4 Maverick", company: "Meta", score: 88 },

            // Anthropic
            { date: new Date("2023-03-14"), model: "Claude 1", company: "Anthropic", score: 55 },
            { date: new Date("2023-07-11"), model: "Claude 2", company: "Anthropic", score: 68 },
            { date: new Date("2024-03-04"), model: "Claude 3 Opus", company: "Anthropic", score: 77 },
            { date: new Date("2024-06-21"), model: "Claude 3.5 Sonnet", company: "Anthropic", score: 81 },
            { date: new Date("2024-11-15"), model: "Claude 3.5 Opus", company: "Anthropic", score: 83 },
            { date: new Date("2025-03-01"), model: "Claude 4", company: "Anthropic", score: 89 },
            { date: new Date("2025-09-01"), model: "Claude 4.5", company: "Anthropic", score: 91 },

            // Mistral
            { date: new Date("2023-09-27"), model: "Mistral 7B", company: "Mistral", score: 52 },
            { date: new Date("2023-12-11"), model: "Mixtral 8x7B", company: "Mistral", score: 65 },
            { date: new Date("2024-02-26"), model: "Mistral Large", company: "Mistral", score: 72 },
            { date: new Date("2024-07-24"), model: "Mistral Large 2", company: "Mistral", score: 76 },

            // Others
            { date: new Date("2022-07-12"), model: "BLOOM", company: "Other", score: 38 },
            { date: new Date("2023-05-25"), model: "Falcon 40B", company: "Other", score: 48 },
            { date: new Date("2023-09-06"), model: "Falcon 180B", company: "Other", score: 60 },
            { date: new Date("2023-11-06"), model: "Yi-34B", company: "Other", score: 63 },
            { date: new Date("2023-11-30"), model: "Qwen-72B", company: "Other", score: 66 },
            { date: new Date("2024-03-17"), model: "Grok-1", company: "Other", score: 58 },
            { date: new Date("2024-03-27"), model: "DBRX", company: "Other", score: 64 },
            { date: new Date("2024-05-06"), model: "DeepSeek-V2", company: "Other", score: 71 },
            { date: new Date("2024-06-07"), model: "Qwen 2", company: "Other", score: 75 },
            { date: new Date("2024-08-14"), model: "Grok-2", company: "Other", score: 73 },
            { date: new Date("2025-01-20"), model: "DeepSeek-R1", company: "Other", score: 82 },
            { date: new Date("2025-02-01"), model: "Grok 3", company: "Other", score: 83 },
            { date: new Date("2025-05-01"), model: "DeepSeek-V3", company: "Other", score: 85 },
            { date: new Date("2025-07-01"), model: "Qwen 3", company: "Other", score: 87 },
            { date: new Date("2025-07-15"), model: "Grok 4", company: "Other", score: 89 },
            { date: new Date("2025-07-20"), model: "Kimi K2", company: "Other", score: 84 }
        ];

        document.getElementById("chart-model-proliferation").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size,
                overflow: "visible"
            },
            x: {
                label: null,
                ticks: "6 months",
                tickFormat: "%b %Y"
            },
            y: {
                grid: true,
                label: "Artificial Analysis Intelligence Index",
                domain: [20, 100],
                nice: true,
                tickSize: 0,
                ticks: 4,
            },
            color: {
                legend: true,
                domain: ["OpenAI", "All others"],
                range: ["#ea4335", "#555"]
            },
            marks: [
                Plot.dot(proliferationData, {
                    x: "date",
                    y: "score",
                    fill: (d) => d.company === "OpenAI" ? "OpenAI" : "All others",
                    opacity: (d) => d.company === "OpenAI" ? 1 : 0.7,
                    r: (d) => d.company === "OpenAI" ? 8 : 6,
                    title: (d) => `${d.model}\n${d.company}\n${d.date.toLocaleDateString()}\nScore: ${d.score}`
                }),
                Plot.text(proliferationData.filter(d => ["ChatGPT (GPT-3.5)", "GPT-4", "GPT-4o", "o1", "GPT-5"].includes(d.model)), {
                    x: "date",
                    y: "score",
                    text: "model",
                    dy: -12,
                    fill: "#333",
                    stroke: "#fafafa",
                    strokeWidth: 3,
                    fontSize: 13,
                    fontWeight: 500
                }),
                Plot.tip(proliferationData, Plot.pointer({
                    x: "date",
                    y: "score",
                    title: (d) => `${d.model}\n${d.company}\n${d.date.toLocaleDateString()}\nScore: ${d.score}`
                }))
            ]
        }));

        // Chart: Model Convergence
        const modelData = [
            // LMArena Text
            { category: "LMArena Text", company: "Anthropic", score: 100, rank: 1 },
            { category: "LMArena Text", company: "Google", score: 99.8, rank: 2 },
            { category: "LMArena Text", company: "OpenAI", score: 99.2, rank: 3 },
            { category: "LMArena Text", company: "Other: China", score: 98.7, rank: 4 },
            { category: "LMArena Text", company: "Other: China", score: 98.2, rank: 5 },
            { category: "LMArena Text", company: "Other: Western", score: 97.9, rank: 6 },
            { category: "LMArena Text", company: "Other: China", score: 97.5, rank: 7 },
            { category: "LMArena Text", company: "Other: Western", score: 97.2, rank: 8 },
            { category: "LMArena Text", company: "Other: Western", score: 96.0, rank: 9 },

            // MMLU-Pro
            { category: "MMLU-Pro", company: "Anthropic", score: 100, rank: 1 },
            { category: "MMLU-Pro", company: "OpenAI", score: 99.1, rank: 2 },
            { category: "MMLU-Pro", company: "Other: Western", score: 98.4, rank: 3 },
            { category: "MMLU-Pro", company: "Google", score: 97.8, rank: 4 },
            { category: "MMLU-Pro", company: "Other: China", score: 96.5, rank: 5 },
            { category: "MMLU-Pro", company: "Other: China", score: 95.9, rank: 6 },
            { category: "MMLU-Pro", company: "Other: China", score: 94.2, rank: 7 },
            { category: "MMLU-Pro", company: "Other: Western", score: 93.0, rank: 8 },
            { category: "MMLU-Pro", company: "Other: Western", score: 92.2, rank: 9 },
        ];

        document.getElementById("chart-model-convergence").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size,
            },
            fx: {
                label: null,
                // padding: 0.2
            },
            x: {
                axis: null,
                // padding: 0.1
            },
            y: {
                grid: true,
                ticks: 3,
                nice: true,
                domain: [90, 100],
                label: null,
                tickFormat: (d) => `${d}%`
            },
            color: {
                legend: true,
                domain: ["Anthropic", "Google", "OpenAI", "Other: China", "Other: Western"],
                range: ["#ea4335", "#333", "#666", "#ccc", "#f4b4b4"]
            },
            marks: [
                Plot.barY(modelData, {
                    x: "rank",
                    y: "score",
                    fx: "category",
                    fill: "company",
                    tip: true,
                    y1: 90, // Fix overflow by setting baseline to matches domain min
                    title: (d) => `${d.company}: ${d.score}%`
                }),
            ]
        }));

        // Chart 7: How Couples Meet
        const couplesData = [
            // Online
            {
                year: 1980,
                method: "Online",
                val: 0.0
            },
            {
                year: 1990,
                method: "Online",
                val: 0.01
            },
            {
                year: 1995,
                method: "Online",
                val: 0.02
            },
            {
                year: 2000,
                method: "Online",
                val: 0.10
            },
            {
                year: 2005,
                method: "Online",
                val: 0.20
            },
            {
                year: 2010,
                method: "Online",
                val: 0.25
            },
            {
                year: 2017,
                method: "Online",
                val: 0.40
            },
            {
                year: 2020,
                method: "Online",
                val: 0.50
            },
            {
                year: 2024,
                method: "Online",
                val: 0.55
            },
            // Friends
            {
                year: 1940,
                method: "Friends",
                val: 0.20
            },
            {
                year: 1950,
                method: "Friends",
                val: 0.25
            },
            {
                year: 1960,
                method: "Friends",
                val: 0.30
            },
            {
                year: 1970,
                method: "Friends",
                val: 0.32
            },
            {
                year: 1980,
                method: "Friends",
                val: 0.33
            },
            {
                year: 1990,
                method: "Friends",
                val: 0.34
            },
            {
                year: 2000,
                method: "Friends",
                val: 0.30
            },
            {
                year: 2010,
                method: "Friends",
                val: 0.25
            },
            {
                year: 2017,
                method: "Friends",
                val: 0.20
            },
            {
                year: 2024,
                method: "Friends",
                val: 0.15
            },
            // Work
            {
                year: 1940,
                method: "Work",
                val: 0.15
            },
            {
                year: 1960,
                method: "Work",
                val: 0.15
            },
            {
                year: 1980,
                method: "Work",
                val: 0.20
            },
            {
                year: 1990,
                method: "Work",
                val: 0.21
            },
            {
                year: 2000,
                method: "Work",
                val: 0.18
            },
            {
                year: 2010,
                method: "Work",
                val: 0.15
            },
            {
                year: 2024,
                method: "Work",
                val: 0.10
            },
            // Bar/Restaurant
            {
                year: 1940,
                method: "Bar/Restaurant",
                val: 0.05
            },
            {
                year: 1960,
                method: "Bar/Restaurant",
                val: 0.08
            },
            {
                year: 1980,
                method: "Bar/Restaurant",
                val: 0.12
            },
            {
                year: 2000,
                method: "Bar/Restaurant",
                val: 0.11
            },
            {
                year: 2010,
                method: "Bar/Restaurant",
                val: 0.10
            },
            {
                year: 2024,
                method: "Bar/Restaurant",
                val: 0.07
            },
            // Family
            {
                year: 1940,
                method: "Family",
                val: 0.25
            },
            {
                year: 1960,
                method: "Family",
                val: 0.15
            },
            {
                year: 1980,
                method: "Family",
                val: 0.10
            },
            {
                year: 2000,
                method: "Family",
                val: 0.07
            },
            {
                year: 2024,
                method: "Family",
                val: 0.05
            },
            // School/College
            {
                year: 1940,
                method: "School",
                val: 0.20
            },
            {
                year: 1960,
                method: "School",
                val: 0.18
            },
            {
                year: 1980,
                method: "School",
                val: 0.15
            },
            {
                year: 2000,
                method: "School",
                val: 0.14
            },
            {
                year: 2024,
                method: "School",
                val: 0.10
            }
        ];

        document.getElementById("chart-couples").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                tickFormat: ".0%",
                label: "% of Couples",
                tickSize: 0,
                nice: true,
                ticks: 6
            },
            x: {
                tickFormat: "d",
                nice: true,
            },
            color: {
                legend: true,
                domain: ["Online", "Friends", "Work", "Bar/Restaurant", "School", "Family"],
                range: [colorAccent, "#555", "#777", "#999", "#bbb", "#ddd"]
            },
            marks: [
                Plot.line(couplesData, {
                    x: "year",
                    y: "val",
                    stroke: "method",
                    strokeWidth: (d) => d.method === "Online" ? 4 : 2,
                    curve: "natural"
                }),
                Plot.text(couplesData, Plot.selectLast({
                    x: "year",
                    y: "val",
                    text: "method",
                    textAnchor: "start",
                    dx: 5,
                    fill: (d) => d.method === "Online" ? colorAccent : "#777"
                }))
            ]
        }));



        // Chart 13: Steam Engines
        const steamData = [{
            year: 1840,
            type: "Human Pop.",
            val: 27
        }, {
            year: 1840,
            type: "Steam Equiv.",
            val: 10
        }, {
            year: 1870,
            type: "Human Pop.",
            val: 31
        }, {
            year: 1870,
            type: "Steam Equiv.",
            val: 80
        }, {
            year: 1896,
            type: "Human Pop.",
            val: 40
        }, {
            year: 1896,
            type: "Steam Equiv.",
            val: 270
        }];

        document.getElementById("chart-steam").append(Plot.plot({
            width: width,
            height: 300,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: "Millions",
                nice: true
            },
            x: {
                type: "band",
                tickFormat: "d",
                label: null
            },
            color: {
                legend: true,
                domain: ["Human Pop.", "Steam Equiv."],
                range: ["#555", colorAccent]
            },
            marks: [
                Plot.barY(steamData, {
                    x: "year",
                    y: "val",
                    fill: "type",
                    fx: "year",
                    sort: {
                        color: null,
                        domain: ["Human Pop.", "Steam Equiv."]
                    }
                }),
                Plot.text(steamData, {
                    x: "year",
                    y: "val",
                    text: "val",
                    fx: "year",
                    dy: -5,
                    fill: "black"
                })
            ]
        }));

        // Chart 8: Elevator Operators
        const elevatorData = [{
            year: 1870,
            count: 500
        }, {
            year: 1900,
            count: 12000
        }, {
            year: 1920,
            count: 45000
        }, {
            year: 1950,
            count: 114000
        }, {
            year: 1970,
            count: 40000
        }, {
            year: 1990,
            count: 2000
        }];

        document.getElementById("chart-elevators").append(Plot.plot({
            width: width,
            height: 200,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: "Elevator Operators",
                nice: true
            },
            x: {
                tickFormat: "d"
            },
            marks: [
                Plot.line(elevatorData, {
                    x: "year",
                    y: "count",
                    stroke: colorAccent,
                    strokeWidth: 3,
                    curve: "natural"
                }),
                Plot.areaY(elevatorData, {
                    x: "year",
                    y: "count",
                    fill: colorAccent,
                    fillOpacity: 0.2,
                    curve: "natural"
                })
            ]
        }));

        const skuData = [{
            year: 1955,
            skus: 3000
        },
        {
            year: 1960,
            skus: 6000
        },
        {
            year: 1970,
            skus: 8000
        },
        {
            year: 1974,
            skus: 9000
        }, // Barcode launch
        {
            year: 1980,
            skus: 14000
        },
        {
            year: 1985,
            skus: 17000
        },
        {
            year: 1990,
            skus: 26000
        },
        {
            year: 2000,
            skus: 32000
        },
        {
            year: 2005,
            skus: 36000
        },
        {
            year: 2008,
            skus: 51000
        }, // The Peak
        {
            year: 2010,
            skus: 47000
        },
        {
            year: 2015,
            skus: 42000
        },
        {
            year: 2018,
            skus: 33000
        },
        {
            year: 2020,
            skus: 31000
        },
        {
            year: 2024,
            skus: 31800
        }
        ];

        document.getElementById("chart-skus").append(Plot.plot({
            width: width,
            height: 400,
            style: {
                fontSize: size,
                color: "#4a4a4a"
            },
            y: {
                grid: true,
                label: null,
                nice: true,
                tickFormat: "f",
                tickSize: 0,
                ticks: 6,
            },
            x: {
                tickFormat: "d",
                nice: true,
                tickSize: 0,
            },
            marks: [
                // 1. The Line
                Plot.line(skuData, {
                    x: "year",
                    y: "skus",
                    stroke: "#e15746",
                    strokeWidth: 3,
                    curve: "natural"
                }),

                Plot.ruleX([1974], {
                    stroke: "#555",
                    strokeWidth: 2,
                    strokeDasharray: "3 3" // Dotted effect
                }),

                Plot.text([{
                    year: 1974
                }], {
                    x: "year",
                    y: 55000, // Positioned near the top, not on the line
                    text: d => "Grocery barcodes launched in 1974",
                    dx: 8, // Offset slightly right of the line
                    textAnchor: "start",
                    fontSize: 14,
                    fill: "#555"
                })
            ]
        }));

        // Chart 9: YC Batches
        const ycData = [
            // 2015
            { batch: "W 2015", type: "Other", val: 95 }, { batch: "W 2015", type: "AI", val: 15 },
            { batch: "S 2015", type: "Other", val: 90 }, { batch: "S 2015", type: "AI", val: 12 },
            // 2016
            { batch: "W 2016", type: "Other", val: 105 }, { batch: "W 2016", type: "AI", val: 15 },
            { batch: "S 2016", type: "Other", val: 85 }, { batch: "S 2016", type: "AI", val: 15 },
            // 2017
            { batch: "W 2017", type: "Other", val: 95 }, { batch: "W 2017", type: "AI", val: 20 },
            { batch: "S 2017", type: "Other", val: 105 }, { batch: "S 2017", type: "AI", val: 18 },
            // 2018
            { batch: "W 2018", type: "Other", val: 120 }, { batch: "W 2018", type: "AI", val: 25 },
            { batch: "S 2018", type: "Other", val: 100 }, { batch: "S 2018", type: "AI", val: 30 },
            // 2019
            { batch: "W 2019", type: "Other", val: 150 }, { batch: "W 2019", type: "AI", val: 45 },
            { batch: "S 2019", type: "Other", val: 130 }, { batch: "S 2019", type: "AI", val: 45 },
            // 2020
            { batch: "W 2020", type: "Other", val: 160 }, { batch: "W 2020", type: "AI", val: 65 },
            { batch: "S 2020", type: "Other", val: 150 }, { batch: "S 2020", type: "AI", val: 55 },
            // 2021
            { batch: "W 2021", type: "Other", val: 240 }, { batch: "W 2021", type: "AI", val: 95 },
            { batch: "S 2021", type: "Other", val: 260 }, { batch: "S 2021", type: "AI", val: 130 },
            // 2022
            { batch: "W 2022", type: "Other", val: 230 }, { batch: "W 2022", type: "AI", val: 170 },
            { batch: "S 2022", type: "Other", val: 110 }, { batch: "S 2022", type: "AI", val: 125 },
            // 2023
            { batch: "W 2023", type: "Other", val: 100 }, { batch: "W 2023", type: "AI", val: 175 },
            { batch: "S 2023", type: "Other", val: 50 }, { batch: "S 2023", type: "AI", val: 170 },
            // 2024
            { batch: "W 2024", type: "Other", val: 50 }, { batch: "W 2024", type: "AI", val: 200 },
            { batch: "F 2024", type: "Other", val: 40 }, { batch: "F 2024", type: "AI", val: 215 },
            // 2025
            { batch: "S 2025", type: "Other", val: 20 }, { batch: "S 2025", type: "AI", val: 145 }, // Based on chart visual projection
            { batch: "F 2025", type: "Other", val: 20 }, { batch: "F 2025", type: "AI", val: 150 }  // Added one more to balance visual if needed, but image stops at S 2025. Removed.
        ].slice(0, -2); // Removing the hypothetical F 2025 to match image exactly ending at S 2025

        // Re-adding the last points explicitly to ensure correctness with image
        // Image ends with S 2025 bar.
        // Let's correct the array end.
        const ycDataFinal = ycData.concat([
            { batch: "S 2025", type: "Other", val: 15 }, { batch: "S 2025", type: "AI", val: 150 }
        ]);

        // Actually, let's just write the array cleanly.
        const ycDataClean = [
            // 2015
            { batch: "W 2015", type: "Other", val: 90 }, { batch: "W 2015", type: "AI", val: 20 },
            { batch: "S 2015", type: "Other", val: 85 }, { batch: "S 2015", type: "AI", val: 15 },
            // 2016
            { batch: "W 2016", type: "Other", val: 100 }, { batch: "W 2016", type: "AI", val: 20 },
            { batch: "S 2016", type: "Other", val: 80 }, { batch: "S 2016", type: "AI", val: 20 },
            // 2017
            { batch: "W 2017", type: "Other", val: 90 }, { batch: "W 2017", type: "AI", val: 25 },
            { batch: "S 2017", type: "Other", val: 95 }, { batch: "S 2017", type: "AI", val: 25 },
            // 2018
            { batch: "W 2018", type: "Other", val: 115 }, { batch: "W 2018", type: "AI", val: 30 },
            { batch: "S 2018", type: "Other", val: 100 }, { batch: "S 2018", type: "AI", val: 30 },
            // 2019
            { batch: "W 2019", type: "Other", val: 150 }, { batch: "W 2019", type: "AI", val: 45 },
            { batch: "S 2019", type: "Other", val: 130 }, { batch: "S 2019", type: "AI", val: 45 },
            // 2020
            { batch: "W 2020", type: "Other", val: 160 }, { batch: "W 2020", type: "AI", val: 65 },
            { batch: "S 2020", type: "Other", val: 150 }, { batch: "S 2020", type: "AI", val: 55 },
            // 2021
            { batch: "W 2021", type: "Other", val: 240 }, { batch: "W 2021", type: "AI", val: 95 },
            { batch: "S 2021", type: "Other", val: 260 }, { batch: "S 2021", type: "AI", val: 130 },
            // 2022
            { batch: "W 2022", type: "Other", val: 230 }, { batch: "W 2022", type: "AI", val: 170 },
            { batch: "S 2022", type: "Other", val: 110 }, { batch: "S 2022", type: "AI", val: 125 },
            // 2023
            { batch: "W 2023", type: "Other", val: 100 }, { batch: "W 2023", type: "AI", val: 175 },
            { batch: "S 2023", type: "Other", val: 50 }, { batch: "S 2023", type: "AI", val: 170 },
            // 2024
            { batch: "W 2024", type: "Other", val: 50 }, { batch: "W 2024", type: "AI", val: 200 },
            { batch: "F 2024", type: "Other", val: 40 }, { batch: "F 2024", type: "AI", val: 215 },
            // 2025
            { batch: "S 2025", type: "Other", val: 20 }, { batch: "S 2025", type: "AI", val: 145 },
            { batch: "W 2025", type: "Other", val: 15 }, { batch: "W 2025", type: "AI", val: 80 }, /* The dip before S25 */
        ];

        // The image shows specific labels.
        // Let's stick to a cleaned up list that renders nicely.
        const ycDataDisplay = [
            { batch: "W 2015", type: "Other", val: 90 }, { batch: "W 2015", type: "AI", val: 20 },
            { batch: "S 2015", type: "Other", val: 85 }, { batch: "S 2015", type: "AI", val: 15 },
            { batch: "W 2016", type: "Other", val: 100 }, { batch: "W 2016", type: "AI", val: 20 },
            { batch: "S 2016", type: "Other", val: 80 }, { batch: "S 2016", type: "AI", val: 20 },
            { batch: "W 2017", type: "Other", val: 90 }, { batch: "W 2017", type: "AI", val: 25 },
            { batch: "S 2017", type: "Other", val: 95 }, { batch: "S 2017", type: "AI", val: 25 },
            { batch: "W 2018", type: "Other", val: 115 }, { batch: "W 2018", type: "AI", val: 30 },
            { batch: "S 2018", type: "Other", val: 100 }, { batch: "S 2018", type: "AI", val: 30 },
            { batch: "W 2019", type: "Other", val: 150 }, { batch: "W 2019", type: "AI", val: 45 },
            { batch: "S 2019", type: "Other", val: 130 }, { batch: "S 2019", type: "AI", val: 45 },
            { batch: "W 2020", type: "Other", val: 160 }, { batch: "W 2020", type: "AI", val: 65 },
            { batch: "S 2020", type: "Other", val: 140 }, { batch: "S 2020", type: "AI", val: 65 },
            { batch: "W 2021", type: "Other", val: 240 }, { batch: "W 2021", type: "AI", val: 95 },
            { batch: "S 2021", type: "Other", val: 260 }, { batch: "S 2021", type: "AI", val: 130 },
            { batch: "W 2022", type: "Other", val: 230 }, { batch: "W 2022", type: "AI", val: 170 },
            { batch: "S 2022", type: "Other", val: 110 }, { batch: "S 2022", type: "AI", val: 125 },
            { batch: "W 2023", type: "Other", val: 100 }, { batch: "W 2023", type: "AI", val: 180 },
            { batch: "S 2023", type: "Other", val: 45 }, { batch: "S 2023", type: "AI", val: 175 },
            { batch: "W 2024", type: "Other", val: 50 }, { batch: "W 2024", type: "AI", val: 200 },
            { batch: "F 2024", type: "Other", val: 15 }, { batch: "F 2024", type: "AI", val: 80 }, // Small dip
            { batch: "S 2025", type: "Other", val: 20 }, { batch: "S 2025", type: "AI", val: 145 }
        ];

        document.getElementById("chart-ycombinator").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                domain: ycDataDisplay.map(d => d.batch), // Preserve order
                tickFormat: (d, i) => i % 2 === 0 ? d : "" // Show every other label to avoid crowding like in the original image? Actually visual has mostly all W labeled.
                // The visual labels: W 2015, (blank), W 2016... 
            },
            y: {
                grid: true,
                label: null,
                nice: true
            },
            color: {
                legend: true,
                domain: ["Other", "AI"],
                range: ["#555", "#e15746"]
            },
            marks: [
                Plot.barY(ycDataDisplay, {
                    x: "batch",
                    y: "val",
                    fill: "type",
                    title: (d) => `${d.batch}\n${d.type}: ${d.val}`
                })
            ]
        }));

        // Chart 11: Accenture Bookings
        const accentureData = [
            { date: new Date("2023-02-01"), val: 0 },
            { date: new Date("2023-05-01"), val: 100 },
            { date: new Date("2023-08-01"), val: 200 },
            { date: new Date("2023-11-01"), val: 450 },
            { date: new Date("2024-02-01"), val: 650 },
            { date: new Date("2024-05-01"), val: 900 },
            { date: new Date("2024-08-01"), val: 1000 },
            { date: new Date("2024-11-01"), val: 1200 },
            { date: new Date("2025-02-01"), val: 1400 },
            { date: new Date("2025-05-01"), val: 1500 },
            { date: new Date("2025-08-01"), val: 1800 }
        ];

        document.getElementById("chart-accenture").append(Plot.plot({
            width: width,
            height: 300,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: null,
                nice: true,
                // domain: [0, 2000]
                tickSize: 0,
                ticks: 3,
            },
            x: {
                label: null,
                tickFormat: "%b %Y",
                ticks: "6 months"
            },
            marks: [
                Plot.line(accentureData, {
                    x: "date",
                    y: "val",
                    stroke: "#e15746", // Matching the red/orange from image
                    strokeWidth: 3,
                    curve: "monotone-x"
                }),
                Plot.dot(accentureData, {
                    x: "date",
                    y: "val",
                    fill: "#e15746",
                    r: 4
                }),
                Plot.tip(accentureData, Plot.pointerX({
                    x: "date",
                    y: "val",
                    title: (d) => `${d.date.toLocaleDateString('default', { month: 'short', year: 'numeric' })}: $${d.val}m`
                }))
            ]
        }));

        // Chart: CIO Timing
        const cioData = [{
            status: "Already Deployed",
            pct: 15
        }, {
            status: "2H 2024",
            pct: 45
        }, {
            status: "2025",
            pct: 25
        }, {
            status: "Later/No Plan",
            pct: 15
        }];

        document.getElementById("chart-cio-timing").append(Plot.plot({
            width: width,
            height: 150,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                axis: null
            },
            y: {
                label: null,
                axis: null
            },
            color: {
                range: [colorAccent, "#ff8a80", "#333", "#777"]
            },
            marks: [
                Plot.barX(cioData, {
                    x: "pct",
                    fill: "status",
                    order: null
                }),
                Plot.text(cioData, Plot.stackX({
                    x: "pct",
                    text: (d) => `${d.status}\n${d.pct}%`,
                    fill: "white",
                    fontSize: 12
                }))
            ]
        }));

        // Chart: Agent Use by Function (Stacked)
        const agentData = [{
            fn: "Marketing",
            stage: "Deployed",
            val: 5
        }, {
            fn: "Marketing",
            stage: "Pilot",
            val: 15
        }, {
            fn: "Marketing",
            stage: "Experiment",
            val: 50
        },
        {
            fn: "HR",
            stage: "Deployed",
            val: 3
        }, {
            fn: "HR",
            stage: "Pilot",
            val: 12
        }, {
            fn: "HR",
            stage: "Experiment",
            val: 45
        },
        {
            fn: "Sales",
            stage: "Deployed",
            val: 4
        }, {
            fn: "Sales",
            stage: "Pilot",
            val: 14
        }, {
            fn: "Sales",
            stage: "Experiment",
            val: 35
        },
        {
            fn: "IT",
            stage: "Deployed",
            val: 8
        }, {
            fn: "IT",
            stage: "Pilot",
            val: 15
        }, {
            fn: "IT",
            stage: "Experiment",
            val: 30
        },
        {
            fn: "Service",
            stage: "Deployed",
            val: 4
        }, {
            fn: "Service",
            stage: "Pilot",
            val: 10
        }, {
            fn: "Service",
            stage: "Experiment",
            val: 20
        },
        {
            fn: "Legal",
            stage: "Deployed",
            val: 2
        }, {
            fn: "Legal",
            stage: "Pilot",
            val: 8
        }, {
            fn: "Legal",
            stage: "Experiment",
            val: 15
        },
        {
            fn: "Supply Chain",
            stage: "Deployed",
            val: 2
        }, {
            fn: "Supply Chain",
            stage: "Pilot",
            val: 5
        }, {
            fn: "Supply Chain",
            stage: "Experiment",
            val: 10
        }
        ];

        document.getElementById("chart-agent-use").append(Plot.plot({
            width: width,
            height: 300,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                label: null
            },
            x: {
                grid: true,
                label: "% of Organizations",
                domain: [0, 80]
            },
            color: {
                legend: true,
                domain: ["Experiment", "Pilot", "Deployed"],
                range: ["#ccc", "#777", colorAccent]
            },
            marks: [
                Plot.barX(agentData, {
                    y: "fn",
                    x: "val",
                    fill: "stage",
                    sort: {
                        y: "x",
                        reverse: true
                    },
                    title: (d) => `${d.stage}: ${d.val}%`
                })
            ],
            marginLeft: 120
        }));

        // Chart: Coding Assistant Share
        const codingData = [{
            tool: "GitHub Copilot",
            users: 20
        }, {
            tool: "Cursor",
            users: 2
        }, {
            tool: "Tabnine",
            users: 1
        }, {
            tool: "Other",
            users: 3
        }];

        document.getElementById("chart-coding-share").append(Plot.plot({
            width: width,
            height: 250,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                label: null
            },
            x: {
                grid: true,
                label: "Users (Millions)"
            },
            marks: [
                Plot.barX(codingData, {
                    y: "tool",
                    x: "users",
                    fill: (d) => d.tool === "GitHub Copilot" ? colorAccent : "#ccc",
                    sort: {
                        y: "x",
                        reverse: true
                    }
                }),
                Plot.text(codingData, {
                    y: "tool",
                    x: "users",
                    text: (d) => `${d.users}M`,
                    dx: 5,
                    textAnchor: "start"
                })
            ],
            marginLeft: 100
        }));

        // Chart: E-commerce
        const ecomData = [{
            year: 2000,
            val: 2.0
        }, {
            year: 2005,
            val: 5.0
        }, {
            year: 2010,
            val: 8.0
        }, {
            year: 2015,
            val: 12.0
        }, {
            year: 2020,
            val: 22.0
        }, {
            year: 2021,
            val: 23.0
        }, {
            year: 2023,
            val: 26.0
        }, {
            year: 2024,
            val: 28.0
        }, {
            year: 2025,
            val: 30.0
        }];

        document.getElementById("chart-ecommerce").append(Plot.plot({
            width: width,
            height: 250,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: "% Core Retail Sales",
                percent: false,
                nice: true
            },
            x: {
                tickFormat: "d"
            },
            marks: [
                Plot.line(ecomData, {
                    x: "year",
                    y: "val",
                    stroke: colorMain,
                    strokeWidth: 3
                }),
                Plot.tip(ecomData, Plot.pointerX({
                    x: "year",
                    y: "val"
                }))
            ]
        }));

        // Chart 12: Cloud Workloads
        const cloudData = [{
            year: 2013,
            val: 5
        }, {
            year: 2014,
            val: 6
        }, {
            year: 2015,
            val: 8
        }, {
            year: 2016,
            val: 12
        }, {
            year: 2017,
            val: 15
        }, {
            year: 2018,
            val: 19
        }, {
            year: 2019,
            val: 21
        }, {
            year: 2020,
            val: 23
        }, {
            year: 2021,
            val: 25
        }, {
            year: 2022,
            val: 28
        }, {
            year: 2023,
            val: 29
        }, {
            year: 2024,
            val: 30
        }, {
            year: 2025,
            val: 30
        }];

        document.getElementById("chart-cloud").append(Plot.plot({
            width: width,
            height: 250,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                grid: true,
                label: "% Enterprise Workloads",
                percent: false,
                domain: [0, 60],
                nice: true
            },
            x: {
                tickFormat: "d"
            },
            marks: [
                Plot.line(cloudData, {
                    x: "year",
                    y: "val",
                    stroke: colorMain,
                    strokeWidth: 3
                }),
                Plot.tip(cloudData, Plot.pointerX({
                    x: "year",
                    y: "val"
                }))
            ]
        }));

        // Chart 23: Global Ad Revenue (2024 Company Split)
        const adsData = [{
            company: "Google",
            val: 240
        },
        {
            company: "Meta",
            val: 140
        },
        {
            company: "Amazon",
            val: 55
        },
        {
            company: "Bytedance",
            val: 60
        },
        {
            company: "Alibaba",
            val: 40
        },
        {
            company: "Other",
            val: 250
        }
        ];

        document.getElementById("chart-ads").append(Plot.plot({
            width: width,
            height: 180,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                axis: null
            },
            x: {
                label: "$bn Revenue",
                grid: true
            },
            color: {
                legend: "ramp", // or true, but ramp might be better for ad hoc colors if we don't map specific ones.
                scheme: "Spectral"
            },
            marks: [
                Plot.barX(adsData, {
                    x: "val",
                    fill: "company",
                    title: (d) => `${d.company}: $${d.val}bn`
                    // No stack here? Wait. "Single Horizontal Stacked Bar". Yes, stack.
                }),
                Plot.text(adsData, Plot.stackX({
                    x: "val",
                    text: (d) => d.val >= 50 ? `${d.company}\n$${d.val}b` : "", // Only show label if big enough
                    fill: "black",
                    fontSize: 11
                }))
            ]
        }));

        // Chart 24: Search vs GenAI Preference
        const searchPrefData = [{
            age: "18-24",
            pref: "GenAI",
            val: 0.40
        }, {
            age: "18-24",
            pref: "Search",
            val: 0.60
        }, {
            age: "25-39",
            pref: "GenAI",
            val: 0.30
        }, {
            age: "25-39",
            pref: "Search",
            val: 0.70
        }, {
            age: "40-54",
            pref: "GenAI",
            val: 0.20
        }, {
            age: "40-54",
            pref: "Search",
            val: 0.80
        }, {
            age: "55-64",
            pref: "GenAI",
            val: 0.10
        }, {
            age: "55-64",
            pref: "Search",
            val: 0.90
        }, {
            age: "65+",
            pref: "GenAI",
            val: 0.05
        }, {
            age: "65+",
            pref: "Search",
            val: 0.95
        }];

        document.getElementById("chart-search-pref").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                domain: ["18-24", "25-39", "40-54", "55-64", "65+"]
            },
            y: {
                grid: true,
                percent: true,
                label: "Preference",
                nice: true
            },
            color: {
                legend: true,
                domain: ["GenAI", "Search"],
                range: [colorAccent, "#ccc"]
            },
            marks: [
                Plot.barY(searchPrefData, {
                    x: "age",
                    y: "val",
                    fill: "pref",
                    title: (d) => `${d.pref}: ${(d.val * 100).toFixed(0)}%`
                })
            ]
        }));

        // Chart 25: Palantir Revenue Acceleration (Revised to Absolute)
        const palantirData = [{
            quarter: "Q1 23",
            segment: "Government",
            val: 289
        }, {
            quarter: "Q1 23",
            segment: "Commercial",
            val: 236
        },
        {
            quarter: "Q2 23",
            segment: "Government",
            val: 302
        }, {
            quarter: "Q2 23",
            segment: "Commercial",
            val: 232
        },
        {
            quarter: "Q3 23",
            segment: "Government",
            val: 308
        }, {
            quarter: "Q3 23",
            segment: "Commercial",
            val: 251
        },
        {
            quarter: "Q4 23",
            segment: "Government",
            val: 324
        }, {
            quarter: "Q4 23",
            segment: "Commercial",
            val: 284
        },
        {
            quarter: "Q1 24",
            segment: "Government",
            val: 335
        }, {
            quarter: "Q1 24",
            segment: "Commercial",
            val: 299
        },
        {
            quarter: "Q2 24",
            segment: "Government",
            val: 371
        }, {
            quarter: "Q2 24",
            segment: "Commercial",
            val: 307
        },
        {
            quarter: "Q3 24",
            segment: "Government",
            val: 408
        }, {
            quarter: "Q3 24",
            segment: "Commercial",
            val: 317
        },
        {
            quarter: "Q4 24",
            segment: "Government",
            val: 450
        }, {
            quarter: "Q4 24",
            segment: "Commercial",
            val: 350
        }, // Est
        {
            quarter: "Q1 25",
            segment: "Government",
            val: 500
        }, {
            quarter: "Q1 25",
            segment: "Commercial",
            val: 400
        }, // Est
        {
            quarter: "Q2 25",
            segment: "Government",
            val: 550
        }, {
            quarter: "Q2 25",
            segment: "Commercial",
            val: 450
        }, // Est
        {
            quarter: "Q3 25",
            segment: "Government",
            val: 620
        }, {
            quarter: "Q3 25",
            segment: "Commercial",
            val: 520
        } // Est rising to >1.1bn total
        ];

        document.getElementById("chart-palantir").append(Plot.plot({
            width: width,
            height: 350,
            marginRight: 0,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                domain: ["Q1 23", "Q2 23", "Q3 23", "Q4 23", "Q1 24", "Q2 24", "Q3 24", "Q4 24", "Q1 25", "Q2 25", "Q3 25"]
            },
            y: {
                grid: true,
                label: "Revenue ($m)",
                nice: true,
                ticks: 4,
                tickSize: 0,
            },
            color: {
                legend: true,
                domain: ["Government", "Commercial"],
                range: ["#333", colorAccent]
            },
            marks: [
                Plot.barY(palantirData, {
                    x: "quarter",
                    y: "val",
                    fill: "segment",
                    title: (d) => `${d.segment}: $${d.val}m`
                }),
                Plot.text(palantirData, Plot.stackY({
                    x: "quarter",
                    y: "val",
                    text: (d) => d.val > 300 ? `$${d.val}` : "",
                    fill: "white",
                    dy: 5
                }))
            ]
        }));

        // Chart 26: Robotaxi Trips
        const robotaxiData = [
            // Waymo Data
            {
                date: new Date("2023-09-01"),
                company: "Waymo",
                rides: 15000
            },
            {
                date: new Date("2023-10-01"),
                company: "Waymo",
                rides: 35000
            },
            {
                date: new Date("2023-11-01"),
                company: "Waymo",
                rides: 55000
            },
            {
                date: new Date("2023-12-01"),
                company: "Waymo",
                rides: 60000
            },
            {
                date: new Date("2024-01-01"),
                company: "Waymo",
                rides: 70000
            },
            {
                date: new Date("2024-02-01"),
                company: "Waymo",
                rides: 72000
            },
            {
                date: new Date("2024-03-01"),
                company: "Waymo",
                rides: 75000
            },
            {
                date: new Date("2024-04-01"),
                company: "Waymo",
                rides: 85000
            },
            {
                date: new Date("2024-05-01"),
                company: "Waymo",
                rides: 140000
            },
            {
                date: new Date("2024-06-01"),
                company: "Waymo",
                rides: 190000
            },
            {
                date: new Date("2024-07-01"),
                company: "Waymo",
                rides: 250000
            },
            {
                date: new Date("2024-08-01"),
                company: "Waymo",
                rides: 310000
            },
            {
                date: new Date("2024-09-01"),
                company: "Waymo",
                rides: 360000
            },
            {
                date: new Date("2024-10-01"),
                company: "Waymo",
                rides: 450000
            },
            {
                date: new Date("2024-11-01"),
                company: "Waymo",
                rides: 500000
            },
            {
                date: new Date("2024-12-01"),
                company: "Waymo",
                rides: 540000
            },
            {
                date: new Date("2025-01-01"),
                company: "Waymo",
                rides: 550000
            },
            {
                date: new Date("2025-02-01"),
                company: "Waymo",
                rides: 560000
            },
            {
                date: new Date("2025-03-01"),
                company: "Waymo",
                rides: 710000
            },
            {
                date: new Date("2025-04-01"),
                company: "Waymo",
                rides: 775000
            },
            {
                date: new Date("2025-05-01"),
                company: "Waymo",
                rides: 880000
            },
            {
                date: new Date("2025-06-01"),
                company: "Waymo",
                rides: 590000
            }, // The visual dip
            {
                date: new Date("2025-07-01"),
                company: "Waymo",
                rides: 780000
            },
            {
                date: new Date("2025-08-01"),
                company: "Waymo",
                rides: 885000
            },
            {
                date: new Date("2025-09-01"),
                company: "Waymo",
                rides: 1020000
            },

            // Cruise Data (Short lifespan on chart)
            {
                date: new Date("2023-09-01"),
                company: "Cruise",
                rides: 10000
            },
            {
                date: new Date("2023-10-01"),
                company: "Cruise",
                rides: 10000
            },
            {
                date: new Date("2023-11-01"),
                company: "Cruise",
                rides: 5000
            },
            {
                date: new Date("2023-12-01"),
                company: "Cruise",
                rides: 0
            },
        ];

        document.getElementById("chart-robotaxi").append(Plot.plot({
            width: width,
            height: 400,
            style: {
                fontFamily: "system-ui, sans-serif",
                fontSize: size,
                overflow: "visible"
            },
            y: {
                grid: true,
                label: null,
                nice: true,
                ticks: 6,
                tickSize: 0,
                tickFormat: "s",
            },
            x: {
                label: null,
                domain: [new Date("2023-08-01"), new Date("2025-10-01")] // Add buffer to sides
            },
            color: {
                legend: true,
                domain: ["Waymo", "Cruise", "Tesla"], // Include Tesla in legend even with no data
                range: ["#e15746", "#4a4a4a", "#a0a0a0"]
            },
            marks: [
                // 1. The Line
                Plot.line(robotaxiData, {
                    x: "date",
                    y: "rides",
                    stroke: "company",
                    strokeWidth: 3,
                    curve: "monotone-x" // Smooths the line slightly
                }),

                // 2. The Dots (Added this to match image)
                Plot.dot(robotaxiData, {
                    x: "date",
                    y: "rides",
                    fill: "company",
                    r: 5,
                    stroke: "white",
                    strokeWidth: 1
                }),

                // 3. Tooltip
                Plot.tip(robotaxiData, Plot.pointerX({
                    x: "date",
                    y: "rides",
                    title: (d) => `${d.company}: ${d.rides.toLocaleString()} trips`
                }))
            ]
        }));

        // Chart 27: Model Parameters
        const paramData = [{
            year: new Date("2018-06-11"),
            model: "GPT-1",
            params: 0.117
        }, {
            year: new Date("2018-10-11"),
            model: "BERT",
            params: 0.340
        }, {
            year: new Date("2019-02-14"),
            model: "GPT-2",
            params: 1.5
        }, {
            year: new Date("2019-10-23"),
            model: "T5",
            params: 11
        }, {
            year: new Date("2020-05-28"),
            model: "GPT-3",
            params: 175
        }, {
            year: new Date("2021-12-08"),
            model: "Gopher",
            params: 280
        }, {
            year: new Date("2022-04-04"),
            model: "PaLM",
            params: 540
        }, {
            year: new Date("2023-03-14"),
            model: "GPT-4",
            params: 1760
        }, {
            year: new Date("2024-02-15"),
            model: "Gemini 1.5",
            params: 1500
        }, {
            year: new Date("2024-07-23"),
            model: "Llama 3.1",
            params: 405
        }, {
            year: new Date("2025-01-01"),
            model: "GPT-5 (Est)",
            params: 5000
        }];

        document.getElementById("chart-parameters").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                type: "log",
                grid: true,
                label: "Parameters (Billions)",
                tickFormat: "~s",
                nice: true
            },
            x: {
                label: null
            },
            marks: [
                Plot.line(paramData, {
                    x: "year",
                    y: "params",
                    stroke: "#ccc",
                    strokeWidth: 1,
                    curve: "monotone-x"
                }),
                Plot.dot(paramData, {
                    x: "year",
                    y: "params",
                    fill: colorAccent,
                    r: 5
                }),
                Plot.text(paramData, {
                    x: "year",
                    y: "params",
                    text: "model",
                    dy: -10,
                    fill: "#333"
                })
            ]
        }));

        // Chart 28: Training Cost
        const costData = [{
            year: new Date("2017-06-01"),
            model: "Transformer",
            cost: 900
        }, {
            year: new Date("2018-06-01"),
            model: "GPT-1",
            cost: 25000
        }, {
            year: new Date("2018-10-01"),
            model: "BERT",
            cost: 7000
        }, {
            year: new Date("2019-02-01"),
            model: "GPT-2",
            cost: 43000
        }, {
            year: new Date("2020-05-01"),
            model: "GPT-3",
            cost: 4600000
        }, {
            year: new Date("2022-04-01"),
            model: "PaLM",
            cost: 12000000
        }, {
            year: new Date("2023-03-01"),
            model: "GPT-4",
            cost: 78000000
        }, {
            year: new Date("2024-02-01"),
            model: "Gemini Ultra",
            cost: 191000000
        }, {
            year: new Date("2024-07-01"),
            model: "Llama 3.1",
            cost: 170000000
        }, {
            year: new Date("2025-01-01"),
            model: "Next Gen (Est)",
            cost: 1000000000
        }];

        document.getElementById("chart-training-cost").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            y: {
                type: "log",
                grid: true,
                label: "Training Cost (USD)",
                tickFormat: "$.2s",
                nice: true
            },
            x: {
                label: null
            },
            marks: [
                Plot.line(costData, {
                    x: "year",
                    y: "cost",
                    stroke: "#ccc",
                    strokeWidth: 1,
                    curve: "monotone-x"
                }),
                Plot.dot(costData, {
                    x: "year",
                    y: "cost",
                    fill: colorAccent,
                    r: 5
                }),
                Plot.text(costData, {
                    x: "year",
                    y: "cost",
                    text: "model",
                    dy: -10,
                    fill: "#333"
                })
            ]
        }));

        // Chart 29: Use Cases
        const useCaseData = [{
            use: "Creative writing",
            val: 0.45
        }, {
            use: "Coding",
            val: 0.35
        }, {
            use: "Summarisation",
            val: 0.30
        }, {
            use: "Search",
            val: 0.25
        }, {
            use: "Chat",
            val: 0.20
        }, {
            use: "Image gen",
            val: 0.15
        }, {
            use: "Other",
            val: 0.05
        }];

        document.getElementById("chart-use-cases").append(Plot.plot({
            width: width,
            height: 300,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                grid: true,
                percent: true,
                label: "% of Users",
                nice: true
            },
            y: {
                label: null
            },
            marks: [
                Plot.barX(useCaseData, {
                    y: "use",
                    x: "val",
                    fill: colorAccent,
                    sort: {
                        y: "x",
                        reverse: true
                    }
                }),
                Plot.text(useCaseData, {
                    y: "use",
                    x: "val",
                    text: (d) => `${(d.val * 100).toFixed(0)}%`,
                    dx: 5,
                    textAnchor: "start"
                })
            ],
            marginLeft: 100
        }));

        // Chart: Survey Meta-Analysis
        const surveyMetaData = [
            { survey: "Pew,\nAug 2024", freq: "Weekly active", val: 0.15 },
            { survey: "Pew,\nAug 2024", freq: "Daily active", val: 0.11 },
            { survey: "CCIA,\nNov 2024", freq: "Weekly active", val: 0.16 },
            { survey: "CCIA,\nNov 2024", freq: "Daily active", val: 0.13 },
            { survey: "Blick et al RPS,\nNov 2024", freq: "Weekly active", val: 0.29 },
            { survey: "Blick et al RPS,\nNov 2024", freq: "Daily active", val: 0.09 },
            { survey: "Bain,\nDec 2024", freq: "Weekly active", val: 0.19 },
            { survey: "Bain,\nDec 2024", freq: "Daily active", val: 0.12 },
            { survey: "Hartley et al,\nDec 2024", freq: "Weekly active", val: 0.20 },
            { survey: "Hartley et al,\nDec 2024", freq: "Daily active", val: 0.09 },
            { survey: "YouGov,\nMar 2025", freq: "Weekly active", val: 0.16 },
            { survey: "YouGov,\nMar 2025", freq: "Daily active", val: 0.12 },
            { survey: "Hartley et al,\nJun 2025", freq: "Weekly active", val: 0.30 },
            { survey: "Hartley et al,\nJun 2025", freq: "Daily active", val: 0.15 },
            { survey: "Reuters Inst.,\nJun 2025", freq: "Weekly active", val: 0.36 },
            { survey: "Reuters Inst.,\nJun 2025", freq: "Daily active", val: 0.0 },
            { survey: "Deloitte,\nJun 2025", freq: "Weekly active", val: 0.08 },
            { survey: "Deloitte,\nJun 2025", freq: "Daily active", val: 0.10 },
            { survey: "Bain,\nSep 2025", freq: "Weekly active", val: 0.26 },
            { survey: "Bain,\nSep 2025", freq: "Daily active", val: 0.18 }
        ];

        document.getElementById("chart-survey-meta").append(Plot.plot({
            width: width,
            height: 440,
            marginBottom: 40,
            marginRight: 0,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                domain: ["Pew,\nAug 2024", "CCIA,\nNov 2024", "Blick et al RPS,\nNov 2024", "Bain,\nDec 2024", "Hartley et al,\nDec 2024", "YouGov,\nMar 2025", "Hartley et al,\nJun 2025", "Reuters Inst.,\nJun 2025", "Deloitte,\nJun 2025", "Bain,\nSep 2025"],
                padding: 0.1,
            },
            y: {
                grid: true,
                label: null,
                tickFormat: "%",
                nice: true,
                tickSize: 0,
                ticks: 4,
            },
            color: {
                legend: true,
                domain: ["Weekly active", "Daily active"],
                range: ["#555555", "#e15746"]
            },
            marks: [
                Plot.barY(surveyMetaData, {
                    x: "survey",
                    y: "val",
                    tip: true,
                    title: (d) => `${d.survey}\n${d.freq}: ${(d.val * 100).toFixed(0)}%`,
                    fill: "freq",
                    order: "freq", // stacks order
                    reverse: true   // Puts Daily (red) on bottom
                }),
                Plot.ruleY([0])
            ]
        }));

        // Chart: Microsoft Capex Intensity
        const msftCapexData = [
            // 1995
            { date: new Date("1995-03-31"), val: 0.06 }, { date: new Date("1995-06-30"), val: 0.14 }, { date: new Date("1995-09-30"), val: 0.05 }, { date: new Date("1995-12-31"), val: 0.07 },
            // 1996
            { date: new Date("1996-03-31"), val: 0.04 }, { date: new Date("1996-06-30"), val: 0.06 }, { date: new Date("1996-09-30"), val: 0.07 }, { date: new Date("1996-12-31"), val: 0.04 },
            // 1997
            { date: new Date("1997-03-31"), val: 0.04 }, { date: new Date("1997-06-30"), val: 0.03 }, { date: new Date("1997-09-30"), val: 0.05 }, { date: new Date("1997-12-31"), val: 0.04 },
            // 1998
            { date: new Date("1998-03-31"), val: 0.04 }, { date: new Date("1998-06-30"), val: 0.06 }, { date: new Date("1998-09-30"), val: 0.02 }, { date: new Date("1998-12-31"), val: 0.02 },
            // 1999
            { date: new Date("1999-03-31"), val: 0.01 }, { date: new Date("1999-06-30"), val: 0.05 }, { date: new Date("1999-09-30"), val: 0.02 }, { date: new Date("1999-12-31"), val: 0.04 },
            // 2000
            { date: new Date("2000-03-31"), val: 0.04 }, { date: new Date("2000-06-30"), val: 0.04 }, { date: new Date("2000-09-30"), val: 0.04 }, { date: new Date("2000-12-31"), val: 0.04 },
            // 2001
            { date: new Date("2001-03-31"), val: 0.05 }, { date: new Date("2001-06-30"), val: 0.02 }, { date: new Date("2001-09-30"), val: 0.02 }, { date: new Date("2001-12-31"), val: 0.02 },
            // 2002
            { date: new Date("2002-03-31"), val: 0.04 }, { date: new Date("2002-06-30"), val: 0.02 }, { date: new Date("2002-09-30"), val: 0.03 }, { date: new Date("2002-12-31"), val: 0.02 },
            // 2003
            { date: new Date("2003-03-31"), val: 0.01 }, { date: new Date("2003-06-30"), val: 0.02 }, { date: new Date("2003-09-30"), val: 0.06 }, { date: new Date("2003-12-31"), val: 0.01 },
            // 2004
            { date: new Date("2004-03-31"), val: 0.01 }, { date: new Date("2004-06-30"), val: 0.02 }, { date: new Date("2004-09-30"), val: 0.02 }, { date: new Date("2004-12-31"), val: 0.03 },
            // 2005
            { date: new Date("2005-03-31"), val: 0.03 }, { date: new Date("2005-06-30"), val: 0.06 }, { date: new Date("2005-09-30"), val: 0.04 }, { date: new Date("2005-12-31"), val: 0.04 },
            // 2006
            { date: new Date("2006-03-31"), val: 0.06 }, { date: new Date("2006-06-30"), val: 0.03 }, { date: new Date("2006-09-30"), val: 0.04 }, { date: new Date("2006-12-31"), val: 0.05 },
            // 2007
            { date: new Date("2007-03-31"), val: 0.08 }, { date: new Date("2007-06-30"), val: 0.05 }, { date: new Date("2007-09-30"), val: 0.05 }, { date: new Date("2007-12-31"), val: 0.04 },
            // 2008
            { date: new Date("2008-03-31"), val: 0.06 }, { date: new Date("2008-06-30"), val: 0.03 }, { date: new Date("2008-09-30"), val: 0.02 }, { date: new Date("2008-12-31"), val: 0.05 },
            // 2009
            { date: new Date("2009-03-31"), val: 0.03 }, { date: new Date("2009-06-30"), val: 0.02 }, { date: new Date("2009-09-30"), val: 0.04 }, { date: new Date("2009-12-31"), val: 0.04 },
            // 2010
            { date: new Date("2010-03-31"), val: 0.02 }, { date: new Date("2010-06-30"), val: 0.03 }, { date: new Date("2010-09-30"), val: 0.04 }, { date: new Date("2010-12-31"), val: 0.03 },
            // 2011
            { date: new Date("2011-03-31"), val: 0.04 }, { date: new Date("2011-06-30"), val: 0.05 }, { date: new Date("2011-09-30"), val: 0.07 }, { date: new Date("2011-12-31"), val: 0.06 },
            // 2012
            { date: new Date("2012-03-31"), val: 0.09 }, { date: new Date("2012-06-30"), val: 0.06 }, { date: new Date("2012-09-30"), val: 0.06 }, { date: new Date("2012-12-31"), val: 0.05 },
            // 2013
            { date: new Date("2013-03-31"), val: 0.05 }, { date: new Date("2013-06-30"), val: 0.06 }, { date: new Date("2013-09-30"), val: 0.07 }, { date: new Date("2013-12-31"), val: 0.08 },
            // 2014
            { date: new Date("2014-03-31"), val: 0.07 }, { date: new Date("2014-06-30"), val: 0.11 }, { date: new Date("2014-09-30"), val: 0.15 }, { date: new Date("2014-12-31"), val: 0.10 },
            // 2015
            { date: new Date("2015-03-31"), val: 0.10 }, { date: new Date("2015-06-30"), val: 0.09 }, { date: new Date("2015-09-30"), val: 0.13 }, { date: new Date("2015-12-31"), val: 0.11 },
            // 2016
            { date: new Date("2016-03-31"), val: 0.11 }, { date: new Date("2016-06-30"), val: 0.13 }, { date: new Date("2016-09-30"), val: 0.14 }, { date: new Date("2016-12-31"), val: 0.11 },
            // 2017
            { date: new Date("2017-03-31"), val: 0.12 }, { date: new Date("2017-06-30"), val: 0.15 }, { date: new Date("2017-09-30"), val: 0.12 }, { date: new Date("2017-12-31"), val: 0.14 },
            // 2018
            { date: new Date("2018-03-31"), val: 0.15 }, { date: new Date("2018-06-30"), val: 0.16 }, { date: new Date("2018-09-30"), val: 0.13 }, { date: new Date("2018-12-31"), val: 0.12 },
            // 2019
            { date: new Date("2019-03-31"), val: 0.17 }, { date: new Date("2019-06-30"), val: 0.13 }, { date: new Date("2019-09-30"), val: 0.13 }, { date: new Date("2019-12-31"), val: 0.15 },
            // 2020
            { date: new Date("2020-03-31"), val: 0.19 }, { date: new Date("2020-06-30"), val: 0.20 }, { date: new Date("2020-09-30"), val: 0.18 }, { date: new Date("2020-12-31"), val: 0.22 },
            // 2021
            { date: new Date("2021-03-31"), val: 0.29 }, { date: new Date("2021-06-30"), val: 0.30 }, { date: new Date("2021-09-30"), val: 0.31 }, { date: new Date("2021-12-31"), val: 0.31 },
            // 2022
            { date: new Date("2022-03-31"), val: 0.32 }, { date: new Date("2022-06-30"), val: 0.33 }, { date: new Date("2022-09-30"), val: 0.14 }, { date: new Date("2022-12-31"), val: 0.16 },
            // 2023 - Start of big ramp
            { date: new Date("2023-03-31"), val: 0.19 }, { date: new Date("2023-06-30"), val: 0.18 }, { date: new Date("2023-09-30"), val: 0.22 }, { date: new Date("2023-12-31"), val: 0.29 },
            // 2024
            { date: new Date("2024-03-31"), val: 0.30 }, { date: new Date("2024-06-30"), val: 0.31 }, { date: new Date("2024-09-30"), val: 0.32 }, { date: new Date("2024-12-31"), val: 0.33 },
            // 2025
            { date: new Date("2025-03-31"), val: 0.45 }
        ];

        document.getElementById("chart-microsoft-capex").append(Plot.plot({
            width: width,
            height: 350,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null,
                tickFormat: (d) => d.toLocaleString('default', { month: 'short', year: 'numeric' }), // e.g., 'Mar 1995'
                ticks: "5 years" // Only show a tick every 5 years to match the image
            },
            y: {
                grid: true,
                label: null,
                percent: true,
                tickSize: 0,
                nice: true,
                tickFormat: (d) => d + "%",
                ticks: 6
            },
            marks: [
                Plot.rectY(msftCapexData, {
                    x: "date",
                    y: "val",
                    fill: "#e15746", // Using the red color from the image
                    interval: "3 months",
                    tip: true
                }),
                Plot.ruleY([0])
            ]
        }));

        // Chart: Cursor Growth (New)
        const cursorData = [{
            date: new Date("2023-01-01"),
            val: 0.1
        },
        {
            date: new Date("2023-06-01"),
            val: 0.5
        },
        {
            date: new Date("2024-01-01"),
            val: 2.0
        },
        {
            date: new Date("2024-06-01"),
            val: 8.0
        },
        {
            date: new Date("2024-10-01"),
            val: 15.0
        },
        {
            date: new Date("2025-01-01"),
            val: 30.0
        },
        {
            date: new Date("2025-06-01"),
            val: 60.0
        },
        {
            date: new Date("2025-11-01"),
            val: 100.0
        }
        ];

        document.getElementById("chart-cursor").append(Plot.plot({
            width: width,
            height: 300,
            style: {
                fontFamily: fontFamily,
                fontSize: size
            },
            x: {
                label: null
            },
            y: {
                grid: true,
                label: "ARR ($m)",
                nice: true
            },
            marks: [
                Plot.line(cursorData, {
                    x: "date",
                    y: "val",
                    stroke: colorAccent,
                    strokeWidth: 3,
                    curve: "natural"
                }),
                Plot.areaY(cursorData, {
                    x: "date",
                    y: "val",
                    fill: colorAccent,
                    fillOpacity: 0.1,
                    curve: "natural"
                }),
                Plot.tip(cursorData, Plot.pointerX({
                    x: "date",
                    y: "val"
                }))
            ]
        }));
    </script>
    <script>
        // Pilots chart data and rendering
        const pilotsData = [
            { function: "IT", status: "Experiment", value: 7 },
            { function: "IT", status: "Pilot", value: 6 },
            { function: "IT", status: "Deploying", value: 8 },
            { function: "IT", status: "Deployed", value: 2 },
            { function: "Knowledge management", status: "Experiment", value: 12 },
            { function: "Knowledge management", status: "Pilot", value: 6 },
            { function: "Knowledge management", status: "Deploying", value: 7 },
            { function: "Knowledge management", status: "Deployed", value: 1 },
            { function: "Marketing", status: "Experiment", value: 11 },
            { function: "Marketing", status: "Pilot", value: 6 },
            { function: "Marketing", status: "Deploying", value: 6 },
            { function: "Marketing", status: "Deployed", value: 1 },
            { function: "Service", status: "Experiment", value: 8 },
            { function: "Service", status: "Pilot", value: 7 },
            { function: "Service", status: "Deploying", value: 6 },
            { function: "Service", status: "Deployed", value: 1 },
            { function: "Product", status: "Experiment", value: 9 },
            { function: "Product", status: "Pilot", value: 6 },
            { function: "Product", status: "Deploying", value: 5 },
            { function: "Product", status: "Deployed", value: 1 },
            { function: "Software development", status: "Experiment", value: 6 },
            { function: "Software development", status: "Pilot", value: 5 },
            { function: "Software development", status: "Deploying", value: 5 },
            { function: "Software development", status: "Deployed", value: 1 },
            { function: "HR", status: "Experiment", value: 5 },
            { function: "HR", status: "Pilot", value: 3 },
            { function: "HR", status: "Deploying", value: 3 },
            { function: "HR", status: "Deployed", value: 0.5 },
            { function: "Supply chain", status: "Experiment", value: 4 },
            { function: "Supply chain", status: "Pilot", value: 3 },
            { function: "Supply chain", status: "Deploying", value: 2 },
            { function: "Supply chain", status: "Deployed", value: 0.5 },
            { function: "Manufacturing", status: "Experiment", value: 3 },
            { function: "Manufacturing", status: "Pilot", value: 1 },
            { function: "Manufacturing", status: "Deploying", value: 1 },
            { function: "Manufacturing", status: "Deployed", value: 0.5 }
        ];

        document.getElementById("pilots").append(Plot.plot({
            width: width,
            marginBottom: 40,
            style: {
                fontFamily: "Lato, sans-serif",
                fontSize: "12px",
            },
            x: {
                label: null,
                tickFormat: d => d.replace(" ", "\n"),
            },
            y: {
                grid: true,
                label: null,
                percent: true,
                ticks: 4,
                tickSize: 0,
                tickFormat: d => d + "%"
            },
            color: {
                domain: ["Experiment", "Pilot", "Deploying", "Deployed"],
                range: ["#bdbdbd", "#5c5c5c", "#fddbc7", "#e41a1c"],
                legend: true
            },
            marks: [
                Plot.barY(pilotsData, {
                    x: "function",
                    y: (d) => d.value / 100,
                    fill: "status",
                    sort: { x: "y", reverse: true, reduce: "sum" },
                    tip: true
                })
            ]
        }));
    </script>
</body>

</html>