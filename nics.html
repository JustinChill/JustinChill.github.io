<!DOCTYPE html>
<html lang="en">
<head>
  <title>NICS Firearm Background checks</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css" />

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Monthly data collected by the FBI on firearm background checks">
  <meta name="author" content="Justin Chill">

  <style type="text/css">

</style>
</head>
<body>
  <nav class="nav">
    <div class="nav__list">
      <a href="index.html" class="nav__item">Home</a>
      <a href="blog.html" class="nav__item">Blog</a>
    </div>
    <div class="nav__list">
      <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
      <a href="#" class="nav__item js-email-link">Email</a>
    </div>
  </nav>
  
  <main role="main">
    <article>
       <div class="article-hero">
        <h2 class="article-category">Post</h2>
        <h1 class="article-title">NICS Firearm Background checks</h1>
        <h2 class="article-subtitle">Monthly data collected by the FBI on firearm background checks</h2>
      </div>

    <p>Following the implementation of <a href="https://www.atf.gov/rules-and-regulations/brady-law">the Brady act</a> in 1994, the Federal Bureau of Investigation (FBI) developed a system to conduct background checks on individuals wanting to obtain a firearm. The system known as the National Instant Criminal Background Check System (<abbr>NICS</abbr>) was created in collaboration with the Buereu of Alcohol, Tabacco and Firearms and local law enforcement agencies. Since it's inception in November 1998, the FBI has released monthly data from each state and U.S territory. The FBI claims that over 300 million requests have been aprroved, and 1.5 million have been denied.</p> 


    <h3>Total NICS checks conducted</h3>
    <figure id="nics_stackedarea"></figure>
    <figcaption>Data: <a href="https://www.fbi.gov/file-repository/nics_firearm_checks_-_month_year_by_state_type.pdf/view">FBI.gov</a></figcaption>

    <p>The FBI’s background check numbers come with caveats. These numbers show only the number of firearm background checks initiated through the NICS. They don't represent the number of firearms sold. Due to varying state laws a one-to-one correlation cannot be made between a firearm background check and a firearm sale. Kentucky runs a new check on each concealed carry license holder each month. And of course, the FBI’s numbers don’t include private gun sales, many of which do not require a background check.</p>
    <p>Starting in 2006 we can see a noticeable increase in the number of firearms checked processed for the state of Kansas. This isn't due to Kentucky's gun culter, but rather a <a href="https://apps.legislature.ky.gov/law/statutes/statute.aspx?id=47039">policy</a> that requires automatic monthly background checks on every holder of concealed-carry permits in the commonwealth.</p>

    <h3>Transaction types</h3>
    <figure id="transactions"></figure>
    <figcaption>Data: <a href="https://www.fbi.gov/file-repository/nics_firearm_checks_-_month_year_by_state_type.pdf/view">FBI.gov</a></figcaption>
    <p>The FBI categorizes each background check by type of firearm: 
      <ol>
        <li>Pre-Pawn—background checks requested by an officially-licensed FFL on prospective firearm transferees seeking to pledge or pawn a firearm as security for the payment or repayment of money, prior to actually pledging or pawning the firearm.</li>
        <li>Redemption—background checks requested by an officially-licensed FFL on prospective firearm transferees attempting to regain possession of a firearm after pledging or pawning a firearm as security at a pawn shop.</li>
        <li>Returned/Disposition—background checks requested by criminal justice/law enforcement agencies prior to returning a firearm in its possession to the respective transferee, to ensure the individual is not prohibited.</li>
        <li>Rentals—background checks requested by an officially-licensed FFL on prospective firearm transferees attempting to possess a firearm when the firearm is loaned or rented for use off the premises of the business.</li>
        <li>Private Sale—background checks requested by an officially-licensed FFL on prospective firearm transferees attempting to possess a firearm from a private party seller who is not an officially-licensed FFL.</li>
        <li>Return to Seller-Private Sale—background checks requested by an officially-licensed FFL on prospective firearm transferees attempting to possess a firearm from a private party seller who is not an officially-licensed FFL.</li>
      </ol>
    </p>

    <h3>Transaction types</h3>
    <figure id="nics_baseline"></figure>

</article>
</main>
<footer>
  <h2 id="footnote-label">Footnotes</h2>
  <ol>

  </ol>
  <div>
    <p>Justin Chill © 2024. Thanks for reading!</p>
    <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img src="imgs/github.svg" class="icon">Source code and feedback</a></span>    
  </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/d3"></script>
<script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>


<script type="text/javascript">
  var element = d3.select('figure').node();
  var width = element.getBoundingClientRect().width; // get width of article so graphic is responsive
  var size = 12;

  // Use Promises to async request data
  var promises = [d3.csv("https://raw.githubusercontent.com/BuzzFeedNews/nics-firearm-background-checks/master/data/nics-firearm-background-checks.csv",d3.autoType)];
  myDataPromises = Promise.all(promises);

  // After data is successfully fetched, generate viz
  myDataPromises.then(function(data) {
    
    // Define the data
    var data = data[0];
    // const columns = data.columns.slice(1);
    console.log(data);

    var nics_stackedarea = {
      width: width,
      style:{fontSize: size},
      // marginBottom: 40,
      marginLeft: 20,
      marginRight: 0,
      marginTop: 20,
      x: {
        label: null,
        clamp: true,
        tickSize: 2,
      },
      y: {
        // labelAnchor: "center",
        labelOffset: 30,
        tickSize: 2,
        grid: true,
        nice: true,
        label: "(%)",
        percent: true,
      },
      style: {
        background: "hsla(209, 23%, 99%, 1)",
        color: "rgba(0, 0, 0, 0.84)",
      },
      color: {
        scheme: "pastel1",
        reverse: true,
      },
      marks: [
        // Plot.line(data, {x: "month", y: "totals", z: "state",stroke: "state", strokeWidth: 2, title: "state"}),
        Plot.areaY(data, Plot.stackY({
          x: "month",
          y: "totals",
          fill: "state",
          title: "state",
          order: "month",
          offset: "expand",
          curve: "basis",
          reverse: true          
        })),
        Plot.text(data, Plot.selectFirst(Plot.stackY({
          x: "month", 
          y: "totals", 
          // z: "state", 
          text: d => d.totals > 45000 ? d.state : "",
          offset: "expand", 
          reverse: true,
          textAnchor: "start",
          rotate: width > 450 ? 0 : 30,
          dx: 5,
          fill: "state"}))),
      ]
    };

    var nics_baseline = {
      width: width,
      style:{fontSize: size},
      // marginLeft: 20,
      // marginRight: 40,
      // marginTop: 10,
      // marginBottom: 10,
      // color: {
        // scheme: "greys",
        // range: [.35,.9],
        // reverse: true
      // },
      y: {
        grid: true,
        label: "Background checks",
        nice: true,
      },
      x:{
        clamp: true,
        label: null,
      },
      fy: {
        round: true,
        label: null
      },
      facet: {
        data: data,
        y: "state",
        // marginLeft: width > 450 ? 160 : 110,
        // marginRight: width > 450 ? 10 : 0,
      },
      color: {
        // type: "diverging",
        scheme: "tableau10",
        reverse: true,
      },
      marks: [
      Plot.areaY(data, {x: "month", y: "totals", fill: "state", fillOpacity: 0.92, sort: {fy: "y", reduce: "max-index"}}),
      Plot.line(data, {x: "month", y: "totals", stroke: "white", strokeWidth: 1}),
      Plot.ruleY([0],{stroke:"rgba(204,204,204,.8)"}),
      ]
      // marks: [
      // // Plot.ruleY([1]),
      // Plot.line(data, ({
      //   x: "month", 
      //   y: "handgun",
      //   stroke: "state",
      //   sort: "month",
      //   strokeOpacity: .7
      // })),
      // Plot.text(data, Plot.selectLast({
      //   x: "month", 
      //   y: "totals",
      //   sort: "month",
      //   fill: "state",
      //   text: d => d.totals >= 20000 ? d => d.state : "",
      //   textAnchor: "start",
      //   fontSize: 12,
      //   fontWeight: 700,
      //   dx: 3
      // })),
      // Plot.text(data, Plot.selectLast(Plot.normalizeY({
      //   x: "month",
      //   y: "totals",
      //   z: "state",
      //   sort: "month",
      //   fill: "state",
      //   text: "state",
      //   textAnchor: "start",
      //   fontSize: 14,
      //   fontWeight: 700,
      //   dx: 3
      // })))
      // ]
    };

    document.getElementById("nics_stackedarea").appendChild(Plot.plot(nics_stackedarea));
    document.getElementById("nics_baseline").appendChild(Plot.plot(nics_baseline));
  });
  </script>
</body>
</html>