<!DOCTYPE html>
<html lang="en">
<head>
  <title>The Diffusion of Wal-Mart</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css" />

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The Diffusion of Wal-Mart.">
  <meta name="author" content="Justin Chill">

  <style type="text/css">
    figure#minimap{
      grid-column: 2 / -2;
      margin: 20px 0;
    }

    svg text{
      font-weight: normal;
    }

  /*  Hacky way to avoid the legend, target the map  */
    figure#map svg+svg text{
      font-size: calc(12px + (22 - 16) * ((100vw - 320px) / (1300 - 320)));
      background: none;
      margin: 20px 0px;
    }    

    figcaption{
      margin-bottom: 0;
      font-size: calc(8px + (22 - 16) * ((100vw - 320px) / (1300 - 320)));
      text-align: right;
    }
    cite a:not([class]){
      text-decoration: none;
      color:  hsl(234, 62%, 26%);
    }
    article > blockquote{
      background:  hsl(221, 68%, 93%);
      border-left: 8px solid hsl(227, 42%, 51%);
    }
    article > blockquote:before{
      color:  hsl(227, 42%, 51%);
    }
  </style>
</head>
<body>
  <nav class="nav">
    <div class="nav__list">
      <a href="index.html" class="nav__item">Home</a>
      <a href="blog.html" class="nav__item">Blog</a>
    </div>
    <div class="nav__list">
      <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
      <a href="#" class="nav__item js-email-link">Email</a>
    </div>
  </nav>
  
  <main role="main">
    <article>
     <div class="article-hero">
      <h2 class="article-category">Post</h2>
      <h1 class="article-title">Sprawl-Mart</h1>
      <h2 class="article-subtitle"></h2>
    </div>

    <h3>Wal-Mart stores built by decade</h3>
    <figure id="minimap"></figure>
    <figcaption>Data: Diffusion of Wal-Mart Stores (<a href="https://digital.library.unt.edu/ark:/67531/metadc68027/m2/1/high_res_d/thesis.pdf">Holmes 2011</a>)</figcaption>

    <p>This map shows the spread of Wal-Mart stores across the continental United States by decade from the 1960s to 2000s. The significance of this pattern of retail dispersion, as explained in a 2011 thesis degree<a href="#Holmes" aria-describedby="footnote-label" id="Holmes-ref"></a>, is that by locating stores in close proximity to one another and expanding locally and regionally, Wal-Mart on average, saves around $3,500 a year, per store, if they locate just one mile closer to a distribution center than by being one mile further away from a distribution center.</p>

    <figure id="map"></figure>
    <figcaption>Data: Diffusion of Wal-Mart Stores (<a href="https://digital.library.unt.edu/ark:/67531/metadc68027/m2/1/high_res_d/thesis.pdf">Holmes 2011</a>)</figcaption>

    <p>Over the past half century (1960 - 2010), the retail environment in the United States has undergone a dramatic shift away from traditional “mom and pop” stores and towards large scale “big-box” retailing. Target, K-Mart and Wal-Mart each opened their first discount store in 1962; Target located in a Minneapolis suburb, K-Mart in a Detroit suburb, and Wal-Mart in the small town of Rogers, Arkansas.</p> 

    <p>Over the next several decades, these retailers expanded strategically across the United States<a href="#Graff" aria-describedby="footnote-label" id="finalquote-ref"></a>. Target and K-Mart grew quickly and located stores in major metropolitan areas. Wal-Mart chose to locate stores in smaller towns close to their home office of Bentonville, Arkansas.</p>

    <h3>Stores built per year</h3>
    <figure id="bars"></figure>
    <figcaption>Data: Diffusion of Wal-Mart Stores (<a href="https://digital.library.unt.edu/ark:/67531/metadc68027/m2/1/high_res_d/thesis.pdf">Holmes 2011</a>)</figcaption>

  </article>
</main>
<footer>
  <h2 id="footnote-label">Footnotes</h2>
  <ol>
    <li id="Holmes"><a href="https://digital.library.unt.edu/ark:/67531/metadc68027/m2/1/high_res_d/thesis.pdf">Holmes, 2011</a>.<a href="#Holmes-ref" aria-label="Back to content">↩</a></li>
    <li id="Graff"><a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/j.0033-0124.1994.00019.x">Graff and Ashton, 1994</a>.<a href="#Graff-ref" aria-label="Back to content">↩</a></li>    
  </ol>

  <div>
    <p>Justin Chill © 2024. Thanks for reading!</p>
    <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img src="imgs/github.svg" class="icon">Source code and feedback</a></span>    
  </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/d3"></script>
<script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>

<script type="text/javascript">
  var element = d3.select('figure').node();
  var width = element.getBoundingClientRect().width; // get width of article so graphic is responsive
  var size = 12;
  
  // Use Promises to async request data
  var promises = [d3.json("data/geo/statemesh.json"),d3.json("data/geo/nation.json"),d3.csv("data/walmarts.csv",d3.autoType)];

  // You can request multiple srcs in a promise
  myDataPromises = Promise.all(promises);

  // After data is successfully fetched, generate viz
  myDataPromises.then(function(data) {
    // Define the data. There's gotta be a better way to do this:
    var statemesh = data[0];
    var nation = data[1];
    var walmarts = data[2];
    var walcolor = "#0071CE";
    var domain = [0, 20];

    var minimap = {
      width: width,
      style:{fontSize: size*1.35},
      marginRight: 10,
      projection: "albers",
      fx: {
        interval: "10 years",
        tickFormat: (d) => `${d.getUTCFullYear()}’s`,
        label: null
      },
      marks: [
        Plot.geo(statemesh, {strokeOpacity: 0.1}),
        Plot.geo(nation, {strokeOpacity: 0.7}),
        Plot.dot(walmarts, {fx: "date", x: "longitude", y: "latitude", r: 1, fill: walcolor}),
        Plot.tip(nation, {x: 36.372852, y: -94.208817})
        ]
    };

    var map = {
      width: width,
      style: "background: none; cursor: default; minWidth: 350px; minHeight: 500px;",      
      marginRight: 10,
      padding: 0.05,
      projection: "albers",
      color: {
        type: "quantize",
        scheme: "GnBu",
        unknown: "#ddd",
        label: "Decade store built",
        legend: true,
        tickSize: 0,
      },

      marks: [
        Plot.geo(nation, {strokeOpacity: 0.9, fill: "#222", opacity: .05}),
        Plot.geo(statemesh, {strokeOpacity: 0.7}),
        Plot.density(walmarts, {
          x: "longitude",
          y: "latitude",
          bandwidth: 10,
          fill: (d) => d.date.getUTCFullYear(),
          opacity: .15
        }),
        Plot.dot(walmarts, {
          x: "longitude", 
          y: "latitude", 
          r: width > 500 ? 5 : 2, 
          fill: (d) => d.date.getUTCFullYear(),
          opacity: .7,
          tip: {
            opacity: 0.85,
            textPadding: 10,
          },
        }),
        ]
    };

    var bars = {
      width:  width,
      marginLeft: width/33,
      marginRight: width/100,
      marks: [
        Plot.ruleY([0], { stroke: '#555' }),
        Plot.axisY({anchor: "left", labelAnchor: "top", ticks: 4}),
        Plot.dot(
          walmarts,
          Plot.stackY({
            x: "date", fill: '#4e79a7', r: 2, 
          })
        )
      ],
      x: {
        interval: "year",
        label: null,
        tickSize: 0,
      },
      y: {grid: true, ticks: 5, nice: true},
    };

    document.getElementById("minimap").appendChild(Plot.plot(minimap));
    document.getElementById("map").appendChild(Plot.plot(map));
    document.getElementById("bars").appendChild(Plot.plot(bars));
  });
</script>
</body>
</html>