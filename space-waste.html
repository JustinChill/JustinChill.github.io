<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
  <title>Crashes on the moon</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Space junk left on the moon's surface.">
  <meta name="author" content="Justin Chill">
  <!-- OpenGraph tags -->
  <meta name="keywords" content="moon, stats, chart, data viz, history, rocket, science, lunar">
  <meta name="robots" content="all">
  <meta content="en_US" property="og:locale">
  <meta content="JustinChill" property="og:site_name">
  <meta content="website" property="og:type">
  <meta content="https://justinchill.com/lunar-crash-landings.html" property="og:url">
  <meta content="Crashes on the moon" property="og:title">
  <meta content="Space junk left on the moon's surface." property="og:description">
  <meta content="https://www.justinchill.com/blog.html" property="og:see_also">
  <link rel="canonical" href="https://www.justinchill.com/lunar-crash-landings.html">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Crashes on the moon">
  <meta name="twitter:description" content="Space junk left on the moon's surface.">

  <link type="text/plain" href="humans.txt" rel="author">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="/favicon.ico">
  <meta name="theme-color" content="#4C63B6">

  <script type="module">
    document.documentElement.classList.remove('no-js');
    document.documentElement.classList.add('js');
  </script>

  <style type="text/css">
    article>figure {
      min-width: 0;
      margin: 0;
    }

    #oldest_legend {
      display: flex;
      flex-direction: row-reverse;
      background: hsla(209, 23%, 98%, 1);
      margin-bottom: 0;
    }

    #oldest_legend svg {
      border-radius: 50%;
    }

    figcaption {
      text-align: right;
    }

    @media screen and (max-width: 680px) {

      article>figure,
      #oldest_legend {
        grid-column: 1/-1;
      }
    }
  </style>
</head>

<body>
  <nav class="nav">
    <div class="nav__list">
      <a href="index.html" class="nav__item">Home</a>
      <a href="blog.html" class="nav__item">Blog</a>
    </div>
    <div class="nav__list">
      <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
      <a href="#" class="nav__item js-email-link">Email</a>
    </div>
  </nav>

  <main role="main">
    <article>
      <div class="article-hero">
        <h2 class="article-category">Post</h2>
        <h1 class="article-title">Space Waste</h1>
        <h2 class="article-subtitle">Debris left on the moon's surface.</h2>
      </div>

      <figcaption id="legend" aria-label="An unfilled circle (⭕) represents a sucessful landing with debris. A filled circle (⚫) represents an unsuccessful landing. "></figcaption>
      <figure id="crashes" aria-label=""></figure>
      <figcaption>Data: Alexandra Witze for <a href="https://www.nature.com/articles/d41586-022-00542-4">Nature</a></figcaption>
      <p>A spent rocket booster will hit the Moon on 4 March — the first time this has happened for space junk not guided there. But it will be far from the first human-made object that has ever crashed into the lunar surface. Shown are planetary missions that have smashed into the Moon, either as a full spacecraft or as parts*.</p>
      <!-- <h3>Launch date to crash date</h3> -->
      <!-- <figure id="bar" aria-label=""></figure> -->
      <!-- <figcaption>Data: Alexandra Witze for <a href="https://www.nature.com/articles/d41586-022-00542-4">Nature</a></figcaption> -->
      <h3>Original graphic</h3>
      <img src="https://images.nature.com/lw1200/magazine-assets/d41586-022-00607-4/d41586-022-00607-4_20179640.jpg" alt="Space waste: debris left on the moon's surface.">
      <h3>Lunar landings</h3>
      <img src="https://media.nature.com/lw767/magazine-assets/d41586-020-03064-z/d41586-020-03064-z_18557284.jpg" alt="Lunar landings">
    </article>
  </main>
  <footer>
    <h2 class="visually-hidden" id="footnote-label">Footnotes</h2>
    <ol>

    </ol>
    <div>
      <p>Justin Chill © 2024. Thanks&nbsp;for&nbsp;reading!</p>
      <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img src="imgs/github.svg" alt="GitHub logo" class="icon">Source code and feedback</a></span>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/d3"></script>
  <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>

  <script type="text/javascript">
    var size = 12;
    var element = d3.select('figure').node();
    var width = element.getBoundingClientRect().width; // get width of article so graphic is responsive
    var color_scale_range = [
      "#36a9e1", // SU
      "#eb5b25", // US
      "#343980", // Japan
      "#f7ab59", // Europe
      "#e5005b", // India
      "#76b82a", // China
      "#8b95a1" // Israel
    ];
    var tips = [
      {
        x1: 1959,
        y1: 3,
        x2: 1959,
        y2: 1.25,
        text: "Luna 2 is the first human made object to crash into the moon."
      },
      {
        x1: 1999, 
        y1: 2,
        x2: 1999,
        y2: 1.25,
        text: "Lunar prospector crashes with human ashes onboard."
      },
      {
        x1: 2019, 
        y1: 2,
        x2: 2019,
        y2: 1,
        text: "Beresheet crashes on landing, spilling tardigrades.."
      },
    ];

    // Use Promises to async request data
    var promises = [d3.csv("data/lunar-crashes-data.csv"), d3.autoType];
    myDataPromises = Promise.all(promises);

    // After data is successfully fetched, generate viz
    myDataPromises.then(function(data) {

      // Define the data
      var data = data[0].map((d) => {
        const soft_landing = d.soft_landing === "Y" ? true : false;
        const approx_crash_date = d.approx_crash_date === "Y" ? true : false;
        const launch_date = new Date(d.launch_date);
        const crash_date = d.crash_date === null ? null : new Date(d.crash_date);
        const nation = d.nation === null ? "Other" : d.nation;

        return {
          ...d,
          soft_landing,
          launch_date,
          crash_date,
          approx_crash_date,
          nation
        };
      });

      var color_scale_domain = [...new Set(data.map((d) => d.nation))];

      var crashes = {
        width: width,
        style: {
          fontSize: size,
        },
        color: {
          legend: true,
          domain: color_scale_domain,
          range: color_scale_range
        },
        y: {
          grid: false,
          domain: [0, 10],
          label: null,
          axis: null
        },
        x: {
          domain: [1950, 2030],
          tickFormat: "f",
          label: null,
          nice: true,
        },
        marks: [
          Plot.ruleY([0], {
            strokeWidth: 2.5,
            stroke: "darkgray"
          }),
          Plot.dot(data, {
            y: "y_offset",
            x: "crash_year",
            fill: "nation",
            fillOpacity: "soft_landing",
            stroke: "nation",
            strokeWidth: 2,
            r: 4,
            title: (d) => `${d.object} - ${d.full_date}`,
            tip: true,
          }),
          Plot.arrow(tips, {
            filter: (d,i) => i == 0,
            x1: d => d.x1 - 10,
            y1: d => d.y1 - .50,
            x2: d => d.x2 - 1,
            y2: d => d.y2 - .25,
            strokeLinejoin: "miter",
            headLength: 5,
            stroke: "#aaa",
            bend: "-40",
          }),
          Plot.text(tips, {
            filter: (d,i) => i == 0,
            x: "x1",
            y: "y1",
            lineWidth: 10,
            fill: "grey",
            text: "text",
            dx: -20,
            textAnchor: "end",
          }),
          Plot.arrow(tips, {
            filter: (d,i) => i == 1,
            x1: d => d.x1 - 2,
            y1: d => d.y1 + .50,
            x2: d => d.x2 + 0,
            y2: d => d.y2 + .25,
            strokeLinejoin: "miter",
            headLength: 5,
            stroke: "#aaa",
            bend: true,
          }),
          Plot.text(tips, {
            filter: (d,i) => i == 1,
            x: "x1",
            y: "y1",
            lineWidth: 10,
            fill: "grey",
            text: "text",
            dx: -20,
            dy: -40,
            textAnchor: "end",
          }),
          Plot.arrow(tips, {
            filter: (d,i) => i == 2,
            x1: d => d.x1 + 6,
            y1: d => d.y1 - .15,
            x2: d => d.x2 + .35,
            y2: d => d.y2 + .20,
            strokeLinejoin: "miter",
            headLength: 5,
            stroke: "#aaa",
            bend: "-10",
          }),
          Plot.text(tips, {
            filter: (d,i) => i == 2,
            x: "x1",
            y: "y1",
            lineWidth: 10,
            fill: "grey",
            text: "text",
            dy: -15,
            dx: 30,
            textAnchor: "start",
          }),
        ]
      };
      console.log(data);
      var bar = {
        width: width,
        style: {
          fontSize: size,
        },
        marginLeft: 150,
        color: {
          legend: true,
          domain: color_scale_domain,
          range: color_scale_range
        },
        x: {
          grid: true,
          scale: "linear"
        },
        y: {
          label: null,
          domain: d3.sort(data, (d) => +d.full_date).map((d) => d.object)
        },
        marks: [
          Plot.dot(data, { x: "crash_year", y: "object", fill: "nation", stroke: "nation", fill: "soft_landing" ? "nation" : null,}),
          // Plot.dot(
          //   data.filter((d) => !d.approx_crash_date),
          //   { x: "full_date", y: "object", fill: "nation" }
          // ),
        ]
      };

      document.getElementById("crashes").appendChild(Plot.plot(crashes));
      // document.getElementById("bar").appendChild(Plot.plot(bar));

      // Circle legend from https://observablehq.com/@chris-creditdesign/nature-lunar-crash-landings-graphic
        const svg_width = 16;
        const legend = document.querySelector('#legend');

        const empty_circle = `
          <svg viewport="0 0 ${svg_width} ${svg_width}"  width="${svg_width}" height="${svg_width}">
            <circle r="${(svg_width - 6) / 2}" cx="${svg_width / 2}" cy="${
          svg_width / 2
        }" stroke="#000" stroke-width="3" fill="#fff"/>
          </svg>`;

        const filled_circle = `
          <svg viewport="0 0 ${svg_width} ${svg_width}"  width="${svg_width}" height="${svg_width}">
            <circle r="${(svg_width - 6) / 2}" cx="${svg_width / 2}" cy="${
          svg_width / 2
        }" stroke="#000" stroke-width="3" fill="#000"/>
          </svg>`;

        legend.innerHTML = `<div style="font-family: sans-serif; font-size: 12px; display: flex; align-items: center; gap: 0.5em;">${empty_circle}<p>Successful landing with debris</p>${filled_circle} <p>Crash landing</p></div>`;
    });
  </script>
</body>

</html>