<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
  <title>Basketball stats</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Basketball data visualizations by Justin Chill">
  <meta name="author" content="Justin Chill">
  <!-- OpenGraph tags -->
  <meta name="keywords" content="basketball, stats, chart, data viz">
  <meta name="robots" content="all">
  <meta content="en_US" property="og:locale">
  <meta content="JustinChill" property="og:site_name">
  <meta content="https://www.justinchill.com/blog.html" property="og:see_also">
  <meta content="Basketball stats" property="og:title">
  <meta content="Basketball data visualizations by Justin Chill" property="og:description">
  <meta content="website" property="og:type">
  <meta content="https://justinchill.com/basketball.html" property="og:url"> 
  <link rel="canonical" href="https://www.justinchill.com/basketball.html">
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Basketball stats">
  <meta name="twitter:description" content="Basketball data visualizations by Justin Chill">
  
  <link type="text/plain" href="humans.txt" rel="author">
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="/favicon.ico">
  <meta name="theme-color" content="#4C63B6">
  
  <script type="module">
    document.documentElement.classList.remove('no-js');
    document.documentElement.classList.add('js');
  </script>
  
  <style type="text/css">
    @import url('https://fonts.googleapis.com/css?family=Archivo&display=swap'); 

    label {
      font-weight:bold;
    }

    p img{
      float: left;
      border-radius: 4px;
      padding: var(--spacer-1);
    }

    .hover{
      font-family:'Archivo';
      font-size:12px;
    }
    .player-image-container{
      display:inline-block;
      border-radius:50%;
      height:70px;
      width:70px;
      border: 1px solid;
      background-color:whitesmoke;
      margin-right:15px;
    }

    .player-image {
      display: block;
      object-fit: cover; /* Scale the image to cover the entire container */
      height: 70px; /* Set the height to 70px */
      width: 70px; /* Set the width to 70px to make it square */
      margin-right: 15px; /* Add margin for spacing */
      clip-path: circle(50% at 50% 50%); /* Clip the image into a circle */
    }

    .player-shots {
      padding-left:50px;
      font-size:25px;
    }

    .player-info, .player-card, .player-image {
      display:flex;
      align-items:center;
    }

    .player-info{
      margin-right:30px;
      height:90px;
    }

    .player-title{
      font-weight:bold;
      font-size:25px;
    }

    .player-team{
      color:grey;
      font-size:20px;
    }

    .team-title{
      width:300px;
    }

    .team-title, .player-stats{
      display:block;
    }

    .icon-basketball {
      width: 100px;
      height: 100px;
      fill: red;
    }

    section.split{
      display: flex;
    }
    @media screen and (max-width: 680px) {
    section.split{
      display: block;
    }
    }
  </style>
</head>
<body>
  <nav class="nav">
    <div class="nav__list">
      <a href="index.html" class="nav__item">Home</a>
      <a href="blog.html" class="nav__item">Blog</a>
    </div>
    <div class="nav__list">
      <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
      <a href="#" class="nav__item js-email-link">Email</a>
    </div>
  </nav>
  
  <main role="main">
    <article>
     <div class="article-hero">
      <h2 class="article-category">Post</h2>
      <h1 class="article-title">Basketball stats</h1>
      <h2 class="article-subtitle">
        <svg class="icon-basketball">
          <use xlink:href="#basketball"></use>
        </svg>
      </h2>
    </div>
    <p>The first public basketball game was on March 12, 1892 in a YMCA gymnasium.  Approximately 200 spectators came to view this new and unheard of sport. As the sport grew in popularity, it was introduced into the 1904 Olympics, but it was not until 1936 when it was acknowledged as a medal event. </p>
    <ul>
      <li>There are 30 teams.</li>
    </ul>
    <figure id="teams" class="mid-size"></figure>
    <ul>
      <li>Each team has 82 games a season.</li>
      <li>Not all teams play the same day of week.</li>
      <li>Some games are back-to-back, meaning there are two games two days in a row.</li>
      <li>No team ever has three games three days in a row.</li>
      <li>A <strong>field goal</strong> is when someone makes a basket.</li>
      <li>Attempts and makes are ways of evaluating shooting efficiency.</li>
      <li>Most field goals are two points. Those that are not are called three point shots. They are shot from a line that's far from the basket.</li>
      <li>An <strong>assist</strong> is when someone receives a sweet pass before they make a field goal</li>
      <li>A <strong>steal</strong> is when you take the ball from the opposing team.</li>
      <li>A <strong>block</strong> is when you block a shot from the opposing team.</li>
      <li><strong>Turnover</strong> is when you lose the ball and the other team gets it.</li>
      <li>Personal fouls is when the ref says NOPE.</li>
      <li>Rebounds is when you grab the ball after a missed field goal. If you get it when you're on defense, it's a defensive rebound. If you get it when you're on offense, it's an offensive rebound.</li>
    </ul>
    <h2>Top 100 Point scorers, all time</h2>
    <figure id="points"></figure>
    <figcaption>Data: <a href="https://observablehq.com/d/ebb5e479f1f54444#data">January 2023</a>.</figcaption>
    <p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Kareem_Abdul-Jabbar_1974.jpeg/175px-Kareem_Abdul-Jabbar_1974.jpeg" loading="lazy"> <strong>Kareem Abdul-Jabbar</strong> was the first player to reach 34,000 total points, becoming the leading scorer in NBA history on Jan. 10, 1986 and finishing his career at 38,387. Only Karl Malone, ending his career as the league’s second-leading scorer with 36,928 points, and LeBron James have done so since. Notably, Kobe Bryant came close to the 34,000-point mark before ultimately ending his career as the NBA’s third-leading scorer with 33,643 points.</p>

    <h2>Points per Game (PPG)</h2>
    <figure id="games"></figure>
    <figcaption>Data: <a href="https://observablehq.com/d/ebb5e479f1f54444#data">January 2023</a>.</figcaption>
    <p>Points per game, often abbreviated <strong>PPG</strong>, is the average number of points scored by a player per game played in a sport, over the course of a series of games, a whole season, or a career. It is calculated by dividing the total number of points by number of games.</p>

    <h2>PPG and games played</h2>
    <figure id="ppg"></figure>
    <figcaption>Data: <a href="https://observablehq.com/d/ebb5e479f1f54444#data">January 2023</a>.</figcaption>

    <h2>Heatmap</h2>
    <figure id="heatmap"></figure>
    <figcaption>Data: <a href="https://observablehq.com/d/ebb5e479f1f54444#data">January 2023</a>.</figcaption>
    
    <h2>Points per minute (PPM)</h2>
    <section class="split">
    <figure id="ppm"></figure>
    <!-- <figcaption>Data: <a href="https://observablehq.com/d/ebb5e479f1f54444#data">January 2023</a>.</figcaption> -->
    <figure id="ppmall"></figure>
    </section>

    <h2>NBA Power Rankings</h2>
    <p>A visualization of <a href="https://www.nba.com/news/category/power-rankings">John Schuhmann's NBA Power Rankings</a> for each week of the <span style="white-space: nowrap;">2021-22</span> Regular Season. </p>
    <figure id="powerRankings" class="mid-size"></figure>
    <img src="https://cdn.vox-cdn.com/thumbor/-tp5kwpq553Do_ZxRNTCS-mVw88=/0x0:1944x2409/1400x1400/filters:focal(413x745:723x1055):format(jpeg)/cdn.vox-cdn.com/uploads/chorus_image/image/54508765/steph_cover.0.jpg" loading="lazy" class="full-bleed">
  </article>
</main>
<footer>
  <h2 id="footnote-label">Footnotes</h2>
  <ol>
    <li id="ort">Inspired by <a href="https://observablehq.com/@nor">Nicholas Ortenzio</a>.<a href="#ort-ref" aria-label="Back to content">↩</a></li>
  </ol>

  <div>
    <p>Justin Chill © 2024. Thanks for reading!</p>
    <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img src="imgs/github.svg" class="icon">Source code and feedback</a></span>    
  </div>
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" enable-background="new 0 0 100 100" xml:space="preserve" style="display: none;">
    <defs>
      <symbol id="basketball" viewBox="0 0 100 100">
        <title>Basketball</title>
        <path d="M28.1,36.6c4.6,1.9,12.2,1.6,20.9,1.1c8.9-0.4,19-0.9,28.9,0.9c6.3,1.2,11.9,3.1,16.8,6c-1.5-12.2-7.9-23.7-18.6-31.3   c-4.9-0.2-9.9,0.3-14.8,1.4C47.8,17.9,36.2,25.6,28.1,36.6z"/>
        <path d="M70.3,9.8C57.5,3.4,42.8,3.6,30.5,9.5c-3,6-8.4,19.6-5.3,24.9c8.6-11.7,20.9-19.8,35.2-23.1C63.7,10.5,67,10,70.3,9.8z"/>
        <path d="M16.5,51.3c0.6-1.7,1.2-3.4,2-5.1c-3.8-3.4-7.5-7-11-10.8c-2.1,6.1-2.8,12.5-2.3,18.7C9.6,51.1,13.4,50.2,16.5,51.3z"/>
        <path d="M9,31.6c3.5,3.9,7.2,7.6,11.1,11.1c0.8-1.6,1.7-3.1,2.6-4.6c0.1-0.2,0.3-0.4,0.4-0.6c-2.9-3.3-3.1-9.2-0.6-17.6   c0.8-2.7,1.8-5.3,2.7-7.4c-5.2,3.4-9.8,8-13.3,13.7C10.8,27.9,9.8,29.7,9,31.6z"/>
        <path d="M15.4,54.7c-2.6-1-6.1,0.7-9.7,3.4c1.2,6.6,3.9,13,8,18.5C13,69.3,13.5,61.8,15.4,54.7z"/>
        <path d="M39.8,57.6C54.3,66.7,70,73,86.5,76.4c0.6-0.8,1.1-1.6,1.7-2.5c4.8-7.7,7-16.3,6.8-24.8c-13.8-9.3-31.3-8.4-45.8-7.7   c-9.5,0.5-17.8,0.9-23.2-1.7c-0.1,0.1-0.2,0.3-0.3,0.4c-1,1.7-2,3.4-2.9,5.1C28.2,49.7,33.8,53.9,39.8,57.6z"/>
        <path d="M26.2,88.2c3.3,2,6.7,3.6,10.2,4.7c-3.5-6.2-6.3-12.6-8.8-18.5c-3.1-7.2-5.8-13.5-9-17.2c-1.9,8-2,16.4-0.3,24.7   C20.6,84.2,23.2,86.3,26.2,88.2z"/>
        <path d="M30.9,73c2.9,6.8,6.1,14.4,10.5,21.2c15.6,3,32-2.3,42.6-14.6C67.7,76,52.2,69.6,37.9,60.7C32,57,26.5,53,21.3,48.6   c-0.6,1.5-1.2,3-1.7,4.6C24.1,57.1,27.3,64.5,30.9,73z"/>
      </symbol>
    </defs>
  </svg>
</footer>

<script src="https://cdn.jsdelivr.net/npm/d3"></script>
<script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>

<script type="text/javascript">
  var element = d3.select('figure').node();
  var width = element.getBoundingClientRect().width; // get width of article so graphic is responsive
  var size = 16;
  
  // Use Promises to async request data
  var promises = [d3.json("data/basketball-data.json"), d3.csv("data/nba_teams_color_codes.csv", d3.autoType),d3.json("data/powerRankings.json")];

  myDataPromises = Promise.all(promises);

  // After data is successfully fetched, generate viz
  myDataPromises.then(function(data) {
    // Define the data
    var nba_stats = data[0];
    var nba_teams = data[1];
    var nba_ranks = data[2];
    var weeks = [...new Set(nba_ranks.map((d) => d.week))].sort((a, b) => a - b);

    var points = {
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      inset: 8,
      round: true,
      nice: true,
      x: {ticks: 5, tickSize: 0, labelAnchor: "right"},
      y: {ticks: 5, tickSize: 0, label: "Games played"},
      grid: true,
      color: {
        scheme: "YlOrRd",
        legend: true,
        label: "Points Per Game"
      },
      marks: [
        Plot.dot(nba_stats.slice(0,100), {x: "points", y: "games", stroke: "ppg", tip: true, channels: {name: "name"}, }),
        Plot.text(nba_stats.slice(0,100), {x: "points", y: "games", text: "name", fill: "#000", stroke:"#ffffffaa", dy: -10, filter: (d,i)=>d.active || i<8 }),
        ]
    };

    var games = {
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      inset: 8,
      round: true,
      nice: true,
      x: {ticks: 5, tickSize: 0,  labelAnchor: "center", frameAnchor: "bottom", labelOffset: 0},
      y: {ticks: 5, tickSize: 0, label: "PPG"},
      grid: true,
      color: {
        scheme: "YlOrRd",
        legend: true,
        label: "Games Played"
      },
      r: {
        domain: [800,1600],
        range: [1,4],
        legend: true
      },
      marks: [
        Plot.dot(nba_stats.slice(0,200), {x: "points", y: "ppg", r: "games", fill:"games", tip: true, channels: {name: "name"}, }),
        Plot.text(nba_stats.slice(0,100), {x: "points", y: "ppg", text: "name", fill: "#000", stroke:"#ffffff33", dy: -10, filter: (d,i)=>d.active||d.rank<5}),
        ]
    };

    var ppg = {
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      inset: 8,
      round: true,
      nice: true,
      x: {tickSize: 0, labelAnchor: "center", label: "Points per game (ppg)", frameAnchor: "bottom", labelOffset: 0},
      y: {ticks: 5, tickSize: 0, label: "Games played"},
      grid: true,
      color: {
        scheme: "YlOrRd",
        legend: true,
        label: "Points Scored"
      },
      marks: [
        Plot.dot(nba_stats.slice(0,100), {x: "ppg", y: "games", stroke: "points", tip: true, channels: {name: "name"}, }),
        Plot.text(nba_stats.slice(0,100), {x: "ppg", y: "games", text: "name", fill: "#000", stroke:"#ffffff33", dy: -10, filter: (d,i)=>d.active || i<10 }),
        ]
    };

    var heatmap = {
      width: width,
      style:{fontSize: size, textTransform: "capitalize"},
      round: true,
      nice: true,
      x: {ticks: 5, tickSize: 0,  labelAnchor: "center", frameAnchor: "bottom", labelOffset: 0},
      y: {ticks: 5, tickSize: 0, label: "Games played"},
      inset: 8,
      grid: true,
      color: {
        legend: true,
        type: "symlog",
        reverse: true
      },
      channels: {name: "name"},
      marks: [
        Plot.rect(nba_stats, Plot.bin({fill: "count"}, {x: "points", y: "games", thresholds: 200, inset: 0,tip: true, })),
        Plot.text(nba_stats.slice(0,100), {x: "points", y: "games", text: "name", fill: "#000", stroke:"#ffffffaa", dy: -10, filter: (d,i)=>d.active || i<10 }),
        ]
    };

    // Inspired by https://observablehq.com/@jonfroehlich/nba-team-colors
    var teams = {
      width: width,
      // height: 200,
      style:{fontSize: size-2, textTransform: "capitalize",paddingTop: 10, paddingBottom:40, paddingLeft:20},
      // marginLeft: 0,
      marginRight:0,
      inset: 20,
      x: {tickRotate: -30, label: null},
      marks: [
        Plot.image(
          nba_teams,
          Plot.dodgeY({
            x: "Team",
            r: 20, // clip to a circle
            preserveAspectRatio: "xMidYMin slice", // try not to clip heads
            src: "LogoSvgUrl",
            title: "Team"
          })
          )
        ]
    };
    
    var ppm = {
      width: width > 680 ? width/2 : width,
      style:{fontSize: size, textTransform: "capitalize",paddingLeft:60},
      y: {label: null,},
      x: {grid: true, axis: "both",nice: true},
      title: "Top 50 ppm (Active players)",
      caption: "Data: January 2023",
      marks: [
        Plot.barX(nba_stats.filter((d) => d.active == true && d.minutes > 500)
          .sort((a, b) => (b.points / b.minutes) - (a.points / a.minutes)) // Sort before slicing
          .slice(0, 50),  // Limit entries
          {x: d=> d.points / d.minutes, y: "name", fill: "active", sort: { y: "x", reverse: true }, tip: true}),
        ]
    };
    
    var ppmall = {
      width: width > 680 ? width/2 : width,
      style:{fontSize: size, textTransform: "capitalize",paddingLeft:60},
      y: {label: null,},
      x: {grid: true, axis: "both", },
      title: "Top 50 ppm (All time)",
      caption: "Data: January 2023",
      marks: [
        Plot.barX(nba_stats.filter((d) => d.minutes > 2000)
          .sort((a, b) => (b.points / b.minutes) - (a.points / a.minutes)) // Sort before slicing
          .slice(0, 50),  // Limit entries
          {x: d=> d.points / d.minutes, y: "name", fill: "active", sort: { y: "x", reverse: true }, tip: true, channels: {minutes: "minutes", points: "points", PPM: d=> d.points / d.minutes}, format: {x: false}}),
        ]
    };

    // Inspired by https://observablehq.com/@nor/nba-power-rankings?collection=@nor/nba
    function bumpMarks(data, { r = 3, curve = "bump-x", ...options }) {
      options = Plot.stackY2(options);
      
      return [
        
        Plot.line(data, { 
          ...options, 
          stroke: options.z, 
          curve, 
          strokeOpacity: .1,
          fill: null 
        }),
        
        Plot.image(data, { 
          ...options, 
          src: 'logoSrc', 
          title: 'teamName', 
          width: 30, 
          opacity: 4,
        }),
        
        // Plot.text(data, Plot.selectLast({ 
        //   // fill: options.z, 
        //   ...options, 
        //   fontSize: 12, 
        //   strokeWidth: 3, 
        //   fontWeight: 600, 
        //   text: options.y, 
        //   stroke: "white", 
        //   fill: "black" 
        // })),
        
        // Plot.text(
        //   data,
        //   Plot.selectFirst({
        //     ...options,
        //     text: options.z,
        //     dx: 15,
        //     textAnchor: "start",
        //     fill: "currentColor",
        //   }),
        
        // Plot.text(
        //   data,
        //   Plot.selectLast({
        //     ...options,
        //     text: options.z,
        //     dx: -15,
        //     textAnchor: "end",
        //     fill: "currentColor"
        //   }) 
        // ))        
      ];
    }
    var powerRankings = {
      width: width,
      height: 500,
      style:{fontSize: size, textTransform: "capitalize", paddingBottom: 10},
      marginLeft: 0,
      insetBottom: 20,
      width: width,
      x: {
        domain: weeks,
        label: 'Week',
      },
      y: {
        ticks: 0,
        label: "Rank →",
        labelAnchor: "center",
        domain: [15, 1],
      },
      color: {
        domain: d3.groupSort(nba_ranks, v => v[0].rank, d => d.teamAbbr),
        range: d3.groupSort(nba_ranks, v => v[0].rank, d => d.color),
      },
      marks: [
        bumpMarks(nba_ranks, {
          x: "week",
          z: "teamAbbr",
          order: "rank",
          r: 15,
          dy: "2em",
          fill: "white",
          strokeWidth: 1,
          strokeLinejoin: "round",
          strokeLinecap: "round",
        })
      ]
    };

    document.getElementById("points").appendChild(Plot.plot(points));
    document.getElementById("games").appendChild(Plot.plot(games));
    document.getElementById("ppg").appendChild(Plot.plot(ppg));
    document.getElementById("heatmap").appendChild(Plot.plot(heatmap));
    document.getElementById("teams").appendChild(Plot.plot(teams));
    document.getElementById("ppm").appendChild(Plot.plot(ppm));
    document.getElementById("ppmall").appendChild(Plot.plot(ppmall));
    document.getElementById("powerRankings").appendChild(Plot.plot(powerRankings));
  });
</script>
</body>
</html>