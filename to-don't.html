<!DOCTYPE html>
<html lang="en">
<head>
	<title>To Don't List</title>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="style.css" />

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="A visualization of typographical terms">
	<meta name="author" content="Justin Chill">

	<style type="text/css">
		section.dontlist {
			margin: 50px auto;
			padding: 25px;
			/*max-width: 200px;*/
			border: 1px solid #c7c8cc;
			border-radius: 6px;
			color: #646a71;
			/*font-size: 0.75rem;*/
			background: #fff;
		}
		section.dontlist h1{
			font-size: 1em;
			text-align: left;
		}

		[role=progressbar] {
			position: relative;
			margin-top: 10px;
			width: 100%;
			height: 3px;
			border-radius: 2px;
			background: #dddee1;
		}
		[role=progressbar] div {
			width: 0;
			height: 3px;
			background: hsl(212, 92%, 43%);
		}
		[role=progressbar] p {
			position: absolute;
			clip: rect(0, 0, 0, 0);
		}

		.dontlist ul {
			margin: 10px 0 0;
			padding: 0;
			color: #666c74;
			list-style: none;
		}

		.dontlist li{
			padding: .5rem 0;
		}
		.dontlist span:hover{
			cursor: pointer;
		}
		.dontlist > li + li {
			margin-top: 10px;
		}

		.dontlist > input {
			display: block;
			position: absolute;
			top: 50%;
			left: 0;
			margin: 0;
			transform: translateY(-50%);
		}
		input:checked + span {
			text-decoration: line-through;
		}

		.dontlist input + span{
			padding-left: 10px;
		}
	</style>

</head>
<body>
	<header>
		<h1><a href="index.html" rel="home">Justin's blog</a></h1>
	</header><main role="main">
		<article>
			<header>
				<h1>To-Don't List</h1>		
				<h2 class="subtitle"></h2>
				<time date="2021-02-26">February 2021</time>
			</header>
			<section class="dontlist">
				<h1>Don't do these things</h1>
				<div role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="11" aria-describedby="progress-text">
					<div></div>
					<p id="progress-text"><span id="percentage">9%</span>
						of your tasks are completed.
					</p>
				</div>
				<ul>
					<li>
						<label>
							<input type="checkbox"/><span>Go chasing waterfalls</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox"/><span>Forget about Dre</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox" checked="checked"/><span>Trip ðŸ§¢</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox"/><span>Fear the reaper</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox"/><span>Stop (believing)</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox"/><span>Go breaking my heart</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox"/><span>Let me down</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox"/><span>Wish your girlfriend was hot like me</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox"/><span>Worry, be happy ðŸ¥³</span>
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox"/><span>Look now</span>
						</label>
					</li>
				</ul>
			</section>

			<p>The primary goal of this project was to understand the javascript behind the progress bar at the top of the list. It's done in three steps. First find and count all inputs in your list. In this examples there are <mark type="text" id="someInput" name="someInput">x</mark> inputs. Second, draw two overlapping <code>div</code> elements for the progress bar. The width of the bar is calculated as: <b>percentage = (checked / total) * 100</b>. Third, create a function to update the width of the progress bar when inputs are toggled. The inspiration for this came from <a href="https://codepen.io/Moiety">ZoÃ« Bijl</a> originally.</p>
		</article>
	</main>
	<script type="text/javascript">
		var progress = document.querySelectorAll("[role=progressbar]")[0];
		var progressIndicator = progress.getElementsByTagName("div")[0];
		var progressText = document.getElementById("percentage");
		var inputs = document.getElementsByTagName("input");
		var total = inputs.length;
		document.getElementById("someInput").innerHTML = total;
		var checked;
		var percentage;

		for (var i = 0; i < total; i++) {
			  // Also handles fires via keyboard
			  inputs[i].addEventListener("click", updateProgress);
			}

			function updateProgress() {
				getNumberOfChecked();

				progress.setAttribute("aria-valuenow", checked);
				progress.setAttribute("aria-valuemax", total);
				progressIndicator.setAttribute("style", "width: " + percentage + "%");

			  // Update progress text for better AUX
			  progressText.innerHTML = floor(percentage) + "%";
			}

			function getNumberOfChecked() {
			  // Reset checked number
			  checked = 0;

			  for (var i = 0; i < total; i++) {
			  	if (inputs[i].checked) {
			  		checked++;
			  	}
			  }

			  percentage = (checked / total) * 100;
			}

			updateProgress();
		</script>
		<footer>
		</footer>
	</body>
	</html>