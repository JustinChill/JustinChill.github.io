<!DOCTYPE html>
<html lang="en">
<head>
  <title></title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="A league of their own: Major sports leagues of North America.">
  <meta name="author" content="Justin Chill">
  <!-- OpenGraph tags -->
  <meta name="keywords" content="league, major, sports, data viz">
  <meta name="robots" content="all">
  <meta content="DISAGlobalSolutions" property="fb:profile_id">
  <meta content="en_US" property="og:locale">
  <meta content="JustinChill" property="og:site_name">
  <meta content="website" property="og:type">
  <meta content="https://justinchill.com/leagues.html" property="og:url"> 
  <meta content="A league of their own: Major sports leagues of North America" property="og:title">
  <meta content="Major sports leagues of North America" property="og:description">
  <!-- Todo: change img -->
  <!-- <meta content="https://disa.com/uploads/drug-n-alcohol/_1200x630_crop_center-center_82_none/Marijuana-legality.jpg?mtime=1677001111" property="og:image"> 
  <meta content="1200" property="og:image:width">
  <meta content="630" property="og:image:height">
  <meta content="marijuana types" property="og:image:alt"> -->
  <meta content="https://www.justinchill.com/blog.html" property="og:see_also">

  <meta name="twitter:card" content="summary_large_image">
  <!-- <meta name="twitter:site" content="@DISAGlobal"> -->
  <!-- <meta name="twitter:creator" content="@DISAGlobal"> -->
  <meta name="twitter:title" content="A league of their own: Major sports leagues of North America">
  <meta name="twitter:description" content="Major sports leagues of North America">
  <!-- Todo: change img -->
<!--   <meta name="twitter:image" content="https://disa.com/uploads/drug-n-alcohol/_1200x630_crop_center-center_82_none/Marijuana-legality.jpg?mtime=1677001111"> 
  <meta name="twitter:image:width" content="800">
  <meta name="twitter:image:height" content="418">
  <meta name="twitter:image:alt" content="marijuana types">
-->  <link type="text/plain" href="humans.txt" rel="author">

<link rel="stylesheet" href="style.css" />

<style type="text/css">

</style>
</head>
<body>
  <nav class="nav">
    <div class="nav__list">
      <a href="index.html" class="nav__item">Home</a>
      <a href="blog.html" class="nav__item">Blog</a>
    </div>
    <div class="nav__list">
      <a href="http://linkedin.com/in/justinrichardhill/" class="nav__item" target="_blank">LinkedIn</a>
      <a href="#" class="nav__item js-email-link">Email</a>
    </div>
  </nav>
  
  <main role="main">
    <article>
     <div class="article-hero">
      <h2 class="article-category">Post</h2>
      <h1 class="article-title">A league of their own</h1>
      <h2 class="article-subtitle">North American Major Sports Leagues</h2>
    </div>

    <figure id="leagues"></figure>
    <figcaption>Data: ESPN.</figcaption>

    <p>Recreation in Observable Plot of this original notebook by <a href="https://observablehq.com/@michaelbyrneau/flight-paths">Michael Byrne</a> showing all major air passenger routes as of 2014. Data sourced from OpenFlights.</p>

    <figure id="map"></figure>
    <figcaption>Data: ESPN</figcaption>

  </article>
</main>
<footer>
<!--   <h2 id="footnote-label">Footnotes</h2>
  <ol>
    <li id="pew"><a href="https://www.pewresearch.org/short-reads/2024/02/29/most-americans-now-live-in-a-legal-marijuana-state-and-most-have-at-least-one-dispensary-in-their-county/">Pew Researc Center, <i>Most Americans now live in a legal marijuana state – and most have at least one dispensary in their county</i> </a>.<a href="#pew-ref" aria-label="Back to content">↩</a></li>
  </ol> -->

  <div>
    <p>Justin Chill © 2024. Thanks for reading!</p>
    <span><a href="https://github.com/JustinChill/JustinChill.github.io" target="_blank"><img src="imgs/github.svg" class="icon">Source code and feedback</a></span>    
  </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/d3"></script>
<script src="https://cdn.jsdelivr.net/npm/@observablehq/plot"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/topojson@3.0.2/dist/topojson.min.js"></script>

<script type="text/javascript">
  var element = d3.select('figure').node();
  var width = element.getBoundingClientRect().width; // get width of article so graphic is responsive
  var size = 12;


  var mlb_data = d3.csvParse(`name,city,field_city
    Arizona Diamondbacks,Phoenix
    Atlanta Braves,Atlanta
    Baltimore Orioles,Baltimore
    Boston Red Sox,Boston
    Chicago Cubs,Chicago
    Chicago White Sox,Chicago
    Cincinnati Reds,Cincinnati
    Cleveland Indians,Cleveland
    Colorado Rockies,Denver
    Detroit Tigers,Detroit
    Houston Astros,Houston
    Kansas City Royals,Kansas City
    Los Angeles Angels,Anaheim
    Los Angeles Dodgers,Los Angeles
    Miami Marlins,Miami
    Milwaukee Brewers,Milwaukee
    Minnesota Twins,Minneapolis
    New York Mets,New York
    New York Yankees,New York
    Oakland Athletics,Oakland
    Philadelphia Phillies,Philadelphia
    Pittsburgh Pirates,Pittsburgh
    San Diego Padres,San Diego
    San Francisco Giants,San Francisco
    Seattle Mariners,Seattle
    St. Louis Cardinals,St. Louis
    Tampa Bay Rays,Tampa
    Texas Rangers,Dallas,Arlington
    Toronto Blue Jays,Toronto
    Washington Nationals,Washington`);

  var nba_data = d3.csvParse(`name,city
    Atlanta Hawks,Atlanta
    Boston Celtics,Boston
    Brooklyn Nets,New York
    Charlotte Hornets,Charlotte
    Chicago Bulls,Chicago
    Cleveland Cavaliers,Cleveland
    Dallas Mavericks,Dallas
    Denver Nuggets,Denver
    Detroit Pistons,Detroit
    Golden State Warriors,San Francisco
    Houston Rockets,Houston
    Indiana Pacers,Indianapolis
    Los Angeles Clippers,Los Angeles
    Los Angeles Lakers,Los Angeles
    Memphis Grizzlies,Memphis
    Miami Heat,Miami
    Milwaukee Bucks,Milwaukee
    Minnesota Timberwolves,Minneapolis
    New Orleans Pelicans,New Orleans
    New York Knicks,New York
    Oklahoma City Thunder,Oklahoma City
    Orlando Magic,Orlando
    Philadelphia 76ers,Philadelphia
    Phoenix Suns,Phoenix
    Portland Trail Blazers,Portland
    Sacramento Kings,Sacramento
    San Antonio Spurs,San Antonio
    Toronto Raptors,Toronto
    Utah Jazz,Salt Lake City
    Washington Wizards,Washington`);

  var nfl_data = d3.csvParse(`name,city,field_city
    Arizona Cardinals,Phoenix,Glendale (AZ)
    Atlanta Falcons,Atlanta
    Baltimore Ravens,Baltimore
    Buffalo Bills,Buffalo
    Carolina Panthers,Charlotte
    Chicago Bears,Chicago
    Cincinnati Bengals,Cincinnati
    Cleveland Browns,Cleveland
    Dallas Cowboys,Dallas,Arlington (TX)
    Denver Broncos,Denver
    Detroit Lions,Detroit
    Green Bay Packers,Green Bay
    Houston Texans,Houston
    Indianapolis Colts,Indianapolis
    Jacksonville Jaguars,Jacksonville
    Kansas City Chiefs,Kansas City
    Las Vegas Raiders,Las Vegas
    Los Angeles Chargers,Los Angeles,Inglewood (CA)
    Los Angeles Rams,Los Angeles,Inglewood (CA)
    Miami Dolphins,Miami
    Minnesota Vikings,Minneapolis
    New England Patriots,Boston,Foxborough (MA)
    New Orleans Saints,New Orleans
    New York Giants,New York,East Rutherford (NJ)
    New York Jets,New York,East Rutherford (NJ)
    Philadelphia Eagles,Philadelphia
    Pittsburgh Steelers,Pittsburgh
    San Francisco 49ers,San Francisco,Santa Clara (CA)
    Seattle Seahawks,Seattle
    Tampa Bay Buccaneers,Tampa
    Tennessee Titans,Nashville
    Washington Commanders,Washington,North Englewood (MD)`);

  var nhl_data = d3.csvParse(`name,city,field_city
    Anaheim Ducks,Anaheim
    Arizona Coyotes,Phoenix,Glendale (AZ)
    Boston Bruins,Boston
    Buffalo Sabres,Buffalo
    Calgary Flames,Calgary
    Carolina Hurricanes,Raleigh
    Chicago Blackhawks,Chicago
    Colorado Avalanche,Denver
    Columbus Blue Jackets,Columbus
    Dallas Stars,Dallas
    Detroit Red Wings,Detroit
    Edmonton Oilers,Edmonton
    Florida Panthers,Fort Lauderdale,Sunrise (FL)
    Los Angeles Kings,Los Angeles
    Minnesota Wild,Saint Paul
    Montreal Canadiens,Montreal
    Nashville Predators,Nashville
    New Jersey Devils,Newark
    New York Islanders,New York,Uniondale (NY)
    New York Rangers,New York
    Ottawa Senators,Ottawa
    Philadelphia Flyers,Philadelphia
    Pittsburgh Penguins,Pittsburgh
    San Jose Sharks,San Jose
    Seattle Kraken,Seattle
    St. Louis Blues,St. Louis
    Tampa Bay Lightning,Tampa
    Toronto Maple Leafs,Toronto
    Vancouver Canucks,Vancouver
    Vegas Golden Knights,Las Vegas
    Washington Capitals,Washington
    Winnipeg Jets,Winnipeg`);

  var ca_city_data = d3.csvParse(`city,pop_2021,latitude,longitude
    Toronto,2794356,43.6532,-79.3832
    Montreal,1762949,45.5017,-73.5673
    Vancouver,662248,49.2827,-123.1207
    Calgary,1306784,51.0447,-114.0719
    Edmonton,1010899,53.5444,-113.4909
    Ottawa,1017449,45.4215,-75.6972
    Winnipeg,749607,49.8951,-97.1384`);

  var city_pop_data = d3.csvParse(`rank,city,state,pop_2021,latitude,longitude
    1,New York,New York,8467513,40.66,-73.94
    2,Los Angeles,California,3849297,34.02,-118.41
    3,Chicago,Illinois,2696555,41.84,-87.68
    4,Houston,Texas,2288250,29.79,-95.39
    5,Phoenix,Arizona,1624569,33.57,-112.09
    6,Philadelphia,Pennsylvania,1576251,40.01,-75.13
    7,San Antonio,Texas,1451853,29.46,-98.52
    8,San Diego,California,1381611,32.81,-117.14
    9,Dallas,Texas,1288457,32.79,-96.77
    10,San Jose,California,983489,37.30,-121.81
    11,Austin,Texas,964177,30.30,-97.75
    12,Jacksonville,Florida,954614,30.34,-81.66
    13,Fort Worth,Texas,935508,32.78,-97.35
    14,Columbus,Ohio,906528,39.99,-82.99
    15,Indianapolis,Indiana,882039,39.78,-86.15
    16,Charlotte,North Carolina,879709,35.21,-80.83
    17,San Francisco,California,815201,37.73,-123.03
    18,Seattle,Washington,733919,47.62,-122.35
    19,Denver,Colorado,711463,39.76,-104.88
    20,Oklahoma City,Oklahoma,687725,35.47,-97.51
    21,Nashville,Tennessee,678851,36.17,-86.79
    22,El Paso,Texas,678415,31.85,-106.43
    23,Washington,District of Columbia,670050,38.90,-77.02
    24,Boston,Massachusetts,654776,42.34,-71.02
    25,Las Vegas,Nevada,646790,36.23,-115.26
    26,Portland,Oregon,641162,45.54,-122.65
    27,Detroit,Michigan,632464,42.38,-83.10
    28,Louisville,Kentucky,628594,38.17,-85.65
    29,Memphis,Tennessee,628127,35.11,-89.97
    30,Baltimore,Maryland,576498,39.30,-76.61
    31,Milwaukee,Wisconsin,569330,43.06,-87.97
    32,Albuquerque,New Mexico,562599,35.10,-106.65
    33,Fresno,California,544510,36.78,-119.79
    34,Tucson,Arizona,543242,32.15,-110.87
    35,Sacramento,California,525041,38.57,-121.47
    36,Mesa,Arizona,509475,33.40,-111.72
    37,Kansas City,Missouri,508394,39.12,-94.56
    38,Atlanta,Georgia,496461,33.76,-84.42
    39,Omaha,Nebraska,487300,41.26,-96.05
    40,Colorado Springs,Colorado,483956,38.87,-104.76
    41,Raleigh,North Carolina,469124,35.83,-78.64
    42,Virginia Beach,Virginia,457672,36.78,-76.03
    43,Long Beach,California,456062,33.78,-118.17
    44,Miami,Florida,439890,25.78,-80.21
    45,Oakland,California,433823,37.77,-122.23
    46,Minneapolis,Minnesota,425336,44.96,-93.27
    47,Tulsa,Oklahoma,411401,36.13,-95.90
    48,Bakersfield,California,407615,35.35,-119.04
    49,Wichita,Kansas,395699,37.69,-97.35
    50,Arlington,Texas,392786,32.70,-97.12
    51,Aurora,Colorado,389347,39.70,-104.72
    52,Tampa,Florida,387050,27.97,-82.47
    53,New Orleans,Louisiana,376971,30.05,-89.93
    54,Cleveland,Ohio,367991,41.48,-81.68
    55,Anaheim,California,345940,33.86,-117.76
    56,Honolulu,Hawaii,345510,21.32,-157.85
    57,Henderson,Nevada,322178,36.01,-115.04
    58,Stockton,California,322120,37.98,-121.31
    59,Lexington,Kentucky,321793,38.04,-84.46
    60,Corpus Christi,Texas,317773,27.75,-97.17
    61,Riverside,California,317261,33.94,-117.39
    62,Santa Ana,California,309441,33.74,-117.88
    63,Orlando,Florida,309154,28.41,-81.25
    64,Irvine,California,309031,33.68,-117.77
    65,Cincinnati,Ohio,308935,39.14,-84.51
    66,Newark,New Jersey,307220,40.72,-74.17
    67,Saint Paul,Minnesota,307193,44.95,-93.10
    68,Pittsburgh,Pennsylvania,300431,40.44,-79.98
    69,Greensboro,North Carolina,298263,36.10,-79.83
    70,St. Louis,Missouri,293310,38.64,-90.24
    71,Lincoln,Nebraska,292657,40.81,-96.68
    72,Plano,Texas,288253,33.05,-96.75
    73,Anchorage,Alaska,288121,61.17,-149.28
    74,Durham,North Carolina,285527,35.98,-78.90
    75,Jersey City,New Jersey,283927,40.71,-74.06
    76,Chandler,Arizona,279458,33.28,-111.85
    77,Chula Vista,California,277220,32.63,-117.02
    78,Buffalo,New York,276807,42.89,-78.86
    79,North Las Vegas,Nevada,274133,36.28,-115.09
    80,Gilbert,Arizona,273136,33.31,-111.74
    81,Madison,Wisconsin,269196,43.09,-89.43
    82,Reno,Nevada,268851,39.55,-119.85
    83,Toledo,Ohio,268508,41.66,-83.58
    84,Fort Wayne,Indiana,265974,41.09,-85.14
    85,Lubbock,Texas,260993,33.57,-101.89
    86,St. Petersburg,Florida,258201,27.77,-82.64
    87,Laredo,Texas,256153,27.56,-99.49
    88,Irving,Texas,254198,32.86,-96.97
    89,Chesapeake,Virginia,251269,36.68,-76.30
    90,Winston-Salem,North Carolina,250320,36.10,-80.26
    91,Glendale,Arizona,249630,33.53,-112.19
    92,Scottsdale,Arizona,242753,33.68,-111.86
    93,Garland,Texas,242035,32.91,-96.63
    94,Boise,Idaho,237446,43.60,-116.23
    95,Norfolk,Virginia,235089,36.92,-76.24
    96,Spokane,Washington,229071,47.67,-117.43
    97,Fremont,California,227514,37.49,-121.94
    98,Richmond,Virginia,226604,37.53,-77.48
    99,Santa Clarita,California,224593,34.41,-118.49
    100,San Bernardino,California,222203,34.14,-117.29
    101,Baton Rouge,Louisiana,222185,30.44,-91.13
    102,Hialeah,Florida,220490,25.87,-80.30
    103,Tacoma,Washington,219205,47.25,-122.46
    104,Modesto,California,218771,37.64,-121.00
    105,Port St. Lucie,Florida,217523,27.28,-80.39
    106,Huntsville,Alabama,216963,34.78,-86.53
    107,Des Moines,Iowa,212031,41.57,-93.61
    108,Moreno Valley,California,211600,33.92,-117.21
    109,Fontana,California,210761,34.11,-117.46
    110,Frisco,Texas,210719,33.16,-96.82
    111,Rochester,New York,210606,43.17,-77.62
    112,Yonkers,New York,209530,40.95,-73.87
    113,Fayetteville,North Carolina,208778,35.08,-78.97
    114,Worcester,Massachusetts,205918,42.27,-71.81
    115,Columbus,Georgia,205617,32.51,-84.87
    116,Cape Coral,Florida,204510,26.65,-81.99
    117,McKinney,Texas,202690,33.20,-96.66
    118,Little Rock,Arkansas,201998,34.72,-92.36
    119,Oxnard,California,201879,34.20,-119.21
    120,Amarillo,Texas,201234,35.20,-101.83
    121,Augusta,Georgia,201196,33.37,-82.07
    122,Salt Lake City,Utah,200478,40.78,-111.93
    123,Montgomery,Alabama,198665,32.35,-86.27
    124,Birmingham,Alabama,197575,33.53,-86.80
    125,Grand Rapids,Michigan,197416,42.96,-85.66
    126,Grand Prairie,Texas,197347,32.69,-97.02
    127,Overland Park,Kansas,197106,38.89,-94.69
    128,Tallahassee,Florida,197102,30.46,-84.25
    129,Huntington Beach,California,196652,33.70,-118.00
    130,Sioux Falls,South Dakota,196528,43.54,-96.73
    131,Peoria,Arizona,194917,33.79,-112.31
    132,Knoxville,Tennessee,192648,35.97,-83.95
    133,Glendale,California,192366,34.18,-118.25
    134,Vancouver,Washington,192169,45.64,-122.60
    135,Providence,Rhode Island,189692,41.82,-71.42
    136,Akron,Ohio,189347,41.08,-81.52
    137,Brownsville,Texas,187831,26.00,-97.45
    138,Mobile,Alabama,184952,30.67,-88.10
    139,Newport News,Virginia,184587,37.08,-76.52
    140,Tempe,Arizona,184118,33.39,-111.93
    141,Shreveport,Louisiana,184021,32.47,-93.79
    142,Chattanooga,Tennessee,182113,35.07,-85.25
    143,Fort Lauderdale,Florida,181668,26.14,-80.15
    144,Aurora,Illinois,179266,41.76,-88.29
    145,Elk Grove,California,178997,38.41,-121.38
    146,Ontario,California,177963,34.04,-117.60
    147,Salem,Oregon,177723,44.92,-123.02
    148,Cary,North Carolina,176987,35.78,-78.82
    149,Santa Rosa,California,176938,38.45,-122.71
    150,Rancho Cucamonga,California,175142,34.12,-117.56
    151,Eugene,Oregon,175096,44.06,-123.12
    152,Oceanside,California,172982,33.22,-117.31
    153,Clarksville,Tennessee,170957,36.57,-87.35
    154,Garden Grove,California,170488,33.78,-117.96
    155,Lancaster,California,170150,34.69,-118.18
    156,Springfield,Missouri,169724,37.19,-93.29
    157,Pembroke Pines,Florida,169391,26.01,-80.34
    158,Fort Collins,Colorado,168538,40.55,-105.06
    159,Palmdale,California,165761,34.59,-118.11
    160,Salinas,California,162791,36.69,-121.63
    161,Hayward,California,159827,37.63,-122.10
    162,Corona,California,159743,33.86,-117.57
    163,Paterson,New Jersey,157794,40.91,-74.16
    164,Murfreesboro,Tennessee,157519,35.85,-86.42
    165,Macon,Georgia,156762,32.81,-83.69
    166,Lakewood,Colorado,156605,39.70,-105.12
    167,Killeen,Texas,156261,31.08,-97.73
    168,Springfield,Massachusetts,154789,42.12,-72.54
    169,Alexandria,Virginia,154706,38.82,-77.08
    170,Kansas City,Kansas,154545,39.12,-94.74
    171,Sunnyvale,California,152258,37.39,-122.03
    172,Hollywood,Florida,152131,26.03,-80.16
    173,Roseville,California,151901,38.77,-121.32
    174,Charleston,South Carolina,151612,32.83,-79.97
    175,Escondido,California,150665,33.13,-117.07
    176,Joliet,Illinois,150372,41.52,-88.15
    177,Jackson,Mississippi,149761,32.32,-90.21
    178,Bellevue,Washington,149440,47.60,-122.16
    179,Surprise,Arizona,149191,33.67,-112.45
    180,Naperville,Illinois,149104,41.75,-88.16
    181,Pasadena,Texas,148626,29.65,-95.15
    182,Pomona,California,148338,34.06,-117.76
    183,Bridgeport,Connecticut,148333,41.19,-73.20
    184,Denton,Texas,148146,33.22,-97.14
    185,Rockford,Illinois,147711,42.26,-89.06
    186,Mesquite,Texas,147691,32.76,-96.59
    187,Savannah,Georgia,147088,32.00,-81.15
    188,Syracuse,New York,146103,43.04,-76.14
    189,McAllen,Texas,143920,26.22,-98.25
    190,Torrance,California,143600,33.83,-118.36
    191,Olathe,Kansas,143014,38.88,-94.82
    192,Visalia,California,142978,36.33,-119.33
    193,Thornton,Colorado,142610,39.92,-104.94
    194,Fullerton,California,141874,33.89,-117.93
    195,Gainesville,Florida,140398,29.68,-82.35
    196,Waco,Texas,139594,31.56,-97.19
    197,West Valley City,Utah,139110,40.69,-112.01
    198,Warren,Michigan,138130,42.49,-83.03
    199,Lakewood,New Jersey,138070,40.08,-74.20
    200,Hampton,Virginia,137746,37.05,-76.30
    201,Dayton,Ohio,137571,39.78,-84.20
    202,Columbia,South Carolina,137541,34.04,-80.91
    203,Orange,California,137264,33.79,-117.86
    204,Cedar Rapids,Iowa,136467,41.97,-91.68
    205,Stamford,Connecticut,136309,41.08,-73.55
    206,Victorville,California,135950,34.53,-117.35
    207,Pasadena,California,135732,34.16,-118.14
    208,Elizabeth,New Jersey,135407,40.67,-74.19
    209,New Haven,Connecticut,135081,41.31,-72.92
    210,Miramar,Florida,135077,25.97,-80.34
    211,Kent,Washington,134835,47.39,-122.21
    212,Sterling Heights,Michigan,133269,42.58,-83.03
    213,Carrollton,Texas,133251,32.99,-96.90
    214,Coral Springs,Florida,132822,26.27,-80.26
    215,Midland,Texas,131325,32.02,-102.11
    216,Norman,Oklahoma,128097,35.24,-97.35
    217,Athens,Georgia,127358,33.95,-83.37
    218,Santa Clara,California,127151,37.36,-121.97
    219,Columbia,Missouri,126853,38.95,-92.33
    220,Fargo,North Dakota,126748,46.86,-96.83
    221,Pearland,Texas,125990,29.56,-95.32
    222,Simi Valley,California,125975,34.27,-118.75
    223,Meridian,Idaho,125963,43.61,-116.40
    223,Topeka,Kansas,125963,39.03,-95.69
    225,Allentown,Pennsylvania,125944,40.59,-75.48
    226,Thousand Oaks,California,125754,34.19,-118.87
    227,Abilene,Texas,125070,32.45,-99.74
    228,Vallejo,California,124886,38.11,-122.26
    229,Concord,California,124074,37.97,-122.00
    230,Round Rock,Texas,123876,30.53,-97.66
    231,Arvada,Colorado,123436,39.83,-105.15
    232,Clovis,California,122989,36.83,-119.68
    233,Palm Bay,Florida,122942,27.96,-80.66
    234,Independence,Missouri,122088,39.09,-94.35
    235,Lafayette,Louisiana,121771,30.21,-92.03
    236,Ann Arbor,Michigan,121536,42.28,-83.73
    237,Rochester,Minnesota,121465,44.02,-92.48
    238,Hartford,Connecticut,120576,41.77,-72.68
    239,College Station,Texas,120019,30.59,-96.30
    240,Fairfield,California,119705,38.26,-122.03
    241,Wilmington,North Carolina,117643,34.21,-77.89
    242,North Charleston,South Carolina,117472,32.92,-80.07
    243,Billings,Montana,117445,45.79,-108.55
    244,West Palm Beach,Florida,117286,26.75,-80.13
    245,Berkeley,California,117145,37.87,-122.30
    246,Cambridge,Massachusetts,117090,42.38,-71.12
    247,Clearwater,Florida,116674,27.98,-82.77
    248,West Jordan,Utah,116541,40.60,-112.00
    249,Evansville,Indiana,116486,37.99,-87.53
    250,Richardson,Texas,116382,32.97,-96.71
    251,Broken Arrow,Oklahoma,116330,36.04,-95.78
    252,Richmond,California,115639,37.95,-122.36
    253,League City,Texas,115595,29.49,-95.11
    254,Manchester,New Hampshire,115462,42.98,-71.44
    255,Lakeland,Florida,115425,28.06,-81.95
    256,Carlsbad,California,115302,33.13,-117.28
    257,Antioch,California,114794,37.98,-121.80
    258,Westminster,Colorado,114561,39.88,-105.06
    259,High Point,North Carolina,114086,35.99,-79.99
    260,Provo,Utah,114084,40.25,-111.65
    261,Lowell,Massachusetts,113994,42.64,-71.32
    262,Elgin,Illinois,113911,42.04,-88.33
    263,Waterbury,Connecticut,113811,41.56,-73.04
    264,Springfield,Illinois,113394,39.79,-89.64
    265,Gresham,Oregon,113103,45.50,-122.44
    266,Murrieta,California,112991,33.57,-117.19
    267,Lewisville,Texas,112944,33.05,-96.98
    268,Las Cruces,New Mexico,112914,32.33,-106.79
    269,Lansing,Michigan,112684,42.71,-84.56
    270,Beaumont,Texas,112556,30.08,-94.15
    271,Odessa,Texas,112483,31.88,-102.35
    272,Pueblo,Colorado,112368,38.27,-104.61
    273,Peoria,Illinois,111666,40.75,-89.62
    274,Downey,California,111645,33.94,-118.13
    275,Pompano Beach,Florida,111348,26.24,-80.13
    276,Miami Gardens,Florida,110867,25.95,-80.24
    277,Temecula,California,110846,33.49,-117.13
    278,Everett,Washington,110812,47.95,-122.19
    279,Costa Mesa,California,110750,33.67,-117.91
    280,Ventura,California,109925,34.27,-119.25
    281,Sparks,Nevada,109796,39.57,-119.72
    282,Santa Maria,California,109711,34.93,-120.44
    283,Sugar Land,Texas,109373,29.59,-95.63
    284,Greeley,Colorado,109323,40.41,-104.77
    285,South Fulton,Georgia,108575,33.66,-84.57
    286,Dearborn,Michigan,108420,42.31,-83.21
    287,Concord,North Carolina,107697,35.39,-80.64
    288,Edison,New Jersey,107626,40.50,-74.35
    289,Tyler,Texas,107192,32.32,-95.31
    290,Sandy Springs,Georgia,107180,33.93,-84.37
    291,West Covina,California,107017,34.06,-117.91
    292,Green Bay,Wisconsin,107015,44.52,-87.99
    293,Centennial,Colorado,106966,39.59,-104.87
    294,Jurupa Valley,California,106941,34.00,-117.47
    295,El Monte,California,106907,34.07,-118.03
    296,Allen,Texas,106874,33.11,-96.67
    297,Hillsboro,Oregon,106633,45.53,-122.94
    298,Menifee,California,106401,33.69,-117.18
    299,Nampa,Idaho,106186,43.58,-116.56
    300,Spokane Valley,Washington,105905,47.66,-117.23
    301,Rio Rancho,New Mexico,105834,35.29,-106.70
    302,Brockton,Massachusetts,105446,42.08,-71.02
    303,El Cajon,California,105432,32.80,-116.96
    304,Burbank,California,105401,34.19,-118.33
    305,Inglewood,California,105181,33.96,-118.34
    306,Renton,Washington,105179,47.48,-122.19
    307,Davie,Florida,104882,26.08,-80.28
    308,Rialto,California,104394,34.12,-117.39
    309,Boulder,Colorado,104175,40.02,-105.25
    310,South Bend,Indiana,103353,41.68,-86.27
    311,Woodbridge,New Jersey,103212,40.56,-74.29
    312,Vacaville,California,103078,38.36,-121.97
    313,Wichita Falls,Texas,102988,33.91,-98.53
    314,Lee's Summit,Missouri,102781,38.92,-94.38
    315,Edinburg,Texas,102483,26.32,-98.16
    316,Chico,California,102338,39.76,-121.82
    317,San Mateo,California,102200,37.56,-122.31
    318,Bend,Oregon,102059,44.06,-121.31
    319,Goodyear,Arizona,101733,33.25,-112.37
    320,Buckeye,Arizona,101315,33.43,-112.64
    321,Daly City,California,101243,37.69,-122.47
    322,Fishers,Indiana,101171,39.96,-85.97
    323,Quincy,Massachusetts,101119,42.26,-71.01
    324,Davenport,Iowa,101009,41.56,-90.60
    325,Hesperia,California,100971,34.40,-117.32
    326,New Bedford,Massachusetts,100941,41.66,-70.94
    327,Lynn,Massachusetts,100843,42.47,-70.96
    328,Carmel,Indiana,100777,39.97,-86.15
    329,Longmont,Colorado,100758,40.17,-105.10
    330,Tuscaloosa,Alabama,100618,33.23,-87.53
    331,Norwalk,California,100373,33.91,-118.08`);

  // Use Promises to async request data
var promises = [d3.json("data/sports_leagues.json"),d3.json("data/geo/ne_10m_admin_1_states_provinces.json")];

myDataPromises = Promise.all(promises);

  // After data is successfully fetched, generate viz
myDataPromises.then(function(data) {
    // Define the data. There's gotta be a better way to do this:
  var data = data[0];
  var ne_10m_admin_1_states_provinces = data[1];

  var dx = 30;
  var dy = Math.min(width / (treeData.height + 2), dx * 10);

  function treeData() {
    const root = treeData;
    root.x0 = dy / 2;
    root.y0 = 0;

    const tree = d3
    .stratify()
    .id(d => d.id)
    .parentId(d => d.manager)(data);

    tree.descendants().forEach((d, i) => {
      d.id = i;
      d._children = d.children;
    });

    console.log(root);
    return tree;
  };


  var leagues = {
    width: width,
    axis: null,
    margin: 10,
    marginLeft: 40,
    marginRight: 160,
    height: 1800,
    marks: [
      Plot.tree(treeData, {path: "name", textStroke: "white"})
      ]
  };

  // var citiesWithTeams = citiesAndTeams.filter(d => d.teams > 0);

  function citiesAndTeams() {
    const concat = (newValue, oldValue = '') => {
      if (!oldValue) {
        return newValue
      }
      return `${oldValue}, ${newValue}`
    }
    const cities = {}
    if (usOnly.length === 0){
      ca_city_data.forEach(c => {
        cities[c.city] = {
          teams: 0,
          label: c.city,
          city: c.city,
          latitude: +c.latitude,
          longitude: +c.longitude,
          pop_2021: +c.pop_2021
        }
      }) 
    }
    city_pop_data.forEach(c => {
      const data = {
        teams: 0,
        label: c.city,
        city: c.city,
        latitude: +c.latitude,
        longitude: +c.longitude,
        pop_2021: +c.pop_2021
      }
    // some US cities have same name, or same name as Canadian cities
    // but they're probably not ones with pro teams
      if (cities[c.city]) {
        cities[`${c.city} (${c.state})`] = data
      } else {
        cities[c.city] = data
      }
    })
    mlb_data.forEach(c => {
      if (!cities[c.city]) {
      // console.error('City not found: mlb', c.city);
        return;
      }
      cities[c.city].mlb = concat(c.name, cities[c.city].mlb)
      cities[c.city].teams += 1;
      if (c.field_city) {
        cities[c.city].city += '*'
      }
    })
    nba_data.forEach(c => {
      if (!cities[c.city]) {
      // console.error('City not found: nba', c.city);
        return;
      }
      cities[c.city].nba = concat(c.name, cities[c.city].nba)
      cities[c.city].teams += 1;
      if (c.field_city) {
        cities[c.city].city += '*'
      }
    })
    nfl_data.forEach(c => {
      if (!cities[c.city]) {
      // console.error('City not found: nfl', c.city);
        return;
      }
      cities[c.city].nfl = concat(c.name, cities[c.city].nfl)
      cities[c.city].teams += 1;
      if (c.field_city) {
        cities[c.city].city += '*'
      }
    })
    nhl_data.forEach(c => {
      if (!cities[c.city]) {
      // console.error('City not found: nhl', c.city);
        return;
      }
      cities[c.city].nhl = concat(c.name, cities[c.city].nhl)
      cities[c.city].teams += 1;
      if (c.field_city) {
        cities[c.city].city += '*'
      }
    })
    return Object.values(cities);
  }
  var topNCities = citiesAndTeams.sort((a, b) => b.pop_2021 - a.pop_2021).slice(0, topN);

  console.log(citiesAndTeams);
  var map = {
    width: width,
    height: 700,
    projection: "albers",
    marks: [
      Plot.geo(ne_10m_admin_1_states_provinces, { strokeOpacity: 0.1 }),
      Plot.dot(citiesAndTeams, { x: "longitude", y: "latitude", r: 4, fill: "orange", fillOpacity: 1, title: d => d.city }),
      Plot.text(
        citiesAndTeams,
        { x: "longitude", y: "latitude", "text": "label", textAnchor: "start", dx: 5 }
        ),

      Plot.dot(topNCities, { x: "longitude", y: "latitude", r: 2, fill: "blue", fillOpacity: 0.5, title: d => d.city }),
      Plot.text(
        topNCities,
        { x: "longitude", y: "latitude", "text": "label", textAnchor: "start", dx: 5 }
        ),
      ]
  };

  document.getElementById("leagues").appendChild(Plot.plot(leagues));
  document.getElementById("map").appendChild(Plot.plot(map));

});
</script>
</body>
</html>